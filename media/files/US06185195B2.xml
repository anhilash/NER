<?xml version="1.0" encoding="UTF-8"?>
<questel-patent-document lang="en" date-produced="20180805" produced-by="Questel" schema-version="3.23" file="US06185195B2.xml">
  <bibliographic-data lang="en">
    <publication-reference publ-desc="Granted patent as second publication">
      <document-id>
        <country>US</country>
        <doc-number>06185195</doc-number>
        <kind>B2</kind>
        <date>20010206</date>
      </document-id>
      <document-id data-format="questel">
        <doc-number>US6185195</doc-number>
      </document-id>
    </publication-reference>
    <original-publication-kind>B2</original-publication-kind>
    <application-reference family-id="25325783" extended-family-id="807483">
      <document-id>
        <country>US</country>
        <doc-number>08857343</doc-number>
        <kind>A</kind>
        <date>19970516</date>
      </document-id>
      <document-id data-format="questel">
        <doc-number>1997US-08857343</doc-number>
      </document-id>
      <document-id data-format="questel_Uid">
        <doc-number>830378</doc-number>
      </document-id>
    </application-reference>
    <language-of-filing>en</language-of-filing>
    <language-of-publication>en</language-of-publication>
    <priority-claims>
      <priority-claim kind="national" sequence="1">
        <country>US</country>
        <doc-number>85734397</doc-number>
        <kind>A</kind>
        <date>19970516</date>
        <priority-active-indicator>Y</priority-active-indicator>
      </priority-claim>
      <priority-claim data-format="questel" sequence="1">
        <doc-number>1997US-08857343</doc-number>
      </priority-claim>
    </priority-claims>
    <dates-of-public-availability>
      <publication-of-grant-date>
        <date>20010206</date>
      </publication-of-grant-date>
    </dates-of-public-availability>
    <classifications-ipcr>
      <classification-ipcr sequence="1">
        <text>H04B   7/005       20060101ALI20051220RMJP</text>
        <ipc-version-indicator>
          <date>20060101</date>
        </ipc-version-indicator>
        <classification-level>A</classification-level>
        <section>H</section>
        <class>04</class>
        <subclass>B</subclass>
        <main-group>7</main-group>
        <subgroup>005</subgroup>
        <symbol-position>L</symbol-position>
        <classification-value>I</classification-value>
        <generating-office>
          <country>JP</country>
        </generating-office>
        <classification-status>R</classification-status>
        <classification-data-source>M</classification-data-source>
        <action-date>
          <date>20051220</date>
        </action-date>
      </classification-ipcr>
      <classification-ipcr sequence="2">
        <text>H04B   7/015       20060101A I20051008RMEP</text>
        <ipc-version-indicator>
          <date>20060101</date>
        </ipc-version-indicator>
        <classification-level>A</classification-level>
        <section>H</section>
        <class>04</class>
        <subclass>B</subclass>
        <main-group>7</main-group>
        <subgroup>015</subgroup>
        <classification-value>I</classification-value>
        <generating-office>
          <country>EP</country>
        </generating-office>
        <classification-status>R</classification-status>
        <classification-data-source>M</classification-data-source>
        <action-date>
          <date>20051008</date>
        </action-date>
      </classification-ipcr>
      <classification-ipcr sequence="3">
        <text>H04L  12/28        20060101A I20051008RMEP</text>
        <ipc-version-indicator>
          <date>20060101</date>
        </ipc-version-indicator>
        <classification-level>A</classification-level>
        <section>H</section>
        <class>04</class>
        <subclass>L</subclass>
        <main-group>12</main-group>
        <subgroup>28</subgroup>
        <classification-value>I</classification-value>
        <generating-office>
          <country>EP</country>
        </generating-office>
        <classification-status>R</classification-status>
        <classification-data-source>M</classification-data-source>
        <action-date>
          <date>20051008</date>
        </action-date>
      </classification-ipcr>
      <classification-ipcr sequence="4">
        <text>H04N   1/00        20060101A I20051008RMEP</text>
        <ipc-version-indicator>
          <date>20060101</date>
        </ipc-version-indicator>
        <classification-level>A</classification-level>
        <section>H</section>
        <class>04</class>
        <subclass>N</subclass>
        <main-group>1</main-group>
        <subgroup>00</subgroup>
        <classification-value>I</classification-value>
        <generating-office>
          <country>EP</country>
        </generating-office>
        <classification-status>R</classification-status>
        <classification-data-source>M</classification-data-source>
        <action-date>
          <date>20051008</date>
        </action-date>
      </classification-ipcr>
      <classification-ipcr sequence="5">
        <text>H04N   1/32        20060101A I20051008RMEP</text>
        <ipc-version-indicator>
          <date>20060101</date>
        </ipc-version-indicator>
        <classification-level>A</classification-level>
        <section>H</section>
        <class>04</class>
        <subclass>N</subclass>
        <main-group>1</main-group>
        <subgroup>32</subgroup>
        <classification-value>I</classification-value>
        <generating-office>
          <country>EP</country>
        </generating-office>
        <classification-status>R</classification-status>
        <classification-data-source>M</classification-data-source>
        <action-date>
          <date>20051008</date>
        </action-date>
      </classification-ipcr>
      <classification-ipcr sequence="6">
        <text>H04N   1/327       20060101A I20051008RMEP</text>
        <ipc-version-indicator>
          <date>20060101</date>
        </ipc-version-indicator>
        <classification-level>A</classification-level>
        <section>H</section>
        <class>04</class>
        <subclass>N</subclass>
        <main-group>1</main-group>
        <subgroup>327</subgroup>
        <classification-value>I</classification-value>
        <generating-office>
          <country>EP</country>
        </generating-office>
        <classification-status>R</classification-status>
        <classification-data-source>M</classification-data-source>
        <action-date>
          <date>20051008</date>
        </action-date>
      </classification-ipcr>
      <classification-ipcr sequence="7">
        <text>H04W  24/00        20090101A N20140301RMEP</text>
        <ipc-version-indicator>
          <date>20090101</date>
        </ipc-version-indicator>
        <classification-level>A</classification-level>
        <section>H</section>
        <class>04</class>
        <subclass>W</subclass>
        <main-group>24</main-group>
        <subgroup>00</subgroup>
        <classification-value>N</classification-value>
        <generating-office>
          <country>EP</country>
        </generating-office>
        <classification-status>R</classification-status>
        <classification-data-source>M</classification-data-source>
        <action-date>
          <date>20140301</date>
        </action-date>
      </classification-ipcr>
      <classification-ipcr sequence="8">
        <text>H04W  28/04        20090101A N20140301RMEP</text>
        <ipc-version-indicator>
          <date>20090101</date>
        </ipc-version-indicator>
        <classification-level>A</classification-level>
        <section>H</section>
        <class>04</class>
        <subclass>W</subclass>
        <main-group>28</main-group>
        <subgroup>04</subgroup>
        <classification-value>N</classification-value>
        <generating-office>
          <country>EP</country>
        </generating-office>
        <classification-status>R</classification-status>
        <classification-data-source>M</classification-data-source>
        <action-date>
          <date>20140301</date>
        </action-date>
      </classification-ipcr>
      <classification-ipcr sequence="9">
        <text>H04W  74/08        20090101A N20140301RMEP</text>
        <ipc-version-indicator>
          <date>20090101</date>
        </ipc-version-indicator>
        <classification-level>A</classification-level>
        <section>H</section>
        <class>04</class>
        <subclass>W</subclass>
        <main-group>74</main-group>
        <subgroup>08</subgroup>
        <classification-value>N</classification-value>
        <generating-office>
          <country>EP</country>
        </generating-office>
        <classification-status>R</classification-status>
        <classification-data-source>M</classification-data-source>
        <action-date>
          <date>20140301</date>
        </action-date>
      </classification-ipcr>
    </classifications-ipcr>
    <classification-national>
      <country>US</country>
      <main-classification>
        <text>370286000</text>
        <class>370</class>
        <subclass>286000</subclass>
      </main-classification>
      <further-classification sequence="1">
        <text>379406090</text>
        <class>379</class>
        <subclass>406090</subclass>
      </further-classification>
    </classification-national>
    <classifications-ecla>
      <classification-ecla sequence="1">
        <text>H04N-001/32L2B</text>
        <section>H</section>
        <class>04</class>
        <subclass>N</subclass>
        <main-group>001</main-group>
        <subgroup>32L2B</subgroup>
      </classification-ecla>
      <classification-ecla sequence="2">
        <text>H04B-007/015</text>
        <section>H</section>
        <class>04</class>
        <subclass>B</subclass>
        <main-group>7</main-group>
        <subgroup>015</subgroup>
      </classification-ecla>
      <classification-ecla sequence="3">
        <text>H04N-001/00C7</text>
        <section>H</section>
        <class>04</class>
        <subclass>N</subclass>
        <main-group>001</main-group>
        <subgroup>00C7</subgroup>
      </classification-ecla>
      <classification-ecla sequence="4">
        <text>H04N-001/32L2</text>
        <section>H</section>
        <class>04</class>
        <subclass>N</subclass>
        <main-group>001</main-group>
        <subgroup>32L2</subgroup>
      </classification-ecla>
      <classification-ecla sequence="5">
        <text>H04N-001/32L7C</text>
        <section>H</section>
        <class>04</class>
        <subclass>N</subclass>
        <main-group>001</main-group>
        <subgroup>32L7C</subgroup>
      </classification-ecla>
      <classification-ecla sequence="6">
        <text>H04N-001/32L8</text>
        <section>H</section>
        <class>04</class>
        <subclass>N</subclass>
        <main-group>001</main-group>
        <subgroup>32L8</subgroup>
      </classification-ecla>
      <classification-ecla sequence="7">
        <text>H04N-001/32L8F</text>
        <section>H</section>
        <class>04</class>
        <subclass>N</subclass>
        <main-group>001</main-group>
        <subgroup>32L8F</subgroup>
      </classification-ecla>
      <classification-ecla sequence="8">
        <text>H04N-001/327</text>
        <section>H</section>
        <class>04</class>
        <subclass>N</subclass>
        <main-group>1</main-group>
        <subgroup>327</subgroup>
      </classification-ecla>
    </classifications-ecla>
    <patent-classifications>
      <patent-classification sequence="1">
        <classification-scheme office="EP" scheme="CPC">
          <date>20130101</date>
        </classification-scheme>
        <classification-symbol>H04N-001/32619</classification-symbol>
        <section>H</section>
        <class>04</class>
        <subclass>N</subclass>
        <main-group>1</main-group>
        <subgroup>32619</subgroup>
        <symbol-position>F</symbol-position>
        <classification-value>I</classification-value>
        <classification-status>B</classification-status>
        <classification-data-source>H</classification-data-source>
        <action-date>
          <date>20150713</date>
        </action-date>
      </patent-classification>
      <patent-classification sequence="2">
        <classification-scheme office="EP" scheme="CPC">
          <date>20130101</date>
        </classification-scheme>
        <classification-symbol>H04B-007/015</classification-symbol>
        <section>H</section>
        <class>04</class>
        <subclass>B</subclass>
        <main-group>7</main-group>
        <subgroup>015</subgroup>
        <symbol-position>L</symbol-position>
        <classification-value>I</classification-value>
        <classification-status>B</classification-status>
        <classification-data-source>H</classification-data-source>
        <action-date>
          <date>20150713</date>
        </action-date>
      </patent-classification>
      <patent-classification sequence="3">
        <classification-scheme office="EP" scheme="CPC">
          <date>20130101</date>
        </classification-scheme>
        <classification-symbol>H04L-001/1887</classification-symbol>
        <section>H</section>
        <class>04</class>
        <subclass>L</subclass>
        <main-group>1</main-group>
        <subgroup>1887</subgroup>
        <symbol-position>L</symbol-position>
        <classification-value>A</classification-value>
        <classification-status>B</classification-status>
        <classification-data-source>H</classification-data-source>
        <action-date>
          <date>20150713</date>
        </action-date>
      </patent-classification>
      <patent-classification sequence="4">
        <classification-scheme office="EP" scheme="CPC">
          <date>20130101</date>
        </classification-scheme>
        <classification-symbol>H04N-001/00281</classification-symbol>
        <section>H</section>
        <class>04</class>
        <subclass>N</subclass>
        <main-group>1</main-group>
        <subgroup>00281</subgroup>
        <symbol-position>L</symbol-position>
        <classification-value>I</classification-value>
        <classification-status>B</classification-status>
        <classification-data-source>H</classification-data-source>
        <action-date>
          <date>20150713</date>
        </action-date>
      </patent-classification>
      <patent-classification sequence="5">
        <classification-scheme office="EP" scheme="CPC">
          <date>20130101</date>
        </classification-scheme>
        <classification-symbol>H04N-001/32614</classification-symbol>
        <section>H</section>
        <class>04</class>
        <subclass>N</subclass>
        <main-group>1</main-group>
        <subgroup>32614</subgroup>
        <symbol-position>L</symbol-position>
        <classification-value>I</classification-value>
        <classification-status>B</classification-status>
        <classification-data-source>H</classification-data-source>
        <action-date>
          <date>20150713</date>
        </action-date>
      </patent-classification>
      <patent-classification sequence="6">
        <classification-scheme office="EP" scheme="CPC">
          <date>20130101</date>
        </classification-scheme>
        <classification-symbol>H04N-001/32641</classification-symbol>
        <section>H</section>
        <class>04</class>
        <subclass>N</subclass>
        <main-group>1</main-group>
        <subgroup>32641</subgroup>
        <symbol-position>L</symbol-position>
        <classification-value>I</classification-value>
        <classification-status>B</classification-status>
        <classification-data-source>H</classification-data-source>
        <action-date>
          <date>20150713</date>
        </action-date>
      </patent-classification>
      <patent-classification sequence="7">
        <classification-scheme office="EP" scheme="CPC">
          <date>20130101</date>
        </classification-scheme>
        <classification-symbol>H04N-001/32646</classification-symbol>
        <section>H</section>
        <class>04</class>
        <subclass>N</subclass>
        <main-group>1</main-group>
        <subgroup>32646</subgroup>
        <symbol-position>L</symbol-position>
        <classification-value>I</classification-value>
        <classification-status>B</classification-status>
        <classification-data-source>H</classification-data-source>
        <action-date>
          <date>20150713</date>
        </action-date>
      </patent-classification>
      <patent-classification sequence="8">
        <classification-scheme office="EP" scheme="CPC">
          <date>20130101</date>
        </classification-scheme>
        <classification-symbol>H04N-001/32683</classification-symbol>
        <section>H</section>
        <class>04</class>
        <subclass>N</subclass>
        <main-group>1</main-group>
        <subgroup>32683</subgroup>
        <symbol-position>L</symbol-position>
        <classification-value>I</classification-value>
        <classification-status>B</classification-status>
        <classification-data-source>H</classification-data-source>
        <action-date>
          <date>20150713</date>
        </action-date>
      </patent-classification>
      <patent-classification sequence="9">
        <classification-scheme office="EP" scheme="CPC">
          <date>20130101</date>
        </classification-scheme>
        <classification-symbol>H04N-001/327</classification-symbol>
        <section>H</section>
        <class>04</class>
        <subclass>N</subclass>
        <main-group>1</main-group>
        <subgroup>327</subgroup>
        <symbol-position>L</symbol-position>
        <classification-value>I</classification-value>
        <classification-status>B</classification-status>
        <classification-data-source>H</classification-data-source>
        <action-date>
          <date>20150713</date>
        </action-date>
      </patent-classification>
      <patent-classification sequence="10">
        <classification-scheme office="EP" scheme="CPC">
          <date>20130101</date>
        </classification-scheme>
        <classification-symbol>H04N-2201/0015</classification-symbol>
        <section>H</section>
        <class>04</class>
        <subclass>N</subclass>
        <main-group>2201</main-group>
        <subgroup>0015</subgroup>
        <symbol-position>L</symbol-position>
        <classification-value>A</classification-value>
        <classification-status>B</classification-status>
        <classification-data-source>H</classification-data-source>
        <action-date>
          <date>20150713</date>
        </action-date>
      </patent-classification>
      <patent-classification sequence="11">
        <classification-scheme office="EP" scheme="CPC">
          <date>20130101</date>
        </classification-scheme>
        <classification-symbol>H04W-024/00</classification-symbol>
        <section>H</section>
        <class>04</class>
        <subclass>W</subclass>
        <main-group>24</main-group>
        <subgroup>00</subgroup>
        <symbol-position>L</symbol-position>
        <classification-value>A</classification-value>
        <classification-status>B</classification-status>
        <classification-data-source>H</classification-data-source>
        <action-date>
          <date>20150713</date>
        </action-date>
      </patent-classification>
      <patent-classification sequence="12">
        <classification-scheme office="EP" scheme="CPC">
          <date>20130101</date>
        </classification-scheme>
        <classification-symbol>H04W-074/0816</classification-symbol>
        <section>H</section>
        <class>04</class>
        <subclass>W</subclass>
        <main-group>74</main-group>
        <subgroup>0816</subgroup>
        <symbol-position>L</symbol-position>
        <classification-value>A</classification-value>
        <classification-status>B</classification-status>
        <classification-data-source>H</classification-data-source>
        <action-date>
          <date>20150713</date>
        </action-date>
      </patent-classification>
      <patent-classification sequence="13">
        <classification-scheme office="EP" scheme="CPC">
          <date>20130101</date>
        </classification-scheme>
        <classification-symbol>H04W-074/0825</classification-symbol>
        <section>H</section>
        <class>04</class>
        <subclass>W</subclass>
        <main-group>74</main-group>
        <subgroup>0825</subgroup>
        <symbol-position>L</symbol-position>
        <classification-value>A</classification-value>
        <classification-status>B</classification-status>
        <classification-data-source>H</classification-data-source>
        <action-date>
          <date>20150713</date>
        </action-date>
      </patent-classification>
      <patent-classification sequence="14">
        <classification-scheme office="EP" scheme="ICO"/>
        <classification-symbol>T04N-201/00C10</classification-symbol>
      </patent-classification>
      <patent-classification sequence="15">
        <classification-scheme office="EP" scheme="ICO"/>
        <classification-symbol>T04L-001/18T7</classification-symbol>
      </patent-classification>
      <patent-classification sequence="16">
        <classification-scheme office="EP" scheme="ICO"/>
        <classification-symbol>T04W-024/00</classification-symbol>
      </patent-classification>
      <patent-classification sequence="17">
        <classification-scheme office="EP" scheme="ICO"/>
        <classification-symbol>T04W-028/04</classification-symbol>
      </patent-classification>
      <patent-classification sequence="18">
        <classification-scheme office="EP" scheme="ICO"/>
        <classification-symbol>T04W-074/08B2</classification-symbol>
      </patent-classification>
      <patent-classification sequence="19">
        <classification-scheme office="EP" scheme="ICO"/>
        <classification-symbol>T04W-074/08B4</classification-symbol>
      </patent-classification>
    </patent-classifications>
    <number-of-claims>20</number-of-claims>
    <exemplary-claim>1</exemplary-claim>
    <figures>
      <number-of-drawing-sheets>7</number-of-drawing-sheets>
      <number-of-figures>8</number-of-figures>
      <image-key data-format="questel">US6185195</image-key>
    </figures>
    <invention-title format="original" lang="en" id="title_en">Methods for preventing and detecting message collisions in a half-duplex communication system</invention-title>
    <references-cited>
      <citation srep-phase="examiner">
        <patcit num="1">
          <text>DUTTWEILER DONALD L</text>
          <document-id>
            <country>US</country>
            <doc-number>4129753</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US4129753</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="examiner">
        <patcit num="2">
          <text>CROUSE WILLIAM G, et al</text>
          <document-id>
            <country>US</country>
            <doc-number>4644108</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US4644108</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="examiner">
        <patcit num="3">
          <text>NEGI TSUNEO, et al</text>
          <document-id>
            <country>US</country>
            <doc-number>4897831</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US4897831</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="examiner">
        <patcit num="4">
          <text>NAKAGAWA FUJIO, et al</text>
          <document-id>
            <country>US</country>
            <doc-number>4972467</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US4972467</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="examiner">
        <patcit num="5">
          <text>SUGAYA FUMIAKI, et al</text>
          <document-id>
            <country>US</country>
            <doc-number>5247512</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5247512</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="examiner">
        <patcit num="6">
          <text>YOUNCE RICHARD C, et al</text>
          <document-id>
            <country>US</country>
            <doc-number>5274705</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5274705</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="examiner">
        <patcit num="7">
          <text>FURUKAWA HIROKI, et al</text>
          <document-id>
            <country>US</country>
            <doc-number>5463618</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5463618</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="examiner">
        <patcit num="8">
          <text>DANKBERG MARK D, et al</text>
          <document-id>
            <country>US</country>
            <doc-number>5596439</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5596439</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="examiner">
        <patcit num="9">
          <text>GURACAR ISMAYIL M</text>
          <document-id>
            <country>US</country>
            <doc-number>5609155</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5609155</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="examiner">
        <patcit num="10">
          <text>LI XU</text>
          <document-id>
            <country>US</country>
            <doc-number>5646990</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5646990</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="examiner">
        <patcit num="11">
          <text>IYENGAR VASU</text>
          <document-id>
            <country>US</country>
            <doc-number>5663955</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5663955</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="examiner">
        <patcit num="12">
          <text>CROCHIERE RONALD ELDON, et al</text>
          <document-id>
            <country>US</country>
            <doc-number>5664011</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5664011</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="examiner">
        <patcit num="13">
          <text>URBANSKI STEVEN ADAM</text>
          <document-id>
            <country>US</country>
            <doc-number>5668871</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5668871</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="applicant">
        <patcit num="14">
          <text>ZUISS THOMAS J, et al</text>
          <document-id>
            <country>US</country>
            <doc-number>5237429</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5237429</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="applicant">
        <patcit num="15">
          <text>ASHLEY JAMES P, et al</text>
          <document-id>
            <country>US</country>
            <doc-number>5295136</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5295136</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="applicant">
        <patcit num="16">
          <text>INT MARITIME SATELLITE ORGANIZ, et al</text>
          <document-id>
            <country>GB</country>
            <doc-number>2286739</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>GB2286739</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="applicant">
        <patcit num="17">
          <text>QUALCOMM INC</text>
          <document-id>
            <country>WO</country>
            <doc-number>9523477</doc-number>
            <kind>A1</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>WO9523477</doc-number>
          </document-id>
        </patcit>
      </citation>
    </references-cited>
    <parties>
      <applicants>
        <applicant data-format="original" app-type="applicant" sequence="1">
          <addressbook lang="en">
            <orgname>Qualcomm Incorporated</orgname>
            <address>
              <address-1>San Diego, CA, US</address-1>
              <city>San Diego</city>
              <state>CA</state>
              <country>US</country>
            </address>
          </addressbook>
          <nationality>
            <country>US</country>
          </nationality>
        </applicant>
        <applicant data-format="questel" app-type="applicant" sequence="2">
          <addressbook lang="en">
            <orgname>QUALCOMM</orgname>
          </addressbook>
          <nationality>
            <country>US</country>
          </nationality>
        </applicant>
      </applicants>
      <inventors>
        <inventor data-format="original" sequence="1">
          <addressbook lang="en">
            <name>Leung, Nikolai K. N.</name>
            <address>
              <address-1>San Diego, CA, US</address-1>
              <city>San Diego</city>
              <state>CA</state>
              <country>US</country>
            </address>
          </addressbook>
          <nationality>
            <country>US</country>
          </nationality>
        </inventor>
      </inventors>
      <agents>
        <agent sequence="1" rep-type="agent">
          <addressbook lang="en">
            <name>Wadsworth, Philip R.</name>
          </addressbook>
        </agent>
        <agent sequence="2" rep-type="agent">
          <addressbook lang="en">
            <name>Macek, Kyong H.</name>
          </addressbook>
        </agent>
      </agents>
    </parties>
    <examiners>
      <primary-examiner>
        <name>Olms, Douglas W.</name>
      </primary-examiner>
    </examiners>
    <lgst-data>
      <lgst-status>EXPIRED</lgst-status>
    </lgst-data>
  </bibliographic-data>
  <abstract format="original" lang="en" id="abstr_en">
    <p id="P-EN-00001" num="00001">
      <br/>
      In a half-duplex communication system in which additional delays in the communication channel may cause a message collision between a message and a response, a collision detector is utilized to prevent and detect message collisions.
      <br/>
      The collision detector determines if a response may be transmitted from the communication device while it is receiving the current message.
      <br/>
      If no response is expected, the collision detector is placed into a train mode.
      <br/>
      If a response is possible, the collision detector is placed into the monitor mode.
      <br/>
      In the monitor mode, the collision detector monitors the communication channel and determines if a message collision has occurred during transmission of the message.
      <br/>
      A detection of a message collision causes retransmission of the message or possibly a new message at a later time after it has been determined that the communication channel is clear.
    </p>
  </abstract>
  <description format="original" lang="en" id="desc_en">
    <heading>BACKGROUND OF THE INVENTION</heading>
    <p num="1">
      I.
      <br/>
      Field of the Invention
    </p>
    <p num="2">
      The present invention relates to data transmission.
      <br/>
      More particularly, the present invention relates to novel and improved methods for preventing and detecting message collisions in a half-duplex communication system.
    </p>
    <p num="3">II. Description of the Related Art</p>
    <p num="4">
      In a half-duplex communication system, multiple communicating devices are connected to a single communication channel.
      <br/>
      One such system is a fax communication system in which two fax machines send messages across a telephone line.
      <br/>
      Half-duplex devices such as fax machines are capable of only transmitting or receiving messages at any particular instant.
      <br/>
      These devices cannot transmit and receive data simultaneously.
      <br/>
      If two devices transmit signals toward each other simultaneously and neither device is listening, the devices will not receive the other's message.
      <br/>
      This event is known as a message collision.
    </p>
    <p num="5">
      Most half-duplex communication systems are designed to minimize message collisions to improve the quality of the communications.
      <br/>
      These systems employ a variety of schemes to avoid message collisions.
      <br/>
      Some of these schemes require a certain quality in the communication channel.
      <br/>
      As the communication channel deteriorates, there may be an increased likelihood of message collisions.
      <br/>
      Other schemes use special timing and synchronization to avoid message collisions.
      <br/>
      For these schemes, increased delays in the communication channel may cause the system to fail.
    </p>
    <p num="6">
      A fax communication system is an example of a half-duplex communication system which relies on the timing and synchronization between the two communicating fax machines to avoid message collisions.
      <br/>
      The fax machines communicate with each other through a standard public switched telephone network (PSTN) channel which has known channel quality and delay characteristics.
      <br/>
      When a non-standard PSTN channel, such as a digital communication system or a satellite link, is inserted between the two fax machines the increased transmission delays can cause the fax interactions to fail because of message collisions.
    </p>
    <p num="7">
      A digital communication system or satellite link is incorporated with the half-duplex communication system to extend the range of coverage, allow mobility in the communicating devices, and increase interconnectivity between different communicating devices.
      <br/>
      An exemplary digital communication system which can be used in conjunction with a fax communication system is a wireless code division multiple access (CDMA) system operating in the cellular or personal communication system (PCS) band or a GLOBALSTAR satellite communication system.
      <br/>
      These digital communication systems have inherent processing delays resulting from the large amount of digital signal processing and from transmission delays.
      <br/>
      These digital communication systems also employ central base stations to combine or multiplex signals from many communicating devices into a common transmission signal.
      <br/>
      The resultant overall delay can be both intolerably long and unpredictable.
    </p>
    <p num="8">
      Throughout the specification of the present invention, a syntax structure is maintained to clarify the discussion of the invention.
      <br/>
      In describing communications between two devices, the term `message` is used to denote a communication from a source device to a destination device.
      <br/>
      This `message` may or may not be retransmitted by the source device.
      <br/>
      The term `response` is used to denote a communication from the destination device to the source device as the result of the earlier transmitted `message`.
    </p>
    <p num="9">
      In a half-duplex communication system which utilizes a timing and synchronization scheme to avoid message collision, a source device desiring to communicate with a destination device on the same channel initiates the communication by sending out a message and waiting for a response from the destination device.
      <br/>
      After a predetermined length of time passes, if no response is received, the source device retransmits the message.
      <br/>
      This process is repeated for a specified number of times or until a response is received.
    </p>
    <p num="10">
      For a standard Group 3 fax communication system, the timing and synchronization between fax machines conform to behavior as specified in "ITU-T Recommendation T.30: Procedures for Document Facsimile Transmission in the General Switched Telephone Network", hereinafter referred to as the T.30 fax protocol.
      <br/>
      The T.30 fax protocol uses a number of modulation techniques for transmission of forward message data.
      <br/>
      In particular, parameter negotiation and handshaking between fax machines is accomplished using the modulation technique specified in "CCITT Recommendation V.21: 300 bps Duplex Modem Standard for use in the General Switched Telephone Network (GSTN)". The handshaking establishes the proper mode of communications between the fax machines.
    </p>
    <p num="11">
      For a T.30 fax system, a calling fax machine initiates a call by dialing the called fax machine and sending a calling tone (CNG).
      <br/>
      The called fax machine detects the incoming call and sends a called station identification tone (CED) back to the calling fax machine.
      <br/>
      The called fax machine then sends its digital identification signal (DIS) to the calling fax machine to inform the calling fax machine of its capabilities.
      <br/>
      Upon detection of the DIS signal, the calling fax machine sends a digital command signal (DCS) to inform the called fax machine of the capabilities the calling fax machine plans to use.
    </p>
    <p num="12">
      Other messages in addition to the above described initiation signals also take place between the fax machines during a call.
      <br/>
      For example, the training signals, information messages and termination messages are also part of a typical fax call.
    </p>
    <p num="13">
      A calling fax machine and a called fax machine send many messages between each other during a call.
      <br/>
      Messages are sent from either the calling fax machine or the called fax machine at various stages in a fax call.
      <br/>
      Since both calling and called fax machines can initiate messages, the discussion below describes the communications in terms of a source fax machine that initiates a message to a destination fax machine and a destination fax machine that reacts with a response back to the source fax machine without reference to calling or called fax machines.
      <br/>
      Some of the messages by the source fax machine must be repeated if no response is received for these messages.
    </p>
    <p num="14">
      The T.30 fax protocol specifies the procedure which must be followed when initiating a call between the fax machines.
      <br/>
      For example, the sequence and format of the CNG, CED, DIS, and DCS messages are specifically defined.
      <br/>
      The T.30 fax protocol also defines the messages which must be repeated if no response is received.
      <br/>
      Therefore, by monitoring the message format and having a priori knowledge of the signaling sequence, it is possible to determine which message will be repeated.
      <br/>
      A repeated message can be determined by analyzing the message and the state in a fax call in which it is received, as per the T.30 fax protocol.
    </p>
    <p num="15">
      To accommodate for unfavorable channel conditions, the T.30 fax protocol requires that certain unanswered messages between fax machines be repeated.
      <br/>
      If the source fax machine sends such a message to the destination fax machine, the source fax machine expects a response from the destination fax machine within a specified period of time.
      <br/>
      If no response is received after the specified period of time, the T.30 fax protocol requires the source fax machine to retransmit the message.
      <br/>
      The retransmissions continue until a response from the destination fax machine is received or an excessive number of attempts have been made.
    </p>
    <p num="16">
      The DIS and certain messages between the fax machines are repeated at a specified repetition interval if no response is detected.
      <br/>
      The T.30 fax protocol defines the shortest repetition interval within which a retransmission is allowed.
      <br/>
      For example, the T.30 fax protocol specifies the repetition interval for a fax machine operating in automatic mode to be 3.0 sec .+- 0 (slashed zero) 45 sec.
      <br/>
      This means that a fax machine conforming to the T.30 fax protocol should not retransmit a message within 2.55 sec of the prior message.
      <br/>
      Therefore, if such a fax machine receives a response within the shortest repetition interval of 2.55 sec, no collision will occur.
    </p>
    <p num="17">
      Under this T.30 fax timing scheme, long transmission delays in the communication channel can cause message collisions.
      <br/>
      In one scenario, the source fax machine transmits a message to the destination fax machine and, because of the transmission delays, the response from the destination fax machine takes more time than the repetition period to reach the source fax machine.
      <br/>
      Since the source fax machine does not receive the response in time, it retransmits the message.
      <br/>
      If the response from the destination fax machine arrives at the same time the source fax machine is retransmitting the message, a message collision results and the response will not be received by the source fax machine.
    </p>
    <p num="18">
      In an exemplary fax communication system which utilizes a standard PSTN communication system, the communication channel is typically an RJ-11 interface.
      <br/>
      The RJ-11 interface is known in the art and is composed of a pair of wire for carrying a differential signal.
      <br/>
      The use of a differential signal improves performance because of the superior noise immunity over a single-ended signal.
      <br/>
      The RJ-11 interface carries all communications between the fax machines on the same wire pair.
    </p>
    <p num="19">
      The 2-to-4 wire converter, a hybrid circuit also known in the art, is used to decouple the messages and responses on the RJ-11 interface.
      <br/>
      The 2-to-4 wire converter is composed of one differential pair of wire on the primary side and two differential pairs of wire on the secondary side.
      <br/>
      The differential pair of wire on the primary side connects to the RJ-11 interface which, in turn, connects to a destination fax machine.
      <br/>
      The two differential pairs of wire on the secondary side connect to a forward channel and a reverse channel.
      <br/>
      The forward channel carries messages from a source device to the destination fax machine through the 2-to-4 wire converter.
      <br/>
      Likewise, the responses from the destination fax machine are coupled to the reverse channel through the 2-to-4 wire converter.
      <br/>
      Ideally, only messages should appear on the forward channel and only responses should appear on the reverse channel.
      <br/>
      Because of imperfections in the implementation of the 2-to-4 wire converter, small but distorted versions of the messages appear on the reverse channel and vice versa.
      <br/>
      A collision prevention/detection circuit must be able to operate with these known imperfections in the 2-to-4 wire converter.
    </p>
    <p num="20">
      The inability to account for unpredictable and long delays renders the communications between Group 3 fax machines on non-standard PSTN communication channel unreliable.
      <br/>
      A method is needed to detect message collisions regardless of the amount of channel delay and regardless of the source of the interfering signal.
    </p>
    <heading>SUMMARY OF THE INVENTION</heading>
    <p num="21">
      The present invention is a novel and improved method for detecting message collisions in a half-duplex communication system.
      <br/>
      A 2-to-4 wire converter is interposed between the present invention and the communication device.
      <br/>
      A message on the forward channel is routed to the communication device through the 2-to-4 wire converter.
      <br/>
      A response from the communication device is routed to the reverse channel through the 2-to-4 wire converter.
      <br/>
      Because of imperfections in the 2-to-4 wire converter, a portion of the message on the forward channel also appears on the reverse channel.
    </p>
    <p num="22">
      It is an object of the invention to detect message collisions in a half-duplex communication system by utilizing an echo canceller based collision detector.
      <br/>
      During the training period, a message is transmitted to the communication device on the forward channel.
      <br/>
      Because of imperfections in the 2-to-4 wire converter, a portion of the message appears on the reverse channel as an echo.
      <br/>
      The message is also passed through an adaptive filter to produce an estimate of the echo.
      <br/>
      During the training period, the echo canceller monitors the error signal between the echo and the estimate of the echo and adjusts the frequency response of its filter to minimize the error signal.
      <br/>
      During the message transmission period, the adaptive filter is fixed and the echo canceller measures the error signal.
      <br/>
      If a response appears on the reverse channel during transmission of the message, the invention declares that a message collision has occurred and outputs a status signal indicating the condition.
    </p>
    <p num="23">
      It is another object of the invention to detect message collisions in a half-duplex communication system by utilizing a signal parameter estimator.
      <br/>
      During the training period, the signal parameter estimator measures the spectral energy of the echo on the reverse channel.
      <br/>
      The signal parameter estimator then creates a set of threshold values based on the measured energy of the echo.
      <br/>
      During the message transmission period, the signal parameter estimator compares the measured spectral energy of the signal on the reverse channel and compares the measured values to the set of threshold values.
      <br/>
      If the measured values fall outside the threshold range, a message collision is declared and the signal parameter estimator outputs a status signal indicating the condition.
    </p>
    <p num="24">The foregoing, together with other objects, features and advantages of this invention, will become more apparent when referring to the following specification, claims and the accompanying drawings.</p>
    <heading>BRIEF DESCRIPTION OF THE DRAWINGS</heading>
    <p num="25">
      The features, objects, and advantages of the present invention will become more apparent from the detailed description set forth below when taken in conjunction with the drawings in which like reference characters identify correspondingly throughout and wherein:
      <br/>
      FIG. 1 is a block diagram of a standard half-duplex PSTN communication system in the prior art;
      <br/>
      FIG. 2 is a block diagram of a half-duplex PSTN communication system which includes a digital communication system;
      <br/>
      FIG. 3 is a block diagram of an echo canceller based collision prevention/detection circuit;
      <br/>
      FIG. 4 is a block diagram of an exemplary echo canceller circuit;
      <br/>
      FIG. 5 is a flow diagram of an echo canceller based collision detection method of the present invention; and
      <br/>
      FIG. 6 is a block diagram of a parametric collision prevention/detection circuit;
      <br/>
      FIG. 7 is a block diagram of an exemplary parametric signal detector circuit;
      <br/>
      FIG. 8 is a flow diagram of a parametric collision detection method of the present invention.
    </p>
    <heading>DETAILED DESCRIPTION OF THE PREFERRED EMBODIMENTS</heading>
    <p num="26">
      An exemplary half-duplex communication system of the prior art is shown in FIG. 1.
      <br/>
      One such system is a standard fax communication system.
      <br/>
      In this fax communication system, fax machine A 2 communicates with fax machine B 10 through public switched telephone network (PSTN) 6 via communication channels 4 and 8.
      <br/>
      Fax machine A 2 connects to PSTN 6 via communication channel 4.
      <br/>
      PSTN 6 connects to fax machine B 10 via communication channel 8.
      <br/>
      PSTN 6 acts as a switch to connect communication channel 4 to communication channel 8 to enable communications between the fax machines.
      <br/>
      Communication channels 4 and 8 are typically standard RJ-11 interfaces.
      <br/>
      The characteristics and delays of the RJ-11 interfaces and PSTN 6 are well defined and accounted for in the T.30 fax protocol.
    </p>
    <p num="27">
      A communication system which employs a wireless communication system is illustrated in FIG. 2.
      <br/>
      In this communication system, a wireless communication system is connected in series with communication channels 14 and 24 between fax machine A 12 and fax machine B 30.
      <br/>
      The digital communication system can be a terrestrial wireless CDMA system or a satellite communication system such as the GLOBALSTAR system.
      <br/>
      Fax machine A 12 communicates with single subscriber system (SSS) phone 16 through communication channel 14.
      <br/>
      In the preferred embodiment, communication channel 14 is an RI-11 interface.
      <br/>
      SSS phone 16 demodulates and digitally processes the data and transmits the resultant output through over-the-air communication channel 18.
      <br/>
      Over-the-air communication channel 18 can be a satellite link or a terrestrial wireless link.
      <br/>
      Base station 22 receives the over-the-air signal, processes and remodulates the signal, and sends the data to PSTN 26 through communication channel 24.
      <br/>
      Communication channel 24 is typically a standard T1/E1 line or any other similar transmission medium.
      <br/>
      PSTN 26 routes the data to FAX machine B 30 through communication channel 28.
    </p>
    <p num="28">
      The digital signal processing in SSS phone 16 and base station 22 delays the communications between fax machine A 12 and fax machine B 30.
      <br/>
      Signal transmissions through over-the-air communication channels 18 and 20 add to the overall delay.
      <br/>
      The total delay causes a message originating from the source fax machine to be received later by the destination fax machine.
      <br/>
      Likewise, a response from the destination fax machine arrives at the source fax machine at a later time.
    </p>
    <p num="29">
      In the exemplary embodiment, collision prevention/detection circuits 40a and 40b residing within the half-duplex communication system are utilized to detect message collisions between fax machine A 12 and fax machine B 30.
      <br/>
      Collision prevention/detection circuit 40a resides in SSS phone 16 and collision prevention/detection circuit 40b resides in base station 22.
      <br/>
      In the preferred embodiment, one collision prevention/detection circuit 40 is assigned to each of the two communicating fax machines.
    </p>
    <p num="30">
      In a call between fax machines, a fax machine behaves as a source fax machine for some messages and as a destination fax machine for other messages.
      <br/>
      In the present invention, it is only necessary to describe the communication between collision prevention/detection circuit 40 and a destination fax machine without regard to the source fax machine.
      <br/>
      Limiting the discussion to the collision prevention/detection circuit and the destination fax machine allows a focused discussion of the present invention without loss of scope.
    </p>
    <p num="31">I. First Embodiment</p>
    <p num="32">
      In the first embodiment, an echo canceller based collision detector is utilized to detect message collisions.
      <br/>
      An exemplary echo canceller based collision detector is shown in FIG. 3.
      <br/>
      In this embodiment, collision detector 100 connects in series with the communication channel between the fax machines.
      <br/>
      Collision detector 100 resides within SSS phone 16 and/or base station 22 (see FIG. 2) and is labeled as collision prevention/detection circuit 40 in FIG. 2.
      <br/>
      In the preferred embodiment, one collision detector 100 is assigned to each of the two communication fax machines 12 and 30.
      <br/>
      For clarity, the following discussion is focused on the fax communication between collision prevention/detection circuit 40a and fax machine A 12 in FIG. 2, which are renumbered as collision detector 100 and fax machine 122 in FIG. 3.
      <br/>
      The same interaction also occurs between collision prevention/detection circuit 40b and fax machine B 30.
    </p>
    <p num="33">
      Referring to FIG. 3, echo canceller based collision detector 100 resides within SSS phone 16.
      <br/>
      Collision detector 100 receives messages from SSS phone 16 and sends responses to SSS phone 16.
      <br/>
      Collision detector 100 connects to coupler 120 through forward channel 132 and reverse channel 130.
      <br/>
      Coupler 120 can be a 2-to-4 wire converter or any other hybrid coupler capable of performing the function herein described and is typically an adapter connected to the interface of SSS phone 16.
      <br/>
      Fax machine 122 connects to coupler 120 through communication channel 134 such as an RJ-11 interface.
      <br/>
      Coupler 120 couples the messages on forward channel 132 to fax machine 122 and the responses from fax machine 122 to reverse channel 130.
    </p>
    <p num="34">
      Within collision detector 100, controller 104 connects to fax pump 112.
      <br/>
      Controller 104 may be implemented in a microprocessor, a microcontroller, a digital signal processor (DSP) chip, or an ASIC programmed to perform the function as described.
      <br/>
      Fax pump 112 modulates the digital data from controller 104 and transmits the modulated signal as messages on forward channel 132.
      <br/>
      Echo canceller 110 connects to controller 104, reverse channel 130, and forward channel 132.
      <br/>
      Echo canceller 110 receives a control signal from controller 104 commanding echo canceller 110 into a train mode or a monitor mode.
      <br/>
      Signal detector 106 is interposed between echo canceller 110 and controller 104.
      <br/>
      Signal detector 106 monitors the error signal from echo canceller 110 and outputs a status signal indicating the presence or absence of a message collision, based on the error signal from echo canceller 110, to controller 104.
    </p>
    <p num="35">
      If controller 104 needs to transmit a message to fax machine 122, controller 104 first determines if communication channel 134 connected to fax machine 122 is clear.
      <br/>
      This determination is based on the status signal from signal detector 106.
      <br/>
      If communication channel 134 is not clear, controller 104 waits for the channel to clear before proceeding.
    </p>
    <p num="36">
      Based on the type of the message to be sent to fax machine 122 and its a priori knowledge of the T.30 fax protocol, controller 104 knows whether a response will be forthcoming from fax machine 122 as the result of receiving the message.
      <br/>
      If no response is expected from fax machine 122, a message collision is highly unlikely and controller 104 sends a control signal to echo canceller 110 to command echo canceller 110 into the train mode.
      <br/>
      Controller 104 then sends the message data to fax pump 112.
      <br/>
      Fax pump 112 receives the message data from controller 104, modulates the data, and transmits the modulated signal as a message on forward channel 132.
      <br/>
      A predominant portion of the message is coupled to fax machine 122 through coupler 120.
      <br/>
      Because of imperfections in the implementation of coupler 120, an echo y(t) of the message appears on reverse channel 130.
      <br/>
      For a linear system, the echo is a small, time delayed, and amplitude distorted version of the message.
      <br/>
      The echo appears on reverse channel 130 as the result of internal coupling within coupler 120.
      <br/>
      Since it has been determined previously that communication channel 134 is clear before the transmission of the message, only the echo is present on reverse channel 130.
    </p>
    <p num="37">
      The message m(t) is also passed through an adaptive filter which resides within echo canceller 110.
      <br/>
      The design and implementations of echo cancellers are well known in the art.
      <br/>
      The exemplary embodiment of echo canceller 110 is described in detail in U.S. Pat. No. 5,307,405, entitled "NETWORK ECHO CANCELLER" which is assigned to the assignee of the present invention and incorporated by reference herein.
      <br/>
      The adaptive filter adjusts its frequency response characteristics, e.g. its amplitude and delay response versus frequency, such that the filter output is a close estimate of the echo on reverse channel 130.
      <br/>
      The adaptive filter minimizes the error r(t) between the echo and the estimate of the echo by adjusting the frequency response of the filter according to an adaptive procedure.
      <br/>
      The adaptive procedure can be a least-mean-square (LMS) algorithm or any other signal estimation technique suitable for the task herein disclosed.
      <br/>
      When transmission of the message is complete, controller 104 terminates the training period and the frequency response of the adaptive filter is fixed.
      <br/>
      No adjustment is made on the adaptive filter frequency response until the next training period.
    </p>
    <p num="38">
      During transmission of messages from controller 104 to fax machine 122, controller 104 sends a control signal to echo canceller 110 to place echo canceller 110 into the monitor mode.
      <br/>
      In this mode, echo canceller 110 estimates the echo on reverse channel 130 by filtering the message with the adaptive filter.
      <br/>
      Since echo canceller 110 has just been trained, the estimate at adaptive filter 116 output is a close approximation of the echo on reverse channel 130.
      <br/>
      As the result, the error signal r(t) between the echo estimate and the echo will be a small signal.
      <br/>
      Signal detector 106 compares the error signal to a predetermined threshold and outputs a status signal to controller 104 indicating that the error signal is below the predetermined threshold and that no message collision has occurred.
    </p>
    <p num="39">
      Due to excessive transmission delays or incorrect synchronization, fax machine 122 may transmit a response during transmissions of the messages.
      <br/>
      In this instant, the signal on reverse channel 130 is composed of the echo of the message and the response from fax machine 122 which are coupled to reverse channel 130 by coupler 120.
      <br/>
      Echo canceller 110 is only able to estimate the echo of the message.
      <br/>
      Therefore, the error signal r(t) between the echo estimate and the signal on reverse channel 130 will be composed predominately of the response from fax machine 122.
      <br/>
      Signal detector 106 compares the error signal against the predetermined threshold.
      <br/>
      If the error signal exceeds the predetermined threshold because of the presence of the response from fax machine 122, signal detector 106 outputs a status signal to controller 104 indicating that a large signal is present on communication channel 134 and that there is a high likelihood of a message collision.
      <br/>
      Controller 104, upon receipt of the status signal indicating a high likelihood of a message collision, terminates transmission of the message, continuously monitors the status signal, and retransmits the message at a later time after it has been determined that communication channel 134 is clear.
    </p>
    <p num="40">By utilizing an echo canceller based collision detector to detect message collisions, communications between fax machines in the presence of long channel delays and/or deteriorating channel conditions is greatly improved.</p>
    <p num="41">
      A simplified version of the exemplary echo canceller is shown in FIG. 4.
      <br/>
      As shown in the figure, a message m(t) is transmitted by fax pump 112 to fax machine 122 on forward channel 132 through coupler 120.
      <br/>
      Coupler 120 directs a predominant portion of the message from forward channel 132 to communication channel 134.
      <br/>
      The message is also coupled to reverse channel 130 due to internal coupling within coupler 120.
      <br/>
      As a result, an echo is introduced on reverse channel 130.
    </p>
    <p num="42">
      Echo canceller 110 estimates the echo on reverse channel 130 based on the message.
      <br/>
      Filter 116 is applied to the message to produce an estimate of the echo.
      <br/>
      Different filter implementations such as analog filters, non-linear filters, or digital filters such as a finite impulse response (FIR) or an infinite impulse response (IIR) filter synthesized in hardware or software can also perform the filtering function and are within the scope of the present invention.
      <br/>
      In the exemplary embodiment, filter 116 is an FIR filter.
      <br/>
      Summer 108 is a difference amplifier with inputs connected to reverse channel 130 and FIR filter 116.
      <br/>
      Summer 108 can be implemented with a differential amplifier or other signal combining circuits.
      <br/>
      Summer 108 outputs an error signal that is the difference between the signal y(t) on reverse channel 130 and the estimate y'(t) of the echo from FIR filter 116.
    </p>
    <p num="43">
      The coefficients of FIR filter 116 are provided by coefficient update circuit 114.
      <br/>
      Coefficient update circuit 114 receives the error signal r(t) from summer 108 and calculates a set of filter coefficients for FIR filter 116 which minimize the error signal r(t).
      <br/>
      The coefficient calculation can be performed by one of any number of adaptive routines.
      <br/>
      In the preferred embodiment, the coefficient calculation is performed by a least-mean-square (LMS) algorithm that is known in the art.
      <br/>
      Coefficient update circuit 114 also receives the control signal from controller 104 which commands coefficient update circuit 114 into the train mode or the monitor mode.
      <br/>
      Training is enabled only during the transmission of the message and only after controller 104 has determined that no other interfering signals, such as a response , is present on communication channel 134 (see FIG. 3).
      <br/>
      Coefficient update circuit 114 only updates the filter coefficients during the training period.
      <br/>
      During the monitor mode, coefficient update circuit 114 is disabled and the previously calculated filter coefficients are maintained by FIR filter 116.
    </p>
    <p num="44">
      The accuracy of the echo estimate is dependent on the FIR filter implementation.
      <br/>
      More filter taps and greater mathematical precision in the implementation of the FIR filter allow for a more accurate estimate of the echo at the expense of greater complexity.
      <br/>
      As a minimum, the echo must be canceled sufficiently such that the resulting error signal r(t) consistently falls below the predetermined threshold.
    </p>
    <p num="45">
      The predetermined threshold is determined by system considerations.
      <br/>
      The threshold must be set low enough to enable detection of all responses from fax machine 122.
      <br/>
      However, setting the threshold too low may result in erroneous indications of message collisions.
      <br/>
      In the preferred embodiment, the threshold is set at a level which, if exceeded by the response, would cause incorrect reception of the message by fax machine 122 but which does not erroneously indicate message collisions.
    </p>
    <p num="46">
      In the preferred embodiment, signal detector 106 uses the techniques described in U.S. Pat. No. 5,892,816, entitled "METHOD AND APPARATUS FOR DETECTING FACSIMILE TRANSMISSION", hereinafter the '816 patent issued on Apr. 6, 1999, assigned to the assignee of the present invention and incorporated by reference herein, to detect the presence of fax messages in the error signal r(t). V.21 messages are transmitted using binary frequency shift keying (BFSK) modulated signals where 1650 Hz represents binary `1` and 1850 Hz represents binary `0`. As described in the '816 patent application, the error signal r(t) is filtered by two notch filters, one centered at 1650 Hz and the second centered at 1850 Hz.
      <br/>
      The outputs from the notch filters are separately squared and accumulated over a predetermined interval to obtain energy values.
      <br/>
      Signal detector 106 analyzes the present and prior energy values, e.g. comparing these energy values to a known energy signature.
      <br/>
      If the energy values conform to a predetermined criteria, e.g. as specified in the '816 patent application, a message collision is indicated on the status signal sent to controller 104.
    </p>
    <p num="47">
      In an alternative embodiment, signal detector 106 compares the error signal r(t) against the predetermined threshold.
      <br/>
      In this embodiment, signal detector 106 can be implemented with a comparator or other signal comparison circuits.
      <br/>
      In one embodiment, signal detector 106 compares the error signal to one predetermined threshold.
      <br/>
      If the error signal exceeds the predetermined threshold, a message collision is indicated on the status signal sent to controller 104.
      <br/>
      In another embodiment, multiple thresholds are utilized to indicate message collisions with varying degree of certainty.
      <br/>
      An error signal exceeding each of the multitude of thresholds would be equated with a different probability of message collision.
      <br/>
      These and other variations of signal detector 106 are within the scope of the present invention.
    </p>
    <p num="48">
      A flow diagram describing the operation of the echo canceller based collision detector of the first embodiment is shown in FIG. 5.
      <br/>
      Initially, the collision detector has a message to send to the fax machine at state 200.
      <br/>
      The collision detector first checks the communication channel connected to the fax machine to determine whether the channel is clear at step 202.
      <br/>
      If the channel is not clear, the collision detector continues to monitor the channel and will proceed only after it has been determined that the channel has become clear.
    </p>
    <p num="49">
      At step 204, the collision detector analyzes the message to determine whether it is possible to receive a response from fax machine 122 while fax pump 112 is transmitting the message.
      <br/>
      The collision detector is able to determine this based on its knowledge of the type of the message to be transmitted and its a priori knowledge of the T.30 fax protocol.
      <br/>
      If no response from the fax machine is expected, the potential for message collision is minimal.
      <br/>
      The echo canceller is then placed into the train mode while the message is being transmitted by the fax pump to the fax machine at step 214.
    </p>
    <p num="50">
      In the train mode, the echo canceller attempts to minimize the difference between the echo on the reverse channel and an estimate of the echo.
      <br/>
      The estimate of the echo is derived by filtering the message with an adaptive filter.
      <br/>
      The echo canceller attempts to minimize the error of the estimate by adjusting the filter characteristics.
      <br/>
      The train mode continues until transmission of the message is complete.
      <br/>
      Upon completion of the transmission, the collision detector terminates the process at state 220.
    </p>
    <p num="51">
      If in step 204, the collision detector determines that it is possible to receive a response from fax machine 122 while fax pump 112 is transmitting the message to it, the echo canceller is commanded into the monitor mode at step 206.
      <br/>
      The collision detector then directs the fax pump to transmit the message to the fax machine at step 208.
      <br/>
      While transmission continues, the collision detector enters into a loop to continually check for message collision during the transmission of the message.
      <br/>
      The first step in the loop involves monitoring the signal on the reverse channel at step 210 for an interfering signal from the communication channel.
      <br/>
      The interfering signal can be a response from the fax machine .
      <br/>
      If no interfering signal is detected, the collision detector then determines if the transmission of the message has been completed at step 218.
      <br/>
      If transmission is not complete, collision detector continues to transmit the message at step 216 and returns to step 210.
      <br/>
      Upon determination that the complete message has been transmitted, the process terminates at state 220.
    </p>
    <p num="52">
      If the collision detector detects the presence of an interfering signal on the communication channel during transmission of the message at step 210, the collision detector commands the fax pump to terminate the transmission at step 212.
      <br/>
      The collision detector then continues to monitor the communication channel until it has been determined that the interfering signal has disappeared at step 202.
      <br/>
      Once the channel is clear, the collision detector retransmits the message starting at step 204.
    </p>
    <p num="53">
      In another embodiment, signal detector 106 in FIG. 3 also includes a signal demodulator.
      <br/>
      When a signal is detected in the error signal r(t), the demodulator decodes the signal and determines the content of the response from fax machine 122.
      <br/>
      This response is passed to controller 104.
      <br/>
      Then, based on this response and the current state in the T.30 fax protocol, controller 104 decides whether to retransmit the last message, wait, or send a new message to fax machine 122.
    </p>
    <p num="54">II. Second Embodiment</p>
    <p num="55">
      In the second embodiment, a parametric collision detector is utilized to detect message collisions.
      <br/>
      An exemplary parametric collision detector is shown in FIG. 6.
      <br/>
      In this embodiment, parametric collision detector 102 connects in series with the communication channel between the fax machines.
      <br/>
      Collision detector 102 resides within SSS phone 16 and/or base station 22 (see FIG. 2) and is labeled as collision prevention/detection circuit 40 in FIG. 2.
      <br/>
      In the preferred embodiment, one collision detector 102 is assigned to each of the two communication fax machines 12 and 30.
      <br/>
      For clarity, the following discussion is limited to the communication between collision prevention/detection circuit 40a and fax machine A 12 in FIG. 2 which are renumbered as collision detector 102 and fax machine 122 in FIG. 6.
      <br/>
      The same interaction also occurs between collision prevention/detection circuit 40b and fax machine B 30.
    </p>
    <p num="56">
      Referring to FIG. 6, parametric collision detector 102 resides within SSS phone 16.
      <br/>
      Collision detector 102 receives messages from SSS phone 16 and sends responses to SSS phone 16.
      <br/>
      Collision detector 102 connects to coupler 120 through forward channel 132 and reverse channel 130.
      <br/>
      Coupler 120 can be a 2-to-4 wire converter or any other hybrid coupler capable of performing the function herein described and is typically an adapter connected to the interface of SSS phone 16.
      <br/>
      Fax machine 122 connects to coupler 120 through communication channel 134 such as an RJ-11 interface.
      <br/>
      Coupler 120 couples the messages on forward channel 132 to fax machine 122 and the responses from fax machine 122 to reverse channel 130.
    </p>
    <p num="57">
      Within collision detector 102, controller 144 connects to fax pump 146.
      <br/>
      Controller 144 may be implemented in one of many manners described previously in the first embodiment.
      <br/>
      Fax pump 146 modulates the digital data from controller 144 and transmits the modulated signal as messages on forward channel 132.
      <br/>
      Signal parameter estimator 148 connects to controller 144, fax pump 146, and reverse channel 130.
      <br/>
      Signal parameter estimator 148 receives the digital data from fax pump 146 and the signal on reverse channel 130 and determines whether a message collision has occurred based on these two inputs.
      <br/>
      Signal parameter estimator 148 also receives a control signal from controller 144 which commands signal parameter estimator 148 into a train mode or a monitor mode.
      <br/>
      Finally, signal parameter estimator 148 provides a status signal to controller 144 to indicate the presence or absence of a message collision.
    </p>
    <p num="58">
      Sending a message from controller 144 to fax machine 122 occurs in the same manner in the second embodiment as in the first embodiment.
      <br/>
      If controller 144 needs to transmit a message to fax machine 122, controller 144 first determines if communication channel 134 connected to fax machine 122 is clear.
      <br/>
      To determine this, controller 144 uses the status signal from signal parameter estimator 148.
      <br/>
      Controller 144 proceeds only after it has been determined that the communication channel is clear and that there is no potential for message collisions.
    </p>
    <p num="59">
      Based on the type of the message to be sent to fax machine 122 and its a priori knowledge of the T.30 fax protocol, controller 144 knows whether it is possible to receive a response from fax machine 122 while fax pump 146 is transmitting the message.
      <br/>
      If no response is anticipated from fax machine 122, a message collision is highly unlikely and controller 144 sends a control signal to signal parameter estimator 148 to command signal parameter estimator 148 into the train mode.
      <br/>
      Controller 144 then sends the digital data to fax pump 146.
      <br/>
      Fax pump 146 receives the digital data, modulates the data, and transmits the modulated signal as a message on forward channel 132.
      <br/>
      Coupler 120 couples a predominant portion of the message from forward channel 132 to communication channel 134 connected to fax machine 122.
      <br/>
      Again, due to imperfections in the implementation of coupler 120, a small and distorted version of the message appears on reverse channel 130.
      <br/>
      This echo from the message is the only signal present on reverse channel 130 since it has just been determined, before the transmission of the message, that the communication channel is clear.
    </p>
    <p num="60">
      In the train mode, signal parameter estimator 148 monitors the echo on reverse channel 130 as fax pump 146 transmits the message.
      <br/>
      The digital data comprising the message is also sent by fax pump 146 to signal parameter estimator 148.
      <br/>
      Thus, during the training period, signal parameter estimator 148 has the digital data and the echo corresponding to the digital data.
      <br/>
      Signal parameter estimator 148 computes the values for various predetermined parameters of the echo.
      <br/>
      As an example, signal parameter estimator 148 can compute the energy of the echo within different frequency bands.
      <br/>
      The energy measurement at each frequency band would then be mapped to a distinct parameter of the echo.
      <br/>
      The computed values, e.g. the energy measurements at different frequency bands, are then equated to the digital bits that produced in those computed values.
      <br/>
      Thus, after signal parameter estimator 148 has been trained, signal parameter estimator 148 is able to predict what the computed values for the parameters should be, based solely on the digital data from fax pump 146.
      <br/>
      Signal parameter estimator 148 uses the predicted values to create sets of threshold values for these parameters, one set of threshold values for each parameter, and each set of threshold values forming a threshold range.
    </p>
    <p num="61">
      If controller 144 expects a possible response from fax machine 144 while fax pump 146 is transmitting a message, controller 144 sends a control signal to signal parameter estimator 148 to command signal parameter estimator 148 into the monitor mode.
      <br/>
      By monitoring reverse channel 130, signal parameter estimator 148 is able to detect the presence of interfering signals, such as a response from fax machine 122.
      <br/>
      In the monitor mode, signal parameter estimator 148 receives the signal y(t) on reverse channel 130, computes the various parameters for the signal y(t), and compares the computed values to the threshold values.
      <br/>
      If the communication channel is clear of interfering signals, the signal y(t) on reverse channel 130 will only contain the echo of the message.
      <br/>
      The computed values for the various parameters for the echo will fall within the threshold range and signal parameter estimator 148 will output a status signal to controller 144 indicating no message collision.
    </p>
    <p num="62">
      If fax machine 122 transmits a response to controller 144 during transmission of the message, the signal y(t) on reverse channel 130 would contain the echo plus the interfering signals.
      <br/>
      The computed values for the total signal will be different than that of the echo alone.
      <br/>
      If the computed values falls outside the threshold range, signal parameter estimator 148 outputs a status signal to controller 144 indicating the high likelihood of a message collision.
      <br/>
      Controller 144, upon receipt of the status signal indicating the high likelihood of a message collision, terminates transmission of the message, continuously monitors the status signal, and retransmits the messages at a later time after it has been determined that the communication channel is clear.
      <br/>
      Thus, signal parameter estimator 148 is able to detect message collisions on the communication channel regardless of the source of the message collision.
    </p>
    <p num="63">By utilizing a parametric collision detector to detect collisions in the messages being transmitted to fax machine 122 and retransmitting the messages at a later time when the channel is clear, a reliable communication between controller 144 and fax machine 122 is possible.</p>
    <p num="64">
      An exemplary signal parameter estimator based on the energies at two frequency bands is shown in FIG. 7.
      <br/>
      For V.21 messages and responses, binary frequency shift keying (BFSK) is used to modulate the data bits corresponding to the messages.
      <br/>
      The modulation function is performed by fax pump 146.
      <br/>
      A digital zero is represented by a 3.3 msec burst of 1850 Hz tone and a digital one is represented by a 3.3 msec burst of 1650 Hz tone.
      <br/>
      By measuring the energy of the modulated signal at these two frequencies, a prediction can be made as to what data bits are transmitted on the communication channel.
    </p>
    <p num="65">
      The energy measurements at two frequency bands can also be used to determine the presence of message collisions on a communication channel due to the fact that the energy signature of an echo is different from the energy signature of an echo plus a response.
      <br/>
      For example, if communication channel 134 is clear, the signal on reverse channel 130 is composed predominately of the echo of the message on forward channel 132.
      <br/>
      Signal parameter estimator 148 measures the energy at the two frequency bands (f0 =1850 Hz and f1 =1650 Hz) for each transmitted data bit.
      <br/>
      The two energy measurements for each data bit form an energy signature for that bit.
      <br/>
      The energy measurements of the echo which result from the transmission of a digital zero on forward channel 132 contain a high energy measurement at f0 =1850 Hz and a low energy measurement at f1 =1650 Hz.
      <br/>
      Alternately, the energy measurements of the echo which result from the transmission of a digital one contain a high energy measurement at f1 =1650 Hz and a low energy measurement at f0 =1850 Hz.
      <br/>
      Thus, the energy signature of the echo resulting from a digital zero transmission is different than the energy signature of a digital one transmission.
      <br/>
      The energy signatures measured during the training period are used to generate two sets of threshold values, one set for a digital zero transmission and another set for a digital one transmission.
      <br/>
      For example, the energy signature of the echo resulting from a digital zero transmission results in an upper and a lower threshold value for f0 =1850 Hz and an upper and a lower threshold value for f1 =1650 Hz.
      <br/>
      The energy signature for a digital one transmission also results in a set of four threshold values.
      <br/>
      The threshold values are selected such that the energy measurements of the echo alone will fall within the upper and lower thresholds.
      <br/>
      The four threshold values for each data bit form a threshold range for that bit.
      <br/>
      The energy signatures of the signal on the communication channel during subsequent message transmissions are compared against the two threshold ranges.
    </p>
    <p num="66">
      If the signal on reverse channel 130 contains the echo and a response from fax machine 122, the energy signature of the echo plus the response will be different than the energy signature of the echo alone.
      <br/>
      Assuming that the response is also a V.21 message, which is true in most situation of interest, the echo and the response may add constructively or destructively.
      <br/>
      Therefore, the energy measurements at f0 =1850 Hz and f1 =1650 Hz of the echo plus the response will deviate from the expected energy signature of the echo alone.
      <br/>
      By comparing the energy signature of the echo plus the response to the threshold range for the data bit being transmitted, a message collision can be determined if the measured energy signature falls outside the threshold range.
    </p>
    <p num="67">
      Multiple threshold ranges comprised of additional upper and lower threshold values can also be used to allow detection of message collisions with varying degree of confidence.
      <br/>
      Also, energy measurements at more than two frequency bands can also be use to allow a more accurate detection of the echo and the response.
      <br/>
      More frequency bands create a more complex energy signature and enable the resolution of other spectral components.
      <br/>
      The use of multiple ranges and multiple frequency bands, and other similar variations, are within the scope of the present invention.
    </p>
    <p num="68">
      In the preferred embodiment, the energy measurements at the two frequency bands are differentially combined into one combined energy value.
      <br/>
      This implementation has the advantage of simplicity but results in some loss in accuracy.
      <br/>
      The energy measurement from f1 =1650 Hz is subtracted from the energy measurement at f0 =1850 Hz.
      <br/>
      Thus, during the training period in which only the echo of the message is being measured, the energy measurement of the echo resulting from the transmission of a digital zero results in a high energy measurement (Efo) at f0 =1850 Hz and a low energy measurement (Ef1) at f1 =1650 Hz.
      <br/>
      Differentially combining the energy measurements (Efo -Ef1) yields a positive combined energy value for a digital zero.
      <br/>
      Alternately, the energy measurement of the echo resulting from the transmission of a digital one results in a high energy measurement at f1 =1650 Hz and a low energy measurement at f0 =1850 Hz.
      <br/>
      Differentially combining the energy measurements (Efo -Ef1) yields a negative combined energy value for a digital one.
    </p>
    <p num="69">
      The combined energy values measured during the training period are used to generate two sets of threshold values.
      <br/>
      For example, the combined energy value of the echo resulting from a digital zero transmission results in an upper and lower threshold value centered about a positive value.
      <br/>
      The combined energy value for a digital one transmission also results in a set of two threshold values centered about a negative value.
      <br/>
      The threshold values are selected such that the combined energy value of the echo alone falls within the upper and lower thresholds.
      <br/>
      The two threshold values for a digital zero transmission form one threshold range and the two threshold values for a digital one transmission form another threshold range.
      <br/>
      The combined energy values of the signal on the communication channel during subsequent message transmissions are compared against the two threshold ranges.
    </p>
    <p num="70">
      If the signal on reverse channel 130 contains the echo plus a response from fax machine 122, the combined energy value for the echo and the response will be different than the combined energy value of the echo alone.
      <br/>
      By comparing the combined energy value of the echo plus the response to the threshold range for the data bit being transmitted, a message collision is indicated if the combined energy value falls outside the threshold range.
      <br/>
      Thus, with a priori knowledge that the message and the response transmissions on the same frequency is highly unlikely, a signal parameter estimator which measures the energy at two subcarrier frequencies can be used to detect message collisions.
    </p>
    <p num="71">
      The parametric collision detector of the preferred embodiment which is based on the difference in energies at two frequency bands is shown in FIG. 7.
      <br/>
      Referring to FIG. 7, bandpass filters 158 and 160 are connected to reverse channel 130 to enable collision detector 148 to monitor communication channel 134 (not shown in FIG. 7).
      <br/>
      Bandpass filters of various types (e.g. Butterworth, Gaussian, or Chebychev), order, implementations (e.g. analog or digital filters), and bandwidths are all within the scope of the present invention.
      <br/>
      Bandpass filters 158 and 160 filter the signal on reverse channel 130 at two different frequencies, f0 and f1, respectively, and output the filtered signals to energy estimators 154 and 156.
      <br/>
      In the preferred embodiment, f0 and f1 correspond to the two subcarrier frequencies used to frequency shift keying (FSK) modulate a digital zero (f0 =1850 Hz) and a digital one (f1 =1650 Hz), respectively.
    </p>
    <p num="72">
      Energy estimators 154 and 156 compute the energy of the filtered signals from bandpass filters 158 and 160, respectively.
      <br/>
      The energy calculation can be performed with analog circuits or computed digitally.
      <br/>
      The outputs from energy estimators 154 and 156 are then routed to summer 152 which differentially combines the signals.
      <br/>
      Summer 152 can be implemented with a differential amplifier, an arithmetic logic unit, or other signal combining means.
      <br/>
      The combined energy value from summer 152 is routed to decision circuit 150.
      <br/>
      Decision circuit 150 also receives the data bits corresponding to the transmitted message from fax pump 146 and a control signal from controller 144.
      <br/>
      Decision circuit 150 outputs a status signal to controller 144 indicating the presence or absence of a message collision.
    </p>
    <p num="73">
      Decision circuit 150 is commanded into a train mode or a monitor mode by controller 144 through the control signal.
      <br/>
      When controller 144 determines that a message collision is unlikely based on the type of the message to be transmitted and its a priori knowledge of the T.30 fax protocol, controller 144 commands signal parameter estimator 148 into the train mode.
      <br/>
      In the train mode, decision circuit 150 monitors the combined energy values from summer 152 and equates the combined energy values to the data bits which resulted in the echo.
      <br/>
      Since it has been determined that the communication channel is clear before placing decision circuit 150 into the train mode, the combined energy values from summer 152 will be composed predominately of the echo only.
      <br/>
      Thus, after having been trained, decision circuit 150 is able to predict what the combined energy value for the echo should be for a digital zero or a digital one transmission.
      <br/>
      Decision circuit 150 then creates two sets of threshold values, one set of threshold values for a digital zero transmission and another set of threshold values for a digital one transmission.
      <br/>
      Each set of threshold values contains an upper and a lower threshold value.
      <br/>
      The threshold values are a function of the predicted combined energy value for each bit being transmitted.
      <br/>
      The threshold values are then used later to determine the presence or absence of message collisions.
      <br/>
      The combined energy values from summer 152 can take on positive and negative values.
    </p>
    <p num="74">
      During transmission of the message when a message collision is possible, controller 144 commands signal parameter estimator 148 into the monitor mode.
      <br/>
      In this mode, signal parameter estimator 148 measures the energy of the signal on reverse channel 130.
      <br/>
      The signal on reverse channel 130 is composed of the echo of the message being transmitted and interfering signals on communication channel 134.
      <br/>
      The interfering signal can be a response from fax machine 122.
      <br/>
      Decision circuit 150 receives the data bits from fax pump 146, recalls the threshold values corresponding to each data bit being transmitted, and compares the combined energy value from summer 152 to the threshold values.
      <br/>
      If the combined energy value falls within the threshold range, decision circuit 150 declares no message collision has occurred.
      <br/>
      If the combined energy value falls outside the threshold range, decision circuit 150 declares that there is a high likelihood of a message collision.
      <br/>
      As discussed previously, multiple sets of threshold values can be used to allow indication of a message collision with varying degree of confidence.
      <br/>
      Decision circuit 150 sends the appropriate status signal to controller 144 indicating the condition.
      <br/>
      Upon receipt of the status signal from decision circuit 150 indicating a high likelihood of a message collision, controller 144 commands fax pump 146 to terminate transmission of the message and retransmits the message at a later time after it has been determined that the communication channel is clear.
    </p>
    <p num="75">
      A flow diagram detailing the operation of the parameter collision detector of the second embodiment is shown in FIG. 8.
      <br/>
      Initially, the collision detector has a message to send to the fax machine at state 228.
      <br/>
      The collision detector first checks the communication channel connected to the fax machine to determine whether the channel is clear at step 230.
      <br/>
      If the channel is not clear, the collision detector continues to monitor the channel and will proceed only after it has been determined that the channel has become clear.
    </p>
    <p num="76">
      The collision detector then begins transmitting the message to the fax machine at step 232.
      <br/>
      At step 234, upon transmission of the message, the collision detector analyzes the message to determine whether it is possible to receive a response from the fax machine while fax pump 146 is transmitting the message.
      <br/>
      The collision detector is able to determine this based on its knowledge of the type of the message and its a priori knowledge of the T.30 fax protocol.
      <br/>
      If no response from the fax machine is expected, the potential for collision is minimal.
      <br/>
      The signal parameter estimator is then placed into the train mode while the message is transmitted to the fax machine at step 242.
    </p>
    <p num="77">
      In the train mode, the signal parameter estimator monitors the echo on the reverse channel and computes the values for various parameters of the echo.
      <br/>
      The signal parameter estimator then equates the computed values to the data bits corresponding to the echo and creates sets of threshold values for these parameters.
      <br/>
      The new threshold values update the previous threshold values within the signal parameter estimator.
      <br/>
      The train mode continues until transmission of the message is complete.
      <br/>
      The process terminates upon completion of the transmission of the message at state 250.
    </p>
    <p num="78">
      If the collision detector determines that it is possible to receive a response from the fax machine, the signal parameter estimator is commanded into the monitor mode.
      <br/>
      The collision detector then enters into a loop to continually check for message collision during the transmission of the message.
      <br/>
      In the first step of the loop, the signal parameter estimator computes the values for various parameters of the signal on the reverse channel to determine the presence of an interfering signal on the communication channel at step 236.
      <br/>
      The interfering signal can be a response from the fax machine.
      <br/>
      If the computed values are within the threshold values for these parameters, no message collision has occurred.
      <br/>
      The collision detector then determines whether transmission of the message has been completed at step 246.
      <br/>
      If the transmission is not complete, the collision detector continues to transmit the message at step 244 and returns to step 236.
      <br/>
      The process terminates upon determination that the complete message has been transmitted at state 250.
    </p>
    <p num="79">
      If the collision detector detects the presence of an interfering signal on the communication channel during transmission of the message at step 238, the collision detector commands the fax pump to terminate the transmission at step 240.
      <br/>
      The collision detector then continues to monitor the communication channel until it has been determined that the communication channel is clear.
      <br/>
      When the channel is clear, the collision detector retransmits the message starting at step 230.
    </p>
    <p num="80">
      The collision prevention/detection circuits in FIGS. 3 and 6 and the flow diagrams in FIGS. 5 and 8 can be implemented in a variety of methods.
      <br/>
      The inventive concept can be implemented in hardware using a state machine, some memory, and a clock.
      <br/>
      The invention can also be implemented in firmware by microcode running on a microcomputer or a digital signal processor.
      <br/>
      Other implementations or a hybrid combination of implementations are within the scope of the present invention.
    </p>
    <p num="81">
      Although the exemplary embodiment is directed toward a fax communication system operating in a half-duplex manner over the PSTN, the inventive concept is applicable toward any communications between multiple devices using a half-duplex communication system.
      <br/>
      For example, the present invention can be directed toward communications between computers, fax machines, scanners, plotters, and printers, copiers, test equipment, and diagnostic equipment.
    </p>
    <p num="82">
      The previous description of the preferred embodiments is provided to enable any person skilled in the art to make or use the present invention.
      <br/>
      The various modifications to these embodiments will be readily apparent to those skilled in the art, and the generic principles defined herein may be applied to other embodiments without the use of the inventive faculty.
      <br/>
      Thus, the present invention is not intended to be limited to the embodiments shown herein but is to be accorded the widest scope consistent with the principles and novel features disclosed herein.
    </p>
  </description>
  <claims format="original" lang="en" id="claim_en">
    <claim num="1">
      <claim-text>I claim:</claim-text>
      <claim-text>1. An apparatus for preventing and detecting message collisions in a half-duplex communication system comprising:</claim-text>
      <claim-text>a controller means for sending a message to a communication device; an echo canceller means connected to said controller means and said communication device, said echo canceller means for receiving said message from said controller means and a signal from said communication device and for providing an error signal based on said message and said signal to said controller means, said echo canceller means further for receiving a control signal from said controller means, wherein said control signal commands said echo canceller means into a train mode or a monitor mode;</claim-text>
      <claim-text>and a signal detector means for receiving said error signal from said echo canceller means and for sending a status signal to said controller means, said status signal being dependent on said error signal from said echo canceller means.</claim-text>
    </claim>
    <claim num="2">
      <claim-text>2. The apparatus of claim 1 wherein said signal detector means comprises at least one threshold level to which said error signal is compared against and wherein said status signal indicates which one of said at least one threshold level is exceeded by said error signal.</claim-text>
    </claim>
    <claim num="3">
      <claim-text>3. The apparatus of claim 1 wherein said signal detector means comprises energy calculator means to calculate energy values of said error signal, wherein said status signal is dependent on said energy values.</claim-text>
    </claim>
    <claim num="4">
      <claim-text>4. The apparatus of claim 1 wherein said echo canceller means comprises an adaptive filter.</claim-text>
    </claim>
    <claim num="5">
      <claim-text>5. The apparatus of claim 4 wherein said adaptive filter comprises a FIR filter and a coefficient update circuit.</claim-text>
    </claim>
    <claim num="6">
      <claim-text>6. The apparatus of claim 5 wherein said coefficient update circuit is a least-mean-square algorithm and wherein said coefficient update circuit is enabled during the train mode and disabled during the monitor mode.</claim-text>
    </claim>
    <claim num="7">
      <claim-text>7. An apparatus for detecting message collision in a half-duplex communication system comprising: a controller for sending a message to a communication device;</claim-text>
      <claim-text>and a signal parameter estimator connected to said controller and said communication device, said signal parameter estimator for receiving a signal from said communication device, for receiving said message from said controller, for receiving a control signal from said controller commanding said signal parameter estimator into a train mode or a monitor mode, and for providing a status signal based on said signal from said communication device and said message from said controller, whereby said status signal indicates whether a message collision has occurred.</claim-text>
    </claim>
    <claim num="8">
      <claim-text>8. The apparatus of claim 7 wherein said signal parameter estimator comprises: at least one energy estimator for receiving said signal from said communication device, each one of said energy estimator measuring an energy level of said signal and providing an energy measurement, a decision circuit means connected to each one of said energy estimator for receiving said energy measurements from each one of said energy estimator, said decision circuit providing said status signal based on said energy measurements to said controller.</claim-text>
    </claim>
    <claim num="9">
      <claim-text>9. The apparatus of claim 8 wherein said signal parameter estimator further comprises: at least one bandpass filter, one bandpass filter for each energy estimator, each bandpass filter connected in series to one of said energy estimator, each bandpass filter receiving said signal from said communication device and filtering said signal at a distinct frequency to obtain a filtered signal, said filtered signal being provided to one of said energy estimator.</claim-text>
    </claim>
    <claim num="10">
      <claim-text>10. The apparatus of claim 7 wherein said signal parameter estimator comprises: a first energy estimator for measuring a first energy level of said signal; a second energy estimator for measuring a second energy level of said signal; a first bandpass filter connected to said first energy estimator;</claim-text>
      <claim-text>and a second bandpass filter connected to said second energy estimator.</claim-text>
    </claim>
    <claim num="11">
      <claim-text>11. The apparatus of claim 10 wherein said first bandpass filter is centered around 1850 Hz and said second bandpass filter is centered around 1650 Hz.</claim-text>
    </claim>
    <claim num="12">
      <claim-text>12. The apparatus of claim 11 wherein said signal parameter estimator further comprises: a summer connected to said first energy estimator and said second energy estimator, said summer differentially combining said energy measurements from said first energy estimator and said second energy estimator, said summer also connected to said decision circuit and providing a combined energy value to said decision circuit.</claim-text>
    </claim>
    <claim num="13">
      <claim-text>13. The apparatus of claim 12 wherein said decision circuit comprises at least one set of threshold values to which said combined energy value is compared against and wherein said status signal indicates which one of said set of threshold values is exceeded by said combined energy value.</claim-text>
    </claim>
    <claim num="14">
      <claim-text>14. A circuit for preventing and detecting message collisions in a half-duplex communication system comprising: a controller for sending a message to a communication device; an echo canceller connected to said controller and said communication device, said echo canceller receiving said message from said controller and a signal from said communication device and providing an error signal based on said message and said signal to said controller, said echo canceller further receiving a control signal from said controller, wherein said control signal commands said echo canceller into a train mode or a monitor mode;</claim-text>
      <claim-text>and a signal detector for receiving said error signal from said echo canceller and sending a status signal to said controller, said status signal being dependent on said error signal from said echo canceller.</claim-text>
    </claim>
    <claim num="15">
      <claim-text>15. The circuit of claim 14 wherein said signal detector comprises at least one threshold level to which said error signal is compared against and wherein said status signal indicates which one of said threshold level is exceeded by said error signal.</claim-text>
    </claim>
    <claim num="16">
      <claim-text>16. The circuit of claim 14 wherein said signal detector comprises energy calculators to calculate energy values of said error signal, wherein said status signal is dependent on said energy values.</claim-text>
    </claim>
    <claim num="17">
      <claim-text>17. The circuit of claim 14 wherein said echo canceller comprises a signal estimator.</claim-text>
    </claim>
    <claim num="18">
      <claim-text>18. The circuit of claim 17 wherein said signal estimator is an adaptive filter.</claim-text>
    </claim>
    <claim num="19">
      <claim-text>19. The circuit of claim 18 wherein said adaptive filter comprises a FIR filter and an coefficient update circuit.</claim-text>
    </claim>
    <claim num="20">
      <claim-text>20. The circuit of claim 19 wherein said coefficient update circuit is a least-mean-square algorithm and wherein said coefficient update circuit is enabled during the train mode and disabled during the monitor mode.</claim-text>
    </claim>
  </claims>
</questel-patent-document>