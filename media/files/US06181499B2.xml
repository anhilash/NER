<?xml version="1.0" encoding="UTF-8"?>
<questel-patent-document lang="en" date-produced="20180805" produced-by="Questel" schema-version="3.23" file="US06181499B2.xml">
  <bibliographic-data lang="en">
    <publication-reference publ-desc="Granted patent as second publication">
      <document-id>
        <country>US</country>
        <doc-number>06181499</doc-number>
        <kind>B2</kind>
        <date>20010130</date>
      </document-id>
      <document-id data-format="questel">
        <doc-number>US6181499</doc-number>
      </document-id>
    </publication-reference>
    <original-publication-kind>B2</original-publication-kind>
    <application-reference is-representative="YES" family-id="22004017" extended-family-id="42108001">
      <document-id>
        <country>US</country>
        <doc-number>09056381</doc-number>
        <kind>A</kind>
        <date>19980407</date>
      </document-id>
      <document-id data-format="questel">
        <doc-number>1998US-09056381</doc-number>
      </document-id>
      <document-id data-format="questel_Uid">
        <doc-number>43164348</doc-number>
      </document-id>
    </application-reference>
    <language-of-filing>en</language-of-filing>
    <language-of-publication>en</language-of-publication>
    <priority-claims>
      <priority-claim kind="national" sequence="1">
        <country>US</country>
        <doc-number>5638198</doc-number>
        <kind>A</kind>
        <date>19980407</date>
        <priority-active-indicator>Y</priority-active-indicator>
      </priority-claim>
      <priority-claim data-format="questel" sequence="1">
        <doc-number>1998US-09056381</doc-number>
      </priority-claim>
    </priority-claims>
    <dates-of-public-availability>
      <publication-of-grant-date>
        <date>20010130</date>
      </publication-of-grant-date>
    </dates-of-public-availability>
    <classifications-ipcr>
      <classification-ipcr sequence="1">
        <text>G11B   5/09        20060101A I20051008RMEP</text>
        <ipc-version-indicator>
          <date>20060101</date>
        </ipc-version-indicator>
        <classification-level>A</classification-level>
        <section>G</section>
        <class>11</class>
        <subclass>B</subclass>
        <main-group>5</main-group>
        <subgroup>09</subgroup>
        <classification-value>I</classification-value>
        <generating-office>
          <country>EP</country>
        </generating-office>
        <classification-status>R</classification-status>
        <classification-data-source>M</classification-data-source>
        <action-date>
          <date>20051008</date>
        </action-date>
      </classification-ipcr>
      <classification-ipcr sequence="2">
        <text>G11B  20/10        20060101A I20051008RMEP</text>
        <ipc-version-indicator>
          <date>20060101</date>
        </ipc-version-indicator>
        <classification-level>A</classification-level>
        <section>G</section>
        <class>11</class>
        <subclass>B</subclass>
        <main-group>20</main-group>
        <subgroup>10</subgroup>
        <classification-value>I</classification-value>
        <generating-office>
          <country>EP</country>
        </generating-office>
        <classification-status>R</classification-status>
        <classification-data-source>M</classification-data-source>
        <action-date>
          <date>20051008</date>
        </action-date>
      </classification-ipcr>
      <classification-ipcr sequence="3">
        <text>G11B  27/36        20060101A I20051008RMEP</text>
        <ipc-version-indicator>
          <date>20060101</date>
        </ipc-version-indicator>
        <classification-level>A</classification-level>
        <section>G</section>
        <class>11</class>
        <subclass>B</subclass>
        <main-group>27</main-group>
        <subgroup>36</subgroup>
        <classification-value>I</classification-value>
        <generating-office>
          <country>EP</country>
        </generating-office>
        <classification-status>R</classification-status>
        <classification-data-source>M</classification-data-source>
        <action-date>
          <date>20051008</date>
        </action-date>
      </classification-ipcr>
    </classifications-ipcr>
    <classification-national>
      <country>US</country>
      <main-classification>
        <text>360053000</text>
        <class>360</class>
        <subclass>053000</subclass>
      </main-classification>
      <further-classification sequence="1">
        <text>G9B005033</text>
        <class>G9B</class>
        <subclass>005033</subclass>
      </further-classification>
      <further-classification sequence="2">
        <text>G9B020010</text>
        <class>G9B</class>
        <subclass>020010</subclass>
      </further-classification>
      <further-classification sequence="3">
        <text>G9B027052</text>
        <class>G9B</class>
        <subclass>027052</subclass>
      </further-classification>
    </classification-national>
    <classifications-ecla>
      <classification-ecla sequence="1">
        <text>G11B-005/09</text>
        <section>G</section>
        <class>11</class>
        <subclass>B</subclass>
        <main-group>5</main-group>
        <subgroup>09</subgroup>
      </classification-ecla>
      <classification-ecla sequence="2">
        <text>G11B-020/10A</text>
        <section>G</section>
        <class>11</class>
        <subclass>B</subclass>
        <main-group>020</main-group>
        <subgroup>10A</subgroup>
      </classification-ecla>
      <classification-ecla sequence="3">
        <text>G11B-027/36</text>
        <section>G</section>
        <class>11</class>
        <subclass>B</subclass>
        <main-group>27</main-group>
        <subgroup>36</subgroup>
      </classification-ecla>
    </classifications-ecla>
    <patent-classifications>
      <patent-classification sequence="1">
        <classification-scheme office="EP" scheme="CPC">
          <date>20130101</date>
        </classification-scheme>
        <classification-symbol>G11B-005/09</classification-symbol>
        <section>G</section>
        <class>11</class>
        <subclass>B</subclass>
        <main-group>5</main-group>
        <subgroup>09</subgroup>
        <symbol-position>F</symbol-position>
        <classification-value>I</classification-value>
        <classification-status>B</classification-status>
        <classification-data-source>H</classification-data-source>
        <action-date>
          <date>20130101</date>
        </action-date>
      </patent-classification>
      <patent-classification sequence="2">
        <classification-scheme office="EP" scheme="CPC">
          <date>20130101</date>
        </classification-scheme>
        <classification-symbol>G11B-020/10009</classification-symbol>
        <section>G</section>
        <class>11</class>
        <subclass>B</subclass>
        <main-group>20</main-group>
        <subgroup>10009</subgroup>
        <symbol-position>L</symbol-position>
        <classification-value>I</classification-value>
        <classification-status>B</classification-status>
        <classification-data-source>H</classification-data-source>
        <action-date>
          <date>20130101</date>
        </action-date>
      </patent-classification>
      <patent-classification sequence="3">
        <classification-scheme office="EP" scheme="CPC">
          <date>20130101</date>
        </classification-scheme>
        <classification-symbol>G11B-027/36</classification-symbol>
        <section>G</section>
        <class>11</class>
        <subclass>B</subclass>
        <main-group>27</main-group>
        <subgroup>36</subgroup>
        <symbol-position>L</symbol-position>
        <classification-value>I</classification-value>
        <classification-status>B</classification-status>
        <classification-data-source>H</classification-data-source>
        <action-date>
          <date>20130101</date>
        </action-date>
      </patent-classification>
      <patent-classification sequence="4">
        <classification-scheme office="EP" scheme="CPC">
          <date>20130101</date>
        </classification-scheme>
        <classification-symbol>G11B-2220/90</classification-symbol>
        <section>G</section>
        <class>11</class>
        <subclass>B</subclass>
        <main-group>2220</main-group>
        <subgroup>90</subgroup>
        <symbol-position>L</symbol-position>
        <classification-value>A</classification-value>
        <classification-status>B</classification-status>
        <classification-data-source>H</classification-data-source>
        <action-date>
          <date>20130101</date>
        </action-date>
      </patent-classification>
      <patent-classification sequence="5">
        <classification-scheme office="EP" scheme="ICO"/>
        <classification-symbol>S11B-220/90</classification-symbol>
      </patent-classification>
    </patent-classifications>
    <number-of-claims>14</number-of-claims>
    <exemplary-claim>1</exemplary-claim>
    <figures>
      <number-of-drawing-sheets>3</number-of-drawing-sheets>
      <number-of-figures>3</number-of-figures>
      <image-key data-format="questel">US6181499</image-key>
    </figures>
    <invention-title format="original" lang="en" id="title_en">Method and apparatus for testing the digital read channel circuit of a data storage device</invention-title>
    <references-cited>
      <citation srep-phase="examiner">
        <patcit num="1">
          <text>KERWIN GREGORY J, et al</text>
          <document-id>
            <country>US</country>
            <doc-number>5121263</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5121263</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="examiner">
        <patcit num="2">
          <text>COKER JONATHAN D, et al</text>
          <document-id>
            <country>US</country>
            <doc-number>5392295</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5392295</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="examiner">
        <patcit num="3">
          <text>KOGAN ANDREW, et al</text>
          <document-id>
            <country>US</country>
            <doc-number>5490091</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5490091</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="examiner">
        <patcit num="4">
          <text>BEHRENS RICHARD T, et al</text>
          <document-id>
            <country>US</country>
            <doc-number>5978162</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5978162</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="examiner">
        <patcit num="5">
          <text>BEHRENS RICHARD T, et al</text>
          <document-id>
            <country>US</country>
            <doc-number>5987634</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5987634</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="applicant">
        <patcit num="6">
          <text>WOESSNER ROBERT J</text>
          <document-id>
            <country>US</country>
            <doc-number>4023142</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US4023142</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="applicant">
        <patcit num="7">
          <text>LEFORT GILBERT, et al</text>
          <document-id>
            <country>US</country>
            <doc-number>4845711</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US4845711</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="applicant">
        <patcit num="8">
          <text>MELAS CONSTANTIN M, et al</text>
          <document-id>
            <country>US</country>
            <doc-number>5293369</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5293369</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="applicant">
        <patcit num="9">
          <text>HITACHI LTD, et al</text>
          <document-id>
            <country>JP</country>
            <doc-number>S5553955</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>JP55053955</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="applicant">
        <patcit num="10">
          <text>OKI ELECTRIC IND CO LTD, et al</text>
          <document-id>
            <country>JP</country>
            <doc-number>S57143968</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>JP57143968</doc-number>
          </document-id>
        </patcit>
      </citation>
    </references-cited>
    <parties>
      <applicants>
        <applicant data-format="original" app-type="applicant" sequence="1">
          <addressbook lang="en">
            <orgname>International Business Machines Corporation</orgname>
            <address>
              <address-1>Armonk, NY, US</address-1>
              <city>Armonk</city>
              <state>NY</state>
              <country>US</country>
            </address>
          </addressbook>
          <nationality>
            <country>US</country>
          </nationality>
        </applicant>
        <applicant data-format="questel" app-type="applicant" sequence="2">
          <addressbook lang="en">
            <orgname>IBM</orgname>
          </addressbook>
          <nationality>
            <country>US</country>
          </nationality>
        </applicant>
      </applicants>
      <inventors>
        <inventor data-format="original" sequence="1">
          <addressbook lang="en">
            <name>Hutchins, Robert Allen</name>
            <address>
              <address-1>Tucson, AZ, US</address-1>
              <city>Tucson</city>
              <state>AZ</state>
              <country>US</country>
            </address>
          </addressbook>
          <nationality>
            <country>US</country>
          </nationality>
        </inventor>
        <inventor data-format="original" sequence="2">
          <addressbook lang="en">
            <name>Schaffer, Scott Jeffrey</name>
            <address>
              <address-1>Tucson, AZ, US</address-1>
              <city>Tucson</city>
              <state>AZ</state>
              <country>US</country>
            </address>
          </addressbook>
          <nationality>
            <country>US</country>
          </nationality>
        </inventor>
      </inventors>
      <agents>
        <agent sequence="1" rep-type="agent">
          <addressbook lang="en">
            <name>Sullivan, Robert M.</name>
          </addressbook>
        </agent>
        <agent sequence="2" rep-type="agent">
          <addressbook lang="en">
            <orgname>Felsman, Bradley, Vaden, Gunter &amp; Dillon, LLP</orgname>
          </addressbook>
        </agent>
      </agents>
    </parties>
    <examiners>
      <primary-examiner>
        <name>Kim, W. Chris</name>
      </primary-examiner>
    </examiners>
    <lgst-data>
      <lgst-status>LAPSED</lgst-status>
    </lgst-data>
  </bibliographic-data>
  <abstract format="original" lang="en" id="abstr_en">
    <p id="P-EN-00001" num="00001">
      <br/>
      A method and apparatus for testing digital read channel circuits within a data storage device includes a digital read channel circuit coupled to a simulated impulse response module are disclosed.
      <br/>
      The data storage device includes a digital read channel circuit coupled to a simulated impulse response module.
      <br/>
      A pseudo analog-to-digital waveform is generated by the simulated impulse response module is input into the digital read channel circuit.
      <br/>
      The digital read channel circuit then decodes the pseudo analog-to-digital waveform to form a set of binary data.
      <br/>
      After receiving the set of binary data, a formatter/deformatter verifies the correctness of the binary data, such that the integrity of the digital read channel circuit and the formatter/deformatter can be determined.
    </p>
  </abstract>
  <description format="original" lang="en" id="desc_en">
    <heading>BACKGROUND OF THE INVENTION</heading>
    <p num="1">
      1.
      <br/>
      Technical Field
    </p>
    <p num="2">
      The present invention relates to a method and apparatus for testing in general, and in particular to a method and apparatus for testing digital channel circuitry.
      <br/>
      Still more particularly, the present invention relates to a method and apparatus for testing digital read channel circuits of data storage devices.
    </p>
    <p num="3">2. Description of the Prior Art</p>
    <p num="4">
      A magnetic recording channel within a magnetic storage device, such as a magnetic tape drive, is designed to accept data for storage and to deliver, without error, the same in response to a subsequent retrieval demand.
      <br/>
      During data retrieval, self-clocking modulation codes are typically employed to ensure an adequate minimum rate of signal transitions for clock synchronization, without exceeding the maximum transition storage density of the magnetic storage medium during data storage.
      <br/>
      Such self-clocking modulation codes are preferably run-length-limiting (RLL) codes that represent a one-to-one mapping of binary data into a constrained binary sequence that is then recorded on the magnetic storage medium in the form of a non-return-to-zero (NRZ) waveform.
    </p>
    <p num="5">
      For an NRZ waveform, the maximum and minimum number of spaces between consecutive transitions correspond to the maximum and minimum run lengths of zeros between two consecutive ones in a corresponding binary sequence, as is well-known in the prior art.
      <br/>
      Thus, the self-clocking modulation codes within the RLL codes are characterized by parameters (D, K), where D represents the minimum and K represents the maximum number of zeros between two consecutive ones in the code sequence.
      <br/>
      These codes are the result of the steady evolution of waveform design coupled with improvements in magnetic recording channels, including improved clocking and signal-detection processors.
    </p>
    <p num="6">
      Generally speaking, a magnetic recording channel includes a write path for writing data to and a read path for reading data from a magnetic storage medium.
      <br/>
      The write path usually includes a digital write channel and a write driver, and the read path usually includes an analog processor, an analog-to-digital converter, and a digital read channel.
      <br/>
      The present invention discloses a method and apparatus for testing the integrity of the digital read channel circuit, as well as a formatter/deformatter that is coupled between the digital read channel circuit and the digital write channel circuit.
    </p>
    <heading>SUMMARY OF THE INVENTION</heading>
    <p num="7">In view of the foregoing, it is therefore an object of the present invention to provide an improved method and apparatus for testing.</p>
    <p num="8">It is another object of the present invention to provide an improved method and apparatus for testing digital channel circuitry.</p>
    <p num="9">It is yet another object of the present invention to provide an improved method and apparatus for testing digital read channel circuits of data storage devices.</p>
    <p num="10">
      In accordance with a method and system of the present invention, a data storage device includes a digital read channel circuit coupled to a simulated impulse response module.
      <br/>
      A pseudo analog-to-digital waveform is generated by the simulated impulse response module is input into the digital read channel circuit.
      <br/>
      The digital read channel circuit then decodes the pseudo analog-to-digital waveform to form a set of binary data.
      <br/>
      After receiving the set of binary data, a formatter/deformatter verifies the correctness of the binary data, such that the integrity of the digital read channel circuit and the formatter/deformatter can be determined.
    </p>
    <p num="11">All objects, features, and advantages of the present invention will become apparent in the following detailed written description.</p>
    <heading>BRIEF DESCRIPTION OF THE DRAWINGS</heading>
    <p num="12">
      The invention itself, as well as a preferred mode of use, further objects, and advantages thereof, will best be understood by reference to the following detailed description of an illustrative embodiment when read in conjunction with the accompanying drawings, wherein:
      <br/>
      FIG. 1 is a block diagram of a read/write circuit for accessing a magnetic storage medium, in which a preferred embodiment of the present invention is implemented;
      <br/>
      FIG. 2 is a detailed block diagram of the simulated impulse response module from FIG. 1, in accordance with a preferred embodiment of the present invention; and
      <br/>
      FIG. 3 is a pictorial diagram of an exemplary NRZ waveform illustrating a first case when three "1"s are sampled and a second case when two "1"s are sampled, in accordance with a preferred embodiment of the present invention.
    </p>
    <heading>DETAILED DESCRIPTION OF A PREFERRED EMBODIMENT</heading>
    <p num="13">
      Referring now to the drawings and in particular to FIG. 1, there is illustrated a block diagram of a read/write circuit for accessing a magnetic storage medium, in which a preferred embodiment of the present invention is implemented.
      <br/>
      As shown, read/write circuit 10 includes a write path for writing data to and a read path for reading data from a magnetic storage medium such as a magnetic tape, via a tape head 14.
      <br/>
      The write path includes a write channel 12 and a write driver 13.
      <br/>
      The read path includes an analog processor 15, an analog-to-digital converter (ADC) 16, and a read channel 17.
      <br/>
      A formatter/deformatter 11 is utilized to filter data between read/write circuit 10 and a host processor (not shown).
      <br/>
      Write channel 12, write driver 13, tape head 14, analog processor 15, and ADC 16 may be collectively viewed as a channel transfer function (indicated by a dashed box 26), that receives discrete data 18 as inputs and generates analog-to-digital waveform 19 as an output.
      <br/>
      Read channel 17 then samples analog-to-digital waveform 19 to generate an NRZ waveform to be fed to formatter/deformatter 11.
    </p>
    <p num="14">
      In order to test the integrity of formatter/deformatter 11 and read channel 17, a simulated impulse response module for producing a pseudo analog-to-digital waveform is needed.
      <br/>
      This simulated impulse response module is preferably coupled between the input and output of the channel transfer function.
      <br/>
      As shown in FIG. 1, a simulated impulse response module 20 is coupled to the output of a formatter/deformatter 11 and to the input of a read channel 17.
      <br/>
      In accordance with a preferred embodiment of the present invention, simulated impulse response module 20 generates a pseudo analog-to-digital waveform that forms the input of read channel 17.
      <br/>
      The decoded data (NRZ waveform) output by read channel 17 is then sent to formatter/deformatter 11.
      <br/>
      Formatter/deformatter 11 subsequently checks the decoded data to see whether there is any error within the decoded data.
      <br/>
      The method of checking is well-known to those skilled in the art of storage system design.
      <br/>
      As such, a set of test patterns can be fed into formatter/deformatter 11 and the decoded data generated by read channel 17 can be compared with the original test patterns for correctness, within formatter/deformatter 11, during and after manufacturing.
    </p>
    <p num="15">
      With reference now to FIG. 2, there is illustrated a detailed block diagram of simulated impulse response module 20 from FIG. 1, in accordance with a preferred embodiment of the present invention.
      <br/>
      Simulated impulse response module 20 includes a 7-bit shift register 21, an AND gate 22, an XOR gate 23, and combinatorial logic 24.
      <br/>
      Data from formatter/deformatter 11 in FIG. 1 is input into shift register 21.
      <br/>
      Combinatorial logic 24 utilizes a table lookup architecture (to be shown) and maps all the bits from shift register 21 and an additional bit from register 25 to form a pseudo analog-to-digital waveform that is input into read channel 17 in FIG. 1.
      <br/>
      The additional bit from register 25 is formed by logically combining the three most significant bits from shift register 21 utilizing AND gate 22 and XOR gate 23.
    </p>
    <p num="16">
      During testing operation, shift register 21 stores the seven most current sample bits--bits 0-6.
      <br/>
      Preferably, bit 4 is considered to be the current sample bit.
      <br/>
      In addition, bits 0-3 are considered to be the four previous sample bits, and bits 5-6 are considered to be the next two sample bits.
      <br/>
      The values of samples bits 0-6 are utilized in a lookup table, which is part of combinatorial logic 24, to generate a magnitude input for read channel 17 in FIG. 1.
    </p>
    <p num="17">
      The lookup table preferably comprises two parts: a first part for handling the case when a current sample bit (i.e., bit 4) is equal to "1," and a second part for handling the case when the current sample bit is equal to "0." In either case, not all seven bits need to be considered.
      <br/>
      In a typical NRZ data sampling process, because the read sample frequency (at the read channel) is greater than the write sample frequency (at the write channel), it is preferable to have at least two and at most three sample bits of "1" to be considered as a valid "1" write pulse.
      <br/>
      When there are fewer than two "1" sample bits, a zero magnitude 7-bit value signal will be output.
      <br/>
      Accordingly, when the current sample bit is equal to "1," only five sample bits are needed: the two previous sample bits (bits 2-3), the current sample bit (bit 4), and two next sample bits (bits 5-6).
      <br/>
      The resultant magnitude for all possible input sample bit combinations when the current sample bit is equal to "1" is outlined in Table I.
    </p>
    <heading>-- TABLE I</heading>
    <p num="18">
      -- bits 2 to 6 magnitude   illegal
      <br/>
      -- 23456       7-bit value pattern   comments
      <br/>
      -- 00100       0           X         too few "1" sample bits
      <br/>
      -- 00101       0           X         too few "1" sample bits
      <br/>
      -- 00110       48                    1st of two "1" sample bits
      <br/>
      -- 00111       32                    1st of three "1" sample bits
      <br/>
      -- 01100       96                    2nd of two "1" sample bits
      <br/>
      -- 01101       96          X         2nd of two "1" sample bits
      <br/>
      -- 01110       64                    2nd of three "1" sample bits
      <br/>
      -- 01111       64          X         2nd of three "1" sample bits
      <br/>
      -- 10100       0           X         too few "1" sample bits
      <br/>
      -- 10101       0           X         too few "1" sample bits
      <br/>
      -- 10110       48          X         1st of two "1" sample bits
      <br/>
      -- 10111       32          X         1st of three "1" sample bits
      <br/>
      -- 11100       120                   3rd of three "1" sample bits
      <br/>
      -- 11101       120         X         3rd of three "1" sample bits
      <br/>
      -- 11110       120         X         3rd of three "1" sample bits
      <br/>
      -- 11111       120         X         3rd of three "1" sample bits
    </p>
    <p num="19">
      In Table I, some sample bit patterns are marked as illegal patterns because these sample bit patterns have either too few or too many consecutive "1" or "0" sample bits than the consecutive sample bits requirement mentioned previously.
      <br/>
      Combinatorial logic 24 can handle these illegal patterns in several different ways.
      <br/>
      One way, for example, is to flag each illegal pattern as an error and post that as an error bit, while continuing to access values from the lookup table.
      <br/>
      It will then be up to the microcode to report the error bit as a hardware error, as it is well-known to those skilled in the art.
    </p>
    <p num="20">
      When the current sample bit (bit 4) is equal to "0," again, only five sample bits are needed: the four previous sample bits (bits 0-3) and the current sample bit (bit 4).
      <br/>
      The resultant magnitude for all possible input sample bit combination when the current sample bit is equal to "0" is outlined in Table II.
    </p>
    <p num="21">
      Similar to Table I, some sample bit patterns in Table II are marked as illegal pattern because these sample bit patterns have either too few or too many "1" or "0" samples than the sample bit pattern requirement as defined.
      <br/>
      Again, combinatorial logic 24 can handle these illegal patterns in several ways, including flagging each illegal pattern as an error and relying on the microcode to report the error bit as a hardware error, as described above.
    </p>
    <p num="22">
      In addition, the positive-negative rule requires a positive peak to be followed by a negative peak.
      <br/>
      Therefore, when a negative peak is required, the two's complement of each magnitude, as shown above, is utilized.
      <br/>
      A change in sign will occur when sample bits 4-6 are equal to "011," i.e., when next current sample bit will be a "1."
    </p>
    <heading>-- TABLE II</heading>
    <p num="23">
      -- bits 0 to 4   magnitude illegal
      <br/>
      -- 01234         7-bit value pattern     comments
      <br/>
      -- 00000         0                     continue "0" sample bit
      <br/>
      -- 00010         0         X           too few "1" sample bits
      <br/>
      -- 00100         0         X           too few "1" sample bits
      <br/>
      -- 00110         96                    1st of two "0" sample bits
      <br/>
      -- 01000         0         X           too few "1" sample bits
      <br/>
      -- 01010         0         X           too few "1" sample bits
      <br/>
      -- 01100         48                    2nd of two "0" sample bits
      <br/>
      -- 01110         64                    3 previous "1" sample bits,
      <br/>
      --                                     1st "0")
      <br/>
      -- 10000         0                     continue "0" sample bit
      <br/>
      -- 10010         0         X           too few "1" sample bits
      <br/>
      -- 10100         0         X           too few "1" sample bits
      <br/>
      -- 10110         96        X           1st of two "0" sample bits
      <br/>
      -- 11000         0                     continue "0" sample bit
      <br/>
      -- 11010         0         X           too few "1" sample bits
      <br/>
      -- 11100         32                    3 previous "1" sample bits,
      <br/>
      --                                     2nd "0"
      <br/>
      -- 11110         32        X           too many "1" sample bits
    </p>
    <p num="24">
      Referring now to FIG. 3, there is illustrated a pictorial diagram of an exemplary NRZ waveform illustrating a first case when three "1"s are sampled and a second case when two "1"s are sampled, in accordance with a preferred embodiment of the present invention.
      <br/>
      The NRZ waveform is generated by the read channel in response to sampling a pseudo analog-to-digital waveform produced by the simulated impulse response module as mentioned above.
    </p>
    <p num="25">
      As has been described, the present invention provides an improved method and apparatus for testing a digital read channel circuit as well as a formatter/deformatter that is coupled between the digital read channel circuit and a digital write channel circuit within a magnetic storage device.
      <br/>
      The present invention provides a convenient way to test the digital read channel circuit, during and after the manufacturing.
      <br/>
      Although a magnetic storage device is utilized as an illustrative embodiment of the present invention, it will be understood by those skilled in the art that the present invention is also applicable to an optical storage device as well.
    </p>
    <p num="26">While the invention has been particularly shown and described with reference to a preferred embodiment, it will be understood by those skilled in the art that various changes in form and detail may be made therein without departing from the spirit and scope of the invention.</p>
  </description>
  <claims format="original" lang="en" id="claim_en">
    <claim num="1">
      <claim-text>What is claimed is:</claim-text>
      <claim-text>1.</claim-text>
      <claim-text>A data storage device, comprising:</claim-text>
      <claim-text>a data storage medium for data storage; a digital read channel circuit for reading data stored in said data storage medium; a formatter/deformatter having a set of test patterns; a simulated impulse response module, connected to an output of said formatter/deformatter and to an input of said digital read channel circuit, for generating a pseudo analog-to-digital waveform according to said set of test patterns outputed by said formatter/deformatter and for sending said generated pseudo analog-to-digital waveform to said digital read channel circuit, such that the integrity of said digital read channel circuit can be determined by comparing a set of decoded data generated by said digital read channel circuit to said set of test patterns in said formatter/deformatter, wherein said set of decoded data is generated according to said generated pseudo analog-to-digital waveform from simulated impulse response module.</claim-text>
    </claim>
    <claim num="2">
      <claim-text>2. The data storage device according to claim 1, wherein said simulated impulse response module further includes a shift register and a set of combinatorial logic for generating said pseudo analog-to-digital waveform.</claim-text>
    </claim>
    <claim num="3">
      <claim-text>3. The data storage device according to claim 1, wherein said data storage device is a magnetic data storage device or an optical data storage device.</claim-text>
    </claim>
    <claim num="4">
      <claim-text>4. The data storage device according to claim 1, wherein said pseudo analog-to-digital waveform is sampled by at least two "1"s per write pulse.</claim-text>
    </claim>
    <claim num="5">
      <claim-text>5. The data storage device according to claim 1, wherein said output generated by said digital read channel circuit is a non-return-to-zero waveform.</claim-text>
    </claim>
    <claim num="6">
      <claim-text>6. A method for testing the integrity of a digital read channel circuit within a data storage device, said method comprising the steps of: connecting a simulated impulse response module to an output of a formatter/deformatter and to an input of said digital read channel circuit; feeding said formatter/deformatter with a set of test patterns; generating a pseudo analog-to-digital waveform utilizing said simulated impulse response module according to said set of test patterns outputted by said formatter/deformatter; sending said generated pseudo analog-to-digital waveform from said simulated impulse response module to said digital read channel circuit; reading an output generated by said digital read channel circuit;</claim-text>
      <claim-text>and determining whether or not said output generated by said digital read channel circuit is identical to said set of test patterns, in order to determine the integrity of said digital read channel circuit.</claim-text>
    </claim>
    <claim num="7">
      <claim-text>7. The method according to claim 6, wherein said output generated by said digital read channel circuit is a non-return-to-zero waveform.</claim-text>
    </claim>
    <claim num="8">
      <claim-text>8. The method according to claim 6, wherein said data storage device is a magnetic data storage device or an optical data storage device.</claim-text>
    </claim>
    <claim num="9">
      <claim-text>9. The method according to claim 6, wherein said reading step is performed by said formatter/deformatter.</claim-text>
    </claim>
    <claim num="10">
      <claim-text>10. The method according to claim 6, wherein said pseudo analog-to-digital waveform is sampled by at least two "1"s per write pulse.</claim-text>
    </claim>
    <claim num="11">
      <claim-text>11. A data storage device having a digital read channel circuit, comprising: a formatter/deformatter; a simulated impulse response module, connected to an output of said formatter/deformatter and to an input of said digital read channel circuit, for generating a pseudo analog-to-digital waveform based on a set of test patterns stored in said formatter/deformatter; means for reading an output generated by said digital read channel circuit in response to said pseudo analog-to-digital waveform;</claim-text>
      <claim-text>and means for determining whether or not said output generated by said digital read channel circuit is identical to said set of test patterns in order to determine the integrity of said digital read channel circuit.</claim-text>
    </claim>
    <claim num="12">
      <claim-text>12. The data storage device according to claim 11, wherein said pseudo analog-to-digital waveform is sampled by at least two "1"s per write pulse.</claim-text>
    </claim>
    <claim num="13">
      <claim-text>13. The data storage device according to claim 11, wherein said output generated by said digital read channel circuit is a non-return-to-zero waveform.</claim-text>
    </claim>
    <claim num="14">
      <claim-text>14. The data storage device according to claim 11, wherein said data storage device is a magnetic data storage device or an optical data storage device.</claim-text>
    </claim>
  </claims>
</questel-patent-document>