<?xml version="1.0" encoding="UTF-8"?>
<questel-patent-document lang="en" date-produced="20180805" produced-by="Questel" schema-version="3.23" file="US06182001B2.xml">
  <bibliographic-data lang="en">
    <publication-reference publ-desc="Granted patent as second publication">
      <document-id>
        <country>US</country>
        <doc-number>06182001</doc-number>
        <kind>B2</kind>
        <date>20010130</date>
      </document-id>
      <document-id data-format="questel">
        <doc-number>US6182001</doc-number>
      </document-id>
    </publication-reference>
    <original-publication-kind>B2</original-publication-kind>
    <application-reference family-id="26345997" extended-family-id="14415459">
      <document-id>
        <country>US</country>
        <doc-number>08996316</doc-number>
        <kind>A</kind>
        <date>19971222</date>
      </document-id>
      <document-id data-format="questel">
        <doc-number>1997US-08996316</doc-number>
      </document-id>
      <document-id data-format="questel_Uid">
        <doc-number>14735241</doc-number>
      </document-id>
    </application-reference>
    <language-of-filing>en</language-of-filing>
    <language-of-publication>en</language-of-publication>
    <priority-claims>
      <priority-claim kind="national" sequence="1">
        <country>JP</country>
        <doc-number>34638096</doc-number>
        <kind>A</kind>
        <date>19961225</date>
        <priority-active-indicator>Y</priority-active-indicator>
      </priority-claim>
      <priority-claim data-format="questel" sequence="1">
        <doc-number>1996JP-0346380</doc-number>
      </priority-claim>
      <priority-claim kind="national" sequence="2">
        <country>JP</country>
        <doc-number>1068097</doc-number>
        <kind>A</kind>
        <date>19970123</date>
        <priority-active-indicator>Y</priority-active-indicator>
      </priority-claim>
      <priority-claim data-format="questel" sequence="2">
        <doc-number>1997JP-0010680</doc-number>
      </priority-claim>
    </priority-claims>
    <dates-of-public-availability>
      <publication-of-grant-date>
        <date>20010130</date>
      </publication-of-grant-date>
    </dates-of-public-availability>
    <classifications-ipcr>
      <classification-ipcr sequence="1">
        <text>B60T   8/88        20060101A I20051008RMEP</text>
        <ipc-version-indicator>
          <date>20060101</date>
        </ipc-version-indicator>
        <classification-level>A</classification-level>
        <section>B</section>
        <class>60</class>
        <subclass>T</subclass>
        <main-group>8</main-group>
        <subgroup>88</subgroup>
        <classification-value>I</classification-value>
        <generating-office>
          <country>EP</country>
        </generating-office>
        <classification-status>R</classification-status>
        <classification-data-source>M</classification-data-source>
        <action-date>
          <date>20051008</date>
        </action-date>
      </classification-ipcr>
    </classifications-ipcr>
    <classification-national>
      <country>US</country>
      <main-classification>
        <text>701078000</text>
        <class>701</class>
        <subclass>078000</subclass>
      </main-classification>
      <further-classification sequence="1">
        <text>303122000</text>
        <class>303</class>
        <subclass>122000</subclass>
      </further-classification>
      <further-classification sequence="2">
        <text>303136000</text>
        <class>303</class>
        <subclass>136000</subclass>
      </further-classification>
      <further-classification sequence="3">
        <text>303146000</text>
        <class>303</class>
        <subclass>146000</subclass>
      </further-classification>
      <further-classification sequence="4">
        <text>303191000</text>
        <class>303</class>
        <subclass>191000</subclass>
      </further-classification>
      <further-classification sequence="5">
        <text>701070000</text>
        <class>701</class>
        <subclass>070000</subclass>
      </further-classification>
      <further-classification sequence="6">
        <text>701071000</text>
        <class>701</class>
        <subclass>071000</subclass>
      </further-classification>
      <further-classification sequence="7">
        <text>701080000</text>
        <class>701</class>
        <subclass>080000</subclass>
      </further-classification>
      <further-classification sequence="8">
        <text>702140000</text>
        <class>702</class>
        <subclass>140000</subclass>
      </further-classification>
      <further-classification sequence="9">
        <text>702183000</text>
        <class>702</class>
        <subclass>183000</subclass>
      </further-classification>
    </classification-national>
    <classifications-ecla>
      <classification-ecla sequence="1">
        <text>B60T-008/88B</text>
        <section>B</section>
        <class>60</class>
        <subclass>T</subclass>
        <main-group>008</main-group>
        <subgroup>88B</subgroup>
      </classification-ecla>
    </classifications-ecla>
    <patent-classifications>
      <patent-classification sequence="1">
        <classification-scheme office="EP" scheme="CPC">
          <date>20130101</date>
        </classification-scheme>
        <classification-symbol>B60T-008/885</classification-symbol>
        <section>B</section>
        <class>60</class>
        <subclass>T</subclass>
        <main-group>8</main-group>
        <subgroup>885</subgroup>
        <symbol-position>F</symbol-position>
        <classification-value>I</classification-value>
        <classification-status>B</classification-status>
        <classification-data-source>H</classification-data-source>
        <action-date>
          <date>20130101</date>
        </action-date>
      </patent-classification>
      <patent-classification sequence="2">
        <classification-scheme office="EP" scheme="CPC">
          <date>20130101</date>
        </classification-scheme>
        <classification-symbol>B60T-2270/413</classification-symbol>
        <section>B</section>
        <class>60</class>
        <subclass>T</subclass>
        <main-group>2270</main-group>
        <subgroup>413</subgroup>
        <symbol-position>L</symbol-position>
        <classification-value>A</classification-value>
        <classification-status>B</classification-status>
        <classification-data-source>H</classification-data-source>
        <action-date>
          <date>20130101</date>
        </action-date>
      </patent-classification>
      <patent-classification sequence="3">
        <classification-scheme office="EP" scheme="ICO"/>
        <classification-symbol>L60T-270/413</classification-symbol>
      </patent-classification>
    </patent-classifications>
    <number-of-claims>7</number-of-claims>
    <exemplary-claim>1</exemplary-claim>
    <figures>
      <number-of-drawing-sheets>37</number-of-drawing-sheets>
      <number-of-figures>50</number-of-figures>
      <image-key data-format="questel">US6182001</image-key>
    </figures>
    <invention-title format="original" lang="en" id="title_en">Braking estimation device, anti-lock brake controller, and braking pressure controller</invention-title>
    <references-cited>
      <citation srep-phase="examiner">
        <patcit num="1">
          <text>OCHIAI T</text>
          <document-id>
            <country>US</country>
            <doc-number>3762775</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US3762775</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="examiner">
        <patcit num="2">
          <text>HOLST HANS, et al</text>
          <document-id>
            <country>US</country>
            <doc-number>4925254</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US4925254</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="examiner">
        <patcit num="3">
          <text>KUWANA KAZUTAKA, et al</text>
          <document-id>
            <country>US</country>
            <doc-number>5051907</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5051907</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="examiner">
        <patcit num="4">
          <text>WATANABE MASAO, et al</text>
          <document-id>
            <country>US</country>
            <doc-number>5109339</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5109339</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="examiner">
        <patcit num="5">
          <text>WATANABE MASAO</text>
          <document-id>
            <country>US</country>
            <doc-number>5187666</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5187666</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="examiner">
        <patcit num="6">
          <text>SHIMADA KOUSAKU, et al</text>
          <document-id>
            <country>US</country>
            <doc-number>5219212</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5219212</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="examiner">
        <patcit num="7">
          <text>KATAYOSE SHINJI, et al</text>
          <document-id>
            <country>US</country>
            <doc-number>5255193</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5255193</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="examiner">
        <patcit num="8">
          <text>OKUBO SATOMI</text>
          <document-id>
            <country>US</country>
            <doc-number>5271666</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5271666</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="examiner">
        <patcit num="9">
          <text>KIDSTON KEVIN S, et al</text>
          <document-id>
            <country>US</country>
            <doc-number>5281009</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5281009</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="examiner">
        <patcit num="10">
          <text>MENARD CHRISTIAN</text>
          <document-id>
            <country>US</country>
            <doc-number>5302009</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5302009</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="examiner">
        <patcit num="11">
          <text>NAITO YASUO, et al</text>
          <document-id>
            <country>US</country>
            <doc-number>5493495</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5493495</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="examiner">
        <patcit num="12">
          <text>HIGASHIMATA AKIRA, et al</text>
          <document-id>
            <country>US</country>
            <doc-number>5660449</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5660449</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="examiner">
        <patcit num="13">
          <text>STRIEGEL THOMAS, et al</text>
          <document-id>
            <country>US</country>
            <doc-number>5865514</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5865514</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="examiner">
        <patcit num="14">
          <text>ONOGI NOBUYOSHI, et al</text>
          <document-id>
            <country>US</country>
            <doc-number>5878365</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5878365</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="examiner">
        <patcit num="15">
          <text>MIYAZAKI NAGAO</text>
          <document-id>
            <country>US</country>
            <doc-number>5938713</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5938713</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="applicant">
        <patcit num="16">
          <text>UMENO TAKAJI, et al</text>
          <document-id>
            <country>US</country>
            <doc-number>5412584</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5412584</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="applicant">
        <patcit num="17">
          <text>ASANO KATSUHIRO, et al</text>
          <document-id>
            <country>US</country>
            <doc-number>5588721</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5588721</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="applicant">
        <patcit num="18">
          <text>TOYODA CHUO KENKYUSHO KK</text>
          <document-id>
            <country>EP</country>
            <doc-number>0699568</doc-number>
            <kind>A2</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>EP-699568</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="applicant">
        <patcit num="19">
          <text>TOYOTA MOTOR CO LTD, et al</text>
          <document-id>
            <country>EP</country>
            <doc-number>0719663</doc-number>
            <kind>A1</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>EP-719663</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="applicant">
        <patcit num="20">
          <text>AKEBONO RES &amp; DEV CENTRE</text>
          <document-id>
            <country>JP</country>
            <doc-number>H03118263</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>JP03118263</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="applicant">
        <patcit num="21">
          <text>NISSAN MOTOR</text>
          <document-id>
            <country>JP</country>
            <doc-number>H06286590</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>JP06286590</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="applicant">
        <patcit num="22">
          <text>BOSCH GMBH ROBERT</text>
          <document-id>
            <country>JP</country>
            <doc-number>H07186918</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>JP07186918</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="applicant">
        <patcit num="23">
          <text>SHARP KK</text>
          <document-id>
            <country>JP</country>
            <doc-number>H07220920</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>JP07220920</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="applicant">
        <patcit num="24">
          <text>BOSCH GMBH ROBERT</text>
          <document-id>
            <country>JP</country>
            <doc-number>H0834329</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>JP08034329</doc-number>
          </document-id>
        </patcit>
      </citation>
    </references-cited>
    <parties>
      <applicants>
        <applicant data-format="original" app-type="applicant" sequence="1">
          <addressbook lang="en">
            <orgname>Kabushiki Kaisha Toyota Chuo Kenkyusho</orgname>
            <address>
              <address-1>Aichi-gun, JP</address-1>
              <city>Aichi-gun</city>
              <country>JP</country>
            </address>
          </addressbook>
          <nationality>
            <country>JP</country>
          </nationality>
        </applicant>
        <applicant data-format="questel" app-type="applicant" sequence="2">
          <addressbook lang="en">
            <orgname>TOYOTA CENTRAL RESEARCH &amp; DEVELOPMENT LABS</orgname>
          </addressbook>
          <nationality>
            <country>JP</country>
          </nationality>
        </applicant>
      </applicants>
      <inventors>
        <inventor data-format="original" sequence="1">
          <addressbook lang="en">
            <name>Sugai, Masaru</name>
            <address>
              <address-1>Aichi-ken, JP</address-1>
              <city>Aichi-ken</city>
              <country>JP</country>
            </address>
          </addressbook>
          <nationality>
            <country>JP</country>
          </nationality>
        </inventor>
        <inventor data-format="original" sequence="2">
          <addressbook lang="en">
            <name>Asano, Katsuhiro</name>
            <address>
              <address-1>Aichi-ken, JP</address-1>
              <city>Aichi-ken</city>
              <country>JP</country>
            </address>
          </addressbook>
          <nationality>
            <country>JP</country>
          </nationality>
        </inventor>
        <inventor data-format="original" sequence="3">
          <addressbook lang="en">
            <name>Umeno, Takaji</name>
            <address>
              <address-1>Aichi-ken, JP</address-1>
              <city>Aichi-ken</city>
              <country>JP</country>
            </address>
          </addressbook>
          <nationality>
            <country>JP</country>
          </nationality>
        </inventor>
        <inventor data-format="original" sequence="4">
          <addressbook lang="en">
            <name>Ono, Eiichi</name>
            <address>
              <address-1>Aichi-ken, JP</address-1>
              <city>Aichi-ken</city>
              <country>JP</country>
            </address>
          </addressbook>
          <nationality>
            <country>JP</country>
          </nationality>
        </inventor>
        <inventor data-format="original" sequence="5">
          <addressbook lang="en">
            <name>Yamaguchi, Hiroyuki</name>
            <address>
              <address-1>Aichi-ken, JP</address-1>
              <city>Aichi-ken</city>
              <country>JP</country>
            </address>
          </addressbook>
          <nationality>
            <country>JP</country>
          </nationality>
        </inventor>
      </inventors>
      <agents>
        <agent sequence="1" rep-type="agent">
          <addressbook lang="en">
            <orgname>Oblon, Spivak, McClelland, Maier &amp; Neustadt, P.C.</orgname>
          </addressbook>
        </agent>
      </agents>
    </parties>
    <examiners>
      <primary-examiner>
        <name>Louis-Jacques, Jacques H.</name>
      </primary-examiner>
    </examiners>
    <lgst-data>
      <lgst-status>LAPSED</lgst-status>
    </lgst-data>
  </bibliographic-data>
  <abstract format="original" lang="en" id="abstr_en">
    <p id="P-EN-00001" num="00001">
      <br/>
      An apparatus for diagnosing a fault in a dynamic system includes a controller which controls the dynamic system through use of a control input signal and vibrates the dynamic system through use of an vibration signal irrelevant to the internal state quantity of the dynamic system; an observer for estimating, on the basis of a response output from the vibration dynamic system, total disturbance which is a sum of an internal disturbance vector stemming from a fault in the dynamic system and a vibration disturbance vector occurring in the dynamic system through vibration; a correlation calculation unit which calculates cross-correlation between the thus-estimated total disturbance and the internal state quantity of the dynamic system and separates a component related to the internal disturbance from the total disturbance; and a diagnostic unit for diagnosing a fault in the dynamic system on the basis of the thus-separated component related to the internal disturbance.
      <br/>
      Since the dynamic system is vibrated, the response output can be increased even when there exists small external disturbance.
      <br/>
      As a result, a fault or a variation in air pressure in a tire can be highly accurately diagnosed.
    </p>
  </abstract>
  <description format="original" lang="en" id="desc_en">
    <heading>BACKGROUND OF THE INVENTION</heading>
    <p num="1">
      1.
      <br/>
      Field of the Invention
    </p>
    <p num="2">The present invention relates to a diagnostic apparatus for a dynamic system, and more particularly, to an apparatus for very accurately diagnosing faults in a dynamic system, the air pressure of a tire, and conditions around the tire by vibrating the dynamic system through use of vibration means provided in the diagnostic apparatus and on the basis of internal disturbance caused by a fault in the thus-vibrated dynamic system even in a case where the amount of external disturbance is small.</p>
    <p num="3">
      Further, the present invention relates to a braking pressure estimation device which estimates master cylinder pressure, mean braking pressure, and a micro-vibration component in the braking pressure on the basis of wheel speed information and without use of a braking pressure sensor, by taking note of the gain characteristics of a wheel speed and the braking pressure in a case where the braking pressure is minutely vibrated at a resonance frequency of a vibration system comprised of a vehicle body, a wheel, and a road surface.
      <br/>
      Still further, the present invention relates to an anti-lock brake controller which employs the braking pressure estimation device, as well as to a braking pressure controller capable of continually controlling braking pressure in a smooth manner.
    </p>
    <p num="4">2. Related Art</p>
    <p num="5">(Conventional Apparatus for Diagnosing a Dynamic System)</p>
    <p num="6">Japanese Patent Application Laid-open (JP-A) No. 7-98268 describes the following technique as an apparatus for diagnosing a dynamic system.</p>
    <p num="7">
      In the technique disclosed in the foregoing unexamined patent application, a total disturbance vector--which is the sum of an external disturbance vector exerted on a dynamic system from outside and an internal disturbance vector caused by a fault in the dynamic system--is estimated on the basis of a response output vector from the dynamic system.
      <br/>
      Further, an internal state quantity vector of the dynamic system is estimated.
      <br/>
      A component relevant to internal disturbance is separated from the total disturbance vector by calculation of the correlation between the thus-estimated total disturbance vector and the internal state quantity vector.
      <br/>
      Then, a part of the dynamic system corresponding to the thus-separated component relevant to the internal disturbance is specified as a fault.
    </p>
    <p num="8">
      The foregoing technique enables location of an area of the dynamic system to be examined through use of one observer, as well as estimation of the absence or presence of a fault in the area and the degree of the fault.
      <br/>
      As contrasted with a conventional generalized likelihood comparison test method, there is no need for this technique to examine a plurality of areas through use of a plurality of observers disposed so as to correspond to the areas, and hence the technique has an advantage of being capable of accurately sensing a fault with few calculations.
    </p>
    <p num="9">(Conventional Braking Pressure Estimation Device, and Anti-lock Brake Controller Utilizing the Braking Pressure Estimation Device)</p>
    <p num="10">
      With regard to a device which controls the braking force of wheels such as an anti-lock brake controller (hereinafter referred to as an ABS controller), the sensing of braking pressure is an important problem, and a higher degree of control of the braking pressure can be expected if the value of the braking pressure is known.
      <br/>
      As a method for sensing the braking pressure, there is a method of attaching pressure sensors comprising a semiconductor device or the like to each wheel cylinder.
      <br/>
      However, the pressure sensors are comparatively expensive, and attachment of the pressure sensors to each wheel cylinders is difficult in terms of cost.
    </p>
    <p num="11">
      To overcome such a difficulty, there has already been proposed a technique of estimating the wheel cylinder pressure of each wheel on the basis of the result of measurement of the pressure sensor attached to the master cylinder pressure.
      <br/>
      Japanese Patent Application Laid-open (JP-A) No. 7-186918 describes a braking pressure controller which employs a method of calculating the wheel cylinder pressure of each wheel from a measured supply pressure (e.g., master cylinder pressure) and the time period over which a valve is actuated.
      <br/>
      This method enables the estimation of the wheel cylinder pressure of each wheel solely by sensing the pressure of the master cylinder through use of one pressure sensor, thereby rendering the braking pressure controller advantageous in terms of cost.
    </p>
    <p num="12">
      However, in many widely-available ABS controllers, a pressure sensor is not attached even to the master cylinder.
      <br/>
      Therefore, even the foregoing wheel cylinder estimation technique that requires the attachment of a pressure sensor to only the master cylinder still adds to the cost.
      <br/>
      Further, there is needed a remedy for sensor failures in order to ensure the reliability of the pressure sensor, which also adds to the cost.
    </p>
    <p num="13">Japanese Patent Application Laid-open (JP-A) No. 6-286590 describes a method of estimating master cylinder pressure without use of a pressure sensor.</p>
    <p num="14">The technique described in the foregoing patent application discloses the following three methods for estimating master cylinder pressure.</p>
    <p num="15">
      (1) Assuming that there is a uniform increase in the master cylinder pressure as a result of a first reduction in hydraulic braking pressure, a variation  DELTA Pm (constant) in the master cylinder pressure is calculated.
      <br/>
      The master cylinder pressure is corrected through use of the thus--calculated variation  DELTA Pm.
    </p>
    <p num="16">
      (2) By utilization of a tendency for the variation in the master cylinder pressure to increase in accordance with a variation  DELTA S in slip rate so long as the value of the master cylinder pressure is large, the variation  DELTA Pm in the master cylinder pressure is calculated from the variation in the slip rate.
      <br/>
      Accordingly, as contrasted with the method described in (1) which is based on the assumption that the variation in the master cylinder pressure is constant, degree of accuracy of estimation is improved.
    </p>
    <p num="17">
      (3) The variation  DELTA Pm in the master cylinder is calculated from a variation  DELTA V'w0 in vehicle acceleration and the variation  DELTA S in the slip rate.
      <br/>
      The use of the variation  DELTA V'w0 in vehicle acceleration enables correction of the master cylinder pressure, even when slippage of wheels due to speed reduction has not yet occurred and therefore the master cylinder pressure Pm is low.
      <br/>
      Accordingly, as contrasted with the method described in (2), this method further improves the accuracy of estimation of master cylinder pressure.
    </p>
    <p num="18">(Conventional Hydraulic Braking Pressure Controller)</p>
    <p num="19">For an apparatus such as an ABS controller in which the braking force applied to the vehicle is controlled by the hydraulic pressure of the wheel cylinder, not only a reduction in the hydraulic braking pressure at the time of wheel lock, but also smooth continuous control of the hydraulic braking pressure is important.</p>
    <p num="20">The hydraulic braking pressure is controlled by pressure increase and decrease valves (such as those disposed in an ABS actuator shown in FIGS. 23A and 23B) that are controllable from outside by means of an electrical signal, or the like, and are interposed between the master cylinder--whose pressure is related to the depression of a brake pedal given by the driver--and the wheel cylinders which produce pressure for pressing brake pads; i.e., the actual braking force of the vehicle.</p>
    <p num="21">
      Under normal conditions, the pressure in the master cylinder is directly transmitted to the hydraulic pressure in the wheel cylinders by opening the pressure increase valves of the ABS actuator shown in FIGS. 23A and 23B, as well as by closing the pressure decrease valves of the same.
      <br/>
      If the hydraulic pressure in the wheel cylinders is excessively high, there is established a state (a pressure decrease mode) in which the pressure increase valve is closed and the pressure decrease valve is opened so that the pressure from the master cylinder is prevented from being transmitted to the wheel cylinders while the hydraulic pressure in the wheel cylinders is released to a reservoir tank.
      <br/>
      In order to allow the hydraulic pressure in the wheel cylinders to recover from the pressure-reduced state, there is established a state (a pressure hold mode) in which both the pressure increasing and reducing valves are closed to prevent the hydraulic pressure in the wheel cylinders from changing; a state (a pressure increase mode) in which only the pressure increase valve is opened to allow the master cylinder pressure to be directly transmitted to the wheel cylinders is inserted over a short period of time; and the time period of the pressure increase mode is gradually increased.
    </p>
    <p num="22">
      In an actual ABS control operation, if wheel lock is detected, the hydraulic pressure in the wheel cylinders is abruptly reduced through the pressure decrease mode which is continued for a comparatively long period of time.
      <br/>
      Subsequently, the hydraulic pressure is rather gradually increased by repeating the pressure hold mode and pressure increase mode.
      <br/>
      If wheel lock arises again during the course of an increase in the hydraulic pressure, the valve is controlled in the pressure decrease mode to thereby abruptly decrease the hydraulic pressure in the wheel cylinders.
      <br/>
      Subsequently, the operation mode is shifted to the pressure hold mode and the pressure increase mode.
    </p>
    <p num="23">For example, in the technique disclosed in Japanese Patent Application Laid-open (JP-A) No. 3-118263, for each pressure increase and reduction area, the pulse train pattern is switched through use of a plurality of maps as well as the relationship between wheel speed, acceleration/deceleration, and separately-determined target speed, as shown in FIGS. 24A and 24B.</p>
    <p num="24">
      Further, Japanese Patent Application Laid-open (JP-A) No. 8-34329 describes a technique of controlling mean hydraulic braking pressure on the basis of the operation frequency of a valve and a duty ratio between a pressure increase mode and a pressure decrease mode through use of a valve having only a pressure increase mode and a pressure decrease mode.
      <br/>
      This technique principally implements the pressure hold mode of a hydraulic braking pressure by actuating a valve at a comparatively high frequency through use of only the valve having a pressure increase mode and a pressure decrease mode.
      <br/>
      Further, the amplitude of micro-vibrations in the hydraulic braking pressure is controlled by changing the operation frequency of the valve.
    </p>
    <p num="25">
      In the foregoing technique described in Japanese Patent Application Laid-open (JP-A) No. 7-98268, a total disturbance vector of a dynamic system is estimated on the basis of a response output from the dynamic system stemming from the disturbance outside the dynamic system.
      <br/>
      For example, in a dynamic system comprising a suspension system and a wheel, the external disturbance exerted on wheels traveling on an a rough road surface is utilized as an input.
      <br/>
      Accordingly, in a case where the input stemming from the external disturbance is small such as that obtained when the wheels travel on a smooth road surface, the response output becomes small.
      <br/>
      Therefore, even if the output value is normalized, the accuracy of sensing of a fault or the accuracy of estimation of air pressure in the tire is reduced by a quantization error or the like.
    </p>
    <p num="26">
      In a case where the mean value of external disturbance obtained during a given period of time is zero or nearly zero, the foregoing conventional technique enables highly accurate separation of the component which is relevant to an internal disturbance vector and stems from a fault from a total disturbance vector.
      <br/>
      However, the statistical property of the external disturbance differs according to the state of a road surface, and sometimes the internal disturbance vector cannot be very accurately isolated.
    </p>
    <p num="27">
      Further, even in the case of the method (3) having the highest degree of accuracy among the techniques described in Japanese Patent Application (JP-A) No. 6-286590, since the method employs the variation  DELTA S in the slip rate, the relationship between the variation  DELTA S in the slip rate and the variation  DELTA Pm in the master cylinder pressure changes as a result of a variation in the coefficient of friction  MU  between the tire and the road surface.
      <br/>
      The calculation of the variation  DELTA Pm in the master cylinder pressure through use of a constant coefficient results in a reduction in the accuracy of estimation according to the state of the road surface.
    </p>
    <p num="28">
      In the conventional technique described in Japanese Patent Application Laid-open (JP-A) No. 3-118263, the hydraulic braking pressure is controlled by switching the pulse train pattern between the patterns shown in FIGS. 24A and 24B.
      <br/>
      For this reason, as shown in FIG. 24C, a vibration arises in the hydraulic pressure in the wheel cylinders at a comparatively low frequency (several hertz).
      <br/>
      This vibration imparts to the driver's pedal an unpleasant low frequency vibration called kickback and results in a great variation in vehicle behavior at a comparatively low frequency.
      <br/>
      As a result, the hydraulic braking pressure cannot be controlled smoothly.
    </p>
    <p num="29">The technique described in Japanese Patent Application Laid-open (JP-A) No. 8-34329 cannot be applied to the anti-lock brake control operation described in Japanese Patent Application Laid-open (JP-A) No. 7-220920 which utilizes the fact that the resonance characteristics of the resonance system comprised of a vehicle body, a wheel, and a road surface change according to the state of grip of the wheel on the road surface, because it is impossible to change the frequency of vibration at the resonance frequency of the system.</p>
    <heading>SUMMARY OF THE INVENTION</heading>
    <p num="30">The present invention has been contrived in view of the aforementioned drawbacks, and an object of the present invention is to provide a diagnostic apparatus for a dynamic system which is capable of constantly sensing a fault highly accurately even in a case where there is a small amount of disturbance and of highly accurately diagnosing the air pressure in the tire or the conditions of elements around the tire irrespective of the state of a road surface.</p>
    <p num="31">Another object of the present invention is to provide a braking pressure estimation device capable of stably estimating braking pressure highly accurately irrespective of the state of a road surface and without use of a pressure sensor, as well as an anti-lock brake controller which uses this braking pressure estimation device.</p>
    <p num="32">Still another object of the present invention is to provide a braking pressure controller which reduces unpleasant vibration felt by the driver or a variation in vehicle behavior by continuously controlling a hydraulic braking pressure in a smooth manner.</p>
    <p num="33">To accomplish the aforementioned objects, in accordance with a first aspect of the present invention, there is provided a diagnostic apparatus for a dynamic system to detect a fault in the dynamic system, comprising: vibration means for vibrating the dynamic system through use of a vibration signal unrelated to an internal state quantity vector of the dynamic system; disturbance estimating means for estimating a total disturbance vector which is the sum of an internal disturbance vector stemming from a fault in the dynamic system and a vibration disturbance vector occurring in the dynamic system as a result of vibration; correlation calculation means which calculates the correlation between the total disturbance vector and the internal state quantity vector and isolates a component relevant to internal disturbance from the total disturbance vector; and diagnostic means for diagnosing a fault in the dynamic system on the basis of the component relevant to the internal disturbance which is separated by the correlation calculation means.</p>
    <p num="34">The vibration means is capable of vibrating the dynamic system by use of a white signal (e.g., a so-called M-series signal) or a signal whose frequency is shifted (e.g., a signal which is shifted from a low frequency to a high frequency) as the vibration signal irrelevant to the internal state quantity vector of the dynamic system.</p>
    <p num="35">
      FIG. 1 shows the configuration of one example of the dynamic system diagnostic apparatus according to the present invention.
      <br/>
      A controller 12 also serving as an vibrator for vibrating the dynamic system inputs, as a control input 14, a signal (u+ DELTA u)--which is a sum of a control signal "u" for controlling the dynamic system 10 to a certain internal state and an vibration signal  DELTA u for vibrating the dynamic system 10--to the dynamic system 10 to be diagnosed by a diagnostic apparatus 30.
    </p>
    <p num="36">
      The internal state of the dynamic system 10 changes in accordance with the control signal "u" contained in the control input 14, so that a control output 16 changes.
      <br/>
      Further, the dynamic system 10 is vibrated in the vicinity of the established internal state.
      <br/>
      In the example shown in FIG. 1, the controller 12 controls the dynamic system 10 through use of the control output 16 as a feedback signal.
    </p>
    <p num="37">The controller 12 may be designed such that when the control output 16 is small, the controller 12 commences vibration control by means of the vibration signal  DELTA u or increases the vibration signal  DELTA u in order to increase the amplitude of vibration of the dynamic system, and that when the control output 16 is large because of great external disturbance, the controller 12 terminates vibration control by means of the vibration signal  DELTA u.</p>
    <p num="38">
      In FIG. 1, the dynamic system 10 has "n" internal state quantities (i.e., the degree of the dynamic system is "n"), and the foregoing control signal "u" represents a control input vector 14 which comprises "m" elements and is sent to the dynamic system 10.
      <br/>
      Reference symbol "y" represents a control output vector 16 which is output from the dynamic system 10 and comprises "p" elements.
      <br/>
      Further, reference symbol "d" represents an vibration disturbance vector 15 of the dynamic system 10 which is caused by vibration by the vibration signal  DELTA u in the vicinity of the controlled internal state.
    </p>
    <p num="39">
      Since the control input vector 14 has "m" elements, the dynamic system 10 is usually constructed in such a way that the vibration signal  DELTA u also comprises "m" elements.
      <br/>
      With such a configuration, the number of elements contained in the vibration disturbance vector 15 also becomes equal to "m." In order to highly accurately detect all faults in the dynamic system, the vibrator is desirably constructed in such a way that the vibration disturbance vector 15 comprises "n" elements which are equal in degree to the internal state quantity vector of the dynamic system 10.
    </p>
    <p num="40">
      As a result of such a configuration of the vibrator, the vibration disturbance vector 15 affects the dynamic system in the same way as does the vibration disturbance vector when the external disturbance having degree "n" is applied to the dynamic system 10.
      <br/>
      Even in a case where there is a small degree of external disturbance or no external disturbance at all, faults can be highly accurately detected by increasing a control output from the dynamic system.
    </p>
    <p num="41">The diagnostic apparatus 30 according to the present invention comprises disturbance estimating means 32, correlation calculation means 34, and diagnostic means 36 and is constructed so as to detect a fault in the dynamic system 10 as internal disturbance.</p>
    <p num="42">The disturbance estimating means 32 is constructed so as to estimate a total disturbance vector "w," which is a sum of an vibration disturbance vector "d" and an internal disturbance vector of the dynamic system 10, on the basis of at least the internal state quantity vector of the dynamic system 10 (i.e., a vector comprising various elements representing the internal state quantity of the dynamic system 10), as well as to output the thus-estimated total disturbance vector "w" to the correlation calculation means 34.</p>
    <p num="43">
      In FIG. 1, a control output vector "y" from the dynamic system 10 is input to the disturbance estimating means 32.
      <br/>
      The disturbance estimating means 32 estimates and calculates an internal state quantity vector "x" of the dynamic system 10 from the control output vector "y" and outputs the thus-calculated internal state quantity vector "x" to the correlation calculation means 34.
      <br/>
      The estimation and calculation of the internal state quantity vector "x" can be carried out in a case where the control output vector "y" comprises information which enables calculation of elements of the internal state quantity vector "x." The estimation and calculation of the internal state quantity vector "x" are carried out at the same time the total disturbance vector "w" is estimated.
      <br/>
      More specifically, a new internal state quantity comprising the total disturbance vector "w" and the state quantity vector "x" shown in Equation (4b), which will be described later, is calculated according to a conventional linear control theory (e.g., "Basic System Theory" by Furuta and Sano, Corona Co., Ltd., 1978, pp. 127 to 137).
    </p>
    <p num="44">If the amount of information contained in the control output vector "y" is insufficient for estimating the internal state quantity vector "x," it is desired that a sensor for sensing the internal state quantity be provided in the dynamic system 10, as required, and an output from the sensor be input to the disturbance estimating means 32.</p>
    <p num="45">In a case where the information regarding the internal state quantity vector "x" can be directly determined from the control output vector "y" from the dynamic system 10 or the internal state quantity sensor provided, as required, in the dynamic system 10, it is desired that internal state quantity "x" be directly output to the correlation calculation means 34.</p>
    <p num="46">The correlation calculation means 34 calculates the correlation between the elements of the estimated total disturbance vector "w" and the elements of the internal state quantity vector "x" and separates the component relevant to internal disturbance from the elements of the total disturbance vector "w." The thus-separated component relevant to the internal disturbance is output to the diagnostic means 36.</p>
    <p num="47">The diagnostic means 36 is formed so as to localize the areas of the dynamic system 10 to be examined on the basis of the thus-separated component relevant to internal disturbance and to determine the state of these areas.</p>
    <p num="48">Preferably, the correlation estimating means 34 is formed so as to calculate the correlation corresponding to a plurality of elements of the total disturbance vector "w" and to separate the component relevant to internal disturbance from the plurality of elements of the total disturbance vector "w."</p>
    <p num="49">
      The elements of the thus-separated component relevant to internal disturbance correspond to the faults occurred in the dynamic system 10.
      <br/>
      For this reason, on the basis of the elements of the thus-separated component relevant to the internal disturbance, the diagnostic means 36 is capable of detecting and locating a fault in the dynamic system 10.
    </p>
    <p num="50">In such a case, preferably, the diagnostic means 36 is formed so as to comprise a memory section 40--in which are previously stored reference values for diagnosis purposes corresponding to the respective elements of the component relevant to internal disturbance--and a fault locating section 38 which locates a fault in the dynamic system 10 by comparing the elements of the separated component relevant to internal disturbance with the corresponding reference value.</p>
    <p num="51">
      In a case where the controller 12 controls neither vibration in accordance with the control output 16 nor the dynamic system, the diagnostic apparatus can be formed with a configuration such as that shown in FIG. 2.
      <br/>
      More specifically, an vibrater 13 which serves solely as vibration means is provided in place of the controller 12, and the disturbance estimating means 32 estimates a total disturbance vector on the basis of the control output 16.
    </p>
    <p num="52">The dynamic system diagnostic apparatus according to the present invention has the foregoing configuration, and its operation will now be described.</p>
    <p num="53">First, the disturbance estimating means 32 will be described.</p>
    <p num="54">
      If a fault arises in the dynamic system 10 to be examined, the internal state quantity of the dynamic system 10 shows a response differing from that which is output when the dynamic system 10 is in a normal condition.
      <br/>
      In a sense, such a response can be considered to be a sum of a response output in answer to vibration disturbance in a normal condition and a certain type of disturbance corresponding to the fault.
      <br/>
      The disturbance is not exerted to the dynamic system 10 from outside but occurs in the dynamic system 10.
      <br/>
      The disturbance estimating means 32 estimates the response as total disturbance vector "w," which is a sum of the internal disturbance stemming from the fault and the vibration disturbance.
    </p>
    <p num="55">
      The principle of estimation of disturbance by the disturbance estimating means 32 will now be described.
      <br/>
      The following description is based on the assumption that external disturbance is considerably smaller than vibration disturbance or does not exist at all.
    </p>
    <p num="56">
      First, presume that the dynamic system 10 is represented by the following equation of state.
      <br/>
      x(t)=Ax(t)+Bu(t)+d(t)
      <br/>
      y(t)=Cx(t)  (1)
    </p>
    <p num="57">
      Here, x(t) represents an internal state quantity vector of the dynamic system 10 to be examined; u(t) represents a control input vector; y(t) represents a control output vector; and d(t) represents a pure vibration disturbance vector because it ignores external disturbance.
      <br/>
      Further, matrices A, B, and C represent matrices of constants determined by the structure of the dynamic system 10 to be examined (i.e., parameters of a system constituting the dynamic system to be examined).
    </p>
    <p num="58">
      The vibration disturbance vector d(t) is related to an vibration input vector  DELTA u(t) by the following equation.
      <br/>
      d(t)=B *  DELTA u(t)
    </p>
    <p num="59">Equation (1) is expressed as  (Equation image '1' not included in text)</p>
    <p num="60">
      The dynamic system 10 to be examined when it is in an anomalous condition can be equivalently expressed through use of variations in matrices A and B (or variations in the parameters).
      <br/>
      More specifically, given that the matrix A is changed by  DELTA A(t) and the matrix B is changed by  DELTA B(t) due to a fault, the object to be examined, or the dynamic system 10, with a fault can be expressed as follows:
      <br/>
      x(t)=Ax(t)+Bu(t)++ DELTA A(t) * (t)+ DELTA B(t)u(t)+d(t)}
      <br/>
      =Ax(t)+Bu(t)+Dw(t)  (2)
    </p>
    <p num="61">where Dw(t) is represented by the following expression.</p>
    <p num="62">Dw(t)= DELTA A(t) * (t)+ DELTA B(t)u(t)+d(t)  (3)</p>
    <p num="63">
      where the matrix D represents in which of channels of the dynamic system 10 disturbance arises as a result of a fault.
      <br/>
      The matrix D is set so as to correspond to the channel in which vibration disturbance enters and to an estimated fault.
    </p>
    <p num="64">
      If there are changes in the matrices A and B as a result of a fault, the vibration disturbance d(t) is given by the following expression.
      <br/>
      d(t)=B *  DELTA u(t)+ DELTA B *  DELTA u(t)
    </p>
    <p num="65">
      More specifically, the vibration disturbance d(t) comprises a component  DELTA B *  DELTA u(t) newly developed as a result of the fault.
      <br/>
      In terms of diagnosis accuracy, the vibration disturbance d(t) is desirably irrelevant to the influence of the fault.
      <br/>
      Therefore, the vibration input  DELTA u(t) is made as micro as possible--in which case the term of  DELTA B *  DELTA u(t) can be ignored--within the range in which the control output "y" is not reduced smaller than a predetermined value.
    </p>
    <p num="66">
      If  DELTA u can be observed, u+ DELTA u can be handled as an input for the dynamic system 10.
      <br/>
      Consequently, vibration input is not required to become micro to such an extent that it can be ignored.
      <br/>
      In this case, d(t) is external disturbance alone.
    </p>
    <p num="67">Equations (2) and (3) are represented as the following equation by a general matrix.  (Equation image '2' not included in text)</p>
    <p num="68">In this way, the response of state vector from the dynamic system 10 to be examined in a faulty condition can be represented by the sum of a response +Ax(t)+Bu(t)} from the dynamic system 10 in a normal condition and disturbance +Dw(t)}. The disturbance estimating means 32 is configured so as to estimate the disturbance Dw(t).</p>
    <p num="69">The disturbance is estimated in the following way.</p>
    <p num="70">
      In a first step, there is formed an extended system of the dynamic system 10 which includes disturbance w(t) in the state thereof.
      <br/>
      To this end, the following supposition is made with respect to the disturbance w(t), and the disturbance w(t) is added to the state of the dynamic system 10.
      <br/>
      w(t)=0  (4)
    </p>
    <p num="71">As a result, the extended system of the dynamic system which includes the disturbance w(t) is written as follows;  (Equation image '3' not included in text)</p>
    <p num="72">In a second step, the state represented by xTwTT in Equation (4b) is estimated and calculated through use of a conventional linear control theory.</p>
    <p num="73">
      As shown in FIG. 5, the supposition of Equation (4) signifies that disturbance 100 which originally changes continually is approximated such that it changes stepwise as indicted by 110 in FIG. 5.
      <br/>
      The accuracy of approximation of disturbance improves as the width of each step becomes narrower.
      <br/>
      The width of the step corresponds to the time period over which the disturbance estimating means 32 estimates disturbance.
      <br/>
      In practice, the time period over which the disturbance estimating means 32 estimates disturbance can be reduced to a very short period of time compared with the speed at which the disturbance changes.
      <br/>
      Accordingly, the approximation of disturbance is sufficiently practicable.
    </p>
    <p num="74">In this way, so long as the extended system can be observed, the disturbance estimating means 32 can estimate an unmeasurable state and the disturbance corresponding to a fault, even in a case where the entire state of the dynamic system to be examined cannot be measured.</p>
    <p num="75">Next, the correlation calculation means 34 will be described.</p>
    <p num="76">As previously described, the total disturbance vector w(t) estimated by the disturbance estimating means 32 is a combination of the internal disturbance caused by a fault in the dynamic system 10 and vibration disturbance "d" occurring in the dynamic system 10 as a result of vibration regardless of whether the dynamic system 10 is in a normal or anomalous condition.</p>
    <p num="77">
      The vibration disturbance "d" is a vibration caused by a signal irrelevant to the internal state quantity vector and has the feature that a mean value obtained by averaging the vibration disturbance over a given period of time becomes zero when the dynamic system is vibrated through use of a white signal.
      <br/>
      In consideration of this feature, calculation is performed in the present invention in order to separate from the estimated total disturbance w(t) a component which is relevant to internal disturbance (i.e., variable components  DELTA A and  DELTA B of the parameters) and stems from a fault.
      <br/>
      A representative method of such a calculation is the least square method.
    </p>
    <p num="78">
      First, the following expression is defined by Equation (3).
      <br/>
      THETA T = DELTA A DELTA B,  ZETA T =XT UT  (5)
    </p>
    <p num="79">THETA  which minimizes the following equation  (Equation image '4' not included in text)</p>
    <p num="80">
      is calculated from N data items through use of the least square method.
      <br/>
      Such  THETA  is obtained by partially differentiating Equation (6) with  THETA  and by taking the thus-obtained equation as zero, and is expressed as  (Equation image '5' not included in text)
    </p>
    <p num="81">Further, if Equation (7) is transformed to a recurrence formula, the formula will be written as  (Equation image '6' not included in text)   THETA (N)= THETA (N-1)-+ GAMMA (N-1) ZETA (N)}/+1+ ZETA T (N) GAMMA (N-1) ZETA (N)} * e(N)</p>
    <p num="82">
      where e(N)= ZETA T (N) THETA (N-1)-Dw(N);  THETA  corresponds to a directional vector; and  ZETA  corresponds to a basis vector.
      <br/>
      As a result, the variable components  DELTA A and  DELTA B of the parameters can be sequentially estimated.
    </p>
    <p num="83">
      Next, a specific example of calculation of correlation is explained with reference to a case where there is no correlation between the vector  ZETA  and the elements.
      <br/>
      In this case, the component relevant to internal disturbance can be separated from the total disturbance w(t) by calculating the correlation between the total disturbance w(t) and the internal state quantity x(t) irrelevant to vibration disturbance.
    </p>
    <p num="84">For example, the i-th element of an estimated value of the disturbance vector w(t) is represented by the following equation.</p>
    <p num="85">Wi = DELTA ai1 X1 + DELTA ai2 X2 +. . . + DELTA bi1 U1 +. . . +di  (8)</p>
    <p num="86">where Wi represents an estimated value of disturbance wi.</p>
    <p num="87">As is evident from Equation (8), the i-th element of the estimated disturbance is a linear combination of a quantity  DELTA aij representing a fault in the dynamic system 10 and elements x1, x2 . . . of the internal state quantity vector x(t).</p>
    <p num="88">
      In order to determine the quantity of the fault from the i-th element of the estimated disturbance, the cross-correlation between the i-th element of the estimated disturbance and the internal state quantity of the dynamic system 10 is calculated.
      <br/>
      At this time, the internal state quantity of the dynamic system used for calculation of the cross-correlation may be a value directly measured by a sensor, or the like, provided in the dynamic system 10 or, as previously described, a value estimated by the disturbance estimating means 32.
    </p>
    <p num="89">
      First, an explanation will be given of the calculation of a cross-correlation function between the i-th element of the estimated disturbance and the j-th element xj of the internal state quantity vector "x" represented by Equation (8).
      <br/>
      The cross-correlation function is defined by the following formula.
    </p>
    <p num="90">C(Wi, xj) DELTA Cij= DELTA aijvi</p>
    <p num="91">As previously mentioned, this description is based on the assumption that there is no correlation between the elements of the vibration disturbance vector d(t) and the elements of the internal state quantity vector x.</p>
    <p num="92">The cross-correlation function and the autocorrelation function are represented by the following formulae.  (Equation image '7' not included in text)</p>
    <p num="93">The values used in Equation (9) are represented by the following formulae.  (Equation image '8' not included in text)</p>
    <p num="94">
      The calculation which employs Equation (8) is based on the assumption that the internal state quantity xj is directly measured through use of a sensor, or the like.
      <br/>
      In contrast, in a case where the internal state quantity xj is not directly measured, a cross-correlation function is desirably calculated from the value estimated by the disturbance estimating means 32 by the following equation.  (Equation image '9' not included in text)
    </p>
    <p num="95">where xj represents an estimated value of xj.  (Equation image '10' not included in text)</p>
    <p num="96">
      The disturbance estimating means 32 is capable of estimating the internal state quantity xj of the dynamic system 10 without errors regardless of the existence of a fault, external disturbance, or vibration disturbance.
      <br/>
      Consequently, even in a case where the cross-correlation function as represented by Equations (10) and (11) is used, there can be obtained a result which is substantially the same as that obtained by use of the directly-measured internal state of the dynamic system.
    </p>
    <p num="97">Next, the diagnostic means 36 will be described.</p>
    <p num="98">
      The diagnostic means 36 detects a fault and localizes the position of the fault by means of the correlation function Cij which is calculated by the correlation calculation means 34 and represents a component relevant to internal disturbance.
      <br/>
      More specifically, the diagnostic means 36 can detect a variable component  DELTA aji of the parameter by dividing the correlation function Cij by the autocorrelation vxj of the state to thereby normalize the correlation function Cij.
      <br/>
      This is expressed as follows:  (Equation image '11' not included in text)
    </p>
    <p num="99">When the mean value is taken as zero, the above formula becomes equivalent to Equation (7), which is based on the assumption that there is no correlation between elements of the vector  ZETA .</p>
    <p num="100">
      For example, the dynamic system 10 to be examined comprises constituent element I and constituent element II.
      <br/>
      It is assumed that the parameter expressing the constituent element I is provided at the first row-first column position of the matrix A of the dynamic system expressed by the equation of state (1), and that the parameters expressing the constituent element II is provided at the first row-first column position and the first row-second column position of the matrix A. At this time, if the correlation function C12, or  DELTA a12, takes on any value, it is immediately determined that a fault is present in the constituent element II.
      <br/>
      If the correlation function C12 takes on no value, and the function C11, or  DELTA a11, takes on any value, it is determined that a fault is present in the constituent element I.
    </p>
    <p num="101">As described above, according to the present invention, a fault occurring in any of the constituent elements constituting the dynamic system 10 is reliably detected, and the location of the fault can be correctly detected.</p>
    <p num="102">For a conventional technique for calculating a quantity corresponding to a fault from a residual between a state estimated by an observer and a directly measured state, it is impossible to localize the fault by means of a simple calculation such as the calculation of a correlation, because the relationship between the residual and the fault is not simple (i.e., the relationship cannot be represented by a simple equation such as Equation (8)).</p>
    <p num="103">According to the design of the disturbance estimating means 32, the present invention may take the following modes.</p>
    <p num="104">
      In a first mode, the entire internal state quantity x(t) of the dynamic system 10 can be measured through use of a sensor, or the like, and the disturbance estimating means 32 is formed so as to estimate only the total disturbance vector w(t).
      <br/>
      In this case, the degree of the disturbance estimating means 32 is required to correspond only to the degree of disturbance, and hence the disturbance estimating means 32 has the advantages of simple configuration and the highest degree of fault detection.
    </p>
    <p num="105">
      In a second mode, there may be a case where the internal state quantity x(t) of the dynamic system 10 can be partially measured or can be estimated by the disturbance estimating means without measurement.
      <br/>
      In such a case, the disturbance estimating means 32 is formed so as to estimate and calculate the total disturbance vector w(t) and the internal state quantity which cannot be measured or is not measured.
    </p>
    <p num="106">
      In this case, there is no need to measure a part of the internal state quantity of the dynamic system 10, thereby eliminating need for the sensor.
      <br/>
      The disturbance estimating means 32 estimates the internal state quantity which cannot be measured, as well as the quantity of disturbance.
      <br/>
      By use of the thus-estimated quantity in the calculation of a correlation, a fault can be measured in substantially the same way where the entire internal state of the dynamic system 10 is measured.
    </p>
    <p num="107">A third mode is directed to a case where a part of the internal state quantity x(t) of the dynamic system 10 cannot be measured, and the disturbance estimating means 32 estimates and calculates the total disturbance vector w(t) and the entire internal state quantity x(t) including an unmeasurable internal state quantity.</p>
    <p num="108">Even in this case, as in the second mode, the sensor can be eliminated, and a fault can be localized in substantially the same way where the overall internal state quantity of the dynamic system 10 is measured.</p>
    <p num="109">This mode has an advantage that the design of the disturbance estimating means 32 is slightly simplified compared with that in the second mode.</p>
    <p num="110">
      The calculation required for the first through third modes will be described in detail.
      <br/>
      First, as previously described with reference to the first mode, the overall internal state quantity of the dynamic system 10 is measured.
    </p>
    <p num="111">In this case, a mean value of the disturbance vector defined by Equation (8) is expressed by the following equation.  (Equation image '12' not included in text)</p>
    <p num="112">Accordingly, in a case where the entire internal state quantity of the dynamic system can be measured, the cross-correlation function between the estimated disturbance vector and the internal state quantity xj is written as follows:  (Equation image '13' not included in text)</p>
    <p num="113">Provided that no correlation exists between the quantities of state of the dynamic system, the terms included in Equation (12) are represented by the following formula.  (Equation image '14' not included in text)</p>
    <p num="114">Further, assuming that there is no correlation between the state of the dynamic system xj and the vibration disturbance, the following equation holds.  (Equation image '15' not included in text)</p>
    <p num="115">As a result, the value of the correlation function is finally expressed by the following equation.  (Equation image '16' not included in text)</p>
    <p num="116">As in the second and third modes, when the cross-correlation function is calculated from the value estimated by the disturbance estimating means 32, the calculation is expressed by the following formula.  (Equation image '17' not included in text)</p>
    <p num="117">Assuming that no correlation exists between the quantities of state of the dynamic system, the terms included in Equation (13) are represented as follows:  (Equation image '18' not included in text)</p>
    <p num="118">Consequently, the value of the above correlation function is expressed by the following equation.  (Equation image '19' not included in text)</p>
    <p num="119">Even by use of the thus-obtained correlation function, a fault and the location of the fault can be detected in a similar manner to that employed previously.</p>
    <p num="120">In a case where the control output becomes sufficiently large because of application of large external disturbance d', the controller 12 suspends the vibration control performed on the basis of the vibration signal  DELTA u. In this case, a fault and the location of the fault can be detected solely by replacing the vibration disturbance "d" in the foregoing equation with external disturbance d'.</p>
    <p num="121">
      In the diagnosis based on the previously-described principle, the disturbance estimating means for estimating the disturbance stemming from a fault as one state is used as the fault detection means.
      <br/>
      As a result, there are no fault detection speed/fault detection sensitivity trade-offs, and hence the fault detection speed and the fault detection sensitivity are both remarkably improved.
      <br/>
      Further, there is no need to use a plurality of observers corresponding to the number of faults, and a fault in an object to be examined can be localized with a high degree of sensitivity without measuring the entire state of the object, as required.
    </p>
    <p num="122">Further, since the relationship between the estimated disturbance and the location of the fault can be expressed by simple numerical equations, the external disturbance can be easily separated from the internal disturbance stemming from a fault by executing a simple calculation such as the calculation of a correlation between the estimated disturbance and the internal state quantity of the object, thereby enabling localization of the fault.</p>
    <p num="123">
      In this case, the internal state quantity used for calculation of a correlation can be represented by not only the internal state quantity of the object directly measured solely by a sensor, but also the internal state quantity of the object estimated by the disturbance estimating means at the same time it estimates disturbance, as required.
      <br/>
      As a result, detailed detection of a fault becomes feasible even when the entire internal state quantity of the object is not measured.
    </p>
    <p num="124">(2) Invention Directed to a Tire Air-pressure</p>
    <p num="125">Diagnostic Apparatus</p>
    <p num="126">Description of the Invention</p>
    <p num="127">Next, an explanation will be given of a case where the foregoing principle of the apparatus for diagnosing a dynamic system is applied to an apparatus for diagnosing the air pressure in the tire.</p>
    <p num="128">With reference to the previously-described dynamic system diagnostic apparatus shown in FIG. 1, the tire air-pressure diagnostic apparatus according to the present invention will be described in more detail.</p>
    <p num="129">
      In the present invention, the dynamic system 10 to be examined is a system comprising a suspension system and a wheel.
      <br/>
      If there are variations in the air pressure in a tire, the internal state quantity of the system differs from that obtained when the air pressure is normal.
      <br/>
      In a sense, the response output from the system when there are variations in the air pressure in the tire can be considered to be a sum of the response output from the system when the air pressure is normal and the internal disturbance corresponding to the variation in the air pressure.
      <br/>
      If this disturbance, or a total disturbance vector, is estimated by use of the disturbance estimating means 32, variations in the air pressure in the tire can be detected.
    </p>
    <p num="130">
      It is assumed that the dynamic system 10 comprising a suspension system and a wheel is expressed by the following equation of state.
      <br/>
      The following description is based on the assumption that the wheels receive a small degree of disturbance or no disturbance from the road surface.
      <br/>
      This situation corresponds to a case where the vehicle is traveling over a road in good condition.
    </p>
    <p num="131">
      X=Ax+Bu+d
      <br/>
      y=Cx  (14)
    </p>
    <p num="132">
      where reference symbol "x" represents an internal state quantity vector of the system 10; "u" represents a control input; and "y" represents a control output vector (an internal state quantity vector) directly detected by and output from the system 10.
      <br/>
      Further, reference symbol "d" represents vibration disturbance caused through vibration.
      <br/>
      Matrices A, B, C are matrices of constants determined by physical parameters of the system 10.
    </p>
    <p num="133">
      The vibration disturbance "d" is related to an vibration input  DELTA u according to the following equation.
      <br/>
      d=B *  DELTA u
    </p>
    <p num="134">
      Here, in a case where the suspension system is an active suspension system, the control input "u" can be handled as the quantity of actuation of the active suspension system.
      <br/>
      In this case, the quantity of actuation (u+ DELTA u)--which is the sum of the quantity of actuation "u" and the quantity of vibrating actuation  DELTA u for vibrating the active suspension system--is input to the active suspension system.
    </p>
    <p num="135">
      In other cases, the control input "u" can be handled as a mean braking force instruction sent to a control solenoid valve which applies braking force to the wheel cylinder of the wheel.
      <br/>
      In this case, an instruction (u+ DELTA u)--which is the sum of a mean braking force instruction "U" and an vibration instruction  DELTA u for vibrating the braking force--is input to a control solenoid valve.
      <br/>
      This method can be applied to both the active suspension system and a conventional passive suspension system.
    </p>
    <p num="136">As a matter of course, in the case of the active suspension system, the active suspension system and the braking force can be vibrated at the same time.</p>
    <p num="137">FIG. 3 shows the configuration of the tire air-pressure diagnostic apparatus in a case where vibration is controlled by means of braking force.</p>
    <p num="138">
      The tire air-pressure diagnostic apparatus shown in FIG. 3 is equipped with a braking force controlling means 190--which controls the braking force exerted on wheels--in lieu of the controller 12 shown in FIG. 1.
      <br/>
      The braking force control means 190 applies mean braking force Pm to the wheels in response to the braking force instruction "u," as well as minutely vibrated braking force Pv to the wheels in response to a micro-vibration braking force instruction  DELTA u which is irrelevant to the internal state quantity of the system 10.
      <br/>
      As a result, the braking force is minutely vibrated to the braking force Pv in the vicinity of the mean braking force Pm, and the vibration disturbance "d" is imparted to the system 10.
    </p>
    <p num="139">
      The braking force instruction "u" output from the braking force control means 190 is converted into the braking force Pm--which is actually exerted on the wheels--by way of transmission characteristics 192 and is input to the disturbance estimating means 32.
      <br/>
      The transmission characteristics 192 are represented by a transmission function H of a mechanism for converting the braking force instruction "u" into the actual braking force Pm.
    </p>
    <p num="140">
      The braking force control means 190 receives the control output 16 and determines whether or not to vibrate the braking force according to the value of the control output 16 in response to the micro-vibration braking force instruction  DELTA u. In a case where the braking force control means 190 does not determine whether or not to vibrate the braking force according to the control output 16, the tire air-pressure diagnostic apparatus is arranged so as to have a configuration such as that shown in FIG. 4.
      <br/>
      More specifically, an output terminal of the dynamic system which outputs a control output is not connected to the braking force control means 190.
    </p>
    <p num="141">
      The braking force control means 190 can be configured such that even in a case where the mean braking force Pm is not applied to the wheels (i.e., u=0, Pm=0), vibration of the braking force according to the micro-vibration braking force instruction  DELTA u is possible.
      <br/>
      The detailed configuration of the braking force control means 190 will be described later (FIGS. 20 to 21).
    </p>
    <p num="142">The present invention will be separately described with reference to a case where the system 10 receives an input "u" and to a case where the system 10 does not receive the input "u."</p>
    <p num="143">(Taking a system input into consideration)</p>
    <p num="144">
      In this case, variations in the air pressure in the tire, or the like, are converted into variations in physical parameters of the system 10.
      <br/>
      These variations can be expressed through use of variations in the matrix A. More specifically, if the matrix A is shifted by only  DELTA A by means of variations in the air pressure, the system after occurrence of variations in the air pressure is expressed as follows:  (Equation image '20' not included in text)
    </p>
    <p num="145">where Dw is expressed by the following equation.</p>
    <p num="146">Dw= DELTA Ax+d  (15)</p>
    <p num="147">
      From Equation (15), it is understood that variations in the air pressure in the tire induce new disturbance  DELTA Ax.
      <br/>
      Reference symbol D designates a matrix consisting of 0 and 1 and is set according to a channel--into which vibration disturbance enters--and to the source of disturbance stemming from variations in the parameter of the system 10.
    </p>
    <p num="148">
      As described above, a response of state vector output from the system when there are variations in the air pressure in the tire can be expressed as the sum of the response output when the air pressure is normal and the disturbance Dw (t).
      <br/>
      The disturbance estimating means 32 is configured so as to estimate the disturbance "w."
    </p>
    <p num="149">The disturbance estimating means 32 is configured in two steps as shown below.</p>
    <p num="150">
      In the first step is formed an extended system of the system whose state includes the disturbance w(t).
      <br/>
      To this end, the following supposition is made with regard to the disturbance w(t), and the disturbance w(t) is added to the state of the system 10 to be examined.
      <br/>
      w=0
    </p>
    <p num="151">As a result, the extended system of the system 10 which includes the disturbance "w" is expressed by the following equation.  (Equation image '21' not included in text)</p>
    <p num="152">
      In the second step, the estimating means 32 for estimating the state xTwt expressed by Equation (16) is configured through use of conventional linear control theory.
      <br/>
      The disturbance "w" is estimated by means of the thus-designed estimating means 32.
    </p>
    <p num="153">As has already been explained, the assumption of Equation (23) signifies that the disturbance w(t) which changes continually is approximated such that it changes stepwise as indicated by 110 in FIG. 5.</p>
    <p num="154">The disturbance estimating means 32 having the foregoing configuration can estimate an unmeasurable state and the disturbance corresponding to a fault even in a case where the entire internal state quantity vector x of the system 10 cannot be measured.</p>
    <p num="155">
      As is obvious from Equation (15), the disturbance estimated by the estimating means 32 is the sum of the vibration disturbance "d" stemming from vibration and the internal disturbance  DELTA Ax occurring in the system 10 as a result of variations in the air pressure in the tire.
      <br/>
      Equation (15) is expressed as a vector; for example, the first element of this vector is expressed by the following equation.
      <br/>
      Dw1 = DELTA D11 X1 + DELTA D12 X2 + . . . + DELTA a1j Xj + . . . +d1  (17)
    </p>
    <p num="156">where  DELTA a1j is the first row-jth column element of the matrix  DELTA A.</p>
    <p num="157">The disturbance estimating means 32 will be described specifically on the basis of Equation (17).</p>
    <p num="158">
      In Equation (17), assume that  DELTA a11 is an element stemming from variations in the air pressure in the tire, and other elements stem from variations in components other than the air pressure in the tire.
      <br/>
      In this case, it is understood that the internal disturbance stemming from variations in the air pressure in the tire depends on the state quantity x1.
      <br/>
      More specifically, in this case, the state quantity which affects the system 10 as a result of variations in the air pressure in the tire is x1.
    </p>
    <p num="159">
      In order to detect only the component--which is relevant to internal disturbance stemming from variations in the air pressure in the tire--by eliminating the vibration disturbance "d" from the disturbance Dw1 estimated by the estimating means 32, the cross-correlation between the estimated disturbance Dw1 and the internal state quantity x1 is calculated.
      <br/>
      The cross-correlation is calculated by means of the correlation calculation means 34.
      <br/>
      Provided that the cross-correlation calculated at this time is C(Dw1, w1), the value represented by the following expression is obtained.  (Equation image '22' not included in text)
    </p>
    <p num="160">where  CHI 1 is a mean value represented by  (Equation image '23' not included in text)</p>
    <p num="161">and N is the number of samples used for the calculation of a correlation.</p>
    <p num="162">
      As previously described, the term related to the vibration disturbance and the term related to the internal disturbance stemming from variations in components other than the air pressure are irrelevant to the internal state quantity x1.
      <br/>
      Accordingly, only the internal disturbance corresponding to variations in the air pressure in the tire can be extracted from the estimated disturbance "w" by calculation of the correlation expressed by Equation (18).
    </p>
    <p num="163">The thus-calculated correlation function takes on a value corresponding to the frequency component of internal disturbance stemming from only variations in the spring constant of the tire from among various frequency components included in the estimated disturbance "w." Accordingly, the amount of variation in the spring constant can be detected from the values calculated by the correlation function.</p>
    <p num="164">
      The correlation function expressed by Equation (18) can be represented by the product of item  DELTA a11 representing variations in the spring constant and the autocorrelation function of the state quantity represented by the following equation.
      <br/>
      For example, the diagnostic means 36 can quantitatively detect the amount of variation  DELTA a11 in the spring constant by dividing the cross-correlation function by the autocorrelation function of state quantity.  (Equation image '24' not included in text)
    </p>
    <p num="165">The diagnostic means 36 determines that the air pressure is anomalous when the thus-detected amount of variation  DELTA a11 in the spring constant reaches the amount of variation in the spring constant corresponding to the air pressure in the tire determined to be anomalous.</p>
    <p num="166">(Where there is no input to the system 10)</p>
    <p num="167">An explanation will now be given of a case where there is no input to the system 10, and the system 10 is only minutely vibrated.</p>
    <p num="168">
      In this case, the dynamic system 10 comprising the suspension system and the wheels is expressed by the following equation of state.
      <br/>
      x=Ax+d
      <br/>
      y=Cx.
    </p>
    <p num="169">
      Where "x" designates a state quantity vector of the system 10; "y" designates an output vector measured directly by means of a sensor of the system; and "d" designates vibration disturbance.
      <br/>
      The matrices A, B, and C are matrices of constants determined by physical parameters of the system 10.
      <br/>
      The system 10 is different from the active suspension system in that there is no input "u," expressed by Equation (14), to the system 10.
    </p>
    <p num="170">Given that the matrix A is shifted by  DELTA A because of variations in air pressure, the system after the air pressure has changed is expressed by the following equation.  (Equation image '25' not included in text)</p>
    <p num="171">
      where Dw is represented as
      <br/>
      Dw= DELTA Ax+d  (20)
    </p>
    <p num="172">From Equations (19) and (20), the extended system of the system 10 which includes the disturbance "w" is expressed by the following equation.  (Equation image '26' not included in text)</p>
    <p num="173">The system including the disturbance observer 32 is completely the same in configuration and operation as the active suspension system, with the exception of the input "u."</p>
    <p num="174">As described above, even in a case where there is no input to the system 10, as in the conventional suspension system, an anomaly in the air pressure in the tire can be detected.</p>
    <p num="175">The foregoing dynamic system diagnostic apparatus can also be applied to the diagnosis of the state of components around a tire (e.g., the damping force of a damper used in the suspension system, the eccentric state of a tire, the state of a wheel, the wear of the tire, and foreign objects cut into the tire).</p>
    <p num="176">
      As has been described above, according to a first aspect of the invention, since there is provided means for vibrating the dynamic system, the control output can be increased even when there is a small degree of external disturbance.
      <br/>
      As a result, there is yielded an advantage of the ability to highly accurately diagnose a fault or variations in the air pressure in the tire.
    </p>
    <p num="177">Further, according to the present invention, the dynamic system is vibrated with a signal irrelevant to a state quantity of the dynamic system, and hence there is yielded an advantage of the ability to constantly maintain a high degree of accuracy of fault detection compared with a diagnosing apparatus which utilizes external disturbance as an input.</p>
    <p num="178">To accomplish the aforementioned object, according to a second aspect of the present invention, there is provided a braking force estimation device, comprising; a first input means for receiving a wheel speed; a second input means for receiving a physical quantity which indicates the slipping ability of a wheel; braking pressure estimating means for estimating a mean braking pressure from an wheel speed and the physical quantity.</p>
    <p num="179">
      In the second aspect of the present invention, the braking pressure estimating means estimates a mean braking pressure from the wheel speed and the physical quantity.
      <br/>
      The physical quantity includes, the gradient of friction coefficient between the road surface and the wheel with respect to a slip speed, the gradient of braking force with respect to a slip speed, and the gradient of braking torque with respect to a slip speed.
    </p>
    <p num="180">
      As described above, in a second aspect of the present invention, the mean braking pressure is estimated from the wheel speed and the physical quantity.
      <br/>
      The coefficient of friction reaches its peak value when the physical quantity is zero regardless of the state of the road surface.
      <br/>
      In the present invention, regardless of the state of the road surface, the mean braking pressure can be stably estimated highly accurately without use of a pressure sensor.
    </p>
    <p num="181">According to a third aspect of the present invention, there is provided a braking force estimating device, comprising: first input means for receiving a wheel speed input; second input means for receiving a resonance gain which is a ratio of a micro amplitude of the wheel speed at a resonance frequency with respect to a micro amplitude of a braking pressure at the time of vibration of the braking pressure at the resonance frequency of a resonance system including a vehicle body, a wheel, and a road surface; a third input means for receiving a pressure increase/decrease time required to achieve a mean braking pressure with respect to a given master cylinder pressure or a physical quantity associated with the pressure increase/decrease time; braking pressure estimating means for estimating the mean braking pressure from the input wheel speed and a resonance gain on the basis of a model in which the gradient of braking torque with respect to a slip speed is proportional to the resonance gain; master cylinder pressure estimating means for estimating a master cylinder pressure on the basis of the mean braking pressure estimated by said braking pressure estimating means and the pressure increase/decrease time required to achieve the mean braking pressure or the physical quantity associated with the pressure increase/decrease time; and micro amplitude estimating means for estimating the micro amplitude of the braking pressure on the basis of the master cylinder pressure estimated by said master pressure estimating means and of the pressure increase/decrease time required to achieve the mean braking pressure or the physical quantity associated with the pressure increase/decrease time.</p>
    <p num="182">
      In the third aspect of the present invention, the braking pressure estimating means estimates a mean braking pressure from the input wheel speed and the resonance gain on the basis of a model in which the gradient of braking torque with respect to the slip speed is proportional to the resonance gain.
      <br/>
      Subsequently, the master cylinder pressure estimating means estimates master cylinder pressure on the basis of the estimated mean braking pressure and the pressure increase/decrease time required to achieve the input mean braking pressure or the physical quantity associated with the pressure increase/decrease time.
      <br/>
      The micro amplitude estimating means estimates the micro amplitude of the braking pressure on the basis of the master cylinder pressure estimated by the master cylinder pressure estimating means and of the pressure increase/decrease time required to achieve the input mean braking pressure or the physical quantity associated with the pressure increase/decrease time.
    </p>
    <p num="183">
      The pressure increase/decrease time required to achieve the mean braking pressure include a pressure increase time and a pressure decrease time of the valve which is controlled so as to apply the mean braking force.
      <br/>
      For example, the physical quantity associated with the pressure increase/decrease time includes a mean braking pressure (i.e., a mean braking pressure reference value which will be described later) corresponding to the pressure increase/decrease time and under which pressure the micro amplitude of the braking pressure becomes constant while the master cylinder pressure is constant.
    </p>
    <p num="184">
      As described above, in the third aspect of the present invention, master cylinder pressure is estimated from the mean braking pressure estimated on the basis of a model in which the friction-torque gradient is proportional to the resonance gain.
      <br/>
      The coefficient of friction reaches its peak value when the friction-torque gradient is zero regardless of the state of the road surface.
      <br/>
      In the present invention, regardless of the state of the road surface, the master cylinder pressure can be stably estimated highly accurately without use of a pressure sensor.
    </p>
    <p num="185">According to a fourth aspect of the present invention, there is provided an anti-lock brake controller comprising: wheel speed detection means for detecting a wheel speed; resonance gain calculation means for calculating a resonance gain which is the ratio of the micro amplitude of the wheel speed at a resonance frequency with respect to the micro amplitude of a braking pressure at the time of vibration of the braking pressure at the resonance frequency of a resonance system including a vehicle body, a wheel, and a road surface; braking pressure estimating means for estimating a mean braking pressure from the wheel speed detected by said wheel speed detection means and the resonance gain calculated by said resonance gain calculation means on the basis of a model in which the gradient of braking torque with respect to a slip speed is proportional to the resonance gain; master cylinder pressure estimating means for estimating master cylinder pressure on the basis of the mean braking pressure estimated by said braking pressure estimating means and a pressure increase/decrease time required to achieve the mean braking pressure or a physical quantity associated with the pressure increase/decrease time; micro amplitude estimating means for estimating the micro amplitude of the braking pressure on the basis of the master cylinder pressure estimated by said master pressure estimating means and the pressure increase/decrease time required to achieve the mean braking pressure or the physical quantity associated with the pressure increase/decrease time and for outputting the estimated micro amplitude of the braking pressure to said resonance gain calculation means; control means for controlling the pressure increase/decrease time required to achieve the mean braking pressure in such a way that the resonance gain calculated by said resonance gain calculation means matches or substantially matches a reference gain; and reference means for outputting to the master cylinder pressure estimating means the pressure increase/decrease time which is required to achieve the mean braking pressure and is controlled by said control means or the physical quantity associated with the pressure increase/decrease time.</p>
    <p num="186">
      In the fourth aspect, the aforementioned braking pressure estimating device is applied to an anti-lock brake controller.
      <br/>
      As a result, stable anti-lock braking operation becomes feasible by means of a simply-structured apparatus and without use of a pressure sensor regardless of the state of the road surface.
    </p>
    <p num="187">According to a fifth aspect of the present invention, there is provided a braking pressure controller comprising: a control valve equipped with a pressure increase valve for increasing the braking pressure exerted on a wheel cylinder and a pressure decrease valve for decreasing the braking pressure; and controlling means for controlling the control valve in such a way as to alternately switch, at a given cycle, between a first state, including a pressure increasing state in which the braking pressure is increased by the pressure increase valve and a pressure holding state in which the braking pressure is held, and a second state, including the state in which the braking pressure is decreased by the pressure decrease valve and, the pressure holding state and for controlling the periods for the pressure increasing state and pressure decreasing state of the control valve.</p>
    <p num="188">
      In the fifth aspect of the present invention, the first state including a pressure increasing state and the second state including a pressure decreasing state are alternatively switched at a given cycle.
      <br/>
      The braking pressure is controlled by controlling the pressure increase and decrease time periods in each of the states, thereby enabling continuous control of braking pressure.
      <br/>
      The cycle at which the states are switched is made constant, and hence the present invention is easily applied to an ABS system which controls anti-lock braking operation on the basis of variations in the resonance characteristics of the braking pressure by minutely vibrating the braking pressure.
      <br/>
      In the fifth aspect of the present invention, when the braking pressure is to be held, the pressure increase and decrease valves are both closed.
    </p>
    <p num="189">
      The braking pressure can be minutely vibrated to such an extent that resultant variations in the braking pressure do not provide the driver with unpleasant feeling by shortening the cycle at which the first and second states are switched (i.e., by increasing the cycle to a high frequency), thereby preventing kickback.
      <br/>
      As a result, vehicle behavior is not subjected to great variations.
      <br/>
      In a case where the anti-lock brake controller is applied to an ABS system, ABS control can be improved further.
    </p>
    <p num="190">The mean braking pressure can be continually controlled without changing the valve configuration which comprises two valves; i.e., a pressure increase valve and a pressure decrease valve, and is used in the current ABS system, thereby not requiring a change in hardware.</p>
    <p num="191">As has been described above, in the second aspect of the present invention, since the master cylinder pressure is estimated from the mean braking pressure estimated on the basis of the model in which the friction-torque gradient is proportional to the resonance gain, the present invention provides an advantage of being capable of stably estimating the master cylinder pressure highly accurately without use of a pressure sensor regardless of the state of the road surface.</p>
    <p num="192">
      Further, in the third aspect of the present invention, the master cylinder pressure is estimated from the mean braking pressure estimated on the basis of the model in which the friction-torque gradient is proportional to the resonance gain, and the resonance gain used for determining the state of the wheel immediately before wheel lock is calculated from the micro amplitude of the braking pressure obtained on the basis of the master cylinder pressure.
      <br/>
      As a result, the present invention provides an advantage that highly-accurate stable anti-lock braking operation is enabled regardless of the state of the road surface through use of a device having a simple structure without use of any pressure sensor.
    </p>
    <p num="193">
      In the fifth aspect of the present invention, the first state including the pressure increasing state and the second state including the pressure decreasing state are alternatively switched at a given cycle, and the braking pressure is controlled by adjusting the pressure increase and decrease time periods in each of the states.
      <br/>
      As a result, the present invention provides an advantage of enabling smooth and continuous braking pressure control.
    </p>
    <p num="194">
      Still further, in the fourth aspect of the present invention, the cycle at which1 the first and second states are switched is shortened, thereby resulting in still other advantages of suppressing variations in the braking pressure to such an extent as not to provide the driver with unpleasant feeling and of preventing great variations from arising in vehicle behavior.
      <br/>
      In a case where the anti-lock brake controller is applied to an ABS system, ABS control can be improved to a much greater extent.
      <br/>
      In addition, the mean braking pressure can be continually controlled without changing the valve configuration including two valves; i.e., a pressure increase valve and a pressure decrease valve, used in the conventional ABS system, thereby not requiring a change in hardware.
    </p>
    <heading>BRIEF DESCRIPTION OF THE DRAWINGS</heading>
    <p num="195">
      FIG. 1 is a block diagram showing a first example of a diagnostic apparatus of the present invention for a dynamic system;
      <br/>
      FIG. 2 is a block diagram showing a second example of a diagnostic of the present invention for a dynamic system;
      <br/>
      FIG. 3 is a block diagram showing the first example of a diagnostic apparatus of the present invention for a dynamic system composed of a wheel and a suspension system;
      <br/>
      FIG. 4 is a block diagram showing the second example of the diagnostic apparatus of the present invention for a dynamic system composed of a wheel and a suspension system;
      <br/>
      FIG. 5 is a curve showing a method of approximating disturbance used in a first embodiment;
      <br/>
      FIG. 6 is a schematic representation of a suspension system of a vehicle to be diagnosed in accordance with the first embodiment;
      <br/>
      FIG. 7 is a block diagram showing a diagnostic apparatus in accordance with a first mode of the first embodiment for diagnosing the suspension system model shown in FIG. 6;
      <br/>
      FIG. 8 is a block diagram showing a second mode of the diagnostic apparatus in accordance with the first embodiment;
      <br/>
      FIG. 9 is a block diagram showing a third mode of the diagnostic apparatus in accordance with the first embodiment;
      <br/>
      FIG. 10 is a schematic representation showing a dynamic system including an active suspension system and a wheel;
      <br/>
      FIG. 11 is a block diagram showing a diagnostic apparatus in accordance with a second embodiment for diagnosing the dynamic system shown in FIG. 10;
      <br/>
      FIG. 12 is a schematic representation showing a dynamic system including a conventional suspension system and a wheel;
      <br/>
      FIG. 13 is a block diagram showing a diagnostic apparatus in accordance with a fourth embodiment for diagnosing the dynamic system shown in FIG. 12;
      <br/>
      FIG. 14 is a block diagram showing a minimum dimension observer in accordance with the first embodiment;
      <br/>
      FIG. 15 is a dynamic model of the vehicle in accordance with the fourth embodiment;
      <br/>
      FIG. 16 is an equivalent model made by conversion of the dynamic model of the vehicle along the axis of rotation;
      <br/>
      FIG. 17 is a block diagram showing the configuration of the diagnostic apparatus in accordance with the fourth embodiment of the present invention;
      <br/>
      FIG. 18 is a flowchart showing the flow of operation of the diagnostic apparatus (e.g., the diagnosis of air pressure in the tire) in accordance with the fourth embodiment;
      <br/>
      FIG. 19 is a graph showing a difference in vibration characteristics between the dynamic system in a normal condition and the dynamic system in an anomalous condition in accordance with the fourth embodiment;
      <br/>
      FIG. 20 is a block diagram showing the configuration of braking force control means of the dynamic system in accordance with the fourth embodiment;
      <br/>
      FIG. 21 is a block diagram showing an vibration instruction signal generation section of the braking force control means of the dynamic system in accordance with the fourth embodiment;
      <br/>
      FIG. 22 is a diagrammatic representation showing the processing performed by an FFT calculation section and an vibration characteristics detection section of the diagnostic apparatus in accordance with the fourth embodiment;
      <br/>
      FIG. 23A is a schematic representation showing an ABS actuator including one 3-position valve;
      <br/>
      FIG. 23B is a schematic representation showing an ABS actuator including two 2-position valves;
      <br/>
      FIG. 24A is a plot showing pulses for opening or closing a pressure increase valve;
      <br/>
      FIG. 24B is a plot showing pulses for opening or closing a pressure decrease valve;
      <br/>
      FIG. 24C is a plot showing variations in hydraulic wheel cylinder pressure with time when the pressure increase and decrease valves are controlled by means of the foregoing pulses;
      <br/>
      FIG. 25A is a timing chart showing the relationship between hydraulic braking pressure and the pressure increasing, decreasing and holding instructions for the valve in an ordinary situation;
      <br/>
      FIG. 25B is a timing chart showing the between hydraulic braking pressure and the pressure increasing, decreasing and holding instructions for the valve in a case where pressure-increase time ti is longer than pressure-decrease time tr ;
      <br/>
      FIG. 25C is a timing chart showing the between hydraulic braking pressure and the pressure increasing, decreasing and holding instructions for the valve in a case where pressure-increase time ti is shorter than pressure-decrease time tr ;
      <br/>
      FIG. 26A is a graph showing the characteristics of a hydraulic braking pressure with respect to the pressure increase and decrease time periods, and particularly, the characteristics of a mean braking pressure;
      <br/>
      FIG. 26B is a graph showing the characteristics of a hydraulic braking pressure with respect to the pressure increase and decrease time periods, and particularly, the micro amplitude characteristics of the braking pressure;
      <br/>
      FIG. 27A is a graph showing the characteristics of a hydraulic braking pressure with respect to the master cylinder pressure, and particularly, the characteristics of a mean braking pressure;
      <br/>
      FIG. 27B is a graph showing the characteristics of a hydraulic braking pressure with respect to the pressure increase/decrease time, and particularly, the micro amplitude characteristics of the braking pressure;
      <br/>
      FIG. 28 is a block diagram showing estimation of hydraulic braking pressure in accordance with a fifth embodiment;
      <br/>
      FIG. 29 is a graph showing the relationship between slip speed  DELTA  OMEGA  and a coefficient of friction  MU  and a gradient of the friction of coefficient  MU  in relation to the slip speed  DELTA  OMEGA ;
      <br/>
      FIG. 30A is a graph showing the pressure increase and decrease time periods for maintaining the constant micro amplitude of the braking pressure, and particularly, the relationship between a mean braking pressure and pressure increase time;
      <br/>
      FIG. 30B is a graph showing the pressure increase and decrease time periods for maintaining the constant micro vibration of the braking pressure, and particularly, the relationship between the mean braking pressure and pressure decrease time;
      <br/>
      FIG. 31 is a plot showing the relationship between the slip speed  DELTA  OMEGA , braking torque Tb, and the gradient of the braking torque Tb ;
      <br/>
      FIG. 32 is a block diagram showing the configuration of an anti-lock brake controller in accordance with the fifth embodiment;
      <br/>
      FIG. 33 is a block diagram showing an example of configuration of a mean braking pressure estimation section constituting the braking pressure estimation apparatus in accordance with the fifth embodiment;
      <br/>
      FIG. 34 is a block diagram showing an example of configuration of a master cylinder pressure estimation section constituting the braking pressure estimation apparatus in accordance with the fifth embodiment;
      <br/>
      FIG. 35 is a block diagram showing an example of configuration of a braking pressure micro amplitude estimation section constituting the braking pressure estimation apparatus in accordance with the fifth embodiment;
      <br/>
      FIG. 36 is a block diagram showing an example of configuration of a resonance gain calculation section constituting the anti-lock brake controller in accordance with the fifth embodiment;
      <br/>
      FIG. 37 is a block diagram showing an example of configuration of a PI controller constituting the anti-lock brake controller in accordance with the fifth embodiment;
      <br/>
      FIG. 38 is a block diagram showing a signal for instructing the actuation of the valve of the ABS actuator constituting the anti-lock brake controller in accordance with the fifth embodiment;
      <br/>
      FIG. 39A is a graph for explaining the result of operation of the anti-lock brake controller in accordance with the fifth embodiment, showing variations in wheel speed  OMEGA w and vehicle speed  OMEGA u with time;
      <br/>
      FIG. 39B is a graph for explaining the result of operation of the anti-lock brake controller in accordance with the fifth embodiment, showing variations in a slip rate S with time;
      <br/>
      FIG. 39C is a graph for explaining the result of operation of the anti-lock brake controller in accordance with the fifth embodiment, showing variations in actual wheel cylinder pressure Pb and in estimated mean braking pressure Pm with time; and
      <br/>
      FIG. 39D is a graph for explaining the result of operation of the anti-lock brake controller in accordance with the fifth embodiment, showing variations in a resonance gain Gd and a reference gain Gs with time.
    </p>
    <heading>DESCRIPTION OF THE PREFERRED EMBODIMENTS</heading>
    <p num="196">First Embodiment</p>
    <p num="197">An example of application of the present invention to detection of a fault in an active suspension control system in a vehicle will now be described as a first embodiment.</p>
    <p num="198">
      FIG. 6 shows a specific example of a dynamic system 10 shown in FIG. 1 to be examined in the first embodiment.
      <br/>
      This dynamic system 10 represents a vibration model of a single wheel suspension unit of the vehicle.
      <br/>
      In the drawing, a wheel 41 is represented by a combination of an unsprung mass section expressed by a parameter m1 and a spring section of the wheel (or tire) expressed by a spring constant k1.
      <br/>
      Reference numeral 42 designates a vehicle body having a spring constant m2; 46 designates a gas spring having a spring constant k2; 48 designates a damper having a damping constant Dm; and 56 designates the amount of displacement with reference to the road surface.
      <br/>
      Further, reference numeral 52 designates unsprung displacement represented by a variable x1; 50 designates sprung displacement represented by a variable x2; 54 designates relative displacement (i.e., x1-x2) represented by a variable "y"; and 44 designates a control force generator which produces active control force "f" required for control operation, from the quantity of actuation "u" output from a controller for controlling the suspension unit.
    </p>
    <p num="199">
      At the time of diagnosis of the dynamic system 10, the quantity of actuation (u+ DELTA u) made by addition of another quantity of actuation  DELTA u for vibration purposes to the quantity of actuation "u" is input to the control force generator 44.
      <br/>
      The control force generator 44 produces active control force (f+ DELTA f) which is the sum of the active control force "f" and vibration control force  DELTA f. As a result, the vehicle body 42 and the wheel 41 are vibrated by the vibration control force  DELTA f around the area displaced by the control force "f." Further, a white signal or a frequency-shifted signal is used as the quantity of actuation  DELTA u. It is assumed that the displacement occurring in the dynamic system 10 as a result of vibration control force  DELTA f is taken as x0.
      <br/>
      This value x0 is given by the following equation.
      <br/>
      x0- DELTA y= DELTA x1- DELTA x2
    </p>
    <p num="200">
      Since the first embodiment is based on the assumption that the vehicle travels over a road in good condition, the displacement 56 with reference to the road surface is smaller than the displacement x0.
      <br/>
      Accordingly, external disturbance is ignored (the same applies to other embodiments which will be described below).
    </p>
    <p num="201">From the drawing, the equation of state 1-1 is represented as follows;  (Equation image '27' not included in text)</p>
    <p num="202">
      where T represents the response time of the control force generator 44; i.e., a time lag between the quantity of actuation "u" and the active control force "f." Further, "a" and "b" are expressed as
      <br/>
      a=k1/m1+k2/m1+k2/m2
      <br/>
      b=1/m1+1/m2.
    </p>
    <p num="203">
      Presumable faults in the first embodiment are an anomaly in the air pressure in a broken tire, an anomalous pressure in the gas spring 46, and a fault in the damper 48.
      <br/>
      These faults are handled as variations in the respective parameters k1, k2, and Dm.
      <br/>
      A disturbance observer 32 is formed on the basis of the foregoing vibration model 10.
    </p>
    <p num="204">
      More specifically, the parameters k1, k2, Dm exist in the second and fourth elements in the right side of Equation (2-2).
      <br/>
      Accordingly, the channel along which the internal disturbance stemming from a presumable fault enters the actuation unit is set to these two areas.
      <br/>
      The channel is set according to the matrix D expressed by Equation (2).
      <br/>
      In this case, the channel is desirably set in a manner as represented by the following expression.  (Equation image '28' not included in text)
    </p>
    <p num="205">The extended system represented by Equation (4b) is formed through use of the matrix D, and the disturbance observer 32 shown in FIG. 7 is formed.</p>
    <p num="206">In the first embodiment is formed the disturbance observer 32 according to three modes shown below.</p>
    <p num="207">
      The first mode is a case where all of the sprung displacement x2, sprung speed, relative displacement "y," relative speed, and active control force "f" in the suspension model 10 can be measured.
      <br/>
      In this mode, there is no need for the disturbance observer 32 to estimate the internal state quantity of the dynamic system.
      <br/>
      The sprung speed and relative speed are respectively expressed by the following equations.
    </p>
    <p num="208">
      Sprung speed=x2
      <br/>
      Relative speed=y
    </p>
    <p num="209">The second mode is a case where only the sprung displacement x2 and the relative displacement "y" can be measured, and the disturbance observer 32 estimates the unmeasurable internal state quantity of other elements in the suspension system (e.g., the sprung speed and the relative speed in this case).</p>
    <p num="210">The third mode is a case where only the sprung displacement x2 and the relative displacement y can be measured, and the disturbance observer 32 estimates the entire internal state quantity of the suspension system including the sprung displacement and the relative displacement.</p>
    <p num="211">The disturbance observer 32 used for each of the foregoing modes and a diagnostic apparatus 30 employing this disturbance observer 32 will be described in detail hereinbelow.</p>
    <p num="212">First Mode</p>
    <p num="213">
      FIG. 7 shows a block diagram of the diagnostic apparatus 30 used for the first mode.
      <br/>
      In the drawing, reference 10 designates the dynamic system (a suspension system for a single wheel) shown in FIG. 6; 12 designates a controller for controlling the suspension system; 14 designates the quantity of actuation (u+ DELTA u) output from the controller 12 for controlling the suspension system; and 16 designates the entire internal state quantity of the suspension system measured through use of a sensor (not shown).
    </p>
    <p num="214">
      Since the entire internal state quantity of the suspension system is measured through use of the sensor, there is no need for the disturbance observer 32 to estimate a part of, or the entirety of, the internal state quantity of the suspension system, unlike the second and third modes, which will be described later.
      <br/>
      Reference numeral 17 designates the quantity of actuation "u" input to the disturbance observer 32 from the controller 12.
      <br/>
      Only the quantity of actuation "u" resulting from subtraction of the vibration input  DELTA u from the quantity of actuation (u+ DELTA u) is input to the disturbance observer 32.
    </p>
    <p num="215">
      The disturbance observer 32 in the first embodiment acknowledges, as internal disturbance in the dynamic system 10 to be examined, an anomaly in the air pressure in the tire in the dynamic system 10, an anomaly in the pressure in the gas spring, or a fault in the damper.
      <br/>
      A total disturbance vector "w"--which is a sum of an vibration disturbance vector and an internal disturbance vector of the dynamic system 10--is estimated from the quantity of actuation 14 of the controller 12 and the entire state quantity 16 of the dynamic system 10, and the thus-estimated total disturbance vector "w" is output to a correlation calculation section 34.
    </p>
    <p num="216">
      The correlation calculation section 34 calculates a cross-correlation between the value of the total disturbance vector "w" estimated and calculated by the disturbance observer 32 and the internal state quantity of the dynamic system 10; namely, the sprung displacement, the relative displacement, and the relative speed.
      <br/>
      At this time, the internal state quantity; i.e., the sprung displacement, the relative displacement, or the relative speed, is irrelevant to vibration disturbance.
      <br/>
      For this reason, the influence of the vibration disturbance is eliminated from the internal state quantity by calculation of a cross-correlation between the internal state quantity and the estimated value of the total disturbance vector, thereby separating from the internal state quantity the components associated with the internal disturbance stemming from the fault.
      <br/>
      The result of such calculation can be output to a diagnostic section 36.
    </p>
    <p num="217">The diagnostic section 36 detects a fault occurring in the dynamic system 10 on the basis of the result of calculation received from the cross-correlation calculation section 34, and localizes a specific location of the fault in the suspension system on the basis of the location of the internal disturbance calculated by the cross-correlation calculation section 34.</p>
    <p num="218">The diagnostic apparatus 30 in accordance with the first embodiment has the aforementioned configuration, and the operation of the diagnostic apparatus 30 will now be described.</p>
    <p num="219">
      Assume that the presumable fault has arisen in the dynamic system 10 shown in FIG. 6.
      <br/>
      In such a case, the disturbance observer 32 estimates, from the control input "f" sent to the suspension system 10 and the state of the dynamic system 10, the second and fourth elements w2, w4 of the total disturbance vector previously set according to a fault.
      <br/>
      At this time, given that lag in the estimation of the disturbance is negligibly small, the estimated value is expressed by the following Equation (22).  (Equation image '29' not included in text)
    </p>
    <p num="220">where W1, W2, W3, W4, W5 represent estimated values of w1, w2, w3, w4, and w5, respectively.</p>
    <p num="221">In Equation (22),  DELTA k1 represents a variation in the parameter stemming from an anomaly in the air pressure in the tire;  DELTA k2 represents a variation in the parameter stemming from an anomaly in the pressure in the gas spring; and  DELTA Dm represents a variation in the parameter stemming from a fault in the damper.</p>
    <p num="222">The thus-estimated total disturbance is a sum of the sum of products--between the variations in the parameters and a variable of state of the suspension system (i.e., the relative displacement "y," the relative speed of displacement, and the sprung displacement x2)--and the displacement x0 exerted on the suspension system as vibration disturbance.</p>
    <p num="223">On the basis of the estimated total disturbance, the cross-correlation calculation section 34 and the diagnosis section 36 separate the vibration disturbance from the internal disturbance and determines a fault in the following manner.</p>
    <p num="224">
      First, a correlation function C21 between the estimated value of w2 and the measured value "y," a correlation function C41 between the estimated value of w4 and the measured value "y," and a correlation function C42 between the estimated value of w4 and the measured value thereof (i.e., relative speed), are calculated.
      <br/>
      Although the estimated value of w2 includes vibration disturbance, the influence of displacement stemming from the vibration disturbance irrelevant to the measured value "y" is eliminated by finding the correlation between the measured value "y" and the estimated value of w2.
      <br/>
      As a result, only the disturbance stemming from the fault is extracted in the form of; e.g, a value of the correlation function C21.
    </p>
    <p num="225">
      Next, the fault is localized on the basis of the thus-obtained correlation functions.
      <br/>
      For example, only the value corresponding to a variation in the gas spring is obtained from the correlation function C41.
      <br/>
      For this reason, if there is any anomaly in this value, a fault in the gas spring can be localized.
    </p>
    <p num="226">Similarly, if there is any anomaly in the value of the correlation function C42, the damper is determined to be faulty.</p>
    <p num="227">
      Finally, an anomaly in the air pressure in the tire is determined by the correlation function C21.
      <br/>
      If the gas spring is faulty or the air pressure in the tire is anomalous, the correlation function C21 takes on a value.
      <br/>
      However, a fault in the gas spring is detected by the determination made by the correlation function C41.
      <br/>
      Hence, if the gas spring is in a normal condition, and there is an anomaly in the value of the correlation function C21, an anomaly in the air pressure in the tire can be determined.
      <br/>
      If an anomaly in the gas spring and an anomaly in the air pressure in the tire simultaneously arise, it is impossible to distinguish the anomalies from one another.
      <br/>
      However, such a trouble occurs very rarely, and hence no actual problem arises.
    </p>
    <p num="228">
      As described above, the relationship between the estimated value of the total disturbance and the location of a fault can be expressed by a simple mathematical equation in the first embodiment.
      <br/>
      Consequently, a fault can be localized by executing a simple calculation such as calculation of a correlation between the state of the object to be examined and an estimated value.
    </p>
    <p num="229">
      Further, disturbance is imparted to the dynamic system through vibration in the first embodiment even when external disturbance is very small, as in a case where the vehicle travels over a road in good condition.
      <br/>
      As a result, a reduction in the accuracy of calculation attributable to a reduction in the control output can be prevented.
      <br/>
      Moreover, as a result of imparting to the dynamic system the vibration disturbance irrelevant to the internal state quantity of the dynamic system, a fault can be highly accurately detected at all times.
    </p>
    <p num="230">(Second Mode)</p>
    <p num="231">
      FIG. 8 is a block diagram showing the disturbance observer 32 configured so as to correspond to the previously-described second mode and the diagnostic apparatus 30 employing this disturbance observer 32.
      <br/>
      The elements which are the same as those shown in FIG. 7 are assigned the same reference numerals, and hence their explanations will be omitted here.
    </p>
    <p num="232">
      In the present embodiment, only the sprung displacement x2 and the relative displacement "y" are directly measured, as the internal state quantity of the dynamic system 10, from the dynamic system 10 constituting the vibration model of the suspension system.
      <br/>
      The internal state quantity of another element in the dynamic system 10; e.g., relative speed, is not directly measured.
    </p>
    <p num="233">
      In this case, from the quantity of actuation 14 and the measured value 16, the disturbance observer 32 estimates and calculates the sprung speed, the relative speed, and the active control force among the internal state quantity of the dynamic system 10 which have not yet been measured, as well as the total disturbance vector of the dynamic system 10.
      <br/>
      The thus-estimated factors are output to the correlation calculation section 36.
    </p>
    <p num="234">The disturbance observer 32 is designed in the manner as represented by the following equations.</p>
    <p num="235">First, an expanded system of the dynamic system 10 is formed on the basis of Equations (4b), (2), and (21).  (Equation image '30' not included in text)</p>
    <p num="236">The measurable state quantities "y" and x2 are separated from the unmeasurable state quantity through use of Equation (23).  (Equation image '31' not included in text)</p>
    <p num="237">To simplify the expression, Equation (3-3) is transformed in the manner as shown below.  (Equation image '32' not included in text)</p>
    <p num="238">
      The state quantity xb--which includes total disturbance and is unmeasurable--is estimated through use of the following equation.
      <br/>
      xb=A21 xa +A22 xb+B2u +G+xa -(A11 xa +A12 xb+B1 u)}  (24)
    </p>
    <p num="239">
      From Equations (4-4) and (24), an error between a true value xb and an estimated value can be written as
      <br/>
      xb -xb=A21 xa +A21 xb +B2u +G+xa -(A11 xa +A12 xb +B1 u)}-(A21 xa +A22 xb +B2 u)
      <br/>
      =A22 (xb -xb)+G+(A11 xa +A12 xb +B1u)-(A11 xa +A12 xb +B1u)}
      <br/>
      =(A22 -GA12)(xb -xb)  (25)
    </p>
    <p num="240">where xb represents an estimate value and Xb represents a true value.</p>
    <p num="241">
      Consequently, so long as the matrix of real number G is determined in such a way that all the characteristic values of the vector of (A22-GA12) in Equation (25) become negative, the error expressed by Equation (25) converges on zero with time.
      <br/>
      More specifically, the estimated value converges on a true value.
    </p>
    <p num="242">Equation (24) can be illustrated such as that shown in FIG. 14. As shown in FIG. 14, the unmeasurable state quantity xb can be estimated through use of the control input "u" and the measurable state quantity xa=y x2T.</p>
    <p num="243">
      As described above, a disturbance observer 32 in the second mode is configured in the form of a minimum dimension observer which estimates the total disturbance "w" and the unmeasurable internal state quantity; e.g., relative speed, from the control input delivered to the suspension system and the measured quantities of internal state x2, y of the suspension system 10.
      <br/>
      Even in a case where the disturbance observer 32 is formed so as to have the foregoing configuration, the thus-estimated total disturbance can be represented by Equation (22).
      <br/>
      Consequently, as in the first mode, the diagnosis section 36 can detect and localize a fault as a result of the correlation function being executed by the correlation function calculation section 34.
    </p>
    <p num="244">More specifically, an estimated value of the relative speed required for correlation calculation is represented by</p>
    <p num="245">Estimated value of y=+dot over (y)}</p>
    <p num="246">Accordingly, it is only required that correlation function similar to that performed in the first mode be executed by replacing the relative speed with the estimated value.</p>
    <p num="247">
      Since the disturbance observer 32 estimates the internal state quantity without any substantial errors even if a fault arises in the dynamic system, a correlation function essentially analogous to that used in the first mode can be obtained even if the correlation is calculated through use of the estimated value in the manner as previously described.
      <br/>
      After acquisition of the correlation function, the disturbance observer can localize the fault in a manner analogous to that employed in the first mode, and hence its explanation will be omitted here.
    </p>
    <p num="248">
      As described above, in the second mode, the state quantity of the dynamic system directly measured through use of a sensor, as well as the internal state quantity of the same estimated by the disturbance observer 32 at the same time it estimated the total disturbance, can be used for calculation of a correlation function in the second mode.
      <br/>
      Accordingly, even if the entire internal state quantity of the dynamic system 10 to be examined is not directly measured, a fault can be detected in detail.
    </p>
    <p num="249">(Third Mode)</p>
    <p num="250">FIG. 9 is a block diagram showing the disturbance observer 32 used for the foregoing third mode and the diagnostic apparatus 30 employing the observer 32.</p>
    <p num="251">The third mode is different from the second mode in that the disturbance observer 32 is configured as a complete dimension observer.</p>
    <p num="252">More specifically, the disturbance observer 32 in the third mode is configured so as to estimate the overall disturbance and the entire internal state quantity of the dynamic system 10 from the control input "f" delivered to the suspension system and from the directly-measured internal state quantities x2, y of the dynamic system 10.</p>
    <p num="253">The disturbance observer 32 is designed on the basis of Equations (4b), (2-2), (21), and the following equation.  (Equation image '33' not included in text)</p>
    <p num="254">where  LAMBDA  represents an estimated value, and G represents a matrix of real number having seven rows and two columns.</p>
    <p num="255">
      Even in this case, a differential equation related to an error between an estimated value and a true value used in Equation (25) is formed, and the matrix of real number G is determined in such a way that all the characteristic value of the vector of the foregoing equation become negative.
      <br/>
      Although greater absolute values of the characteristic values are more desirable, they are desirably set to about -300 to -700 rad/s.
    </p>
    <p num="256">
      In this way, an estimated value represented by the following equation can be calculated from the control input "u" and the estimated values y, x2.
      <br/>
      estimated value yyx2 x2.function.w2 w4  TAU
    </p>
    <p num="257">
      The thus-estimated total disturbance is represented by Equation (22), and hence the correlation function is calculated in a manner analogous to that employed in the first mode.
      <br/>
      The estimated values of the relative displacement and the relative speed are used for calculation of the correlation function.
      <br/>
      After the correlation function has been calculated, a fault is localized in a manner analogous to that employed in the first mode.
    </p>
    <p num="258">
      As described above, a fault can be localized by use of simple calculation in the third mode.
      <br/>
      In addition, the disturbance observer 32 employed in the third mode is configured in the form of a complete dimension observer, and hence the procedures required for its configuration are simpler than those required for the minimum dimension observer used in the second mode.
    </p>
    <p num="259">Second Embodiment</p>
    <p num="260">A second embodiment of the present invention will now be described.</p>
    <p num="261">
      FIG. 10 shows a specific example of the dynamic system 10 to be examined in the second embodiment which comprises an active suspension system and wheels.
      <br/>
      The members corresponding to those shown in FIG. 6 are assigned the same reference numerals, and their explanations will be omitted here.
    </p>
    <p num="262">
      Such an active suspension system is usually provided with a pressure sensor 60a as a member required for active control of the suspension system.
      <br/>
      The pressure sensor 60a is provided in the control force generator 16 so as to be able to measure the active control force "f." Further, acceleration sensors 60b and 60c are provided for detecting an anomaly in the air pressure in the tire.
      <br/>
      Both the acceleration sensors 60b and 60c are provided at the upper end and at the lower end of the suspension spring, respectively, so as to be able to detect the acceleration of vertical vibrations.
    </p>
    <p num="263">In such a dynamic system 10, the equation of state represented by Equation (16) is specifically expressed in the following form.  (Equation image '34' not included in text)</p>
    <p num="264">where a=k1 /m1 +k2 /m1 +k2 /m2, b=1/m1 +1/m2, and T represents lag time between the quantity of actuation "u" and the active control force "f."</p>
    <p num="265">
      FIG. 11 is a block diagram of the dynamic system in accordance with the second embodiment.
      <br/>
      As previously mentioned, the suspension system 10 to be examined is configured so as to receive the quantity of actuation (u+ DELTA u) from the controller 12 and to handle the following vector contained in Equation (26) as the internal state quantity.
      <br/>
      x=x2 x2 y y .function. TAU
    </p>
    <p num="266">
      Of the elements included in the internal state quantity vector "x," sprung acceleration is directly detected by the acceleration sensor 60b shown in FIG. 10, and sprung speed is calculated by integration of the sprung acceleration.
      <br/>
      Relative acceleration is calculated from a difference between the unsprung acceleration detected by the acceleration sensor 60c and the sprung acceleration.
      <br/>
      Further, relative speed is calculated by integration of the relative acceleration.
      <br/>
      Assume that calculation sections which perform the foregoing calculations are incorporated into the suspension system 10 in accordance with the second embodiment at all times.
      <br/>
      Accordingly, the output from the suspension system 10 represents the internal state quantity vector included in Equation (26); i.e.,
      <br/>
      x=x2 x 2 yy.function. TAU
    </p>
    <p num="267">The controller 12 in accordance with the second embodiment receives the thus-output internal state quantity vector "x" as an input and calculates and outputs the quantity of actuation (u+ DELTA u) used as an input signal of the active suspension system 10.</p>
    <p num="268">The diagnostic apparatus 30 that diagnoses the active suspension system 10 comprises the disturbance observer 32, the correlation calculation section 34, and the diagnostic section 36.</p>
    <p num="269">The disturbance observer 32 is formed so as to receive the output "u" from the controller 12 and the internal state quantity vector "x" output from the active suspension system 10 and estimates and calculates variations in a spring constant k1 of the tire as internal disturbance occurring in the active suspension system 10.</p>
    <p num="270">From the internal state quantity vector "x" output from the active suspension system 10, a state quantity detection section 60 extracts the state quantity which affects the active suspension system 10 as a result of a variation in the air pressure in the tire (i.e., relative speed in this embodiment).</p>
    <p num="271">The correlation calculation section 34 comprises a cross-correlation calculation section 70, a normalization section 72, and an autocorrelation section 74.</p>
    <p num="272">The cross-correlation calculation section 70 calculates and outputs a cross-correlation between the total disturbance estimated by the disturbance observer 32 and the relative speed.</p>
    <p num="273">The autocorrelation calculation section 74 calculates the autocorrelation function of the relative speed.</p>
    <p num="274">
      The normalization section 72 normalizes the cross-correlation function calculated by the cross-correlation calculation section 70 by dividing it by the autocorrelation function calculated by the autocorrelation calculation section 74, thereby extracting only the quantity of variation in the spring constant of the tire.
      <br/>
      The thus-extracted quantity of variation is output to the diagnostic section 36.
    </p>
    <p num="275">
      The diagnostic section 36 comprises a memory 76 which stores reference values and an anomaly determination section 78.
      <br/>
      The diagnostic section 36 is arranged so as to determine an anomaly in the air pressure in the tire by comprising of the quantity of variation in the spring constant of the tire calculated by the normalization section 72 with the reference quantity of variation in the spring constant corresponding to an anomalous air pressure stored in the memory 76.
    </p>
    <p num="276">The dynamic system in accordance with the second embodiment an the aforementioned construction, and its operation will now be described.</p>
    <p num="277">
      In the dynamic system 10 shown in FIG. 10 that comprises an active suspension system and a wheel, if the air pressure in the tire changes and thus the spring constant of the tire changes, the internal state quantity vector "x" of the dynamic system 10 becomes different from that output when the air pressure is normal.
      <br/>
      This different internal state quantity vector "x" can be deemed as a sum of the internal state quantity vector output when the air pressure is normal and the internal disturbance corresponding to a change in the air pressure.
    </p>
    <p num="278">The disturbance observer 32 estimates and calculates total disturbance--including the internal disturbance and vibration disturbance--from the internal state quantity vector "x" output from the active suspension system 10 and the quantity of actuation "u."</p>
    <p num="279">Consequently, assuming that the air pressure in the tire is in a normal condition, and that the spring constant of the tire at that time is k1, the disturbance observer 32 calculates and outputs the vibration disturbance expressed by the following equation.  (Equation image '35' not included in text)</p>
    <p num="280">The thus-estimated vibration disturbance corresponds to a differential value of displacement x0 stemming from white control force  DELTA f and is random and completely irrelevant to the state of the active suspension system 10.</p>
    <p num="281">Under such conditions, assuming that the air pressure in the tire has changed and the spring constant of the tire has changed by  DELTA k1 to (k1+ DELTA k1) the disturbance observer 32 outputs total disturbance expressed by the following equation.  (Equation image '36' not included in text)</p>
    <p num="282">Although control outputs x2 and "y" included in the total disturbance are irrelevant to the vibration disturbance, these outputs take on large values corresponding to the magnitude of the vibration disturbance through vibration even when the vehicle travels over a road in good condition.</p>
    <p num="283">
      From Equation (27), it becomes necessary to detect only the internal disturbance stemming from a variation in the air pressure in the tire by eliminating the vibration disturbance from the value of the total disturbance estimated by the disturbance observer 32.
      <br/>
      To this end, the correlation calculation section 70 calculates a cross-correlation between the estimated total disturbance and the elements of the internal state quantity irrelevant to the vibration disturbance.
      <br/>
      Although Equation (27) includes the relative speed and the sprung speed as the state of quantity corresponding to the internal state quantity, a cross-correlation between the estimated total disturbance and the relative speed output from the active suspension system 10 is calculated in the second embodiment.
      <br/>
      Taking the cross-correlation function as
      <br/>
      C(w, y),
    </p>
    <p num="284">the function is calculated in the manner as expressed by  (Equation image '37' not included in text)</p>
    <p num="285">
      As a result of calculation of such a cross-correlation function, separation of the quantity of variation  DELTA k in the air pressure in the tire and separation of the item of vibration disturbance can be carried out.
      <br/>
      More specifically, the estimated total disturbance and the relative speed output from the active suspension system 10 are continually sampled over N times, to thereby obtain a mean value expressed by the following equation.  (Equation image '38' not included in text)
    </p>
    <p num="286">
      The cross-correlation function expressed by Equation (28) is performed through use of the mean value, to thereby obtain the correlation function
      <br/>
      c(w,y).
    </p>
    <p num="287">As a result, the item of sprung speed and the displacement speed are eliminated, the value of the correlation function is obtained as follows:  (Equation image '39' not included in text)</p>
    <p num="288">The thus-calculated correlation function can be expressed by the product of an item representing a variation in the spring constant in the tire ( DELTA k1/m1) and an autocorrelation function of relative speed of the active suspension system used for the calculation of the cross-correlation function expressed by Equation (29). Accordingly, the quantity of variation in the spring constant can be quantitatively detected by dividing the cross-correlation function by the autocorrelation function of the state quantity (i.e., the relative speed).  (Equation image '40' not included in text)</p>
    <p num="289">
      As is evident from Equation (29), the cross-correlation function c(w,y) takes on a value corresponding to a frequency component of the internal disturbance, which stems from only the variation in the spring constant of the tire, from among various frequency components of the estimated total disturbance.
      <br/>
      Accordingly, the quantity of variation in the spring constant can be obtained from the cross-correlation function
      <br/>
      c(w,y).
    </p>
    <p num="290">
      The foregoing autocorrelation function of the relative speed is calculated by the autocorrelation function calculation section 74 and is input to the normalization section 72.
      <br/>
      The normalization section 72 detects the quantity of variation in the spring constant of the tire expressed by the following equation by dividing the cross-correlation function c(w,y)output from the cross-correlation function calculation section 70 by the autocorrelation function c(y,y)output from the autocorrelation function calculation section 74.  (Equation image '41' not included in text)
    </p>
    <p num="291">In this equation, the parameter m1 represents a known value; i.e., the mass of the tire, and therefore the quantity of variation in the spring constant  DELTA k1 can be accurately calculated from the output J from the normalization section 72.</p>
    <p num="292">The anomaly determination section 78 determines an anomaly in the air pressure by comparison of the thus-obtained quantity of variation  DELTA k1 of the spring constant with the reference quantity of variation corresponding to an anomaly.</p>
    <p num="293">
      In the prior art, a correlation function--which represents the quantity of variation stemming from a fault similar to the foregoing quantity of variation in the spring constant--is calculated from a control value output from the dynamic system when there is an input of irregular external disturbance.
      <br/>
      In this case, if the external disturbance becomes smaller, the control output also becomes smaller.
      <br/>
      Even if the cross-correlation function based on this control output is normalized by being divided by the autocorrelation function, an error of the output J due to quantization errors is increased, thereby resulting in a reduction in the accuracy of fault detection.
      <br/>
      Further, since there are variations in the statistical characteristics and magnitude of the external disturbance, the accuracy of fault detection cannot be constantly maintained.
    </p>
    <p num="294">
      In contrast, in the present embodiment, an vibration disturbance is applied to the active suspension system through vibration by the controller, to thereby set the control output value to or greater than a given magnitude, enabling highly-accurate fault detection at all times regardless of the condition of the road surface.
      <br/>
      Further, since controlling means employed in the conventional active suspension is used as means for vibrating the dynamic system, the need for additional vibrating means is eliminated.
    </p>
    <p num="295">Third Embodiment</p>
    <p num="296">
      FIG. 12 shows the suspension system 10 comprising a conventional suspension (not an active suspension) and wheels.
      <br/>
      In the suspension system 10, the wheel 41 is represented by combination of an unsprung mass section expressed by a parameter m1 and a spring section of the tire expressed by a spring constant k1.
      <br/>
      Reference numeral 42 designates a vehicle body having a sprung mass m2; 46 designates a spring having a spring constant k2; 48 designates a damper having damping constant Dm; 56 designates displacement with reference to the road surface; 52 designates unsprung displacement expressed by variation x1; 50 designates sprung displacement represented by variation x2; and 54 designates relative displacement (x1-x2) represented by variable "y." Even in this dynamic system 10, as in the previous embodiments, the acceleration sensors 60b and 60c for detecting vertical vibrations of the wheel are provided in the respective sprung and unsprung sections.
    </p>
    <p num="297">
      In the third embodiment, the braking force exerted on the wheel is minutely vibrated by means of the braking force control means 190 shown in FIGS. 3 and 4.
      <br/>
      In practice, as shown in FIG. 12, vibrated braking force  DELTA Fb is applied to the mean braking force Fb which the wheel receives as reaction from the road surface.
      <br/>
      The braking force  DELTA Fb is vibrated by a white signal or a frequency-shifted signal, so that white vibration disturbance occurs in the vehicle even when the vehicle travels over a road in good condition.
      <br/>
      As a result of the vibration disturbance, the displacement x0 (= DELTA y) of the suspension system constantly changes within a certain extent of amplitude, thereby holding the value output from the suspension system 10 at a given value or more.
    </p>
    <p num="298">Such a suspension system 10 is represented by the equation of state in the following way.  (Equation image '42' not included in text)</p>
    <p num="299">where a=k1 /m1 +k2 /m1 +k2 /m2, b=1/m1 +1/m2.</p>
    <p num="300">FIG. 13 is a block diagram showing the suspension system 10 to be examined shown in FIG. 12.</p>
    <p num="301">
      Some conventional suspension systems are designed so as to change the damping force of the suspension according to the condition of the road surface or the driver's decision.
      <br/>
      Such a suspension system can be modeled by assuming that the damping constant Dm of the damper changes.
      <br/>
      At this time, assume that Dm shown in FIG. 12 represents a representative value of the changeable Dm.
    </p>
    <p num="302">
      As in the previous embodiments, the elements contained in the internal state quantity vector "x" expressed by Equation (30) are calculated by the calculation section provided in the suspension system 10, and the result of such calculation is output.
      <br/>
      More specifically, the sprung acceleration is directly output from the sensor 60b, and the sprung speed is calculated by integration of the value of the sprung acceleration.
      <br/>
      Relative acceleration is calculated from a difference between the unsprung acceleration and the sprung acceleration, and relative speed is calculated by integration of the relative acceleration.
      <br/>
      Accordingly, the output from the suspension system 10 becomes equal to the internal state quantity vector "x" expressed by Equation (30).
    </p>
    <p num="303">The diagnostic apparatus 30 in accordance with the third embodiment which examines the suspension system 10 having the foregoing configuration will be described hereinbelow in detail.</p>
    <p num="304">In a case where the air pressure in the tire is normal, and the spring constant of the tire is k1, the disturbance observer 32 estimates and calculates the total disturbance expressed by the following equation.  (Equation image '43' not included in text)</p>
    <p num="305">The foregoing equation is based on the assumption that the damping constant Dm of the suspension changes, and the quantity of variation with reference to the representative value thereof is expressed as  DELTA Dm.</p>
    <p num="306">If the air pressure in the tire changes, and the spring constant of the tire changes by  DELTA k1 to (k1+ DELTA k1), the disturbance observer 32 outputs a signal expressed by the following equation.  (Equation image '44' not included in text)</p>
    <p num="307">As can be seen from the above equation, the total disturbance estimated by the disturbance observer 32 includes the disturbance resulting from the change in the damping constant, the internal disturbance stemming from the change in the air pressure in the tire, and the vibration disturbance resulting from vibration of the braking force.</p>
    <p num="308">
      A cross-correlation function calculation section 70 calculates a correlation function between the relative speed and the second element of the estimated total disturbance which includes the internal disturbance stemming from the change in the air pressure in the tire.
      <br/>
      An autocorrelation function calculation section 74 calculates the autocorrelation function of the relative speed by means of a method analogous to that previously employed in the preceding embodiments.
    </p>
    <p num="309">A normalization section 72 detects the quantity of variation in the spring constant by dividing an output from the cross-correlation function calculation section 70 by an output from the autocorrelation function calculation section 74, and the thus-detected quantity of variation is output to an anomaly determination section 78.</p>
    <p num="310">Accordingly, the anomaly determination section 78 determines an anomaly in the air pressure by comparison of the thus-received quantity of variation in the spring constant with a predetermined reference value.</p>
    <p num="311">As described above, in the third embodiment, even in the case of the wheel attached to the conventional non- active suspension, an anomaly in the air pressure in the tire can be detected only by provision of the acceleration sensors 60b, 60c for sensing the vertical acceleration of each of the sprung and unsprung sections of the suspension system.</p>
    <p num="312">
      Even in the third embodiment, a fault can be highly accurately detected at all times regardless of the condition of the road surface by application of vibration disturbance to the suspension system through vibration of the braking force until the control output value is set to a given value or more.
      <br/>
      The third embodiment has an advantage that it can be applied to a vehicle having a non-active suspension system.
      <br/>
      Further, a conventional ABS actuator used for anti-lock braking (ABS) operation purposes can be also used as the means for vibrating the braking force (see FIGS. 20 to 21 related to a fourth embodiment).
    </p>
    <p num="313">Fourth Embodiment</p>
    <p num="314">A fourth embodiment of the present invention will now be described.</p>
    <p num="315">(Principle of the Fourth Embodiment)</p>
    <p num="316">As shown in FIG. 15, the phenomenon of vibration occurring in a wheel when a vehicle equipped with a body 212 having a weight W is traveling at speed "v"; i.e., the phenomenon of vibration occurring in a wheel resonance system comprising the body, the wheel, and the road surface, will now be examined in reference to a model shown in FIG. 16 in which the phenomenon of vibration is equivalently modeled with reference to the rotary shaft of the wheel.</p>
    <p num="317">
      The braking force acts on the road surface via the surface of a tire tread 215 of the tire which is in contact with the road surface.
      <br/>
      In practice, the braking force acts on a body 212 as reaction from the road surface.
      <br/>
      Therefore, a model 217--which is equivalent to the vehicle weight converted with reference to the rotary shaft of the wheel--is attached opposite to a wheel 213 via a frictional element 216 existing between the tire tread and the road surface.
      <br/>
      As in the case of a chassis dynamometer, the modeling of vehicle weight is similar to the simulation of vehicle weight by utilization of great inertia existing below the wheel; i.e., mass provided opposite to the wheel.
    </p>
    <p num="318">
      In FIGS. 15 and 16, it is assumed that the inertia of the wheel 213 including a tire rim is Jw; the spring constant of a spring element 214 provided between the tire rim and the tread 215 is K; the inertia of the tread 215 is Jt; the coefficient of friction of the frictional element 216 provided between the tread 215 and the road surface is  MU ; and the inertia of the model 217--which is equivalent to the weight of the body 212 converted with reference to the rotary shaft of the wheel--is Jv.
      <br/>
      The characteristics of the entire suspension system are expressed by the following Equations (2a) to (4a).
      <br/>
      In the following equations, the first differential d/dt with time is expressed by symbol "'", and the second differential d2 /dt2 with time is expressed by symbol """.
    </p>
    <p num="319">
      Jw THETA w "=-T+K( THETA t - THETA w)  (2a)
      <br/>
      Jt THETA t "=-K( THETA t - THETA w)+ MU WR  (3a)
      <br/>
      Jv OMEGA v '=- MU WR  (4a)
    </p>
    <p num="320">
      Ww = THETA w '  (5a)
      <br/>
      Jv =R2 W  (6a)
      <br/>
      OMEGA v =v/r  (7a)
    </p>
    <p num="321">
      where  THETA w represents a rotational angle of the wheel 213;  THETA w " represents the rotational angular acceleration of the wheel 213; ww represents the rotational angular velocity of the wheel 213, or the wheel speed;  THETA t represents the rotational angle of the tread 215;  THETA t " represents the rotational angular acceleration of the tread 215;  OMEGA v represents the rotational angular velocity of the vehicle-body equivalent model 217; T represents the braking torque applied to the wheel 213; W represents the weight of the vehicle body; and R represents the radius of the wheel.
      <br/>
      In effect, the braking torque T is applied by control of pressure Pb in a brake valve.
    </p>
    <p num="322">
      Assuming that the tread 215 is directly connected to the equivalent model 217 when the tire grips the road surface, resonance occurs between the inertia of the wheel 213 and the inertia of the sum of the inertia of the equivalent model 217 and the inertia of the tread 215, and the resonance frequency f1 of the wheel resonance system at this time is given by
      <br/>
      .function.1 =+(Jw +Jt +Jv +)K/Jw (Jt +Jv)}/2 PI   (8a).
    </p>
    <p num="323">
      From Equation (8a), it is understood that the resonance frequency f1 changes in proportion to a square root of the spring constant K which is a physical quantity relevant to the air pressure in the tire.
      <br/>
      Under normal conditions, the change in each moment of inertia can be ignored.
      <br/>
      For this reason, the change in the spring constant K; i.e., the change in the air pressure in the tire, can be detected from the change in the resonance frequency f1 on condition that the tire grips the road surface.
    </p>
    <p num="324">
      FIG. 19 shows the vibration characteristics of the dynamic system such as the foregoing wheel vibration system.
      <br/>
      FIG. 19 shows the frequency characteristics of a gain of oscillatory component output from the dynamic system through vibration of the dynamic system by use of a white signal (i.e., a ratio of an amplitude of the output signal from the dynamic system to an amplitude of the vibration signal).
      <br/>
      In FIG. 19, the vibration characteristics of the dynamic system in a normal condition is designated by a solid line, and the vibration characteristics of the dynamic system in an anomalous condition is designated by a broken line.
      <br/>
      Further, the gain output from the wheel resonance system corresponds to a ratio of the amplitude of the oscillatory component of the wheel speed to the amplitude of vibration.
    </p>
    <p num="325">
      As shown in FIG. 19, it is understood that resonance frequencies f1 ', f3 ' are shifted toward a lower frequency range compared with resonance frequencies f1, f3. f1 ' and f3 ' are resonance frequencies at which the gain becomes largest when the dynamic system is faulty, and f1 and f3 are those at which the gain becomes largest when the dynamic system is normal.
      <br/>
      This phenomenon corresponds to the shift of the resonance frequency f1 of the wheel resonance system toward a lower frequency range.
      <br/>
      It is also understood that a non-resonance frequency f2 '--at which the gain becomes smallest when the dynamic system is faulty--is also shifted toward a lower frequency range compared with a non-resonance frequency f2 at which the gain becomes smallest when the dynamic system is normal.
      <br/>
      Depending on the characteristics of the dynamic system or the oscillatory component of interest, the frequencies--at which the gain becomes largest and smallest, respectively, when the dynamic system is faulty--may shift toward a higher frequency range compared with the frequencies at which the gain becomes largest and smallest, respectively, when the dynamic system is normal.
    </p>
    <p num="326">
      As described above, the vibration characteristics calculated from the output from the vibrated dynamic system differ according to whether the dynamic system is in a normal or anomalous condition.
      <br/>
      The dynamic system can be diagnosed by detecting the difference between the vibration characteristics.
      <br/>
      The dynamic system can be diagnosed by detection of the change in the resonance frequency, as well as by detection of a change in the functional relationship between the frequency and the gain (e.g., the number of maximum and minimum gains).
    </p>
    <p num="327">
      Further, the fault can be localized on the basis of the functional relationship between the frequency and the gain.
      <br/>
      For example, a variation pattern differs according to whether the change is a change in the functional relationship stemming from a variation in the air pressure in the tire or a change due to another fault other than the change in the air pressure in the tire.
      <br/>
      The fault of the dynamic system can be localized by utilization of the variation pattern.
    </p>
    <p num="328">(Configuration and Operation of the Fourth Embodiment)</p>
    <p num="329">
      FIG. 17 is a block diagram showing the configuration of a dynamic system in accordance with a fourth embodiment of the present invention.
      <br/>
      The dynamic system shown in FIG. 17 is designed so as to impart micro vibration to the dynamic system comprising a wheel and a suspension system through braking force.
    </p>
    <p num="330">
      As shown in FIG. 17, the diagnostic apparatus in accordance with the fourth embodiment is provided with braking force control means 402 which applies a braking force (Pm +Pv) to the wheel of a dynamic system 400.
      <br/>
      Reference symbol Pm designates a mean braking force applied to the wheel, which corresponds to the master cylinder pressure resulting from application of the driver's leg power to the brake pedal.
      <br/>
      Pv represents the oscillatory component of the braking force vibrated in the vicinity of the mean braking force or the braking force vibrated by a white signal such as a M-series signal or a frequency-shifted signal.
    </p>
    <p num="331">
      The rotational speed  OMEGA w (i.e., wheel speed) of the wheel output from a wheel speed sensor (not shown) attached to the wheel of the dynamic system 400 is output to braking force control means 402.
      <br/>
      As will be described later, on the basis of the wheel deceleration speed calculated from the wheel speed  OMEGA w, the braking force control means 402 determines whether or not to apply a micro vibration component Pv to the braking force exerted on the wheel.
    </p>
    <p num="332">The diagnostic apparatus has an FFT calculation section 404 which calculates a frequency spectrum of the wheel speed by fast Fourier transformation (FFT) of time-series data regarding the wheel speed  OMEGA w received at a given cycle; a vibration characteristics detection section 406 for detecting the vibration characteristics of the dynamic system 400 on the basis of the thus-calculated frequency spectrum of the wheel speed: and a diagnostic section 408 for diagnosing the dynamic system 400 on the basis of the detected vibration characteristics.</p>
    <p num="333">
      Internal memory of the diagnostic section 408 stores vibration characteristic data concerning the dynamic system 400 when it is in a normal condition and a plurality of sets of data concerning anomalous vibration-characteristic patterns (i.e., anomalous vibration characteristic patterns).
      <br/>
      The diagnostic section 408 diagnoses a fault in the dynamic system 400 (i.e., the air pressure in the tire) by determining a difference between the detected vibration characteristics and the vibration characteristics obtained when the dynamic system is in a normal condition.
    </p>
    <p num="334">
      The anomalous vibration characteristic pattern can be represented by a frequency value including the maximum and minimum values improbable as the vibration characteristics of the dynamic system 400 in a normal condition, by data concerning the number of these maximum and minimum values, or by data concerning the functional characteristics of the frequency value.
      <br/>
      The location and type of a fault in the dynamic system are specified for each of anomalous vibration characteristic patterns.
      <br/>
      When there is an anomaly in the detected vibration characteristics, the diagnostic section 408 checks the detected vibration characteristics against the anomalous vibration characteristic patterns.
      <br/>
      The location and type of a fault corresponding to the anomalous vibration characteristic pattern most analogous to the detected vibration characteristics are specified, thereby diagnosing the fault in the dynamic system.
    </p>
    <p num="335">Next, the configuration of the braking force control means 402 will be described in reference to FIGS. 20 to 21.</p>
    <p num="336">
      The braking force control means 402 includes a brake valve driver which converts the instruction signal "u" concerning the mean braking power Pm and an vibration instruction signal  DELTA u concerning the minutely vibrated braking force Pv into braking torque actually applied to the wheel.
      <br/>
      As shown in FIG. 20, the brake valve driver comprises a booster 235, a valve control system 236, a brake caliper 237, a reservoir tank 238, and an oil pump 239.
    </p>
    <p num="337">
      A brake pedal 234 is connected to a pressure increase valve 240 of the valve control system 236 via the booster 235 which increases the force used for actuating the brake pedal 234.
      <br/>
      The valve control system 236 receives a valve actuation instruction signal and is connected to the brake caliper 237.
      <br/>
      Further, the valve control system 236 is connected to the reservoir tank 238 via a pressure decrease valve 241.
    </p>
    <p num="338">
      The valve actuation instruction signal is produced by a circuit shown in FIG. 21. This circuit receives the instruction signal "u" concerning the mean braking power Pm and the vibration instruction signal  DELTA u concerning the minutely vibrated braking force Pv.
      <br/>
      As shown in FIG. 21, the mean braking force Pm is vibrated by means of a white signal.
    </p>
    <p num="339">
      The principle of operation of the dynamic system will now be described.
      <br/>
      First, an calculation section 218A calculates a sum u1 of the instruction signal "u" concerning the mean braking power Pm and the vibration instruction signal  DELTA u concerning the minutely vibrated braking force Pv.
      <br/>
      A calculation section 220A calculates a difference u2 between the instruction signal "u" concerning the mean braking power Pm and the vibration instruction signal  DELTA u concerning the minutely vibrated braking force Pv.
      <br/>
      The sum u1 corresponds to the upper limit of the braking force instruction, whereas the sum u2 corresponds to the lower limit of the braking force instruction.
      <br/>
      A calculation section 218B calculates a difference e1 between the upper limit of the braking force instruction u1 and actual braking pressure Pb*, and a calculation section 220B calculates a difference e2 between the lower limit of the braking force instruction u2 and the actual braking pressure Pb*. Instruction signal generation sections 242, 243 calculate the positions of the valves from the differences e1, e2, respectively, and produce instruction signals.
      <br/>
      The braking pressure is vibrated by switching the instruction signals at an vibration frequency corresponding to a white signal.
      <br/>
      Only an instruction signal for increasing the pressure of the valve and maintaining the thus-increased pressure is produced with respect to the sum u1.
      <br/>
      Similarly, only an instruction signal for decreasing the pressure of the valve and maintaining the thus-decreased pressure is produced with respect to the difference u2.
      <br/>
      As a result, excessive switching of the instructions for controlling the braking pressure can be prevented.
    </p>
    <p num="340">The operation of the dynamic system in accordance with the fourth embodiment will be described in reference to a flowchart shown in FIG. 18.</p>
    <p num="341">
      As shown in FIG. 18, first, it is determined whether or not the wheel deceleration calculated from the wheel speed  OMEGA w is smaller than a negative value -a used as the reference value (step 300) If the wheel deceleration is smaller than the negative value -a (YES in step 300), it is determined that the wheel may fail to grip the road surface.
      <br/>
      The next diagnosing step is not performed, and the processing is in a wait condition.
      <br/>
      If the wheel fails to grip the road surface, the tread 215 shown in FIG. 15 is separated from the equivalent model 217 in an equivalent manner.
      <br/>
      As a result, resonance arises between the tread 215 and the wheel 213, and the resonance frequency of the wheel resonance system shifts toward a higher frequency range regardless of the existence of a variation in the air pressure in the tire.
    </p>
    <p num="342">
      In contrast, if the wheel deceleration is larger than the negative value -a (NO in step 300), the braking force control means 402 commences micro vibration of the braking force (step 302).
      <br/>
      Next, the FFT calculation section 404 performs fast Fourier transformation for the time-series data which are sampled at predetermined intervals and relate to the wheel speed  OMEGA w including an vibration component, thereby outputting the thus-calculated frequency time-series data (step 303).
      <br/>
      The vibration characteristic detection section 406 extracts a maximum-gain frequency from the frequency time-series data output from the FFT calculation section 404, to thereby detect the resonance frequency fd (step 304).
      <br/>
      FIG. 22 illustrates the flow of processing performed in steps 303 and 304.
    </p>
    <p num="343">
      As shown in FIG. 18, if the vibration characteristics are detected, the diagnostic section 408 reads out from the memory the vibration characteristic data when the air pressure in the tire is in a normal condition (step 306).
      <br/>
      The vibration characteristic data in a normal condition include the resonance frequency f1 expressed by Equation (8a).
    </p>
    <p num="344">
      Next, the diagnostic section 408 compares the detected vibration characteristics of the dynamic system with the vibration characteristics of the dynamic system in a normal condition, to thereby detect the change  DELTA f in the vibration characteristics (step 308).
      <br/>
      For example, the change  DELTA f is calculated as the quantity of shift (=f1 -fd) in the resonance frequency.
    </p>
    <p num="345">
      Next, it is determined whether or not the thus-calculated change  DELTA f is in excess of a reference value Th (&gt;0) (step 310).
      <br/>
      If the change  DELTA f is determined to exceed the reference value Th (YES in step 310), it is determined that there is an anomaly in the air pressure in the tire of the dynamic system 400.
      <br/>
      In steps 310 and 312, the location and type of the fault may be estimated by comparing the detected vibration characteristics with the data concerning the anomalous vibration characteristic patterns stored in the internal memory of the diagnostic section 408 to thereby determine which of the anomalous vibration characteristic patterns corresponds to the detected vibration characteristics.
      <br/>
      Further, the degree of the fault can also be estimated on the basis of the degree of similarity between the thus-detected vibration characteristic pattern and the anomalous vibration characteristic patterns.
    </p>
    <p num="346">
      In contrast, if the change  DELTA f is determined not to be in excess of the reference value Th (NO in step 310), the air pressure in the tire is determined to be normal (step 314).
      <br/>
      However, in the case of  DELTA f&lt;0 which is improbable to obtain from Equation (8a), it is determined that there arises a fault stemming from a reason other than the variation in the air pressure in the tire.
      <br/>
      In this case, the location and type of the fault may be specified by checking the detected vibration characteristic pattern against the anomalous vibration characteristic patterns.
    </p>
    <p num="347">As described above, in accordance with the fourth embodiment, a fault in the dynamic system is diagnosed on the basis of the vibration characteristics which faithfully reflect a fault in the dynamic system (i.e., a change in the resonance frequency), thereby resulting in an advantage of ability to correctly diagnose a fault through use of a simple method.</p>
    <p num="348">Fifth Embodiment</p>
    <p num="349">
      FIG. 23A shows an ABS actuator comprising one 3-position valve, and FIG. 23B shows an ABS actuator comprising two 2-position valves.
      <br/>
      As shown in FIGS. 23A and 23B, the ABS actuator comprises a pressure increase valve connected to a master cylinder and a pressure decrease valve connected to a reservoir tank.
      <br/>
      These valves are opened or closed in accordance with electrical instruction signals from a control section (not shown).
      <br/>
      With the pressure increase valve being open and the pressure decrease valve being closed, the wheel cylinder pressure is increased to the master cylinder pressure in proportion to the pressure resulting from the driver's depression of the pedal.
      <br/>
      Conversely, with the pressure increase valve being closed and the pressure decrease valve being opened, the wheel cylinder pressure is reduced to the pressure in the reservoir which is substantially the same as the atmospheric pressure.
      <br/>
      With both valves closed, the wheel cylinder pressure is maintained.
    </p>
    <p num="350">Provided that the wheel cylinder pressure is Pb ; the master cylinder pressure is Pd ; and the reservoir pressure is P1, the quantity of brake fluid Qi flowing into the wheel cylinder at the time of an increase in the pressure and the quantity of brake fluid Qr flowing out of the wheel cylinder at the time of reduction in the pressure are each expressed by  (Equation image '45' not included in text)</p>
    <p num="351">
      The quantities of brake fluid Qi and Qr are proportional to a square root of a pressure difference.
      <br/>
      In the mode in which the pressure is held, the quantities of brake fluid Qh flowing into or out of the wheel cylinder is represented by
      <br/>
      Qh =0  (33).
    </p>
    <p num="352">
      In Equations (31) to (33), A1 and A2 represent constants; and " RHO " is a density of the brake fluid.
      <br/>
      When it is assumed that a variation in the density " RHO " is small, that is, " RHO " is and constant, a variation in the hydraulic pressure in the brake with time (dPb /dt) becomes proportional to the quantity of fluid Q. Therefore, there are obtained  (Equation image '46' not included in text)
    </p>
    <p num="353">
      As a result of use of the foregoing mathematical model, a waveform Pb concerning the hydraulic braking pressure of the wheel cylinder becomes similar to that shown in FIGS. 25A to 25C when the instruction signals output to the valve are switched at a given cycle between the pressure increase/hold mode and the pressure decrease/hold mode.
      <br/>
      In FIGS. 25A to 25C, the pressure increase time is ti, and the pressure decrease time is tr.
    </p>
    <p num="354">As shown in FIGS. 25B and 25C, it is understood that the mean value of the hydraulic braking pressure (i.e., mean braking pressure) can be controlled by means of a ratio of the pressure increase time ti to the pressure decrease time tr, and that the amplitude of the micro vibration (or the micro amplitude of braking pressure) can be controlled according to the period of each of the pressure increase time ti and the pressure decrease time tr.</p>
    <p num="355">
      At this time, if the master cylinder pressure is constant, the mean braking pressure Pm and the micro amplitude Pv of the braking pressure are determined uniquely with respect to the pressure increase and decrease time ti and tr.
      <br/>
      More specifically, the mean braking pressure Pm and the micro amplitude Pv of the braking pressure can be represented as functions of the pressure increase and decrease time ti and tr.  (Equation image '47' not included in text)
    </p>
    <p num="356">
      FIGS. 26A and 26B show variations in the mean braking pressure and the micro amplitude of the braking pressure when the pressure increase and decrease time of the valve is changed in a case where the master cylinder pressure is constant at 15.5 (MPa).
      <br/>
      The graphs shown in FIGS. 26A and 26B are obtained by simulation of the mean braking pressure when the pressure increase and decrease time of the valve is switched at a cycle of 24 ms while the master cylinder pressure is maintained at a pressure of 15.5 MPa.
    </p>
    <p num="357">
      FIGS. 27A and 27B show variations in the mean braking pressure and the micro amplitude of the braking pressure when the master cylinder pressure is changed.
      <br/>
      FIGS. 27A and 27B show the case where the pressure increase time is constantly held at 6 ms while the pressure decrease time is sequentially changed from 1, 2, and 3 ms.
      <br/>
      From FIGS. 27A and 27B, it is seen that the next two things hold with respect to the identical pressure increase and decrease time.
    </p>
    <p num="358">(1) The mean braking pressure is proportional to the master cylinder pressure.</p>
    <p num="359">(2) The micro amplitude of the braking pressure is proportional to the square root of the master cylinder pressure.</p>
    <p num="360">From FIGS. 26A to 27B, it is understood that so long as the master cylinder pressure is determined, and the pressure increase and decrease time of the valve is apparent, the mean braking pressure and the micro amplitude of the braking pressure can be uniquely determined.</p>
    <p num="361">
      Next, in reference to FIG. 28, an explanation will be given of the fact that the micro amplitude of the braking pressure and the master cylinder pressure can be estimated from the mean braking pressure calculated from the change in wheel speed and the pressure increase and decrease time periods in a reverse manner.
      <br/>
      FIG. 28 is a block diagram showing the flow of estimation.
    </p>
    <p num="362">As shown in FIG. 28, the mean braking pressure Pm is estimated on the basis of the wheel speed  OMEGA w and a resonance gain Gd, which will be described later, in block A. Subsequently, in a first step in block B, the master cylinder pressure Pd is estimated on the basis of the pressure increase time ti, the pressure decrease time tr, and the mean braking pressure Pm estimated in the block A. In a second step in the block B, the micro amplitude Pv of the braking pressure is estimated on the basis of the pressure increase time ti, the pressure decrease time tr, and the master cylinder pressure Pd estimated in the first step.</p>
    <p num="363">The principle of the estimating operation performed in each of the blocks shown in FIG. 28 will now be described in detail.</p>
    <p num="364">(Principle of Estimating the Mean Braking Pressure in Block A)</p>
    <p num="365">
      First, in order to explain the principle of estimating the mean braking pressure Pm from the wheel speed  OMEGA w in the block A, a mathematical model of the vibration system comprising a wheel, a vehicle body, and the road surface is employed.
      <br/>
      Given that vehicle body speed is  OMEGA u ; wheel speed is  OMEGA w ; and slip speed is  DELTA  OMEGA , the vehicle body speed is expressed as
      <br/>
      OMEGA u = OMEGA w + DELTA  OMEGA   (39).
    </p>
    <p num="366">Assume that the first differential of the vehicle body speed  OMEGA u with time is proportional to the braking torque Tb existing between the tire and the road surface, the braking torque is expressed as  (Equation image '48' not included in text)</p>
    <p num="367">Assume that Tb in the second term on the right side of Equation (40) is taken as a parameter, the braking torque Tb can be transformed into  (Equation image '49' not included in text)</p>
    <p num="368">In Equation (41), the denominator (dTb /d DELTA  OMEGA ) of the coefficient (dTb /dt) in Equation (41) represents the gradient of the braking torque Tb with respect to the slip speed  DELTA  OMEGA .</p>
    <p num="369">The phenomenon of vibrations in the wheel when the vehicle equipped with a body having weight W is traveling at speed  OMEGA u ; i.e., the phenomenon of vibrations in a vibration system comprising the vehicle body, the wheel, and the road surface, will be considered in reference to the model shown in FIG. 16 in which the phenomenon of vibration is equivalently modeled with reference to the rotary shaft of the wheel, as in the previous embodiment.</p>
    <p num="370">
      The braking force acts on the road surface via the surface of a tire tread 215 of the tire which is in contact with the road surface.
      <br/>
      In practice, the braking force acts on a vehicle body as reaction from the road surface.
      <br/>
      Therefore, the model 217--which is equivalent to the vehicle weight converted with reference to the rotary shaft of the wheel--is attached opposite to the wheel 213 via the frictional element 216 (road surface  MU ) existing between the tire tread and the road surface.
      <br/>
      As in the case of a chassis dynamometer, the modeling of vehicle weight is similar to the simulation of vehicle weight by utilization of great inertia existing below the wheel; i.e., mass provided opposite to the wheel.
    </p>
    <p num="371">
      In FIG. 16, the inertia of the wheel 213 including a tire rim is Jw; the spring constant of a spring element 214 provided between the tire rim and the tread 215 is K; the radius of the wheel is R; the inertia of the tread 215 is Jt ; the coefficient of friction of the frictional element 216 between the tread 215 and the road surface is  MU ; and the inertia of the equivalent model 217 is Jv.
      <br/>
      Transmission characteristics between a torque Tb ' and the wheel speed  OMEGA w caused by the wheel cylinder pressure are defined as  (Equation image '50' not included in text)
    </p>
    <p num="372">
      Further, as shown in FIG. 29, a functional relationship--in which the coefficient of friction  MU  reaches its peak value at a certain slip rate--holds between the slip speed  DELTA  OMEGA  and the coefficient of friction  MU  of the road surface.
      <br/>
      In the functional relationship shown in FIG. 29, if the coefficient of friction  MU  changes with respect to the slip speed  DELTA  OMEGA  as a result of micro vibrations in the vicinity of a certain slip rate, the coefficient of friction  MU  of the road surface can be approximated to
      <br/>
      MU = MU 0 + ALPHA R DELTA  OMEGA   (43).
    </p>
    <p num="373">More specifically, since the change in the slip speed stemming from micro vibration is small, the coefficient of friction can be approximated to a line with gradient  ALPHA R.</p>
    <p num="374">
      If Equation (43) is substituted into the relationship of braking torque Tb = MU W caused by the coefficient of friction  MU  between the tire and the road surface, we have
      <br/>
      Tb = MU W= MU 0 w+ ALPHA R DELTA  OMEGA W  (44).
    </p>
    <p num="375">Both sides of Equation (44) are differentiated one time with  DELTA  OMEGA , we have  (Equation image '51' not included in text)</p>
    <p num="376">With regard to the transmission characteristics expressed by Equation (42), the resonance frequency  OMEGA  (infinity)  obtained when the tire grips the road surface is expressed as  (Equation image '52' not included in text)</p>
    <p num="377">
      As the state of friction between the tire and the road surface approaches the peak value  MU , the tire becomes more apt to separate from the road surface and the resonance frequency shifts toward the higher frequency range.
      <br/>
      In other words, the state of friction can be detected by detection of the resonance frequency.
    </p>
    <p num="378">
      The vibration component (( OMEGA w /Pb).vertline.s=j OMEGA  (infinity) ) at the resonance frequency  OMEGA  (infinity)  of the ratio ( OMEGA w /Pb) of the wheel speed  OMEGA w to the braking pressure Pb is taken as the resonance gain Gd.
      <br/>
      The following description is based on the assumption that the ABS actuator applies micro vibration at the resonance frequency  OMEGA  (infinity)  in the vicinity the mean braking pressure.
    </p>
    <p num="379">Since the torque Tb ' caused by the wheel cylinder pressure is in proportion to the braking pressure Pb, the resonance gain Gd is proportional to the vibration component at the resonance frequency  OMEGA  (infinity)  of the ( OMEGA w /Tb'), and the resonance gain Gd is expressed by the following equations.  (Equation image '53' not included in text)  where JA =Jt +Jv +Jw1, JB =Jt +Jv (48)</p>
    <p num="380">(Equation image '54' not included in text)</p>
    <p num="381">
      In general, there is obtained the following relationship
      <br/>
      .vertline.A.vertline.=0.012&lt;&lt;.vertline.B.vertline.=0.1  (50)
    </p>
    <p num="382">and hence the following expression is derived from Equations (45) and (47).  (Equation image '55' not included in text)</p>
    <p num="383">More specifically, the gradient of the braking torque Tb with respect to the slip speed  DELTA  OMEGA  is in proportion to the resonance gain Gd.</p>
    <p num="384">Therefore, Equation can be converted as follows:  (Equation image '56' not included in text)</p>
    <p num="385">
      where h is a proportional coefficient.
      <br/>
      Consequently, by simplification of Equation (52), the transmission function is expressed as  (Equation image '57' not included in text)
    </p>
    <p num="386">
      where "s" represents an operator for Laplace transformation purposes.
      <br/>
      The torque Tb ' caused by the wheel cylinder pressure is the sum of the braking torque Tb and the torque caused by the inertia of wheel Jw and is represented by  (Equation image '58' not included in text)
    </p>
    <p num="387">hence the transmission function is expressed as  (Equation image '59' not included in text)</p>
    <p num="388">Assuming that the mean value of Tb ' on the left side of Equation (55) is proportional to the mean value Pm of the wheel cylinder pressure Pb, the mean value Pm is expressed as  (Equation image '60' not included in text)</p>
    <p num="389">given that K is a proportional coefficient, where  TAU LPF is a time constant of a low pass filter (i.e., a time constant used for calculation of the mean value).</p>
    <p num="390">(Principle of Estimating the Master Cylinder Pressure and the Minute Amplitude of the Braking Pressure in Block B)</p>
    <p num="391">
      As has already been mentioned, if the pressure increase time ti and the pressure decrease time tr instructed to the valve when the master cylinder pressure Pd is constant, the mean braking pressure Pm and the micro amplitude Pv of the braking pressure are uniquely determined by Equations (37) and (38).
      <br/>
      Further, provided that the pressure increase and decrease time periods are constant with respect to the change in the master cylinder pressure Pd, the mean braking pressure Pm is proportional to the master cylinder pressure Pd (see FIG. 27A), and the micro amplitude Pv changes in proportion to the square root of the master cylinder pressure Pd (FIG. 27B).
    </p>
    <p num="392">
      Accordingly, the master cylinder pressure Pd can be calculated from the pressure increase time ti, the pressure decrease time tr, and the mean braking pressure Pm given by Equation (56).
      <br/>
      Further, the micro amplitude Pv of the braking pressure can be calculated from the relationship between the thus-calculated master cylinder pressure Pd and the pressure increase and decrease time ti, tr (see FIG. 27B).
    </p>
    <p num="393">
      For example, assume that there is prepared a two-dimensional table Pm0 (ti, tr) for the pressure increase and decrease time periods required for the mean braking pressure with respect to the master cylinder pressure Pd0.
      <br/>
      If it is found from Equation (56) that the actual mean braking pressure is Pw, the master cylinder pressure Pd can be calculated as follows by comparison of Pm0 (ti, tr) with Pm from the pressure increase and decrease time ti, tr at that time.  (Equation image '61' not included in text)
    </p>
    <p num="394">Further, the micro amplitude Pv at this time can be calculated as follows by use of the two-dimensional table Pv0 (ti, tr) with respect to the master cylinder pressure Pd0.  (Equation image '62' not included in text)</p>
    <p num="395">As previously mentioned, the foregoing calculations are based on the fact that the mean braking pressure is proportional to the master cylinder pressure when the pressure increase time period and the pressure decrease time periods are the same, and the micro amplitude of the braking pressure is proportional to the square root of the master cylinder pressure.</p>
    <p num="396">
      The foregoing method enables estimation of the master cylinder pressure and of the micro amplitude of the braking pressure.
      <br/>
      However, two two-dimensional tables must be prepared.
      <br/>
      In order to simplify the processing, the pressure increase and decrease time are limited in such a way that the micro amplitude of the braking pressure becomes constant with respect to a given master cylinder pressure.
    </p>
    <p num="397">
      FIGS. 30A and 30B show the results of calculation of pressure increase and decrease time periods--at which the micro amplitude of the braking pressure becomes constant at 0.3 MPa when the master cylinder pressure is maintained at 15.5 MPa--with respect to each of the mean braking pressures.
      <br/>
      From the relationship shown in FIGS. 30A and 30B, the mean braking pressure referred to obtain the pressure increase and decrease time periods--at which both the master cylinder pressure and the micro amplitude of the braking pressure become constant--is taken as a mean braking pressure reference value Pmc.
    </p>
    <p num="398">With reference to FIGS. 30A and 30B, if the valve is actuated at the pressure increase and decrease time corresponding to the mean braking pressure reference value Pmc, the master cylinder pressure Pd and the micro amplitude Pv of the braking pressure can be obtained as shown below with respect to the mean braking pressure Pm estimated at this time.  (Equation image '63' not included in text)</p>
    <p num="399">Since the Pd0 and Pv0 in Equations (59) and (60) are constant (Pd0 =15.5 MPa and Pv0 =0.3 Mpa), the two two-dimensional tables can be omitted, thereby simplifying the brake pressure estimation apparatus.</p>
    <p num="400">(Anti-Lock Brake Controller Using the Brake Pressure Estimation Apparatus)</p>
    <p num="401">
      As has already been shown by Equation (51), the gradient (dTb /d DELTA  OMEGA ) of the braking torque Tb with respect to the slip rate  DELTA  OMEGA  is proportional to the resonance gain Gd that is the ratio of the micro amplitude  OMEGA w of the wheel speed to the micro amplitude Pv of the braking pressure.
      <br/>
      As shown in FIG. 31, assume that the gradient (dTb /d DELTA  OMEGA ) becomes zero.
      <br/>
      In this state, the braking torque Tb becomes maximum, and if an attempt is made to apply additional braking force, the wheels are known to become locked, thereby resulting in abrupt loss of the braking force.
    </p>
    <p num="402">
      An ABS system in accordance with the fifth embodiment of the present invention performs controlling operation so as to stop the vehicle without tire lock while the braking force in the vicinity of the peak braking force is maintained.
      <br/>
      From the magnitude of the resonance gain, it is possible to determine whether or not the braking force has approached the vicinity of its peak value.
    </p>
    <p num="403">
      More specifically, the resonance gain is calculated from the micro amplitude of braking pressure and the micro amplitude of the wheel speed, both of which are obtained by use of the foregoing braking pressure estimation apparatus.
      <br/>
      If the resonance gain Gd is greater than a certain reference value Gs, the braking pressure is not reduced.
      <br/>
      In contrast, if the resonance gain Gd reduces to a value smaller than the reference value Gs, the braking force is deemed to approach its peak value, and hence the braking pressure is reduced.
      <br/>
      As a result, the braking torque Tb can be maintained at the maximum braking torque corresponding to the peak  MU , thereby enabling highly-accurate anti-lock brake controlling operation regardless of the condition of the road surface.
    </p>
    <p num="404">A breaking pressure estimation apparatus in accordance with the fifth embodiment of the present invention estimates the micro amplitude of the braking pressure used for estimation of the resonance gain without use of a pressure sensor, thereby enabling a reduction in the cost of the entire ABS system.</p>
    <p num="405">Next, a description will be given of a braking pressure estimation apparatus and an antilock brake controller according to the fifth embodiment of the present invention.</p>
    <p num="406">(Example of Configuration of a Braking Pressure Estimation Apparatus)</p>
    <p num="407">FIG. 32 shows the configuration of an anti-lock brake controller which employs a braking pressure estimation apparatus 130 in accordance with the fifth embodiment.</p>
    <p num="408">As shown in FIG. 32, the braking pressure estimation apparatus 130 (designated by a broken line) comprises a mean braking pressure estimation section 132 which receives the wheel speed  OMEGA w and the resonance gain Gd and estimates the mean braking pressure Pm ; a master cylinder pressure estimation section 134 which estimates the master cylinder pressure Pd from the mean braking pressure Pm and the mean braking pressure reference value Pmc ; and a braking pressure micro amplitude estimation section 136 for estimating the micro amplitude Pv of the braking pressure from the master cylinder pressure Pd.</p>
    <p num="409">
      The wheel speed  OMEGA w is obtained by processing a signal received from an unillustrated wheel speed sensor mounted on each wheel of a vehicle 150.
      <br/>
      For example, the detection signal from the wheel speed sensor is converted into a digital signal by an analog-to-digital converter, and the signal can be processed in a computer.
      <br/>
      Alternatively, a wheel speed can be detected through use of an analog signal processing circuit or digital counter circuit provided outside the sensors.
    </p>
    <p num="410">
      A mean braking pressure estimation section 132 can be implemented in the form of a high-order filter which calculates and outputs the mean braking pressure Pm according to Equation (56).
      <br/>
      Alternatively, the mean braking estimation section can also be implemented by processing a digital signal--which is obtained by conversion of the detection signal from the wheel speed sensor through use of an analog-to-digital converter--within a computer according to Equation (56).
      <br/>
      FIG. 33 shows an example of configuration of the mean braking pressure estimation section 132.
    </p>
    <p num="411">
      As shown in FIG. 33, the mean braking pressure estimation section 132 comprises a deviation calculator 160 for calculating a difference (or deviation) between the input wheel speed  OMEGA w and another input signal; a multiplier 164 connected to an output terminal of the deviation calculator 160; and a k-fold amplifier 168 connected to an output terminal of the multiplier 164.
      <br/>
      A 1/h-fold amplifier 162 which reduces the input resonance gain Gd by a factor of "h" is connected to an input terminal of the multiplier 164, and another output terminal of the multiplier 164 is connected to another input terminal of the deviation calculator 160 via a Laplace transformer 166.
    </p>
    <p num="412">
      An output terminal of the amplifier 168 is connected to a subtracter 172 via a filter 170 which calculates (K/1+ TAU LPFs).
      <br/>
      Another input terminal of the subtracter 172 is connected to a filter 174 which receives the wheel speed  OMEGA w and calculates and outputs (Jw K/1+ TAU LPFs).
      <br/>
      The subtracter 172 adds together outputs from the filters 172 and 174 after having inverting the signs of the outputs and outputs the result of such addition as the mean braking pressure Pm.
    </p>
    <p num="413">The master cylinder pressure estimation section 134 shown in FIG. 32 can be realized in the form of a circuit which performs multiplication and division represented by Equation (59), and an example of configuration of the master cylinder pressure estimation section 134 is shown in FIG. 34.</p>
    <p num="414">As shown in FIG. 34, the master cylinder pressure estimation section 134 comprises a divider 180 for dividing the mean braking pressure Pm calculated by the mean braking pressure estimation section 132 by the input mean braking pressure reference value Pmc ; and an amplifier 182 which is connected to an output terminal of the divider 180, multiplies the result of division by a factor of Pd0, and outputs the result as the master cylinder pressure Pd.</p>
    <p num="415">
      The braking pressure micro amplitude estimation section 136 shown in FIG. 32 can be realized in the form of a circuit which performs arithmetic operations including the calculation of a square root expressed by Equation (60).
      <br/>
      An example of configuration of the braking pressure micro amplitude estimation section 136 is shown in FIG. 35.
    </p>
    <p num="416">
      As shown in FIG. 35, the braking pressure micro amplitude estimation section 136 comprises a square root calculation section 184 for calculating the square root of the master cylinder pressure Pd calculated by the master cylinder pressure estimating section 134; and an amplifier 186 which multiplies the square root (Pd) calculated by the square root calculating section 184 by a factor of (Pv0 /Pd0), and outputs the result as the braking pressure micro amplitude Pv.
      <br/>
      The calculation of a square root by the square root calculating section 184 can be simply effected by execution of numerical processing for the purpose of calculating a square root, or upon reference to a square root table, after having input data into a computer.
    </p>
    <p num="417">(Example of Configuration of the Anti-lock Brake Controller)</p>
    <p num="418">The anti-lock brake controller shown in FIG. 32 comprises a wheel speed micro amplitude detection section 138 for detecting the amplitude  OMEGA w of the micro vibration component from the wheel speed  OMEGA w ; a resonance gain calculation section 140 for calculating the resonance gain Gd from the wheel speed micro amplitude  OMEGA v detected by the wheel speed micro amplitude detection section 138 and the braking pressure micro amplitude Pv calculated by the braking pressure micro amplitude estimation section 136; a PI controller 142 for calculating the mean braking pressure reference value Pmc from the thus-calculated resonance gain Gd ; a table 144 for calculating the pressure increase and decrease time required for the valve from the mean braking pressure reference value Pmc ; an electrical current controller 146 for outputting an instruction current signal Icmd used for controlling the valve according to the pressure increase time ti and the pressure decrease time tr obtained from the table 144; and an ABS actuator 148 (see FIGS. 23A and 23B) having a valve whose pressure increase or decrease time periods are controlled through use of the instruction current Icmd.</p>
    <p num="419">
      The wheel speed micro amplitude detection section 138 is configured so as to extract the resonance frequency component of the vibration system comprising the vehicle body, the wheel, and the road surface.
      <br/>
      Because the resonance frequency of the vibration system is about 40 Hz, the wheel speed micro amplitude detection section 138 is preferably set so as to operate at a cycle of 24 ms; i.e., about 41.7 Hz, in consideration of controllability.
      <br/>
      The resonance frequency component can be obtained by feeding an output from the vibration system to a band-pass filter centered at a frequency of 41.7 Hz, and by subjecting an output from the band-pass filter to full-wave rectification and d.c. smoothing operation.
      <br/>
      Alternatively, the resonance frequency component can be extracted by sequentially acquiring time-series data whose interval is an integral multiple of the cycle; e.g., 24 ms (or one cycle) or 48 ms (two cycles), and by calculating a correlation with a unit sine wave and a unit cosine wave of 41.7 Hz.
    </p>
    <p num="420">
      The resonance gain calculation section 140 calculates the resonance gain Gd by dividing the wheel speed micro amplitude  OMEGA v received from the wheel speed micro amplitude detection section 138 by the braking pressure micro amplitude Pv received from the braking pressure estimation apparatus 130.
      <br/>
      In the anti-lock brake controller in accordance with the fifth embodiment, the braking pressure must be immediately reduced when the resonance gain Gd decreases to a value smaller than the reference value Gs.
      <br/>
      Therefore, the resonance gain calculation section 140 calculates a deviation  DELTA G by dividing the difference (Gd -Gs) (or deviation) between the resonance gain Gd and the reference value G, by the resonance gain Gd and outputs the thus-calculated deviation to the PI controller 142.
      <br/>
      Here, the deviation  DELTA G is given by  (Equation image '64' not included in text)
    </p>
    <p num="421">
      An example of configuration of the resonance gain calculation section 140 that calculates the deviation  DELTA G is shown in FIG. 36. As shown in FIG. 36, the resonance gain calculation section 140 comprises a divider 188 for dividing the wheel speed micro amplitude  OMEGA v by the braking pressure micro amplitude Pv ; a divider 190A which divides a given reference value Gs by the value ( OMEGA v /Pv =Gd) output from the divider 188; and a deviation calculator 192 which is connected to an output terminal of the divider 190A, subtracts the value (Gs /Gd) output from the divider 190A from 1, and outputs the thus-calculated  DELTA G. The reference value Gs is previously stored in the memory as resonance gain values at which the state of friction between the road surface and the tire approaches the peak braking force (i.e., the maximum coefficient of friction  MU : peak  MU ).
      <br/>
      The reference value Gs is read out from the memory at the time of the calculation expressed by Equation (61).
    </p>
    <p num="422">
      When tire slip on the road surface increases suddenly, the resonance gain Gd of the resonance frequency component becomes smaller than the reference gain Gs.
      <br/>
      As a result, the second term (Gs /Gd) in Equation (61) becomes abruptly greater than one, and  DELTA G takes on a large negative value.
      <br/>
      More specifically, as a result of use of the term (Gs /Gd), the sensitivity of  DELTA G for detecting the state--in which tire slip increases suddenly--is improved compared with a case where the reciprocal of the second term (Gd /Gs) is used.
      <br/>
      As a result, the PI controller 42 can be correctly controlled on the basis of  DELTA G.
    </p>
    <p num="423">The output terminal of the resonance gain calculation section 140 is connected to the mean braking pressure estimation section 132, and the calculated resonance gain Gd is input to the mean braking pressure estimation section 132.</p>
    <p num="424">
      The PI controller 142 shown in FIG. 32 calculates the mean braking pressure reference value Pmc which matches  DELTA G calculated by the resonance gain calculation section 140 to zero or substantially to zero.
      <br/>
      In many cases, the hardware of an actuator of an ABS system disposed in a commercially-available vehicle is configured so as to prevent the braking pressure--which is greater than the braking pressure resulting from the driver's depressing action--from being applied to the wheel.
      <br/>
      The PI controller 142 must be designed so as to immediately reduce the braking pressure only when the braking pressure resulting from the driver's depressing action is increased and wheel slip approaches or exceeds the peak braking force.
      <br/>
      FIG. 37 shows an example of the configuration of the PI controller 142.
    </p>
    <p num="425">
      As shown in FIG. 37, with the exception of sections for the purposes of eliminating positive values or out-range values, the PI controller 142 includes a first calculation section which performs, on the deviation  DELTA G, arithmetic computation expressed by the following equation
      <br/>
      V.function. =Gc (1+ OMEGA c /s) DELTA G  (62).
    </p>
    <p num="426">Thus, the PI controller 142 controls a proportional resonance gain Gc and an integrated resonance gain Gc OMEGA c.</p>
    <p num="427">
      The section for calculating the proportional item of Equation (62) includes a positive value elimination section 194 which eliminates a positive value from  DELTA G and outputs only a negative value.
      <br/>
      In connection with tire-to-road-surface characteristics, as the slip speed increases, the tire comes into an ungrip state, and the resonance frequency of the vibration system shifts to a higher frequency range.
      <br/>
      As a result, the resonance gain Gd --which is the resonance frequency component of the vibration system comprising the vehicle body, the wheel, and the road surface--reduces.
      <br/>
      For this reason, the braking pressure is applied to the wheel only when  DELTA G is in a negative state in which the actual resonance gain Gd becomes smaller than the reference value Gs ; i.e., when the tire is in a state immediately before tire lock in which the tire is braked and the peak value  MU  is exceeded.
    </p>
    <p num="428">
      The section for calculating an integral item in Equation (62) comprises a Laplace calculator 196 for calculating 1/s of  DELTA G and a  OMEGA c -fold amplifier 198 connected to the output terminal of the Laplace calculator 196.
      <br/>
      The output terminals of the positive value elimination section 194 and the amplifier 198 are connected to a Gc -fold amplifier 202 via an adder 200 which adds the proportional item to the integral item.
      <br/>
      With the foregoing configuration, the amplifier 202 outputs Vf represented by Equation (62).
    </p>
    <p num="429">
      As shown in FIGS. 30A and 30B, the pressure increase instruction time ti and the pressure decrease instruction time tr are determined with respect to the calculated mean braking pressure.
      <br/>
      The mean braking pressure reference value Pmc used for calculating the actual pressure increase time and the pressure decrease time must be an output within the range from the most decreased pressure of 0.5 MPa to the most increased pressure of 12 MPa when the master cylinder pressure is 15.5 MPa. This range corresponds to the range of about 0.03 to 0.77 times that of the master cylinder pressure.
    </p>
    <p num="430">
      The state in which the deviation  DELTA G is greater than zero, or a positive value, signifies that tire slip does not approach the peak braking force.
      <br/>
      Accordingly, when  DELTA G becomes a positive value, and Vf becomes zero, the mean braking pressure reference value Pmc must be output as a value which enables the maximum increased pressure of 12 MPa.
    </p>
    <p num="431">As a result, the mean braking pressure reference value Pmc is calculated by the following equation from Vf given by Equation (62).</p>
    <p num="432">Pmc =Pd0 (V.function. +V0)  (63)</p>
    <p num="433">where Pd0 =15.5 MPa and V0 =0.77. Before commencing the calculation expressed by Equation (63), the range of Vf must be set to -0.74 to 0 in order to prevent the mean braking pressure reference value Pmc from decreasing to a pressure smaller than a pressure of 0.03 * Pd0 in the maximum pressure reduced state.</p>
    <p num="434">In the PI controller 142 for providing the above-described restriction, the section for performing the calculation expressed by Equation (63) comprises an out-range value elimination section 204 for eliminating a value outside the range of Vf output from the amplifier 202; an adder 208 which adds Vf output from the out-range value elimination section 204 to V0 received from another input terminal; and an amplifier 210 for multiplying (Vf +V0) output from the adder 208 by a factor of Pd0.</p>
    <p num="435">
      When Vf is outside the range of -0.74 to 0, the out-range value elimination section 204 outputs a value within the range (i.e., a value corresponding to the limit of the range).
      <br/>
      In contrast, when Vf is within the range, the out-range value elimination section 204 outputs the value as it is.
      <br/>
      Even if the out-range value elimination section 204 eliminates a value outside the range of Vf actually output from a controller, the deviation  DELTA G always occur unless control is accomplished.
      <br/>
      As a result, a risk arises of the deviation  DELTA G being an input of integral component and increasing an integral output, thereby resulting in divergence of the integral output.
      <br/>
      Eventually, a large difference arises between the value--which has been obtained by the above-mentioned process in the out-range value elimination section---and the sum of the actually-output proportional item and the actually-output integral item, thereby resulting in a delay in the output of the overall PI controller.
    </p>
    <p num="436">
      To prevent such a problem, a deviation calculator 206 is provided for subtracting an output from the out-range value elimination section 204 from an input to the same, and the output terminal of the deviation calculator 206 is connected to the Laplace calculator 196.
      <br/>
      Thus, stable control can be accomplished by feeding back to the Laplace calculator 196 the output from the deviation calculator 206; i.e., the value eliminated by the out-range value elimination section 204, as an initial value of the integral item.
    </p>
    <p num="437">The output terminal of the PI controller 142 is connected to the master cylinder pressure estimation section 134, and the calculated mean braking pressure reference value Pmc is output to the master cylinder pressure estimation section 134.</p>
    <p num="438">A table 144 shown in FIG. 32 shows the functional relationship between the mean braking pressure and the pressure increase time shown in FIG. 30A and the functional relationship between the mean braking pressure and the pressure decrease time shown in FIG. 30B. Upon reference to the table 144, there can be obtained the pressure increase time ti and the pressure decrease time tr, both of which correspond to the mean braking pressure reference value Pmc calculated by the PI controller 142.</p>
    <p num="439">The current controller 146 controls the pressure increasing and decreasing time periods of the valve of the ABS actuator 148 such that they match the pressure increase and decrease time ti and tr corresponding to the calculated mean braking pressure reference value Pmc.</p>
    <p num="440">
      More specifically, the current controller 146 switches the mode of the valve between the pressure increase mode and the pressure decrease mode at a cycle which is half (T/2) the cycle T (e.g., 24 ms) of micro vibration.
      <br/>
      Pressure increase and decrease instruction signals are output to the valve from the moment the mode is switched solely for the period of the pressure increase time ti or the pressure decrease time tr.
      <br/>
      During the remaining period of T/2, the current controller 146 outputs a pressure hold instruction signal to the valve.
      <br/>
      By means of these actuation instruction signals, micro vibration of the braking pressure and control of the mean braking pressure can be readily effected.
      <br/>
      FIG. 38 shows the outline of the operation instruction signals output to the valve of the ABS actuator 148 in the foregoing control example (i.e., an example of operation of the braking pressure controller).
    </p>
    <p num="441">
      The pressure increase and decrease time periods may be clocked through used of counter timers which are reset when the mode is switched.
      <br/>
      Alternatively, the resonance gain of the integrator which is reset upon changeover of the mode may be caused to change in inverse proportion to the pressure increase and decrease time ti and tr, and the period of time until the output of the integrator reaches a predetermined threshold value may be used to determine the pressure increase and decrease time periods.
      <br/>
      Thus, instructions to be output to the valve are generated, and a control current corresponding to each state is supplied to the ABS actuator 148.
    </p>
    <p num="442">The operation of the ABS system in accordance with the present invention will now be described.</p>
    <p num="443">
      In the braking pressure estimation apparatus in the ABS system shown in FIG. 32, the mean braking pressure estimation section 132 calculates the mean braking pressure Pm from the wheel speed  OMEGA w and the resonance gain Gd through use of Equation (56).
      <br/>
      The master cylinder pressure estimation section 134 calculates the master cylinder pressure Pd from the thus-calculated mean braking pressure Pm and the mean braking pressure reference value Pmc through use of Equation (59).
      <br/>
      Alternatively, the master cylinder pressure estimation section 134 may be configured so as to calculate the pressure increase time ti and the pressure decrease time tr, both of which correspond to the mean braking pressure calculated by the PI controller 142; to obtain the mean braking pressure Pm0 corresponding to the given master cylinder pressure Pd0 from the two-dimensional table defining the correspondence between the pressure increase and decrease time and the mean braking pressure; and to calculate the master cylinder pressure Pd through use of Equation (57).
    </p>
    <p num="444">
      The braking pressure micro amplitude estimation section 136 calculates the braking pressure micro amplitude Pv from the calculated master cylinder pressure Pd in accordance with Equation (60).
      <br/>
      The braking pressure micro amplitude estimation section 136 may have a structure to obtain pressure increase and decrease time periods ti and tr corresponding to the means braking pressure calculated by the PI controller 142; to obtain a braking pressure micro amplitude Pv0 corresponding to the predetermined master cylinder pressure Pdo from two-dimensional tables showing the correspondence between the pressure increase and decrease time periods and the braking pressure micro amplitude; and to calculate the braking pressure micro amplitude Pv in accordance with Equation (58).
    </p>
    <p num="445">
      In the ABS system, the wheel speed micro amplitude detection section 138 detects the amplitude of the resonance frequency component of the wheel speed  OMEGA w detected by an unillustrated wheel speed sensor.
      <br/>
      Next, the resonance gain calculation section 140 calculates the resonance gain Gd from the braking pressure micro amplitude Pv and the amplitude of the resonance frequency component of the wheel speed  OMEGA w. The thus-calculated resonance gain Gd is transferred to the mean braking pressure estimation section 132, and the deviation  DELTA G is calculated from the resonance gain Gd and the reference gain Gs through use of Equation (61).
    </p>
    <p num="446">
      The PI controller 142 calculates the mean braking pressure reference value Pmc such that the deviation  DELTA G calculated by the resonance gain calculation section 140 becomes zero or substantially zero.
      <br/>
      The thus-calculated mean braking pressure reference value Pmc is transferred to the master cylinder pressure estimation section 134, and the mean braking pressure reference value Pmc is converted to the pressure increase and decrease time periods for the valve upon reference to the table 144.
      <br/>
      Subsequently, the current controller 146 converts the pressure increase and decrease time periods corresponding to the mean braking pressure reference value Pmc into the actuation instruction signal such as that shown in FIG. 38. The thus-converted actuation instruction signals are transmitted to the ABS actuator 148.
      <br/>
      The valve in the ABS actuator 148 operates to increase or decrease the braking pressure according to the actuation instruction signal shown in FIG. 38, whereby the braking pressure corresponding to the mean braking pressure reference value Pmc is applied to the wheel cylinder.
    </p>
    <p num="447">
      If an attempt is made to apply to the wheel the braking pressure exceeding the maximum braking pressure (i.e., the braking pressure obtained when the gradient of the braking torque shown in FIG. 31 is zero), the resonance frequency of the vibration system shifts toward a higher frequency range.
      <br/>
      Through the aforementioned control operation, the resonance gain Gd produced when the tire grips the road surface decreases, so that the deviation  DELTA G in Equation (61) becomes negative.
      <br/>
      As a result, the braking force is immediately reduced, thereby preventing tire lock.
      <br/>
      Further, the braking force is controlled so as to make the deviation  DELTA G zero, the vehicle is braked while the braking force is maintained at its peak value shown in FIG. 31, resulting in a reduction in a braking distance and in braking time.
    </p>
    <p num="448">
      As mentioned above, the ABS system in accordance with the fifth embodiment controls the braking force on the basis of the resonance characteristics of the vibration system comprising the vehicle body, the wheel, and the road surface.
      <br/>
      Compared with the conventional ABS system which reduces the braking force when detecting wheel lock, the ABS system according to the present invention ensures smoother and more continual variations in the braking force.
      <br/>
      In addition, since the braking force is controlled on the basis of the resonance characteristics, stable control of the braking force becomes feasible regardless of variations in the road surface and can be implemented through use of single control logic.
    </p>
    <p num="449">
      As shown in FIG. 38, the mode is switched at a given cycle between the pressure increase mode and the pressure decrease mode, and the braking pressure is controlled by adjusting the duration of the pressure increase time and of the pressure decrease time in each mode, thereby enabling continual braking pressure control.
      <br/>
      The frequency at which the mode is switched (i.e., the frequency of micro vibration) is comparatively high, or 40 Hz.
      <br/>
      Further, the amplitude of vibration is micro so as to be able to detect the resonance characteristics, and hence variations in the braking pressure can be suppressed to such an extent as not to provide the driver with unpleasant feeling, thereby preventing kickback.
      <br/>
      Still further, great variations are not imparted to vehicle behavior, which in turn improves ABS control.
      <br/>
      The mean braking pressure can be continually controlled through use of two valves employed in the conventional ABS system; i.e., a pressure increase valve and a pressure decrease valve, thereby not requiring a change in hardware.
    </p>
    <p num="450">
      The anti-lock brake controller using the braking pressure estimation apparatus in accordance with the fifth embodiment is applied to an actual vehicle.
      <br/>
      In reference to FIGS. 39A to 39D, an explanation will be given of the result of operation of the anti-lock brake controller produced when it is actuated under specific conditions.
    </p>
    <p num="451">
      FIGS. 39A to 39D show the result of operation of the anti-lock brake controller and variations in physical quantities associated with the operation in a test in which the vehicle equipped with the anti-lock brake controller is stopped within a period of about three seconds by application of braking force to the vehicle which is in an ordinary traveling condition.
      <br/>
      The vehicle undergoes a shift from a state in which the tire grips the road surface to a state in which the coefficient of friction of the tire gradually approaches the peak value  MU , as well as to a state in which the coefficient of friction of the tire exceeds the peak value  MU , so that the tire is in a state immediately before tire lock.
    </p>
    <p num="452">
      FIG. 39A shows variations in the wheel speed  OMEGA w and the vehicle body speed  OMEGA u with time resulting from the foregoing shift in the vehicle state.
      <br/>
      As can be seen from the drawing, the wheel speed  OMEGA w greatly changes after lapse of about 2.3 seconds since the braking action is commenced (set to 0 second), and the vehicle is shifted to a state immediately before wheel lock.
    </p>
    <p num="453">
      FIG. 39B shows variations in the slip rate S with time.
      <br/>
      The slip rate S is expressed by  (Equation image '65' not included in text)
    </p>
    <p num="454">
      As is clear from FIG. 39B, the slip rate S starts to increase after lapse of about two seconds, and the coefficient of friction gradually approaches to the peak value  MU .
      <br/>
      After lapse of 2.3 seconds, the slip rate extremely oscillates and exceeds the peak value  MU .
    </p>
    <p num="455">
      FIG. 39C shows variations with time in the wheel cylinder pressure Pb measured by the pressure sensor as well as in the mean braking pressure Pm estimated by the braking pressure estimation apparatus in accordance with the fifth embodiment (i.e., the mean braking pressure estimation section 132 shown in FIG. 32).
      <br/>
      As is evident from FIG. 39C, the estimated mean braking pressure Pm substantially matches the actual wheel cylinder pressure Pb.
      <br/>
      Particularly, a high degree of match is obtained in the area of the maximum variation between the pressure Pm and the pressure Pb, thereby verifying the degree of accuracy of braking pressure estimation according to the present invention.
    </p>
    <p num="456">
      FIG. 39D shows variations with time in the reference gain Gs and the resonance gain Gd calculated by the resonance gain calculation section 140 in accordance with the fifth embodiment.
      <br/>
      As is obvious from the drawing, the resonance gain Gd increases in comparison with the reference gain Gs in the region where the tire is in a state immediately before tire lock, enabling highly-sensitive detection of the state of the tire immediately before tire lock.
    </p>
    <p num="457">
      FIG. 39D shows variations in Gd and Gs with time.
      <br/>
      The vehicle speed has a tendency to decrease with elapse of time, and the resonance gain Gd has a tendency to increase with a reduction in the vehicle speed.
      <br/>
      For these reasons, the reference gain Gs is set so as to increase with lapse of time.
      <br/>
      As a result, the ratio of the resonance gain Gd to the reference gain Gs is appropriately set.
    </p>
    <p num="458">
      In the aforementioned fifth embodiment, the resonance gain is calculated.
      <br/>
      However, the present invention is not limited to this.
      <br/>
      Instead of the resonance gain, the gradient of braking force with respect to the slip speed, the gradient of braking torque with respect to the slip speed, the gradient of friction coefficient between the road surface and the wheel with respect to the slip speed (the road surface gradient  MU ) may be calculated and processed in the same way.
      <br/>
      In order to calculate the road surface gradient  MU , the above-described resonance gain is multiplied by a predetermined conversion factor.
      <br/>
      In order to calculate the gradient of braking force with respect to the slip speed, the gradient of braking torque with respect to the slip speed is calculated and is then multiplied by a predetermined conversion factor (the inverse number of radial of a wheel).
      <br/>
      A method of calculating the braking torque with respect to the slip speed will be explained hereinafter.
    </p>
    <p num="459">
      The motion of each wheel and the vehicle body is expressed by the following equations of motion (64) and (65):
      <br/>
      J OMEGA i =Rc Fi '(V/Rc - OMEGA i)-Tbi  (64)
    </p>
    <p num="460">(Equation image '66' not included in text)</p>
    <p num="461">
      where Fi ' represents a braking force developed in the i-th wheel, "Tbi " the braking torque applied to the i-th wheel in response to a stepping-on force, "M" the mass of the vehicle, "Rc" the effective radius of the wheel, "J" the inertia of the wheel, and "v" the vehicle speed.
      <br/>
      In the above Equation, reference symbol denotes differential with respect to time.
      <br/>
      In Eqs. (64) and (65), Fi ' is indicated as a function of the slip speed (v/Rc - OMEGA i).
      <br/>
      The vehicle speed is equivalently represented as an angular velocity  OMEGA v (Equation (66)), and the friction torque Rc Fi ' is expressed as the linear function of the slip speed (gradient ki, and intercept Ti on the y-axis) (Equation (68)).
    </p>
    <p num="462">
      V=Rc OMEGA v  (66)
      <br/>
      Rc Fi '( OMEGA v - OMEGA i)=ki * ( OMEGA v - OMEGA i)+Ti  (67)
    </p>
    <p num="463">Further, when Eqs. (66) and (67) are substituted into Eqs. (64) and (65) and the wheel speed  OMEGA i and the vehicle speed  OMEGA v are represented as time-series data  OMEGA i k and  OMEGA v k which are wheel speed  OMEGA i and the vehicle speed  OMEGA v sampled at sampling intervals  TAU  (where "k" is a sampling point in time; k=1, 2, . . . which are separated from each other by the sampling interval  TAU ), whereby the following Equations (68) and (69) are obtained.  (Equation image '67' not included in text)</p>
    <p num="464">Eqs. (68) and (69) are combined together so as to eliminate the equivalent angular velocity  OMEGA v of the vehicle, yielding  (Equation image '68' not included in text)</p>
    <p num="465">If the maximum friction torque of Rc Mg/4 ("g" represents a gravitational acceleration) occurs on condition that the slip speed is 3 rad/s, we have  (Equation image '69' not included in text)</p>
    <p num="466">When we consider a specific example in which  TAU =0.01 (sec.), Rc =0.3 (m), and M=1000 (kg), we have max (ki)=245. Accordingly,  (Equation image '70' not included in text)</p>
    <p num="467">Equation (70) can be approximated as follows:  (Equation image '71' not included in text)</p>
    <p num="468">where  (Equation image '72' not included in text)</p>
    <p num="469">
      As a result, Equation (74) can be described in a linear form with regard to unknown coefficients ki and fi.
      <br/>
      The friction torque gradient ki with respect to the slip speed can be estimated by application of the on-line parameter identification method to Equation (74).
    </p>
    <p num="470">More specifically, the time-series data concerning the friction torque gradient can be estimated from the time-series data  OMEGA i k of detected wheel speed through repetition of steps 1 and 2 to be given hereinbelow.</p>
    <p num="471">
      Step 1
      <br/>
      PHI k TAU  *  THETA i =yi k  (75)
    </p>
    <p num="472">(Equation image '73' not included in text)  yi k=- OMEGA i k+2 OMEGA i k-1- OMEGA i k-2 (78)</p>
    <p num="473">The first element of the matrix  PHI i k of Equation (76) denotes a physical quantity concerning a variation in the wheel speed during one sampling period, and Equation (78) shows a physical quantity concerning the per-sampling-period change in the degree of the per-sampling-period variation in the wheel speed.</p>
    <p num="474">
      Step 2
      <br/>
      THETA i k= THETA i k-1+Li k(yi k- PHI i k TAU  *  THETA i k-1)  (79)
    </p>
    <p num="475">(Equation image '74' not included in text)</p>
    <p num="476">
      THETA i is calculated by the above recurrence formula, and the first element of the matrix of  THETA i is extracted as the estimated friction torque gradient.
      <br/>
      In Equation (80),  LAMBDA  denotes a forgetting factor (e.g.,  LAMBDA =0.98) showing the is eliminated, and "T " denotes the transposition of the matrix.
    </p>
    <p num="477">The left-side side of Equation (79) shows a physical quantity which represents the time history of the physical quantity related to the variation in the wheel speed and the time history of the physical quantity related to the change with regard to the variation in the wheel speed.</p>
  </description>
  <claims format="original" lang="en" id="claim_en">
    <claim num="1">
      <claim-text>What is claimed is:</claim-text>
      <claim-text>1.</claim-text>
      <claim-text>A braking pressure estimation device, comprising:</claim-text>
      <claim-text>a first input means for receiving a wheel speed input; a second input means for receiving a resonance gain which is a ratio of a micro amplitude of the wheel speed at a resonance frequency with respect to a micro amplitude of a braking pressure at the time of vibration of the braking pressure at the resonance frequency of a resonance system including a vehicle body, a wheel, and a road surface; a third input means for receiving a pressure increase/decrease time required to achieve a mean braking pressure with respect to a given master cylinder pressure or a physical quantity associated with the pressure increase/decrease time; braking pressure estimating means for estimating the mean braking pressure from the input wheel speed and a resonance gain on the basis of a model in which the gradient of braking torque with respect to a slip speed is proportional to the resonance gain; master cylinder pressure estimating means for estimating a master cylinder pressure on the basis of the mean braking pressure estimated by said braking pressure estimating means and the pressure increase/decrease time required to achieve the mean braking pressure or the physical quantity associated with the pressure increase/decrease time;</claim-text>
      <claim-text>and micro amplitude estimating means for estimating the micro amplitude of the braking pressure on the basis of the master cylinder pressure estimated by said master pressure estimating means and of the pressure increase/decrease time required to achieve the mean braking pressure or the physical quantity associated with the pressure increase/decrease time.</claim-text>
    </claim>
    <claim num="2">
      <claim-text>2. The braking pressure estimation device according to claim 1, wherein the resonance frequency is about 40 Hz.</claim-text>
    </claim>
    <claim num="3">
      <claim-text>3. An anti-lock brake controller comprising: wheel speed detection means for detecting a wheel speed; resonance gain calculation means for calculating a resonance gain which is the ratio of the micro amplitude of the wheel speed at a resonance frequency with respect to the micro amplitude of a braking pressure at the time of vibration of the braking pressure at the resonance frequency of a resonance system including a vehicle body, a wheel, and a road surface; braking pressure estimating means for estimating a mean braking pressure from the wheel speed detected by said wheel speed detection means and the resonance gain calculated by said resonance gain calculation means on the basis of a model in which the gradient of braking torque with respect to a slip speed is proportional to the resonance gain; master cylinder pressure estimating means for estimating master cylinder pressure on the basis of the mean braking pressure estimated by said braking pressure estimating means and a pressure increase/decrease time required to achieve the mean braking pressure or a physical quantity associated with the pressure increase/decrease time; micro amplitude estimating means for estimating the micro amplitude of the braking pressure on the basis of the master cylinder pressure estimated by said master pressure estimating means and the pressure increase/decrease time required to achieve the mean braking pressure or the physical quantity associated with the pressure increase/decrease time and for outputting the estimated micro amplitude of the braking pressure to said resonance gain calculation means; control means for controlling the pressure increase/decrease time required to achieve the mean braking pressure in such a way that the resonance gain calculated by said resonance gain calculation means matches or substantially matches a reference gain;</claim-text>
      <claim-text>and reference means for outputting to the master cylinder pressure estimating means the pressure increase/decrease time which is required to achieve the mean braking pressure and is controlled by said control means or the physical quantity associated with the pressure increase/decrease time.</claim-text>
    </claim>
    <claim num="4">
      <claim-text>4. The anti-lock brake controller according to claim 3, wherein the resonance frequency is about 40 Hz.</claim-text>
    </claim>
    <claim num="5">
      <claim-text>5. A braking pressure controller comprising: a control valve equipped with a pressure increase valve for increasing the braking pressure exerted on a wheel cylinder and a pressure decrease valve for decreasing the braking pressure;</claim-text>
      <claim-text>and control means for controlling said control valve in such a way as to alternately switch, at a given cycle, between a first state, including a pressure increasing state in which the braking pressure is increased by said pressure increase valve and a pressure holding state in which the braking pressure is held, and a second state, including a pressure decreasing state in which the braking pressure is decreased by said pressure decrease valve and the pressure holding state and for controlling the periods for the pressure increasing state and pressure decreasing state of said control valve in such a way as to hold a mean braking pressure.</claim-text>
    </claim>
    <claim num="6">
      <claim-text>6. The braking pressure controller according to claim 5, wherein the pressure holding state is such that the braking pressure is maintained at a predetermined level.</claim-text>
    </claim>
    <claim num="7">
      <claim-text>7. A braking pressure estimation device, comprising: a first input means for receiving a wheel speed; a second input means for receiving a physical quantity which indicates the slipping ability of a wheel;</claim-text>
      <claim-text>and braking pressure estimating means for estimating a mean braking pressure from the wheel speed and the physical quantity, wherein the mean braking pressure is calculated using a formula:</claim-text>
      <claim-text>where Pm is the mean braking pressure, K is a spring constant,  TAU LPF is a time constant of a low pass filter, Jw is an inertia of a wheel,  OMEGA w is a wheel speed, s is an operator for Laplace transformation, Gd is a resonance gain, and h is a proportional coefficient.</claim-text>
    </claim>
  </claims>
</questel-patent-document>