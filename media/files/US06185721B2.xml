<?xml version="1.0" encoding="UTF-8"?>
<questel-patent-document lang="en" date-produced="20180805" produced-by="Questel" schema-version="3.23" file="US06185721B2.xml">
  <bibliographic-data lang="en">
    <publication-reference publ-desc="Granted patent as second publication">
      <document-id>
        <country>US</country>
        <doc-number>06185721</doc-number>
        <kind>B2</kind>
        <date>20010206</date>
      </document-id>
      <document-id data-format="questel">
        <doc-number>US6185721</doc-number>
      </document-id>
    </publication-reference>
    <original-publication-kind>B2</original-publication-kind>
    <application-reference is-representative="YES" family-id="26388905" extended-family-id="20678109">
      <document-id>
        <country>US</country>
        <doc-number>08810585</doc-number>
        <kind>A</kind>
        <date>19970304</date>
      </document-id>
      <document-id data-format="questel">
        <doc-number>1997US-08810585</doc-number>
      </document-id>
      <document-id data-format="questel_Uid">
        <doc-number>21208525</doc-number>
      </document-id>
    </application-reference>
    <language-of-filing>en</language-of-filing>
    <language-of-publication>en</language-of-publication>
    <priority-claims>
      <priority-claim kind="national" sequence="1">
        <country>JP</country>
        <doc-number>4859996</doc-number>
        <kind>A</kind>
        <date>19960306</date>
        <priority-active-indicator>Y</priority-active-indicator>
      </priority-claim>
      <priority-claim data-format="questel" sequence="1">
        <doc-number>1996JP-0048599</doc-number>
      </priority-claim>
      <priority-claim kind="national" sequence="2">
        <country>JP</country>
        <doc-number>22355196</doc-number>
        <kind>A</kind>
        <date>19960826</date>
        <priority-active-indicator>Y</priority-active-indicator>
      </priority-claim>
      <priority-claim data-format="questel" sequence="2">
        <doc-number>1996JP-0223551</doc-number>
      </priority-claim>
    </priority-claims>
    <dates-of-public-availability>
      <publication-of-grant-date>
        <date>20010206</date>
      </publication-of-grant-date>
    </dates-of-public-availability>
    <classifications-ipcr>
      <classification-ipcr sequence="1">
        <text>G01R  31/3185      20060101A I20051008RMEP</text>
        <ipc-version-indicator>
          <date>20060101</date>
        </ipc-version-indicator>
        <classification-level>A</classification-level>
        <section>G</section>
        <class>01</class>
        <subclass>R</subclass>
        <main-group>31</main-group>
        <subgroup>3185</subgroup>
        <classification-value>I</classification-value>
        <generating-office>
          <country>EP</country>
        </generating-office>
        <classification-status>R</classification-status>
        <classification-data-source>M</classification-data-source>
        <action-date>
          <date>20051008</date>
        </action-date>
      </classification-ipcr>
    </classifications-ipcr>
    <classification-national>
      <country>US</country>
      <main-classification>
        <text>714725000</text>
        <class>714</class>
        <subclass>725000</subclass>
      </main-classification>
      <further-classification sequence="1">
        <text>716106000</text>
        <class>716</class>
        <subclass>106000</subclass>
      </further-classification>
    </classification-national>
    <classifications-ecla>
      <classification-ecla sequence="1">
        <text>G01R-031/3185R</text>
        <section>G</section>
        <class>01</class>
        <subclass>R</subclass>
        <main-group>031</main-group>
        <subgroup>3185R</subgroup>
      </classification-ecla>
    </classifications-ecla>
    <patent-classifications>
      <patent-classification sequence="1">
        <classification-scheme office="EP" scheme="CPC">
          <date>20130101</date>
        </classification-scheme>
        <classification-symbol>G01R-031/318522</classification-symbol>
        <section>G</section>
        <class>01</class>
        <subclass>R</subclass>
        <main-group>31</main-group>
        <subgroup>318522</subgroup>
        <symbol-position>F</symbol-position>
        <classification-value>I</classification-value>
        <classification-status>B</classification-status>
        <classification-data-source>H</classification-data-source>
        <action-date>
          <date>20130101</date>
        </action-date>
      </patent-classification>
    </patent-classifications>
    <number-of-claims>23</number-of-claims>
    <exemplary-claim>1</exemplary-claim>
    <figures>
      <number-of-drawing-sheets>34</number-of-drawing-sheets>
      <number-of-figures>46</number-of-figures>
      <image-key data-format="questel">US6185721</image-key>
    </figures>
    <invention-title format="original" lang="en" id="title_en">Method of design for testability at RTL and integrated circuit designed by the same</invention-title>
    <references-cited>
      <citation srep-phase="examiner">
        <patcit num="1">
          <text>ROSTOKER MICHAEL D, et al</text>
          <document-id>
            <country>US</country>
            <doc-number>5541849</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5541849</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="examiner">
        <patcit num="2">
          <text>BUTTS MICHAEL R, et al</text>
          <document-id>
            <country>US</country>
            <doc-number>6002861</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US6002861</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="applicant">
        <patcit num="3">
          <text>NIPPON TELEGRAPH &amp; TELEPHONE</text>
          <document-id>
            <country>JP</country>
            <doc-number>H0415580</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>JP04015580</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="applicant">
        <patcit num="4">
          <text>FUJITSU LTD</text>
          <document-id>
            <country>JP</country>
            <doc-number>H0474274</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>JP04074274</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="applicant">
        <nplcit num="1">
          <text>Akira Motohara et al., "Design For Testability Using Register-Transfer Level Partial Scan Selection", Asia South Pacific Desigb Automation Conference 1995, pp. 209-215, Aug. 29, 1995.</text>
        </nplcit>
      </citation>
      <citation srep-phase="applicant">
        <nplcit num="2">
          <text>Y. Kobayashi et al., "A Study on Testable VLSI Design", 1990 Spring National Convention Record, The Institute of Electronics, Information and Communication Engineers (EIECE), Part 5, pp. 5-199, Mar. 18-21, 1990.</text>
        </nplcit>
      </citation>
      <citation srep-phase="applicant">
        <nplcit num="3">
          <text>K. Muroi et al., "MULTES/IS: Automatic Test Generation System in Incomplete Scan Method (2) Design rule Check and Circuit Partitioning" Transaction of Information Processing Society of Japan, 35th (1987 latter term) National Convention, pp. 2197-2198, Sep. 28-30, 1987.</text>
        </nplcit>
      </citation>
    </references-cited>
    <parties>
      <applicants>
        <applicant data-format="original" app-type="applicant" sequence="1">
          <addressbook lang="en">
            <orgname>Matsushita Electric Industrial Co., Ltd.</orgname>
            <address>
              <address-1>Osaka, JP</address-1>
              <city>Osaka</city>
              <country>JP</country>
            </address>
          </addressbook>
          <nationality>
            <country>JP</country>
          </nationality>
        </applicant>
        <applicant data-format="questel" app-type="applicant" sequence="2">
          <addressbook lang="en">
            <orgname>PANASONIC</orgname>
          </addressbook>
          <nationality>
            <country>JP</country>
          </nationality>
        </applicant>
      </applicants>
      <inventors>
        <inventor data-format="original" sequence="1">
          <addressbook lang="en">
            <name>Hosokawa, Toshinori</name>
            <address>
              <address-1>Osaka, JP</address-1>
              <city>Osaka</city>
              <country>JP</country>
            </address>
          </addressbook>
          <nationality>
            <country>JP</country>
          </nationality>
        </inventor>
      </inventors>
      <agents>
        <agent sequence="1" rep-type="agent">
          <addressbook lang="en">
            <orgname>McDermott, Will &amp; Emery</orgname>
          </addressbook>
        </agent>
      </agents>
    </parties>
    <examiners>
      <primary-examiner>
        <name>Lintz, Paul R.</name>
      </primary-examiner>
    </examiners>
    <lgst-data>
      <lgst-status>LAPSED</lgst-status>
    </lgst-data>
  </bibliographic-data>
  <abstract format="original" lang="en" id="abstr_en">
    <p id="P-EN-00001" num="00001">
      <br/>
      The invention provides a method of design for testability in which design of an integrated circuit is modified, at a register transfer level (RTL) with high abstraction than the gate level, so as to be simply testable and in which the area of a test circuit and the number of test patterns can be decreased as compared with those in the conventional method.
      <br/>
      An integrated circuit which has been designed in an RTL design step is partitioned into blocks each satisfying a previously defined simply testable condition in a partitioning step, so that the integrated circuit can be simply tested after manufacture.
      <br/>
      The simply testable condition can be that a circuit has an acyclic structure including no feedback loop, that a circuit has an n-fold line-up structure (wherein n is a positive integer), or the like.
      <br/>
      In the integrated circuit having been partitioned into the blocks in the partitioning step, the design is modified by using multiplexers, isolation controllers and the like in an isolation step so that the respective blocks can be independently tested.
    </p>
  </abstract>
  <description format="original" lang="en" id="desc_en">
    <heading>BACKGROUND OF THE INVENTION</heading>
    <p num="1">The present invention relates to a method of design for testability for integrated circuits (LSIs).</p>
    <p num="2">
      A typical example of the conventional method of design for testability includes a scan path method.
      <br/>
      In the scan path method, a flip-flop (FF) included in a logically designed LSI is replaced with a scan FF which can be externally directly controlled (scanned in) and observed (scanned out), so that a problem of a sequential circuit can be simplified into a problem of a combinational circuit.
      <br/>
      Thus, a test sequence can be easily generated ("Digital Systems Testing and Testable DESIGN, Chapter 9, Design For Testability", 1990, published by Computer Science Press).
    </p>
    <p num="3">However, such a conventional method of design for testability has the following problems:</p>
    <p num="4">
      (1) Since an FF is replaced with a scan FF, the LSI is increased in area.
      <br/>
      (2) Since a test input pattern for the scan-in/out operation on a scan chain is required, the number of test input patterns is increased, resulting in increasing time required for the test of the LSI.
      <br/>
      (3) Since an FF is replaced with a scan FF after logical design, it is necessary to examine the operation timing of the LSI again.
      <br/>
      According to circumstances, the LSI is required to be logically designed again, namely, so-called the re-design of the LSI is required.
      <br/>
      This elongates time for designing the LSI.
    </p>
    <heading>SUMMARY OF THE INVENTION</heading>
    <p num="5">The object of the invention is providing a method of design for testability in which an integrated circuit is modified in design at a register transfer level (RTL; i.e., a level of functional design) with high abstraction than a gate level (i.e., a level of logical design), so as to be simply testable, and in which an area of a test circuit and the number of test patterns can be decreased as compared with those in the conventional method.</p>
    <p num="6">Specifically, the method of design for testability at a register transfer level of this invention comprises a partitioning step for partitioning an RTL circuit, which is an integrated circuit designed at the register transfer level, into blocks each satisfying a previously defined simply testable condition, thereby simplifying a test conducted after manufacture.</p>
    <p num="7">Furthermore, the method of design for testability at a register transfer level of this invention further comprises an isolation step for modifying design of the RTL circuit, which has been partitioned into the blocks each satisfying the simply testable condition, thereby making the blocks independently testable.</p>
    <p num="8">
      Accordingly, the RTL circuit is first partitioned into the blocks each satisfying the simply testable condition in the partitioning step, and then in the isolation step, the design is modified so that the respective blocks can be independently singly tested.
      <br/>
      As a result, the RTL circuit can be tested in each of the blocks with a difficulty in generating a test sequence substantially the same as that of the scan path method.
      <br/>
      Therefore, there is no need to replace an FF with a scan FF after the logical design.
      <br/>
      This can decrease the area of the LSI (RTL circuit) and the number of test sequences required for the test thereof as compared with those in the conventional method.
    </p>
    <p num="9">In addition, there is no need of re-design, and hence there is no need to conduct the logical design again because the test simplifying design is effected at the RTL, which can decrease time required for designing the LSI as compared with time required in the conventional method.</p>
    <p num="10">In one aspect, the simply testable condition is preferably that a circuit in the block has an acyclic structure including no feedback loop.</p>
    <p num="11">In another aspect, the simply testable condition is preferably that a circuit in the block has an n-fold line-up structure in which signal paths between an arbitrary register and an arbitrary external output or pseudo-external output have n sorts or less of sequential depths, wherein n is a positive integer.</p>
    <p num="12">In still another aspect, the partitioning step preferably includes a first process for selecting, among functional facilities included in the RTL circuit, one functional facility which belongs to none of the blocks, and for generating one block including the selected functional facility; a second process for selecting another functional facility, which is adjacent to the block generated in the first process and does not belong to any other blocks, and for inserting the selected functional facility into the generated block; and a third process for discriminating whether or not the generated block is simply testable in accordance with the previously defined simply testable condition, and when the generated block is discriminated to be not simply testable, for removing the functional facility inserted in the second process from the generated block.</p>
    <p num="13">In still another aspect, the partitioning step preferably further includes a fourth process for removing, from the generated block, the functional facility inserted into the generated block in the second process in a reverse order to an inserting order so as to make an input number of the generated block smaller than an input number of the RTL circuit and an output number of the generated block smaller than an output number of the RTL circuit</p>
    <p num="14">In still another aspect, the partitioning step preferably includes a process for identifying a register having a self-loop and a finite state machine included in the RTL circuit as a scan register.</p>
    <p num="15">In still another aspect, the partitioning step preferably includes a process for obtaining relationship in reachableness between each input and each output of the block by extracting an input reachable to each output, and obtaining a plurality of inputs of the block whose value is controllable through a common external input pin of the RTL circuit on the basis of the relationship.</p>
    <p num="16">In still another aspect, the partitioning step preferably includes, when any of the functional facilities has a larger input number or larger output number than the RTL circuit, a process for converting the functional facility into an equivalent circuit including functional facilities each having a smaller input number and a smaller output number than the RTL circuit.</p>
    <p num="17">In still another aspect, the partitioning step preferably includes a process for collecting finite state machines included in the RTL circuit in a common block.</p>
    <p num="18">Furthermore, the isolation step preferably includes a first process for generating, in the RTL circuit which has been partitioned into the blocks each satisfying the simply testable condition, an input controlling multiplexer for making an input of each block externally directly controllable and an output observing multiplexer for making an output of each block externally directly observable; and a second process for generating, in the RTL circuit in which the input controlling multiplexer and the output observing multiplexer have been generated in the first process, an isolation controller including a finite state machine for controlling the output observing multiplexer for making the blocks successively testable and a decoder for decoding a content of a register included in the finite state machine.</p>
    <p num="19">In still another aspect, the partitioning step preferably further includes a process, in partitioning the RTL circuit into the blocks, for identifying a register having a self-loop included in the RTL circuit as a scan register, and the isolation step preferably further includes a third process for replacing the register having been identified as a scan register in the process of the partitioning step with a scan register and for forming scan chains by connecting the scan register in each of the blocks; and a fourth process for generating a multiplexer, using scan-out data of the scan chains formed in the third process as an input, for selecting and outputting one of scan-out data of the scan chains.</p>
    <p num="20">In still another aspect, the isolation step preferably includes a process for forming, in the RTL circuit having been partitioned into the blocks each satisfying the simply testable condition, a scan chain in each of the blocks, thereby making an input signal controllable and an output signal observable from the outside of the RTL circuit.</p>
    <heading>BRIEF DESCRIPTION OF THE DRAWINGS</heading>
    <p num="21">
      FIG. 1 is a flowchart for showing the location of the present method in design of an LSI;
      <br/>
      FIG. 2 is a flowchart for showing the procedures of a partitioning step in a method of design for testability at the RTL according to a first embodiment of the invention;
      <br/>
      FIG. 3 is a flowchart for showing the procedures in step S15 of the partitioning step of FIG. 2;
      <br/>
      FIGS. 4(a) and 4(b) illustrate the partitioning step in the method of design for testability at the RTL of the first embodiment, wherein FIG. 4(a) is a diagram of an RTL circuit to be partitioned and FIG. 4(b) is a diagram resulting from the partitioning step executed on the RTL circuit of FIG. 4(a);
      <br/>
      FIG. 5 shows information on respective blocks in the RTL circuit of FIG. 4(b);
      <br/>
      FIG. 6 is a diagram of a model of a synchronous sequential circuit;
      <br/>
      FIG. 7 is a diagram of a time-axis expanded sequential circuit;
      <br/>
      FIG. 8 is a diagram for showing an example of an n-fold line-up structure, wherein n=2, i.e., a two-fold line-up structure;
      <br/>
      FIG. 9 is a diagram for showing classification of synchronous sequential circuits according to their configurations;
      <br/>
      FIG. 10(a) is a diagram of a circuit having an acyclic structure, and FIG. 10(b) is a diagram of a circuit resulting from time-axis expansion of the circuit of FIG. 10(a);
      <br/>
      FIG. 11(a) is a diagram of a circuit having a line-up structure, and FIG. 11(b) is a diagram of a circuit resulting from time-axis expansion of the circuit of FIG. 11(a);
      <br/>
      FIG. 12 is a flowchart for showing the procedures of a partitioning step in a method of design for testability at the RTL according to a second embodiment of the invention;
      <br/>
      FIGS. 13(a) and 13(b) illustrate the partitioning step of the method of design for testability at the RTL of the second embodiment, wherein FIG. 13(a) is a diagram of an RTL circuit to be partitioned and FIG. 13(b) is a diagram resulting from the partitioning step executed on the circuit of FIG. 13(a);
      <br/>
      FIG. 14 is a diagram for showing information on respective blocks in the circuit of FIG. 12(b);
      <br/>
      FIG. 15 is a flowchart for showing the procedures of a partitioning step in a method of design for testability at the RTL according to a third embodiment of the invention;
      <br/>
      FIG. 16 illustrates the partitioning step in the method of design for testability at the RTL of the third embodiment, corresponding to a diagram resulting from the partitioning step executed on the circuit of FIG. 12(a);
      <br/>
      FIG. 17 is a diagram for showing information on respective blocks in the circuit of FIG. 16;
      <br/>
      FIG. 18 is a flowchart for showing the procedures of an isolation step in a method of design for testability at the RTL according to a fourth embodiment of the invention;
      <br/>
      FIG. 19(a) is a diagram resulting from the isolation step of the fourth embodiment executed on the RTL circuit partitioned into blocks shown in FIG. 4(b), FIG. 19(b) is a logical circuit diagram for showing an example of the configuration of an output observing multiplexer of FIG. 19(a), and FIG. 19(c) is a logical circuit diagram for showing an example of the configuration of an isolation controller of FIG. 19(a);
      <br/>
      FIG. 20 is a diagram resulting from the isolation step of the fourth embodiment;
      <br/>
      FIG. 21 is a flowchart for showing the procedures of an isolation step in a method of design for testability at the RTL according to a fifth embodiment of the invention;
      <br/>
      FIG. 22 is a diagram resulting from the isolation step of the fifth embodiment executed on the RTL circuit partitioned into blocks shown in FIG. 13(b);
      <br/>
      FIG. 23 is a flowchart for showing the procedures of a process for merging inputs of a block in a method of design for testability at the RTL according to a sixth embodiment of the invention;
      <br/>
      FIGS. 24(a) through 24(c) illustrate the process for merging the inputs of a block shown in FIG. 23, wherein FIG. 24(a) is a schematic diagram of the block, FIG. 24(b) is a table for showing a relationship between inputs and outputs in Teachableness, and FIG. 24(c) is a table obtained as a result of merging the inputs;
      <br/>
      FIG. 25 is a schematic diagram of an LSI designed by the method of design for testability at the RTL of the sixth embodiment of the invention;
      <br/>
      FIGS. 26(a) and 26(b) illustrate an isolation step in a method of design for testability at the RTL according to a seventh embodiment of the invention, wherein FIG. 26(a) is a diagram of a block where an external input enters a functional facility other than a register, and FIG. 26(b) is a diagram resulting from design modification for isolating the block of FIG. 26(a);
      <br/>
      FIGS. 27(a) and 27(b) illustrate the isolation step in the method of design for testability at the RTL of the seventh embodiment, wherein FIG. 27(a) is a diagram of a block where an external output is output by a functional facility other than a register, and FIG. 27(b) is a diagram resulting from design modification for isolating the block of FIG. 27(a);
      <br/>
      FIG. 28 is a flowchart for showing the procedures of a partitioning step in the method of design for testability at the RTL of the seventh embodiment, namely, the partitioning step adopted when the isolation step of the seventh embodiment follows;
      <br/>
      FIG. 29 is a schematic diagram of an LSI designed by the method of design for testability at the RTL according to the seventh embodiment of the invention;
      <br/>
      FIG. 30 is a flowchart for showing the procedures of a preprocessing in a method of design for testability at the RTL according to an eighth embodiment of the invention;
      <br/>
      FIGS. 31(a) and 31(b) illustrate the preprocessing of the method of design for testability at the RTL of the eighth embodiment, wherein FIG. 31(a) is a diagram of a multiplexer having a larger input number than an LSI, and FIG. 31(b) is a diagram resulting from converting the multiplexer of FIG. 31(a) into an equivalent circuit through the preprocessing;
      <br/>
      FIGS. 32(a) and 32(b) illustrate the preprocessing of the method of design for testability at the RTL of the eighth embodiment, wherein FIG. 32(a) is a diagram of an adder having a larger input number than an LSI, and FIG. 32(b) is a diagram resulting from converting the adder of FIG. 32(a) into an equivalent circuit through the preprocessing;
      <br/>
      FIG. 33 is a flowchart for showing the procedures of a preprocessing in a method of design for testability at the RTL according to a ninth embodiment of the invention; and
      <br/>
      FIG. 34 is a schematic diagram of an LSI designed by the method of design for testability at the RTL of the ninth embodiment.
    </p>
    <heading>DETAILED DESCRIPTION OF THE INVENTION</heading>
    <p num="22">
      FIG. 1 is a flowchart of fundamental procedures in LSI design for showing the location of a method of design for testability of the invention therein.
      <br/>
      As is shown in FIG. 1, the present method of design for testability is executed in test simplifying design at a register transfer level (RTL), and includes a partitioning step S2 for partitioning an RTL circuit into blocks each having a simply testable circuit configuration and an isolation step S3 for modifying the design of each partitioned block to be singly testable.
    </p>
    <p num="23">Now, the embodiments of the invention will be described with reference to the accompanying drawings.</p>
    <p num="24">(Embodiment 1)</p>
    <p num="25">FIG. 2 is a flowchart for showing the procedures of the partitioning step S2 in a method of design for testability at the RTL according to a first embodiment of the invention.</p>
    <p num="26">
      First, in step S11, the maximum value N of an input-output number exceeding time is specified.
      <br/>
      The value N specified at this point is, in partitioning an RTL circuit into blocks, the maximum number of times for continuously inserting a functional facility into a block described below after the input or output number of the block exceeds the input or output number of the RTL circuit.
    </p>
    <p num="27">
      Then, in step S12, it is discriminated whether or not the RTL circuit still includes any functional facility belonging to none of the blocks.
      <br/>
      When the RTL circuit includes such a functional facility, the procedure proceeds to step S13, and when not, the partitioning step S2 is completed.
    </p>
    <p num="28">In step S13, one functional facility is selected among those belonging to none of the blocks, and a new block including the selected functional block is generated.</p>
    <p num="29">
      Subsequently, in step S14, it is discriminated whether or not the RTL circuit includes a functional facility which is adjacent to the new block generated in step S13, does not belong to any of the blocks excluding this new block, and has not been inserted into the new block for checking testability of the resultant block (which is checked in step S16 described below).
      <br/>
      When the RTL circuit includes such a functional facility, the procedure proceeds to step S15, and when not, the procedure returns to step S12.
    </p>
    <p num="30">In step S15, one functional facility, which is adjacent to the new block generated in step S13, does not belong to any of the blocks excluding the new block and has not been inserted into the new block for checking the testability of the resultant block, is selected, and the selected functional facility is inserted into the new block.</p>
    <p num="31">
      Next, in step S16, it is discriminated whether or not the resultant block is simply testable.
      <br/>
      The discrimination is effected on the basis of a previously defined simply testable condition.
      <br/>
      When the block is not simply testable, the procedure proceeds to step S17, and when the block is, the procedure proceeds to step S18.
    </p>
    <p num="32">
      In step S17, the functional facility inserted in step S15 is removed from the block.
      <br/>
      Then, the procedure returns to step S14.
      <br/>
      In step S18, it is discriminated whether or not the input or output number of the new block exceeds the input or output number of the RTL circuit.
      <br/>
      When not, the procedure proceeds to step S19, and when it does, the procedure proceeds to step S20.
    </p>
    <p num="33">
      In step S19, an exceeding time, namely, the number of times of the input or output number of the block continuously exceeding the input or output number of the RTL circuit, is reset to be 0 (zero).
      <br/>
      Then, the procedure returns to step S14.
    </p>
    <p num="34">
      In step S20, the exceeding time is counted up.
      <br/>
      Subsequently in step S21, it is discriminated whether or not the exceeding time exceeds the maximum value N specified in step S11.
      <br/>
      When it does, the procedure returns to step S14, and when not, the procedure proceeds to step S22.
      <br/>
      In step S22, the functional facilities inserted in step S15 are removed from the new block in a reverse order to an inserting order, so that the input number of the block can be smaller than the input number of the RTL circuit and the output number of the block can be smaller than the output number of the RTL circuit.
    </p>
    <p num="35">FIG. 3 is a flowchart of the detailed procedures conducted in step S15 of the partitioning step S2 of FIG. 2.</p>
    <p num="36">
      First, in step S15a, it is discriminated whether or not the RTL circuit includes an unprocessed functional facility, namely, a functional facility which is adjacent to the new block, does not belong to any of the blocks excluding the new block, and has not been inserted into the block for checking the testability of the resultant block.
      <br/>
      When the RTL circuit includes such a functional facility, the procedure proceeds to step S15b, and when not, the process is completed.
    </p>
    <p num="37">
      In step S15b, one unprocessed functional facility is selected.
      <br/>
      Then, in step S15c, the input and output numbers of the new block are calculated assuming that the functional facility selected in step S15b is inserted into this block.
    </p>
    <p num="38">
      Next, in step S15d, it is discriminated whether or not the sum of the input and output numbers of the block calculated in step S15c is the minimum thus far.
      <br/>
      When it is the minimum, the procedure proceeds to step S15e, where the functional facility selected in step S15b and the sum of the input and output numbers of the resultant block are stored, and then the procedure returns to step S15a.
      <br/>
      When it is not the minimum, the procedure directly returns to step S15a.
      <br/>
      Through these procedures, one functional facility can be selected so that the sum of the input and output numbers of the resultant block can be minimized through the insertion thereof.
    </p>
    <p num="39">Now, the partitioning step S2 of this embodiment will be described in more detail referring to FIGS. 4(a), 4(b) and 5.</p>
    <p num="40">
      FIG. 4(a) is a diagram for showing the configuration of an RTL circuit, i.e., an object of the method of design for testability at the RTL of this embodiment, which has been designed in an RTL design step S1.
      <br/>
      The circuit of FIG. 4(a) is expressed as a directed graph.
      <br/>
      In this graph and all the directed graphs hereinafter described, a node corresponds to a functional facility included in an RTL circuit and an edge corresponds to a signal line for connecting the respective functional facilities.
    </p>
    <p num="41">In FIG. 4(a), reference numerals 101 through 103 denote functional facilities corresponding to external input pins, reference numeral 104 and 105 denote functional facilities corresponding to external output pins, reference numerals 106 through 112 denote functional facilities corresponding to combinational circuits, and reference numerals 113 through 117 denote functional facilities corresponding to registers.</p>
    <p num="42">
      FIG. 4(b) is a circuit resulting from the partitioning step S2 of this embodiment executed on the RTL circuit of FIG. 4(a).
      <br/>
      In FIG. 4(b), reference numerals 10A through 10C denote blocks generated through the partitioning step S2.
      <br/>
      It is herein conditioned that a circuit should include no feedback loop, i.e., have an acyclic structure, to be simply testable.
      <br/>
      The simply testable condition will be described in detail below.
      <br/>
      Also, in the circuit of FIG. 4(a), the input number and the output number of the LSI (RTL circuit) to be designed are 24 and 16, respectively.
    </p>
    <p num="43">
      First, in step S11, the maximum number N of the input-output number exceeding time is specified as 3.
      <br/>
      Then, in steps S12 and S13, the functional facility 101 corresponding to the external input pin is selected as a first functional facility and inserted into a newly generated block.
    </p>
    <p num="44">
      Next, in steps S14 and S15, the functional facility 106 adjacent to the newly generated block is selected and inserted into the new block.
      <br/>
      Then, in step S16, it is discriminated whether or not the resultant block is simply testable.
      <br/>
      Since the functional facilities 101 and 106 do not include a feedback loop, the block under consideration is a simply testable circuit, and hence the procedure proceeds to step S18.
    </p>
    <p num="45">
      In step S18, the input and output numbers of the new block are both 8, and hence, it is determined that the input-output numbers are not over.
      <br/>
      Therefore, the procedure proceeds to step S19, where the input-output number exceeding time is reset to be 0, and the procedure returns to step S14.
    </p>
    <p num="46">
      Through the similar procedures, the functional facilities 113 and 107 are successively selected and inserted into the new block.
      <br/>
      Next, the functional facility 114 is inserted into the new block, but the resultant block at this point is determined not to be simply testable because the block includes a feedback loop.
      <br/>
      Therefore, the functional facility 114 is removed from the new block.
      <br/>
      Then, since there remains no functional facility which is adjacent to the new block, belongs to none of the other blocks and has not been inserted into the new block, the new block is defined as the block 10A of FIG. 4(b).
      <br/>
      Similarly, the blocks 10B and 10C are defined.
    </p>
    <p num="47">Now, in forming the block 10B, the procedures of the partitioning step S2 of this embodiment conducted when the new block includes the functional facilities 114, 108, 104 and 109 will be described.</p>
    <p num="48">
      First, the functional facility 116, which is adjacent to the new block, belongs to none of the blocks and has not been inserted into the new block, is selected and inserted into the new block.
      <br/>
      At this point, the new block does not include a feedback loop and hence is determined to be simply testable.
      <br/>
      However, the output number of the new block at this point is 24, which exceeds the output number of the LSI, i.e., 16. Therefore, the exceeding time is counted up to be 1.
      <br/>
      Since the exceeding time is smaller than the specified maximum value N (herein 3), the formation of the block is further continued.
    </p>
    <p num="49">
      Next, since the two functional facilities 102 and 110 are adjacent to the new block, belong to none of the blocks and have not been inserted into the new block, one of them is selected and inserted into the new block.
      <br/>
      In step S15 of FIG. 3, assuming that the functional facility 102 is inserted, the sum of the input and output numbers of the resultant block is 40, and assuming that the functional facility 110 is inserted, the sum of the input and output numbers of the resultant block is 56.
      <br/>
      Therefore, the functional facility 102 is selected and inserted so that the sum of the input and output numbers of the resultant block can be minimized.
      <br/>
      Also at this point, the output number of the block exceeds the output number of the LSI, the exceeding time is counted up to be 2.
    </p>
    <p num="50">
      Then, the functional facility 110 is inserted into the new block, and the output number of the resultant block exceeds the output number of the LSI, and hence the exceeding time is counted up to be 3.
      <br/>
      Since the exceeding time is equal to the specified maximum value, the functional blocks 110, 102 and 116 are successively removed from the new block in this order until the input and output numbers of the resultant block are smaller than the input and output numbers of the LSI, respectively.
      <br/>
      Thus, the block 10B is formed.
    </p>
    <p num="51">
      All of the blocks 10A, 10B and 10C thus formed satisfy the simply testable condition.
      <br/>
      FIG. 5 is a diagram for showing information on the respective blocks in the circuit of FIG. 4(b).
      <br/>
      In FIG. 5, encircled numerals indicate stages for forming the blocks and correspond to encircled numerals shown in the respective functional facilities of FIG. 4(b).
    </p>
    <p num="52">
      In the above description, the simply testable condition is defined as that a circuit should include no feedback loop, i.e., have an acyclic structure., but another condition is also adoptable.
      <br/>
      Now, the simply testable condition will be described.
    </p>
    <p num="53">
      FIG. 6 is a conceptual diagram for showing a synchronous sequential circuit model.
      <br/>
      As is shown in FIG. 6, a synchronous sequential circuit is modeled by using a combinational circuit and a group of registers (FFs) operated in accordance with a clock.
    </p>
    <p num="54">
      In a general ATPG algorithm for a sequential circuit, a test sequence is generated after time-axis expansion of the sequential circuit.
      <br/>
      FIG. 7 is a diagram for showing the result of the time-axis expansion of the synchronous sequential circuit mode of FIG. 6, wherein a circuit on each time-axis is designated as a time frame.
    </p>
    <p num="55">The sequential circuit is classified, on the basis of ATPG complexity, into three types: (i) a cyclic structure, (ii) an acyclic structure and (iii) a configuration having combinational ATPG complexity.</p>
    <p num="56">A sequential circuit having the cyclic structure (i) is not simply testable in general because the number of time frames required for generating a test sequence depends upon the number of loops in the sequential circuit and the number of FFs in the loops, and is very large.</p>
    <p num="57">
      A sequential circuit in the configuration having combinational ATPG complexity (iii) is applicable to the combinational circuit ATPG, namely, a test sequence can be generated by replacing the FFs in the sequential circuit with signal lines.
      <br/>
      Therefore, merely one time frame is required, and hence such a circuit is simply testable.
      <br/>
      Accordingly, the configuration having combinational ATPG complexity (iii) can be defined as the simply testable condition.
      <br/>
      However, in this case, the size of each block is too small, and the number of the blocks can be very large.
    </p>
    <p num="58">
      In the acyclic structure (ii) defined as the simply testable condition in this embodiment, the number of time frames required for generating a test sequence is smaller than a value obtained by adding 1 to a sequential depth of the circuit.
      <br/>
      Therefore, the acyclic structure (ii) is more simply testable than the cyclic structure (i).
      <br/>
      The sequential depth herein means a number of FFs belonging to a signal path, and the sequential depth of a circuit is the maximum value of the sequential depths of all the signal paths between external input pins and external output pins.
      <br/>
      Alternatively, in addition to the acyclic structure (ii), a sequential depth of a circuit being smaller than a predetermined value can be defined as the simply testable condition.
    </p>
    <p num="59">
      Moreover, in the present invention, an n-fold line-up structure (wherein n is a positive integer) is proposed to be defined as the simply testable condition.
      <br/>
      The n-fold line-up structure means a configuration where the number of sorts of sequential depths of signal paths between an arbitrary pair of a register in a circuit and an external output or pseudoexternal output is smaller than n, whereas the register is disposed none of the signal paths between the register and the external output or pseudo-external output.
    </p>
    <p num="60">
      FIG. 8 is a diagram for showing an example of the n-fold line-up structure wherein n=2, namely, a two-fold line-up structure.
      <br/>
      In FIG. 8, a reference numeral 91 denotes the arbitrary register in the circuit, a reference numeral 92 denotes the arbitrary external output or pseudo-external output, reference numerals 93a, 93b and 93c denote the paths between the register 91 and the external output or pseudo-external output 92, R denotes each register on the paths 93a, 93b and 93c, and C denotes each combinational circuit on the paths 93a, 93b and 93c.
      <br/>
      As is shown in FIG. 8, the sequential depths of the paths 93a and 93c are 3, and the sequential depth of the path 93b is 2.
      <br/>
      Therefore, there are two sorts of the sequential depths in the respective paths between the register 91 and the external output or pseudoexternal output 92.
      <br/>
      Accordingly, the circuit of FIG. 8 has the two-fold line-up structure.
    </p>
    <p num="61">
      FIG. 9 is a diagram for showing classification of sequential circuits on the basis of their configurations.
      <br/>
      As is shown in FIG. 9, the acyclic structure includes the n-fold line-up structure, and the n-fold line-up structure includes the configuration having combinational ATPG complexity.
      <br/>
      In other words, the n-fold line-up structure is a concept narrower than the acyclic structure and wider than the configuration having combinational ATPG complexity.
      <br/>
      As the value n is increased, the n-fold line-up structure approximates to the acyclic structure, and as the value n is decreased, the n-fold line-up structure approximates to the configuration having combinational ATPG complexity.
    </p>
    <p num="62">
      A circuit having the n-fold line-up structure has a characteristic that the number of time frames including each register obtained through the time-axis expansion about an arbitrary external output or pseudo-external output is limited to be n or less.
      <br/>
      In the case where n=1, namely, in a onefold line-up structure, the number of time frames including each register obtained by the time-axis expansion about an arbitrary external output or pseudo-external output is limited to 1.
      <br/>
      Such a one-fold line-up structure is simply designated as a line-up structure.
      <br/>
      In other words, a circuit configuration where each register belongs to merely one time frame obtained through the time-axis expansion about an arbitrary external output or pseudo-external output is defined as a line-up structure.
    </p>
    <p num="63">
      FIG. 10(a) is a conceptual diagram for showing a circuit having the acyclic structure, wherein R1, R2, R3 and R4 denote registers and C1, C2, C3 and C4 denote combinational circuits.
      <br/>
      FIG. 10(b) is a conceptual diagram resulting from the time-axis expansion of the circuit having the acyclic structure shown in FIG. 10(a).
    </p>
    <p num="64">In the time-axis expansion of the circuit having the acyclic structure, there can exist registers belonging to plural time frames, such as registers R2 and R3 of FIG. 10(b).</p>
    <p num="65">
      FIG. 11(a) is a conceptual diagram for showing a circuit having the line-up structure, wherein, similarly to FIG. 11(a), R1, R2, R3 and R4 denote registers and C1, C2, C3 and C4 denote combinational circuits.
      <br/>
      FIG. 11(b) is a conceptual diagram resulting from the time-axis expansion of the circuit having the line-up structure shown in FIG. 11(a).
      <br/>
      As is shown in FIG. 11(b), in the time-axis expansion of the circuit having the line-up structure, each of the respective registers R1 through R4 belongs to merely one time frame.
    </p>
    <p num="66">
      In the line-up structure, the number of functional facilities included in each time frame is smaller than in the acyclic structure, and hence, less calculation is required for generating a test sequence.
      <br/>
      Moreover, in the acyclic structure, there exists a register, such as the register R2 of FIG. 10(b), which is demanded to be assigned to plural combinational circuits.
      <br/>
      Thus, there is a possibility of contradiction in the generation of a test sequence.
      <br/>
      In contrast, there is less possibility of the contradiction in the line-up structure.
      <br/>
      Accordingly, the line-up structure is more simply testable than the acyclic structure.
    </p>
    <p num="67">In addition to the line-up structure, a sequential depth of a circuit being a predetermined value or less can be defined as the simply testable condition.</p>
    <p num="68">(Embodiment 2)</p>
    <p num="69">
      FIG. 12 is a flowchart for showing the procedures of the partitioning step S2 in a method of design for testability at the RTL according to a second embodiment of the invention.
      <br/>
      The partitioning step S2 of this embodiment shown in FIG. 12 includes, as a preprocessing, step S23 for identifying a register having a self-loop and a finite state machine as a scan register in addition to the procedures of the partitioning step S2 of the first embodiment.
    </p>
    <p num="70">The partitioning step S2 of this embodiment will now be described in more detail referring to FIGS. 13(a), 13(b) and 14.</p>
    <p num="71">
      FIG. 13(a) is a diagram for showing the configuration of an RTL circuit, i.e., an object of the method of design for testability at the RTL of this embodiment, designed in the RTL design step S1.
      <br/>
      FIG. 13(b) is a diagram resulting from the partitioning step S2 of this embodiment executed on the RTL circuit of FIG. 13(a).
      <br/>
      In FIGS. 13(a) and 13(b), reference numerals 201 through 203 denote functional facilities corresponding to external input pins, reference numerals 204 and 205 denote functional facilities corresponding to external output pins, reference numerals 206 through 211 denote functional facilities corresponding to combinational circuits, and reference numerals 212 through 217 denote functional facilities corresponding to registers.
      <br/>
      In FIG. 13(b), 20A and 20B denote blocks generated through the partitioning step S2.
    </p>
    <p num="72">FIG. 14 is a diagram for showing information on the respective blocks in the RTL circuit shown in FIG. 13(b), wherein encircled numerals indicate stages for generating the blocks and correspond to encircled numerals shown in the respective functional facilities of FIG. 13(b).</p>
    <p num="73">
      First, in step S23, the functional facilities 112, 113 and 117 each corresponding to a register having a self-loop are identified as scan registers.
      <br/>
      Thereafter, the similar procedures to those of the first embodiment are conducted, so that the blocks 20A and 20B are generated as shown in FIG. 13(b).
    </p>
    <p num="74">
      Although the blocks 20A and 20B both include feedback loops, the functional facilities 112, 113 and 117 corresponding to the registers are identified as the scan registers in step S23, and hence, the input-output of the functional facilities 112, 113 and 117 are regarded to be disconnected.
      <br/>
      Accordingly, the configurations of the blocks 20A and 20B are both equivalent to the acyclic structure having no feedback loop, and hence they are determined to be simply testable.
    </p>
    <p num="75">(Embodiment 3)</p>
    <p num="76">
      FIG. 15 is a flowchart for showing the procedures of the partitioning step S2 in a method of design for testability at the RTL according to a third embodiment.
      <br/>
      The partitioning step S2 of this embodiment shown in FIG. 15 includes step S31 in addition to the procedures of the partitioning step S2 of the first embodiment.
      <br/>
      When it is determined in step S14 that the RTL circuit does not include any functional facility which is adjacent to the new block generated in step S13, does not belong to any of the blocks excluding the new block, and has not been inserted into the new block for checking the testability of the resultant block, the procedure proceeds to step S31.
      <br/>
      In step S31, it is discriminated whether or not there exist a functional block which is not adjacent to the new block and belongs to none of any other blocks.
      <br/>
      When such a block exists, the procedure proceeds to step S15, and when not, the procedure returns to step S12.
    </p>
    <p num="77">The partitioning step S2 of this embodiment will now be described in more detail with reference to FIGS. 16 and 17.</p>
    <p num="78">
      FIG. 16 is a diagram resulting from the partitioning step S2 of this embodiment executed on the RTL circuit shown in FIG. 13(a).
      <br/>
      In FIG. 16, reference numerals 30A, 30B, 30C, 30D and 30E denote blocks generated through the partitioning step S2.
      <br/>
      FIG. 17 is a diagram for showing information on the respective blocks of FIG. 16, wherein encircled numerals correspond to encircled numerals shown in respective functional facilities of FIG. 16.
    </p>
    <p num="79">
      First, similarly to the first embodiment, the functional facility 201 corresponding to the external input pin is first selected for the formation of the block.
      <br/>
      The functional facilities belonging to this block are the functional facility 201 corresponding to the external input pin and the functional facility 206 corresponding to the combinational circuit.
      <br/>
      At this point, the input and output numbers of the block still does not exceed those of the RTL circuit, and therefore, in steps S31 and S15, the functional facility 204 corresponding to the external output pin is selected as the functional facility which is not adjacent to this block and does not belong to any other blocks, and is inserted into this block.
      <br/>
      The functional facility 208 corresponding to the combinational circuit is further selected and inserted, and thus, the block 30A is defined.
      <br/>
      The other blocks are also formed in the same manner, thereby partitioning the RTL circuit into the five blocks 30A through 30E.
    </p>
    <p num="80">
      In this manner, in the partitioning step of this embodiment, the functional facilities not adjacent to the block under consideration are inserted into the block when the input and output numbers of the block does not exceed those of the circuit.
      <br/>
      This results in decreasing the number of the blocks included in the RTL circuit.
    </p>
    <p num="81">(Embodiment 4)</p>
    <p num="82">FIG. 18 is a flowchart for showing the procedures of the isolation step S3 in a method of design for testability at the RTL according to a fourth embodiment of the invention.</p>
    <p num="83">First, in step S41, an input controlling multiplexer (MUX) for directly externally controlling an input of a block, an output observing multiplexer for directly externally observing an output of a block and a test mode pin for switching between a normal operation and a test operation are generated, so that the input-output of each block generated in the partitioning step S2 can be directly controlled and observed from the outside of the RTL circuit.</p>
    <p num="84">
      Then, the data input of the input controlling multiplexer is connected with an input signal line used in the normal operation of the block to be controlled and with an external input pin for controlling the other blocks excluding the block to be controlled.
      <br/>
      The control input of the input controlling multiplexer is connected with the test mode pin, and the data output thereof is connected with the input of the block to be controlled.
      <br/>
      Also, the data input of the output observing multiplexer is connected with an output signal line of a block to be observed, and the data output thereof is connected with an external output pin.
    </p>
    <p num="85">
      Next, in step S42, a finite state machine (FSM) for specifying a testing order of the blocks and a clock pin for controlling the finite state machine are generated.
      <br/>
      The content of a register included in the finite state machine corresponds to a block under test.
    </p>
    <p num="86">Then, in step S43, a decoder for decoding the content of the register of the finite state machine is generated, and the output line of the decoder is connected with the control input of the output observing multiplexer generated in step S41.</p>
    <p num="87">The isolation step S3 of this embodiment will now be described in more detail with reference to FIGS. 19(a) through 19(c).</p>
    <p num="88">FIG. 19(a) is a diagram resulting from the isolation step S3 of this embodiment executed on the RTL circuit having been partitioned into the blocks shown in FIG. 4(b).</p>
    <p num="89">In FIG. 19(a), a block A is obtained by removing the functional facility 101 corresponding to the external input pin from the block 10A, a block B is obtained by removing the functional facility 104 corresponding to the external output pin from the block 10B, and a block C is obtained by removing the functional facilities 102 and 103 corresponding to the external input pins and the functional facility 105 corresponding to the external output pin from the block 10C.</p>
    <p num="90">Also in FIG. 19(a), reference numerals 41 and 42 denote two-input input controlling multiplexers, reference numerals 43 and 44 denote multi-input output observing multiplexers, a reference numeral 45 denotes a circuit (isolation controller) formed by combining a decoder with a finite state machine for controlling the output observing multiplexers 43 and 44, namely, for specifying a block to be tested, a reference numeral 46 denotes a test mode pin, and a reference numeral 47 denotes a clock pin for driving the isolation controller 45.</p>
    <p num="91">In order that input signals from the blocks A and C to the block B may be directly controlled through the external input pins 101 and 102 in the test mode, the test mode pin 46 and the input controlling multiplexers 41 and 42 are generated, and the control inputs of the input controlling multiplexers 41 and 42 are connected with the test mode pin 46.</p>
    <p num="92">
      In order that an output signal to the block B from the block A may be directly observed through the external output pin 105 in the test mode, the output observing multiplexer 44 is generated.
      <br/>
      Also, in order that an output signal to the block B from the block C may be directly observed through the external output pin 104 in the test mode, the output observing multiplexer 43 is generated.
    </p>
    <p num="93">
      Furthermore, in order to control a signal to be observed through the external output pin, the isolation controller 45 and the clock pin 47 for driving the isolation controller 45 are generated.
      <br/>
      The control inputs of the output observing multiplexers 43 and 44 are connected with the isolation controller 45.
    </p>
    <p num="94">As a result, each of the blocks A, B and C can singly generate a test input.</p>
    <p num="95">
      FIG. 19(b) is a logical circuit diagram for showing an example of the configuration of the output observing multiplexers 43 and 44.
      <br/>
      FIG. 19(c) is a logical circuit diagram for showing an example of the configuration of the isolation controller 45.
    </p>
    <p num="96">
      Alternatively, the input controlling multiplexer also can be controlled by the isolation controller not through the test mode pin.
      <br/>
      Specifically, in step S41, the control input of the input controlling multiplexer is not connected with the test mode pin, and in step S43, the output signal line of the isolation controller is connected with not only the control input of the output observing multiplexer but also the control input of the input controlling multiplexer.
      <br/>
      FIG. 20 is a diagram for showing the result of such an isolation step S3.
      <br/>
      As is shown in FIG. 20, input controlling multiplexers 48a, 48b and 48c are controlled by an isolation controller 45A similarly to output observing multiplexers 49a and 49b.
    </p>
    <p num="97">(Embodiment 5)</p>
    <p num="98">
      FIG. 21 is a flowchart for showing the procedures of the isolation step S3 in a method of design for testability at the RTL according to a fifth embodiment of the invention.
      <br/>
      The isolation step S3 of this embodiment is adopted when an RTL circuit is partitioned into blocks with a register having a self-loop identified as a scan register as in the partitioning step S2 of the second embodiment.
    </p>
    <p num="99">Steps S41 through S43 are the same as those in the isolation step S3 of the fourth embodiment shown in FIG. 18, and through these steps, each block in the RTL circuit can attain the configuration which can singly generate a test input.</p>
    <p num="100">In step S51, the register having the self-loop identified as the scan register in each block is replaced with a scan register, so that a scan chain can be formed in each block, and a scan-in extern input pin is connected with the scan-in input of each block.</p>
    <p num="101">
      Next, in step S52, one multiplexer for switching scan-out of each block which has data inputs in the same number as the number of the blocks including the scan registers is generated.
      <br/>
      The data inputs of this multiplexer are connected with the scan-out outputs of the respective blocks, the control input thereof is connected with the output of the isolation controller generated in step S42 and S43, and the output thereof is connected with the scan-out external output pin.
    </p>
    <p num="102">The isolation step S3 of this embodiment will now be described in more detail with reference to FIG. 22.</p>
    <p num="103">FIG. 22 is a circuit diagram resulting from the isolation step S3 of this embodiment executed on the RTL circuit having been partitioned into the blocks shown in FIG. 13(b), wherein a test circuit is inserted into each block so that the block can singly generate a test input.</p>
    <p num="104">
      In FIG. 22, a block A is obtained by removing the external input pin 201 and the external output pin 204 from the block 20A of FIG. 13(b), a block B is obtained by removing the external input pins 202 and 203 and the external output pin 205 from the block 20B of FIG. 13(b), and reference numerals 51, 52 and 53 denote scan registers replaced with the registers 212 and 213 and 217 each having a self-loop shown in FIG. 13(b).
      <br/>
      Also, a reference numeral 54 denotes a multiplexer for switching the scan-out of each block, a reference numeral 55 denotes a scan-out external output pin, a reference numeral 56 denotes an isolation controller including a decoder and a finite state machine for controlling the respective multiplexers, namely, for specifying a block to be tested, a reference numeral 57 denotes a test mode pin, and a reference numeral 58 denotes a clock pin for driving the isolation controller 56.
    </p>
    <p num="105">
      In steps S41 through S43, a test circuit is inserted into each of the blocks A and B so that each block can singly generate a test input.
      <br/>
      Then, in step S51, the registers 212 and 213 each having a self-loop included in the block A are replaced with the scan registers 51 and 52, which are connected with each other as a shift register by using the external input pin 201 as a scan-in input, so as to form a scan chain.
      <br/>
      Also, the register 217 having a self-loop included in the block B is replaced with the scan register 53, which is connected as a shift register by using the external input pin 201 as a scan-in input, so as to form a scan chain.
      <br/>
      Then, in step S52, the multiplexer 54 for switching the scan-out of each block is generated.
      <br/>
      In order to switch the scan-out of the blocks A and B. the input of the multiplexer 54 is connected with the outputs of the scan registers 52 and 53, and the output of the multiplexer 54 is connected with the scan-out external output pin 55.
      <br/>
      The control input of the multiplexer 54 is connected with the isolation controller 56.
    </p>
    <p num="106">
      In adopting the isolation step S3 of this embodiment, each block is singly testable even when the block is formed with a register having a self-loop identified as a scan register.
      <br/>
      In addition, regardless of the number of blocks included in the RTL circuit, merely one scan-out external output pin is required, and hence, the number of test input patterns can be decreased.
    </p>
    <p num="107">(Embodiment 6)</p>
    <p num="108">
      A method of design for testability at the RTL according to a sixth embodiment of the invention is characterized by the partitioning step S2 including a process for merging inputs of respective blocks.
      <br/>
      Specifically, relationship in Teachableness between an input and an output in each block is obtained by extracting a reachable input with regard to each output.
      <br/>
      On the basis of the obtained relationship, an input of each block whose value can be set through a common external input pin of the RTL circuit is obtained.
    </p>
    <p num="109">FIG. 23 is a flowchart for showing the procedures of the process for merging inputs of respective blocks of this embodiment.</p>
    <p num="110">
      In step S61, an input reachable to each output is extracted by searching a path from each output toward the input.
      <br/>
      In step S62, a table listing the relationship in the reachableness between an input and an output is built.
      <br/>
      In step S63, the inputs are merged in accordance with a rule described below.
    </p>
    <p num="111">
      The partitioning step S2 of this embodiment will now be described in more detail with reference to FIGS. 24(a) through 24(c).
      <br/>
      FIG. 24(a) is a diagram for schematically showing a partitioned block, wherein A, B, C and D denote inputs of the block and O1, O2 and O3 denote outputs of the block.
      <br/>
      Also, a blank circle indicates a partial circuit corresponding to neither an input nor an output of the block.
    </p>
    <p num="112">
      In the block shown in FIG. 24(a), first in step S61, a path from the output O1 is first searched toward the input, and as a result, the inputs A and B are extracted as the inputs reachable to the output O1.
      <br/>
      Next, a path from the output O2 is searched toward the input, and as a result, the inputs B and C are extracted as the inputs reachable to the output O2.
      <br/>
      Then, a path from the output O3 is searched toward the input, and as a result, the inputs C and D are extracted as the inputs reachable to the output O3.
    </p>
    <p num="113">
      Next, in step S62, a table listing the relationship in the reachableness between the inputs and the outputs is built as is shown in FIG. 24(b).
      <br/>
      In the table shown in FIG. 24(b),  (small circle)  indicates an input reachable to an output, and x indicates an input not reachable to an output.
    </p>
    <p num="114">Subsequently in step S63, the inputs of the block are merged in accordance with the following role:</p>
    <p num="115">
      When different inputs have  (small circle)  with regard to one output, these inputs are merged; and
      <br/>
      when different inputs have no  (small circle)  with regard to one output, these inputs are not merged.
    </p>
    <p num="116">
      In accordance with this rule, the inputs A and C are merged and the inputs B and D are merged.
      <br/>
      As a result, a table as is shown in FIG. 24(c) can be obtained from the table of FIG. 24(b).
      <br/>
      Thus, this block can be isolated by using two external input pins although the block has four inputs.
    </p>
    <p num="117">Through the aforementioned process, the number of the blocks can be decreased, and the scale of a test circuit for isolating each block can be decreased.</p>
    <p num="118">
      FIG. 25 is a schematic diagram of an LSI designed by the method of design for testability of this embodiment.
      <br/>
      In FIG. 25, a block X corresponds to the block of FIG. 24, reference numerals 61a and 61b denotes external input pins, reference numerals 62a, 62b and 62c denote external output pins, and reference numerals 63a through 63g denote multiplexers inserted for the isolation.
      <br/>
      As is shown in FIG. 25, among the inputs of the block X, the inputs A and C are isolated by using the external input pin 61a and the multiplexers 63a and 63c, and the inputs B and D are isolated by using the external input pin 61b and the multiplexers 63b and 63d.
    </p>
    <p num="119">The process for merging the inputs of each block of this embodiment can be added, for example, in the partitioning step S2 of the first embodiment shown in FIG. 2, to follow step S21.</p>
    <p num="120">(Embodiment 7)</p>
    <p num="121">A block is isolated by using a scan chain in this embodiment, while the isolation is attained by using the multiplexers and the external pins in the fourth embodiment.</p>
    <p num="122">The isolation step S3 in a method of design for testability at the RTL according to this embodiment will now be specifically described with reference to FIGS. 26(a), 26(b), 27(a) and 27(b).</p>
    <p num="123">First, in the case where a register exists on the boundary between blocks, namely, an external input enters a register, and in the case where an external output is output through a register, such a register is replaced with a scan FF.</p>
    <p num="124">
      Furthermore, in the case where an external input enters a functional facility 71 other than a register as is shown in FIG. 26(a), a D-latch 72 whose input is connected with a scan chain and a selector 73 are added as is shown in FIG. 26(b).
      <br/>
      In the case where an external output is output through a functional facility 75 other than a register as is shown in FIG. 27(a), a scan FF 76 is added as is shown in FIG. 27(b).
    </p>
    <p num="125">
      FIG. 28 is a flowchart for showing the procedures of the partitioning step S2 in the method of design for testability at the RTL of this embodiment, namely, the partitioning step S2 adopted on condition that the isolation step S3 of this embodiment follows.
      <br/>
      The partitioning step S2 of FIG. 28 excludes steps S11, and S18 through S22 from the partitioning step S2 of the first embodiment shown in FIG. 2.
      <br/>
      By isolating each block by using a scan chain, there is no need to consider the restriction on the input and output numbers of the block in the partitioning step S2.
      <br/>
      As a result, the number of the blocks can be decreased, thereby decreasing the number of the test circuits.
    </p>
    <p num="126">
      FIG. 29 is a schematic diagram of an LSI designed by the method of design for testability of this embodiment.
      <br/>
      Each block includes a scan chain 77 so that a test sequence can be generated in each block.
    </p>
    <p num="127">(Embodiment 8)</p>
    <p num="128">A method of design for testability at the RTL according to an eighth embodiment of the invention includes, as a preprocessing of the partitioning step S2, a process for partitioning a functional facility having large input and output numbers into plural functional facilities each having small input and output numbers.</p>
    <p num="129">FIG. 30 is a flowchart for showing the procedures of the preprocessing of the partitioning step S2 in the method of design for testability at the RTL of this embodiment.</p>
    <p num="130">
      In step S81, it is discriminated whether or not an LSI includes a functional facility having a larger input number or a larger output number than the LSI.
      <br/>
      When the LSI includes such a functional facility, the procedure proceeds to step S82.
      <br/>
      In step S82, the functional facility having the larger input or output number than the LSI is converted into an equivalent circuit including plural functional facilities each having a smaller input number and a smaller output number than the LSI.
    </p>
    <p num="131">The preprocessing of the partitioning step S2 of this embodiment will now be specifically described with reference to FIGS. 31(a), 31(b), 32(a) and 32(b).</p>
    <p num="132">
      FIG. 31(a) is a diagram of a multiplexer exemplifying a functional facility having a larger input number than the LSI.
      <br/>
      The multiplexer of FIG. 31(a) has 66 inputs, which exceeds the number of the input pins of the LSI, i.e., 40. Through the preprocessing of this embodiment, the multiplexer of FIG. 31(a) is converted into an equivalent circuit including three multiplexers each having 33 inputs as is shown in FIG. 31(b).
    </p>
    <p num="133">
      FIG. 32(a) is a diagram of an adder exemplifying a functional facility having a larger input number than the LSI.
      <br/>
      The adder of FIG. 32(a) has 61 inputs, which exceeds the number of the input pins of the LSI, i.e., 40. Through the preprocessing of this embodiment, the adder of FIG. 32(a) is converted into an equivalent circuit including two adders each having 31 inputs.
    </p>
    <p num="134">By adopting such a preprocessing, a circuit, which has been difficult to be isolated by using multiplexers and external pins, can be isolated in the same manner as another circuit.</p>
    <p num="135">(Embodiment 9)</p>
    <p num="136">A method of design for testability at the RTL according to a ninth embodiment of the invention includes, as a preprocessing of the partitioning step S2, a process for collecting finite state machines (FSMs), which are functional facilities difficult to be tested when logically designed, in one block.</p>
    <p num="137">FIG. 33 is a flowchart for showing the procedures of the preprocessing of the partitioning step S2 of this embodiment.</p>
    <p num="138">
      In step S91, it is discriminated whether or not the types of all functional facilities included in an RTL circuit have been checked.
      <br/>
      When the types of all the functional facilities have been checked, the process is completed.
      <br/>
      When there remains a functional facility whose type has not been checked, the procedure proceeds to step S92.
    </p>
    <p num="139">
      In step S92, one functional facility whose type has not been checked is selected.
      <br/>
      Then, in step S93, it is discriminated whether or not the functional facility selected in step S92 is an FSM.
      <br/>
      When it is an FSM, the procedure proceeds to step S94, and when not, the procedure returns to step S91.
      <br/>
      In step S94, the FSM is inserted into a specified block.
    </p>
    <p num="140">
      FIG. 34 is a schematic diagram of an LSI designed by the method of design for testability of this embodiment.
      <br/>
      The LSI of FIG. 34 has a simply testable configuration in which all the FSMs are collected in a block A, and none of blocks B, C and D includes an FSM.
    </p>
    <p num="141">
      A circuit realizing an FSM as a logic circuit generally has a loop configuration, which is not simply testable.
      <br/>
      Therefore, it is necessary to conduct a scan test in a block including the FSMs.
      <br/>
      Accordingly, when the FSMs are included in various blocks, it is necessary to conduct the scan test in the respective blocks, which can largely elongate a test sequence.
    </p>
    <p num="142">
      Therefore, when the FSMs are collected in a specific block as in this embodiment, the scan test is required merely in the specific block including the FSMs.
      <br/>
      Thus, the length of the test sequence can be suppressed from increasing.
    </p>
  </description>
  <claims format="original" lang="en" id="claim_en">
    <claim num="1">
      <claim-text>What is claimed is:</claim-text>
      <claim-text>1.</claim-text>
      <claim-text>A method of design for testability at a register transfer comprising:</claim-text>
      <claim-text>a partitioning step for partitioning an RTL circuit, which is an integrated circuit designed at the register transfer level, into blocks each satisfying a previously defined simply testable condition, and an isolation step for modifying design of said RTL circuit, which has been partitioned into said blocks each satisfying said simply testable condition, thereby making said blocks independently testable, wherein said simply testable condition is that a circuit in each of said blocks has an acyclic structure including no feedback loop and said circuit has a sequential depth not exceeding a predetermined value.</claim-text>
    </claim>
    <claim num="2">
      <claim-text>2. The method of design for testability at a register transfer level of claim 1, wherein said isolation step includes: a first process for generating, in said RTL circuit which has been partitioned into said blocks each satisfying said simply testable condition, an input controlling multiplexer for making an input of each block externally directly controllable and an output observing multiplexer for making an output of each block externally directly observable so as to test each of said blocks independently;</claim-text>
      <claim-text>and a second process for generating, in said RTL circuit in which said input controlling multiplexer and said output observing multiplexer have been generated in said first process, an isolation controller including a finite state machine for controlling said output observing multiplexer for making said blocks successively testable and a decoder for decoding a content of a register included in said finite state machine.</claim-text>
    </claim>
    <claim num="3">
      <claim-text>3. The method of design for testability at a register transfer level of claim 2, wherein said isolation controller generated in said second process controls not only said output observing multiplexer but also said input controlling multiplexer for making said blocks successively testable.</claim-text>
    </claim>
    <claim num="4">
      <claim-text>4. The method of design for testability at a register transfer level of claim 2, wherein said partitioning step further includes a process, in partitioning said RTL circuit into said blocks, for identifying a register having a self-loop included in said RTL circuit as a scan register, and said isolation step further includes:</claim-text>
      <claim-text>- a third process for replacing said register having been identified as a scan register in said process of said partitioning step with a scan register and for forming scan chains by connecting said scan register in each of said blocks;</claim-text>
      <claim-text>and - a fourth process for generating a multiplexer, using scan-out data of said scan chains formed in said third process as an input, for selecting and outputting one of scan-out data of said scan chains.</claim-text>
    </claim>
    <claim num="5">
      <claim-text>5. The method of design for testability at a register transfer level of claim 2, wherein said isolation step includes a process for forming, in said RTL circuit having been partitioned into said blocks each satisfying said simply testable condition, a scan chain in each of said blocks, thereby making an input signal controllable and an output signal observable from the outside of said RTL circuit.</claim-text>
    </claim>
    <claim num="6">
      <claim-text>6. A method of design for testability at a register transfer level comprising: a partitioning step for partitioning an RTL circuit, which is an integrated circuit designed at the register transfer level, into blocks each satisfying a previously defined simply testable condition, wherein said simply testable condition is that a circuit in each of said blocks has an acyclic structure including no feedback loop and said circuit has a sequential depth not exceeding a predetermined value.</claim-text>
    </claim>
    <claim num="7">
      <claim-text>7. A method of design for testability at a register transfer level comprising: a partitioning step for partitioning an RTL circuit, which is an integrated circuit designed at the register transfer level, into blocks each satisfying a previously defined simply testable condition, wherein said simply testable condition is that a circuit in each of said blocks has an n-fold line-up structure in which signal paths between an arbitrary register and an arbitrary external output or pseudo-external output have n sorts or less of sequential depths, wherein n is a positive integer.</claim-text>
    </claim>
    <claim num="8">
      <claim-text>8. A method of design for testability at a register transfer level comprising: a partitioning step for partitioning an RTL circuit, which is an integrated circuit designed at the register transfer level, into blocks each satisfying a previously defined simply testable condition, wherein said simply testable condition is that a circuit in each of said blocks has a line-up structure in which each register belongs to merely one time frame obtained through time-axis expansion about an arbitrary external output or pseudo-external output.</claim-text>
    </claim>
    <claim num="9">
      <claim-text>9. A method of design for testability at a register transfer level comprising: a partitioning step for partitioning an RTL circuit, which is an integrated circuit designed at the register transfer level, into blocks each satisfying a previously defined simply testable condition, wherein said simply testable condition is that a circuit in each of said blocks has a line-up structure in which each register belongs to merely one time frame obtained through time-axis expansion about an arbitrary external output or pseudo-external output and said circuit has a sequential depth not exceeding a predetermined value.</claim-text>
    </claim>
    <claim num="10">
      <claim-text>10. A method of design for testability at a register transfer level comprising: a partitioning step for partitioning an RTL circuit, which is an integrated circuit designed at the register transfer level, into blocks each satisfying a previously defined simply testable condition, wherein said simply testable condition is that a circuit in each of said blocks has an acyclic structure including no feedback loop and said circuit has a sequential depth not exceeding a predetermined value and that a circuit in each of said blocks has a combinational test pattern generation complexity.</claim-text>
    </claim>
    <claim num="11">
      <claim-text>11. A method of design for testability at a register transfer level comprising: a partitioning step for partitioning an RTL circuit, which is an integrated circuit designed at the register transfer level, into blocks each satisfying a previously defined simply testable condition, wherein said simply testable condition is that a circuit in each of said blocks has an acyclic structure including no feedback loop and said circuit has a sequential depth not exceeding a predetermined value, wherein said partitioning step includes: - a first process for selecting, among functional facilities included in said RTL circuit, one functional facility which belongs to none of said blocks, and for generating one block including said selected functional facility; - a second process for selecting another functional facility, which is adjacent to said block generated in said first process and does not belong to any other blocks, and for inserting said selected functional facility into said generated block;</claim-text>
      <claim-text>and - a third process for discriminating whether or not said generated block is simply testable in accordance with said previously defined simply testable condition, and when said generated block is discriminated to be not simply testable, for removing said functional facility inserted in said second process from said generated block.</claim-text>
    </claim>
    <claim num="12">
      <claim-text>12. The method of design for testability at a register transfer level of claim 11, wherein said partitioning step further includes a fourth process for removing, from said generated block, said functional facility inserted into said block in said second process in a reverse order to an inserting order so as to make an input number of the generated block smaller than an input number of the RTL circuit and an output number of the generated block smaller than an output number of the RTL circuit.</claim-text>
    </claim>
    <claim num="13">
      <claim-text>13. The method of design for testability at a register transfer level of claim 11, wherein said second process includes, when there are plural functional facilities which are adjacent to said generated block and do not belong to any other blocks, a process for selecting one functional facility which makes a sum of an input number and an output number of said generated block be minimum on the assumption that said selected functional facility is inserted into said generated block.</claim-text>
    </claim>
    <claim num="14">
      <claim-text>14. The method of design for testability at a register transfer level of claim 11, wherein said partitioning step includes a process for identifying a register having a self-loop and a finite state machine included in said RTL circuit as a scan register.</claim-text>
    </claim>
    <claim num="15">
      <claim-text>15. The method of design for testability at a register transfer level of claim 11, wherein said second process includes, when there remains, in said RTL circuit, no functional facility which is adjacent to said generated block, does not belong to any other blocks and has not been inserted into said generated block for discriminating testability, a process for selecting one functional facility which is not adjacent to said generated block and does not belong to any other blocks, and inserting said selected functional facility into said generated block.</claim-text>
    </claim>
    <claim num="16">
      <claim-text>16. A method of design for testability at a register transfer level comprising: a partitioning step for partitioning an RTL circuit, which is an integrated circuit designed at the register transfer level, into blocks each satisfying a previously defined simply testable condition, wherein said simply testable condition is that a circuit in each of said blocks has an acyclic structure including no feedback loop and said circuit has a sequential depth not exceeding a predetermined value, said partitioning step includes a process for obtaining relationship on Teachableness between each input and each output of said block by extracting an input reachable to each output, and obtaining a plurality of inputs of said block whose value is controllable through a common external input pin of said RTL circuit on the basis of said relationship.</claim-text>
    </claim>
    <claim num="17">
      <claim-text>17. A method of design for testability at a register transfer level comprising: a partitioning step for partitioning an RTL circuit, which is an integrated circuit designed at the register transfer level, into blocks each satisfying a previously defined simply testable condition, wherein said simply testable condition is that a circuit in each of said blocks has an acyclic structure including no feedback loop and said circuit has a sequential depth not exceeding a predetermined value, said partitioning step includes, when any functional facilities has a larger input number or larger output number than said RTL circuit, a process for converting said functional facility into an equivalent circuit including functional facilities each having a smaller input number and a smaller output number than said RTL circuit.</claim-text>
    </claim>
    <claim num="18">
      <claim-text>18. A method of design for testability at a register transfer level comprising: a partitioning step for partitioning an RTL circuit, which is an integrated circuit designed at the register transfer level, into blocks each satisfying a previously defined simply testable condition, wherein said simply testable condition is that a circuit in each of said blocks has an acyclic structure including no feedback loop and said circuit has a sequential depth not exceeding a predetermined value, wherein said partitioning step includes a process for collecting finite state machines included in said RTL circuit in a common block.</claim-text>
    </claim>
    <claim num="19">
      <claim-text>19. An integrated circuit, which is partitioned into plural blocks through test simplifying design at a register transfer level, comprising: an input controlling multiplexer for making an input signal of each of said blocks directly controllable from the outside of said integrated circuit so as to test each of said blocks independently; an output observing multiplexer for making an output signal of each of said blocks directly observable from the outside of said integrated circuit so as to test each of said blocks independently;</claim-text>
      <claim-text>and an isolation controller including a finite state machine for controlling said output observing multiplexer for making said blocks successively testable and a decoder for decoding a content of a register included in said finite state machine, wherein said integrated circuit is adapted such that a circuit in each of said blocks has an acyclic structure including no feedback loop and said circuit has a sequential depth not exceeding a predetermined value.</claim-text>
    </claim>
    <claim num="20">
      <claim-text>20. The integrated circuit of claim 19, wherein said isolation controller controls not only said output observing multiplexer for making said blocks successively testable but also said input controlling multiplexer.</claim-text>
    </claim>
    <claim num="21">
      <claim-text>21. The integrated circuit of claim 19, further comprising: a scan chain formed in each of said blocks;</claim-text>
      <claim-text>and a multiplexer using a scan-out data of said scan chain as an input for selecting and outputting one scan-out data of said scan chain.</claim-text>
    </claim>
    <claim num="22">
      <claim-text>22. An integrated circuit, which is partitioned into plural blocks through test simplifying design at a register transfer level and adapted such that a circuit in each of said blocks has an acyclic structure including no feedback loop and said circuit has a sequential depth not exceeding a predetermined value, wherein a plurality of inputs of one block are commonly connected with one external input pin of said integrated circuit.</claim-text>
    </claim>
    <claim num="23">
      <claim-text>23. An integrated circuit, which is partitioned into plural blocks through test simplifying design at a register transfer level and adapted such that a circuit in each of said blocks has an acyclic structure including no feedback loop and said circuit has a sequential depth not exceeding a predetermined value, wherein each of said blocks includes a scan chain for making an input signal controllable and an output signal observable from the outside of said integrated circuit.</claim-text>
    </claim>
  </claims>
</questel-patent-document>