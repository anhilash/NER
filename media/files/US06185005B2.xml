<?xml version="1.0" encoding="UTF-8"?>
<questel-patent-document lang="en" date-produced="20180805" produced-by="Questel" schema-version="3.23" file="US06185005B2.xml">
  <bibliographic-data lang="en">
    <publication-reference publ-desc="Granted patent as second publication">
      <document-id>
        <country>US</country>
        <doc-number>06185005</doc-number>
        <kind>B2</kind>
        <date>20010206</date>
      </document-id>
      <document-id data-format="questel">
        <doc-number>US6185005</doc-number>
      </document-id>
    </publication-reference>
    <original-publication-kind>B2</original-publication-kind>
    <application-reference family-id="22094329" extended-family-id="13737157">
      <document-id>
        <country>US</country>
        <doc-number>09070280</doc-number>
        <kind>A</kind>
        <date>19980430</date>
      </document-id>
      <document-id data-format="questel">
        <doc-number>1998US-09070280</doc-number>
      </document-id>
      <document-id data-format="questel_Uid">
        <doc-number>14033596</doc-number>
      </document-id>
    </application-reference>
    <language-of-filing>en</language-of-filing>
    <language-of-publication>en</language-of-publication>
    <priority-claims>
      <priority-claim kind="national" sequence="1">
        <country>US</country>
        <doc-number>7028098</doc-number>
        <kind>A</kind>
        <date>19980430</date>
        <priority-active-indicator>Y</priority-active-indicator>
      </priority-claim>
      <priority-claim data-format="questel" sequence="1">
        <doc-number>1998US-09070280</doc-number>
      </priority-claim>
    </priority-claims>
    <dates-of-public-availability>
      <publication-of-grant-date>
        <date>20010206</date>
      </publication-of-grant-date>
    </dates-of-public-availability>
    <classifications-ipcr>
      <classification-ipcr sequence="1">
        <text>H04N   1/405       20060101A I20051008RMEP</text>
        <ipc-version-indicator>
          <date>20060101</date>
        </ipc-version-indicator>
        <classification-level>A</classification-level>
        <section>H</section>
        <class>04</class>
        <subclass>N</subclass>
        <main-group>1</main-group>
        <subgroup>405</subgroup>
        <classification-value>I</classification-value>
        <generating-office>
          <country>EP</country>
        </generating-office>
        <classification-status>R</classification-status>
        <classification-data-source>M</classification-data-source>
        <action-date>
          <date>20051008</date>
        </action-date>
      </classification-ipcr>
      <classification-ipcr sequence="2">
        <text>H04N   1/407       20060101ALI20051220RMJP</text>
        <ipc-version-indicator>
          <date>20060101</date>
        </ipc-version-indicator>
        <classification-level>A</classification-level>
        <section>H</section>
        <class>04</class>
        <subclass>N</subclass>
        <main-group>1</main-group>
        <subgroup>407</subgroup>
        <symbol-position>L</symbol-position>
        <classification-value>I</classification-value>
        <generating-office>
          <country>JP</country>
        </generating-office>
        <classification-status>R</classification-status>
        <classification-data-source>M</classification-data-source>
        <action-date>
          <date>20051220</date>
        </action-date>
      </classification-ipcr>
      <classification-ipcr sequence="3">
        <text>G06T   5/00        20060101AFI20051220RMJP</text>
        <ipc-version-indicator>
          <date>20060101</date>
        </ipc-version-indicator>
        <classification-level>A</classification-level>
        <section>G</section>
        <class>06</class>
        <subclass>T</subclass>
        <main-group>5</main-group>
        <subgroup>00</subgroup>
        <symbol-position>F</symbol-position>
        <classification-value>I</classification-value>
        <generating-office>
          <country>JP</country>
        </generating-office>
        <classification-status>R</classification-status>
        <classification-data-source>M</classification-data-source>
        <action-date>
          <date>20051220</date>
        </action-date>
      </classification-ipcr>
    </classifications-ipcr>
    <classification-national>
      <country>US</country>
      <main-classification>
        <text>358001900</text>
        <class>358</class>
        <subclass>001900</subclass>
      </main-classification>
      <further-classification sequence="1">
        <text>358519000</text>
        <class>358</class>
        <subclass>519000</subclass>
      </further-classification>
      <further-classification sequence="2">
        <text>358534000</text>
        <class>358</class>
        <subclass>534000</subclass>
      </further-classification>
    </classification-national>
    <classifications-ecla>
      <classification-ecla sequence="1">
        <text>H04N-001/405C6</text>
        <section>H</section>
        <class>04</class>
        <subclass>N</subclass>
        <main-group>001</main-group>
        <subgroup>405C6</subgroup>
      </classification-ecla>
      <classification-ecla sequence="2">
        <text>H04N-001/405C4</text>
        <section>H</section>
        <class>04</class>
        <subclass>N</subclass>
        <main-group>001</main-group>
        <subgroup>405C4</subgroup>
      </classification-ecla>
    </classifications-ecla>
    <patent-classifications>
      <patent-classification sequence="1">
        <classification-scheme office="EP" scheme="CPC">
          <date>20130101</date>
        </classification-scheme>
        <classification-symbol>H04N-001/4058</classification-symbol>
        <section>H</section>
        <class>04</class>
        <subclass>N</subclass>
        <main-group>1</main-group>
        <subgroup>4058</subgroup>
        <symbol-position>F</symbol-position>
        <classification-value>I</classification-value>
        <classification-status>B</classification-status>
        <classification-data-source>H</classification-data-source>
        <action-date>
          <date>20130101</date>
        </action-date>
      </patent-classification>
      <patent-classification sequence="2">
        <classification-scheme office="EP" scheme="CPC">
          <date>20130101</date>
        </classification-scheme>
        <classification-symbol>H04N-001/4057</classification-symbol>
        <section>H</section>
        <class>04</class>
        <subclass>N</subclass>
        <main-group>1</main-group>
        <subgroup>4057</subgroup>
        <symbol-position>L</symbol-position>
        <classification-value>I</classification-value>
        <classification-status>B</classification-status>
        <classification-data-source>H</classification-data-source>
        <action-date>
          <date>20130101</date>
        </action-date>
      </patent-classification>
    </patent-classifications>
    <number-of-claims>20</number-of-claims>
    <exemplary-claim>11</exemplary-claim>
    <figures>
      <number-of-drawing-sheets>5</number-of-drawing-sheets>
      <number-of-figures>5</number-of-figures>
      <image-key data-format="questel">US6185005</image-key>
    </figures>
    <invention-title format="original" lang="en" id="title_en">Half tone image enhancement for printers</invention-title>
    <references-cited>
      <citation srep-phase="examiner">
        <patcit num="1">
          <text>LIGUORI THOMAS A</text>
          <document-id>
            <country>US</country>
            <doc-number>5587811</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5587811</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="applicant">
        <patcit num="2">
          <text>HOLLADAY THOMAS M</text>
          <document-id>
            <country>US</country>
            <doc-number>4149194</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US4149194</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="applicant">
        <patcit num="3">
          <text>ISHIDA SHINICHI, et al</text>
          <document-id>
            <country>US</country>
            <doc-number>4969052</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US4969052</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="applicant">
        <patcit num="4">
          <text>MILLER RODNEY L, et al</text>
          <document-id>
            <country>US</country>
            <doc-number>5014333</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5014333</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="applicant">
        <patcit num="5">
          <text>ESCHBACH REINER</text>
          <document-id>
            <country>US</country>
            <doc-number>5045952</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5045952</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="applicant">
        <patcit num="6">
          <text>BOWERS HARRY</text>
          <document-id>
            <country>US</country>
            <doc-number>5130823</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5130823</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="applicant">
        <patcit num="7">
          <text>SHIAU JENG-NAN</text>
          <document-id>
            <country>US</country>
            <doc-number>5196942</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5196942</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="applicant">
        <patcit num="8">
          <text>FAN ZHIGANG</text>
          <document-id>
            <country>US</country>
            <doc-number>5226096</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5226096</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="applicant">
        <patcit num="9">
          <text>ESCHBACH REINER</text>
          <document-id>
            <country>US</country>
            <doc-number>5243443</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5243443</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="applicant">
        <patcit num="10">
          <text>ESCHBACH REINER</text>
          <document-id>
            <country>US</country>
            <doc-number>5268774</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5268774</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="applicant">
        <patcit num="11">
          <text>BLUMER THOMAS P</text>
          <document-id>
            <country>US</country>
            <doc-number>5287195</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5287195</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="applicant">
        <patcit num="12">
          <text>HAINS CHARLES M</text>
          <document-id>
            <country>US</country>
            <doc-number>5291296</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5291296</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="applicant">
        <patcit num="13">
          <text>SCHILLER STEPHEN N, et al</text>
          <document-id>
            <country>US</country>
            <doc-number>5305118</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5305118</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="applicant">
        <patcit num="14">
          <text>ESCHBACH REINER, et al</text>
          <document-id>
            <country>US</country>
            <doc-number>5317653</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5317653</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="applicant">
        <patcit num="15">
          <text>HAINS CHARLES M</text>
          <document-id>
            <country>US</country>
            <doc-number>5321525</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5321525</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="applicant">
        <patcit num="16">
          <text>ESCHBACH REINER</text>
          <document-id>
            <country>US</country>
            <doc-number>5325211</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5325211</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="applicant">
        <patcit num="17">
          <text>DIGITAL EQUIPMENT CORP</text>
          <document-id>
            <country>EP</country>
            <doc-number>0293214</doc-number>
            <kind>A2</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>EP-293214</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="applicant">
        <patcit num="18">
          <text>FUJI PHOTO FILM CO LTD</text>
          <document-id>
            <country>EP</country>
            <doc-number>0621723</doc-number>
            <kind>A2</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>EP-621723</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="applicant">
        <nplcit num="1">
          <text>Roetling, Paul G., Halftone Method with Edge Enhancement and Moire Suppression, J.Opt.SocAm., vol. 66, No. 10, Oct., 1976.</text>
        </nplcit>
      </citation>
      <citation srep-phase="applicant">
        <nplcit num="2">
          <text>Billotet-Hoffmann, C. and Bryngdahl, O., On the Error Diffusion Technique for Electronic Halftoning, Physics Department, University of Essen, Federal Republic of Germany.</text>
        </nplcit>
      </citation>
      <citation srep-phase="applicant">
        <nplcit num="3">
          <text>Floyd, Robert W. And Steinberg, Louis, An Adaptive Algorithm for Spatial Grevscale.</text>
        </nplcit>
      </citation>
      <citation srep-phase="applicant">
        <nplcit num="4">
          <text>Jarvis, J.F., Judice, C.N., and Ninke, W.H., A Survey of Techniques for the Display of Continuous Tone Pictures of Bilevel Displays, Computer Graphics and Image Processing, 5, 13-40 (1976).</text>
        </nplcit>
      </citation>
      <citation srep-phase="applicant">
        <nplcit num="5">
          <text>Ulilchney, R., Digital Halftoning, Chapters 1, 2 and 6.</text>
        </nplcit>
      </citation>
      <citation srep-phase="applicant">
        <nplcit num="6">
          <text>"Tone Reproduction and Screen Design for Pictorial Electrographic Printing", P.G. Roetling, et al., Journal of Applied Photographic Engineering, vol. 5, No. 4, pp. 179-182 (Oct., 1979).</text>
        </nplcit>
      </citation>
      <citation srep-phase="applicant">
        <nplcit num="7">
          <text>"Design of Multilevel Threshold Matrices for Ordered Dither Digital Halftoning, Optimized for Edge Sharpness, Detail Reproduction and Texture", J. Wild, IEEE, pp. 2-43-2-45 (May, 1989).</text>
        </nplcit>
      </citation>
      <citation srep-phase="applicant">
        <nplcit num="8">
          <text>"A New Bi-Level Quantizing Method for Document Images", Naoki Kuwata, et al., IEEE, vol. 38, No. 3, pp. 718-724 (Aug., 1992).</text>
        </nplcit>
      </citation>
      <citation srep-phase="applicant">
        <nplcit num="9">
          <text>Journal of Applied Photographic Engineering, vol. 5, No. 4, Fall 1979, XP 002040963, "Tone Reproduction and Screen Design for Pictorial Electrographic Printing", Paul G. Roetling and Thomas M. Holladay, pp. 179-182.</text>
        </nplcit>
      </citation>
      <citation srep-phase="applicant">
        <nplcit num="10">
          <text>"Design of Multilevel Threshold Matrices for Ordered Dither Digital Halftoning, Optimized for Edge Sharpness Detail Reproduction and Texture", Jorg Wild, Technische Universitat Munchen Munich, Federal Republic of Germany, CH2704-5/89/0000/2043, pp. 2-43-2-45.</text>
        </nplcit>
      </citation>
      <citation srep-phase="applicant">
        <nplcit num="11">
          <text>IEEE Transactions on Consumer Electronics, vol. 38, No. 3, Aug. 1992, "A New Bi-Level Quantizing Method for Document Images", Naoki Kuwata, Yasuhiko Murayama and Soichi Ilno, R&amp;R Div., Seiko Epson Corporation, Suwa-shi Mnagano-ken, Japan, pp. 718-724.</text>
        </nplcit>
      </citation>
    </references-cited>
    <parties>
      <applicants>
        <applicant data-format="original" app-type="applicant" sequence="1">
          <addressbook lang="en">
            <orgname>Hitachi Koki Imaging Solutions, Inc.</orgname>
            <address>
              <address-1>Simi Valley, CA, US</address-1>
              <city>Simi Valley</city>
              <state>CA</state>
              <country>US</country>
            </address>
          </addressbook>
          <nationality>
            <country>US</country>
          </nationality>
        </applicant>
        <applicant data-format="questel" app-type="applicant" sequence="2">
          <addressbook lang="en">
            <orgname>HITACHI KOKI IMAGING SOLUTIONS</orgname>
          </addressbook>
          <nationality>
            <country>US</country>
          </nationality>
        </applicant>
      </applicants>
      <inventors>
        <inventor data-format="original" sequence="1">
          <addressbook lang="en">
            <name>Yoo, Jae Hwal</name>
            <address>
              <address-1>West Hills, CA, US</address-1>
              <city>West Hills</city>
              <state>CA</state>
              <country>US</country>
            </address>
          </addressbook>
          <nationality>
            <country>US</country>
          </nationality>
        </inventor>
      </inventors>
      <agents>
        <agent sequence="1" rep-type="agent">
          <addressbook lang="en">
            <orgname>Pillsbury Madison &amp; Sutro LLP</orgname>
          </addressbook>
        </agent>
      </agents>
    </parties>
    <examiners>
      <primary-examiner>
        <name>Rogers, Scott</name>
      </primary-examiner>
    </examiners>
    <lgst-data>
      <lgst-status>EXPIRED</lgst-status>
    </lgst-data>
  </bibliographic-data>
  <abstract format="original" lang="en" id="abstr_en">
    <p id="P-EN-00001" num="00001">
      <br/>
      A method and apparatus for halftoning over a region of output pixels by defining large, or macro, halftone cells corresponding to regions of contiguous pixels and partitioning the macro halftone cells into smaller halftone cells.
      <br/>
      The gray, or hue, level within a macro halftone cell is determined by the number of pixels which are darkened within the macro halftone cell.
      <br/>
      Selection of the number of pixels to be darkened in response to input data can be effected in a manner to achieve automatic gamma correction.
    </p>
  </abstract>
  <description format="original" lang="en" id="desc_en">
    <heading>BACKGROUND OF THE INVENTION</heading>
    <p num="1">The present invention relates to halftone reproduction of graphic images which are commonly in a bitmap format.</p>
    <p num="2">
      Image information is commonly generated in a bitmap format where the bitmap comprises a plurality of "gray" level cells (or hue concentration level cells for color images).
      <br/>
      Each cell consists of a two-dimensional array of pixels, or cell elements, and the gray or hue level to be created in each cell is defined by digital values, wherein each digital value represents a gray or hue concentration level among a number of gray or hue concentration levels within the area.
      <br/>
      Thus, if a cell is composed of 25 pixels, there are 26 levels of gray or hue concentration, varying incrementally between black (or a solid color) and white.
    </p>
    <p num="3">
      One standard method of converting gray or hue concentration level image data into binary level pixel image data is through the use of dithering or halftoning processes.
      <br/>
      In such methods, over a given area having a number of gray or hue concentration level cells therein, each pixel of a cell is compared to one of a set of pre-selected thresholds.
      <br/>
      Each such cell represents a "halftone cell".
      <br/>
      The effect of such an arrangement is that, for an area where the image is gray or some shade of a hue, some of the thresholds within the halftone cell will be exceeded, while others are not.
    </p>
    <p num="4">
      In the monochrome case, the pixels or cell elements for which thresholds are exceeded are printed as black or a selected primary color, while the remaining cell elements are allowed to remain white.
      <br/>
      The human eye integrates the distribution of white and black, or the selected color, over the cell as gray.
      <br/>
      In this manner, there can be gradual transitions between different shades of gray or the selected color among adjacent halftone cells.
    </p>
    <p num="5">
      For full or plural color applications, several halftone cells, each corresponding to a different hue, are formed for a given area.
      <br/>
      The color system superimposes the halftone cells of different hues to form the desired color of the image.
      <br/>
      Halftoning facilitates varying the concentration or intensity level of hues within the color image by varying the number of darkened pixels for halftone cells corresponding to particular hues.
      <br/>
      In this manner, the image can have transitions between neighboring colors among adjacent halftone cells.
      <br/>
      The application of halftoning to color systems is described in detail in the Postscript Reference Manual published by Adobe.
    </p>
    <p num="6">
      Unfortunately, in using a halftoning technique, there is often a trade-off between maximizing the number of gray or hue concentration levels and the sharpness of the image; the larger each cell is (to contain more pixels), the fewer cells will fit into a given area.
      <br/>
      Fewer cells within a given area effectively decreases sharpness.
      <br/>
      This gray or hue concentration level/sharpness trade-off often forces product designers to choose between reproducing an image using many gray levels but in large halftone dots (resulting in coarse, grainy images) or using fine halftone dots but only a few gray or hue concentration levels (which can cause heavy banding).
      <br/>
      The effects of banding are illustrated described in my U.S. Pat. No. 5,587,81 1, which issued on Dec. 24, 1996, particular reference being made herein to FIG. 1 and the accompanying description in that patent.
      <br/>
      Banding results from a noticeable jump in the gray levels between adjacent regions.
    </p>
    <p num="7">
      Some techniques have been developed to address this trade-off between gray levels and sharpness in an attempt to maximize sharpness while minimizing the effects of banding.
      <br/>
      Xerox Corporation developed a technique called Quad Dot.
      <br/>
      It is believed that the Quad Dot technique divides a halftone cell into four smaller cells.
    </p>
    <p num="8">
      The Quad Dot system attempts to distribute darkened pixels among the smaller cells.
      <br/>
      However, it is believed that the Quad Dot system sequentially adds pixels to adjacent smaller cells in a deterministic circular fashion about the center of the larger cell.
      <br/>
      This can result in a noticeable pattern within the image.
    </p>
    <p num="9">
      The above-cited U.S. Pat. No. 5,587,811 addresses certain of the shortcomings of these prior art methods and systems by providing a method and apparatus for halftoning which utilizes a macro halftone cell defining an area of contiguous pixels.
      <br/>
      The method and apparatus partition the macro halftone cell into a plurality of sub-halftone cells, each sub-halftone cell defining an area of contiguous pixels.
      <br/>
      A predetermined level of desired grayness or hue intensity determines the quantity of pixels to be darkened within the macro halftone cell.
      <br/>
      In accordance with one aspect of this method and apparatus, a spot function ranks pixels within the macro halftone cell from highest to lowest such that preferably one or more of the following design rules apply: no two pixels within the same sub-halftone cell are ranked consecutively; and the rank of each individual pixel within each sub-halftone cell is a decreasing function of the distance between the center of the sub-halftone cell and the center of the pixel (e.g., a pixel closest to the center of the sub-halftone cell has the highest rank of pixels within the sub-halftone cell and a pixel furthest from the center of the sub-halftone cell has the lowest rank of pixels within the sub-halftone cell) and the number of pixels ranked above any particular pixel within the sub-halftone cell is no more than one greater and no more than one less than the number of pixels ranked above the particular pixel in any other sub-halftone cell within the macro halftone cell.
      <br/>
      Each pixel having a rank higher than or equal to a threshold ranking is darkened, wherein the threshold ranking is set so that the determined quantity of pixels is darkened.
      <br/>
      Such an arrangement has been found to provide an even distribution of darkened pixels among the halftone cells of the macro halftone cell yet maintain a high level of resolution.
    </p>
    <p num="10">
      In accordance with another aspect of the invention disclosed in U.S. Pat. No. 5,587,811, the macro halftone is partitioned into an area of v by w contiguous sub-halftone cells where v and w are odd positive integers.
      <br/>
      Having a macro halftone cell of odd dimensions of sub-halftone cells can define exactly one center sub-halftone cell.
      <br/>
      This facilitates a balanced distribution of sub-halftone spots within the macro halftone cell to provide a balanced image across the macro halftone cell.
    </p>
    <p num="11">
      By altering the distribution of darkened pixels within the halftone cell for a desired level of grayness, a more balanced image in black and can be produced.
      <br/>
      Maintaining high resolution and the large number of levels of hue concentration within the macro halftone in color printers provides a smooth transition to neighbor colors and a well balanced in-gamut distribution.
    </p>
    <p num="12">
      While the method and system disclosed in the above-cited patent do produce image quality improvement, they nevertheless possess certain shortcomings.
      <br/>
      For example, the transition which they exhibit from one intensity, or darkness, level to the next does not ideal smoothness across a macro halftone cell and they do not permit a gamma correction to be made in an acceptably simple manner.
      <br/>
      Gamma correction involves a correction for the difference between the percentage of dots in a cell which are darkened and the apparent darkness of that cell.
      <br/>
      It has been found that over the range of possible darkness values, a cell will generally appear to have a darkness greater than the percentage of dark pixels within the cell.
      <br/>
      For example, at about the midpoint between the lightest and the darkest levels, when 50% of the pixels in the cell are dark, the average observer will consider the cell to have a darkness of the order of 70%.
    </p>
    <heading>BRIEF SUMMARY OF THE INVENTION</heading>
    <p num="13">An object of the present invention is to provide an improved and system for halftoning that allows automatic gamma correction without requiring additional software.</p>
    <p num="14">A further object of the invention is to create a more uniform gray tone or hue across a halftone cell.</p>
    <p num="15">The above and other objects are achieved, according to the present invention, in a method for halftoning in an area defined by a matrix of pixels, which method comprises:</p>
    <p num="16">
      partitioning the area into a plurality of macro halftone cells, each macro halftone cell being constituted by an array of contiguous pixels;
      <br/>
      determining a quantity of pixels within a macro halftone cell to be darkened based on an input value which is a linear function of a desired level of color intensity for the macro halftone cell;
      <br/>
      ranking each of the pixels within each macro halftone cell from a maximum ranking value to a minimum ranking value, each ranking value corresponding to a respective input value; and
      <br/>
      in each macro halftone cell, darkening each pixel which has a ranking value greater than the associated input value,
      <br/>
      by the improvement wherein the step of ranking is performed to give each pixel in a macro halftone cell a ranking value which is such that the apparent level of color intensity of each macro halftone cell is linearly proportional to the associated input value.
    </p>
    <heading>BRIEF DESCRIPTION OF THE SEVERAL VIEWS OF THE DRAWING</heading>
    <p num="17">
      FIG. 1 is a graph illustrating relations between apparent darkness of a halftone cell and an input data value representing desired darkness.
      <br/>
      FIG. 2 is a table illustrating the ranks assigned to pixels in a screen representing a macro halftone cell according to one exemplary embodiment of the invention.
      <br/>
      FIG. 3 is a flow diagram illustrating the manner in which halftone screens are generated according to the invention.
      <br/>
      FIG. 4 is a block diagram of a system for effecting halftone printing in accordance with the present invention.
    </p>
    <heading>DESCRIPTION OF THE APPENDIX</heading>
    <p num="18">An understanding of one embodiment of the present invention may also be aided by reference to the Appendix A which is a listing of programming instructions in the Matlab script language for the embodiment.</p>
    <heading>DETAILED DESCRIPTION OF THE INVENTION</heading>
    <p num="19">
      FIG. 1 is a graph which illustrates the reason for, and the result of, gamma correction.
      <br/>
      This graph shows the relation between an input gray, or hue, level value for one elemental region of an image and the resulting apparent darkness, i.e., the apparent gray level or hue.
      <br/>
      When the percentage of pixels in a cell which are darkened, i.e., provided with a black or colored spot, is linearly proportional to the input value, the apparent darkness of the cell will vary along the curve entitled WITHOUT GAMMA CORRECTION.
      <br/>
      This curve represents a non-linear relationship between the apparent darkness and the input value.
      <br/>
      Thus, to a viewer, the image portion represented by a particular cell will generally appear to be darker than it would appear in an accurately reproduced image.
    </p>
    <p num="20">Therefore, if an appropriate compensating non-linear relation is established between the number, or percentage, of pixels in a cell which are darkened and the input value, a linear relation can be established between the apparent darkness of the cell and the associated input value as represented by the line labeled WITH GAMMA CORRECTION.</p>
    <p num="21">
      It has been found such a linear relation between the apparent darkness of the cell and the associated input value can be established by creating a non-linear relationship between the number of pixels that are darkened and the input value.
      <br/>
      Taking into account the shape of the curve which is obtained without gamma correction, the non-linear curve (not illustrated) which serves to produce the gamma correction will exhibit an increasing rate of change in the number of darkened pixels as the input value increases from white to dark.
      <br/>
      Therefore, at the light end of the curve, pixels will be progressively darkened at a low rate in response to incremental changes in the input value, while at the dark end of the curve, pixels will be darkened at a comparatively high rate.
    </p>
    <p num="22">
      According to the invention, as will become more readily apparent from the following description, such a gamma correction can be built into the ranking of each pixel in a macro halftone cell.
      <br/>
      The number of pixels having each rank value will increase progressively from the highest rank, representing the pixels which are darkened at the light end of the darkness scale, to the lowest rank, representing pixels which are darkened at the dark end of the darkness scale.
    </p>
    <p num="23">
      FIG. 2 is a table showing an exemplary group of rankings for all of the pixels of a single screen, representing the ranking scheme for each macro halftone cell, according to one preferred embodiment of the present invention.
      <br/>
      It should, of course, be understood that FIG. 2 depicts only one exemplary ranking scheme and that many other schemes can be devised pursuant to the inventive principles disclosed herein.
    </p>
    <p num="24">
      In a manner similar to the technique disclosed in U.S. Pat. No. 5,587,811, each rank value corresponds to an input value threshold.
      <br/>
      As the input value varies from a value associated with a white screen to the darkest screen, pixels are darkened in descending order of rank.
      <br/>
      For the first input value which is directly adjacent to the light end of the gray scale, a dark spot will be applied to each pixel having a rank of 255.
      <br/>
      When the input value corresponding to the dark end of the scale, or the darkest screen, is produced, the last pixels to be provided with a dark spot are those having a rank of "0", at which time all pixels in the macro halftone cell will have been provided with dark spots and that cell will appear to be black or to have the maximum possible hue intensity.
    </p>
    <p num="25">
      A macro halftone cell according to the invention is characterized in that, for at least some rank values, several pixel locations have the same rank value, and the number of pixel locations having each rank value is selected to provide the desired built-in gamma correction.
      <br/>
      The distribution of rank values according to the invention can be based on the programming set forth in the Appendix.
    </p>
    <p num="26">According to a further feature of the present invention, pixel rankings are distributed across a macro halftone cell so that the pixel locations having each rank value are distributed as uniformly as possible across the surface of the macro halftone cell, which will cause the macro halftone cell to appear to have a hue which is as uniform as possible across the cell area.</p>
    <p num="27">
      To aid in achieving this objective, the macro halftone cell is considered to be divided into a large number of sub-halftone cells.
      <br/>
      In the illustrated embodiment, where the macro halftone cell is a 32 * 32 array, there are provided 32 sub-cells, each containing 32 contiguous pixels.
      <br/>
      One such sub-cell is outlined in FIG. 2 and is shown to have a diamond form.
    </p>
    <p num="28">
      Hue uniformity would be optimized if each sub-cell were circular.
      <br/>
      However, a rectangular array of pixels can not be divided into circular sub-cells which would contain all of the macro cell pixels.
      <br/>
      Therefore, a sub-cell shape which approximates a circular shape and permits adjacent sub-cells to be fully contiguous is selected.
      <br/>
      The diamond shape meets these criteria, at least in the case of a 32 * 32 pixel macro halftone cell.
    </p>
    <p num="29">The identification of each sub-halftone cell as having a diamond shape can be understood to mean that if the macro halftone cell is viewed as lying in a plane, each sub-halftone cell has an outline that conforms generally to a parallelogram whose edges are inclined with respect to the boundary edges of the macro halftone cell.</p>
    <p num="30">
      Preferably, a macro halftone cell contains an integral number of sub-halftone cells, i.e., the number of pixels in the macro halftone cell is an integral number multiple of the number of pixels in a sub-halftone cell.
      <br/>
      However, improvements according to the invention can be achieved if this relationship is not perfectly attained, i.e., if one or more sub-halftone cells were truncated.
    </p>
    <p num="31">
      In order to have an integral number of sub-halftone cells in a macro halftone cell, when the macro halftone cell has an even number of rows and columns, each sub-halftone cell cannot be perfectly symmetrical about a single center pixel.
      <br/>
      Therefore, within each sub-halftone cell, one pixel which is as close to the center as possible is selected and given the highest rank of all pixels within that sub-halftone cell.
      <br/>
      Then, in all directions from the pixel having the highest rank, the other pixels in the cell have ranks which decrease with increasing distance from the pixel of highest rank.
    </p>
    <p num="32">At least with respect to the pixel of highest rank in each sub-halftone cell, the rank value in each sub-halftone cell will be different from that in each adjacent sub-halftone cell.</p>
    <p num="33">
      All of these sub-halftone cells will be interfitted with one another so that a relatively small spacing exists between the highest ranked pixels of any two adjacent cells.
      <br/>
      This spacing will determine the screen frequency in that the closer the spacing, the higher the frequency.
      <br/>
      The screen frequency is equal to the number of dots per inch along each row of an image being reproduced divided by the smallest distance, in pixel units, between the highest ranked pixels in two adjacent sub-halftone cells.
      <br/>
      Thus, in the embodiment shown in FIG. 2, the smallest distance which determines screen frequency will be, for example, the distance between pixel 8, 8 (row 8, column 8) and pixel 12, 12, or 42 pixel units.
      <br/>
      If an image is to be reproduced with a pixel density of 600 dots per inch, then the screen frequency, also referred to as lines per inch, would be of the order of 108.
    </p>
    <p num="34">
      It will be noted that in the illustrated embodiment, each sub-halftone cell extends across seven rows and eight columns.
      <br/>
      However, the sub-halftone cells could also be configured to each extend over eight rows and seven columns.
    </p>
    <p num="35">The invention is already embodied in printers marketed by Dataproducts Corporation, under model designation DDS24.</p>
    <p num="36">FIG. 3. is a flow diagram illustrating the basic steps of converting input values into data which controls, according to the invention, the pixels which are to be darkened in each screen, or macro halftone cell.</p>
    <p num="37">
      In Step 3-1 an input value for a selected macro halftone cell is obtained in a conventional manner from existing image data.
      <br/>
      This input value is tested, in operation 3-2, to determine a pixel rank threshold value.
      <br/>
      In accordance with preferred embodiments of the invention, in which gamma correction is built into the ranking of pixels in the macro halftone screen, the threshold value can be linearly proportional to the input value.
      <br/>
      Then, in operation 3-3, the rank of each pixel in the halftone screen is compared with the given threshold value to identify all pixels having a rank above the threshold value.
      <br/>
      Finally, in operation 3-4, output data will be generated to darken those pixels having rank values above the threshold value.
      <br/>
      The resulting pixel generation data produced by operation 3-4 is then utilized in a conventional manner to control the outputting, e.g., printing, operation.
    </p>
    <p num="38">
      The basic components of a system for implementing the present invention are shown in FIG. 4.
      <br/>
      For a system in which a full-color image reproduction is to be achieved, four macro halftone cells ((48K) black, (48C) cyan, (48M) magenta, and (48Y) yellow) are superimposed, in accordance with conventional practice, on the medium on which the image is to be reproduced.
    </p>
    <p num="39">
      Full color input data for controlling image reproduction is supplied by a conventional unit 42 to a processing unit 44 in which the input data is converted, if necessary, into corresponding component darkness or hue values for each of the component image colors, including black.
      <br/>
      Then, in processing units 46, a threshold value for each basic color is derived from the associated darkness, or hue, value.
      <br/>
      Here again, in accordance with the present invention, the threshold value for each color can be linearly proportional to the associated darkness or hue value.
    </p>
    <p num="40">
      The threshold value for each color is supplied to a respective pixel selection unit, which may be constituted by a memory, which stores the rank of each pixel in an associated macro halftone cell, or screen.
      <br/>
      Each pixel selector 47 outputs a control signal, in a conventional manner, which causes appropriate pixels in the macro halftone cell to be darkened.
    </p>
    <p num="41">
      In a color system according to the invention, each pixel selector 47 could store a separately derived pixel rank pattern, depending on the gamma correction requirements for each color.
      <br/>
      Each pixel selector 47 storing the pattern of rank values for a macro halftone cell could be a memory, such as a ROM, a PROM, etc.
      <br/>
      The rank value for each pixel would be stored at a given memory location.
      <br/>
      Threshold data representing a respective color at one image point would be inputted to the memory.
      <br/>
      Such an input signal could have, for example, any one of 256 different values, each value corresponding to a respective gray scale, or hue intensity, level. the location of each pixel having a rank which is above a threshold determined by the value of the threshold signal would then be read out to a suitable control system to identify those pixels which should be provided with a black dot.
      <br/>
      This information would then be applied to control the application of dots to the medium on which an image is to be reproduced.
    </p>
    <p num="42">In embodiments according to the invention, the same pattern of pixel rank values will be employed for each image point to be reproduced.</p>
    <p num="43">The system shown in FIG. 4 could be implemented by suitable programming of existing halftone image reproducing equipment, such as dot matrix printers.</p>
    <p num="44">
      The use of a 32 * 32 macro halftone cell has the significant advantage of allowing a highly effective gamma correction to be built into the pattern of pixel rank values.
      <br/>
      However, a more limited gamma correction could be with smaller macro halftone cells, provided that the number of pixels in such smaller cells is sufficiently larger than the number of gray, or hue, levels to be produced.
    </p>
    <p num="45">In view of the relation between the present invention and that disclosed in U.S. Pat. No. 5,587,811, the entirety of that issued patent is incorporated herein by reference.</p>
    <p num="46">
      The preferred embodiments of a color system according to the invention performs halftoning to provide commands to a solid, or hot melt, ink jet printer because the solid ink jet printer can generally produce circular dots with greater clarity.
      <br/>
      However, the disclosed color halftoning embodiments can be adapted to other systems for reproducing a color image having pixel values for superimposed cells as an input.
    </p>
    <p num="47">
      While the description above refers to particular embodiments of the present invention, it will be understood that many modifications may be made without departing from the spirit thereof.
      <br/>
      The accompanying claims are intended to cover such modifications as would fall within the true scope and spirit of the present invention.
    </p>
    <p num="48">The presently disclosed embodiments are therefore to be considered in all respects as illustrative and not restrictive, the scope of the invention being indicated by the appended claims, rather than the foregoing description, and all changes which come within the meaning and range of equivalency of the claims are therefore intended to be embraced therein.</p>
  </description>
  <claims format="original" lang="en" id="claim_en">
    <claim num="1">
      <claim-text>What is claimed is:</claim-text>
    </claim>
    <claim num="11">
      <claim-text>11.</claim-text>
      <claim-text>A system for halftoning in an area defined by a matrix of pixels comprising: means for partitioning the area into a plurality of macro halftone cells, each macro halftone cell being constituted by an array of contiguous pixels; means for defining a plurality of ranking levels, each ranking level being associated with a linear function of a desired level of apparent color intensity in a macro halftone cell region, a highest ranking level being associated with a minimum apparent color intensity and a lowest ranking level being associated with a maximum apparent color intensity level; means for allocating to each ranking level one or more pixels of each macro halftone cell such that the pixels of the macro halftone cell are non-uniformly distributed among the plurality of ranking levels; means for selecting one of the ranking levels for each macro halftone cell based upon an input value associated with the macro halftone cell;</claim-text>
      <claim-text>and means for darkening, in each macro halftone cell, each pixel allocated to a ranking level which is greater than the ranking level for the macro halftone cell, wherein the pixels of each macro halftone cell are non-uniformly allocated among the ranking levels such that the apparent level of color intensity of each macro halftone cell is linearly proportional to the associated input value.</claim-text>
      <claim-text>1. A method for halftoning in an area defined by a matrix of pixels comprising:</claim-text>
      <claim-text>partitioning the area into a plurality of macro halftone cells, each macro halftone cell being constituted by an array of contiguous pixels; defining a plurality of ranking levels, each ranking level being associated with a linear function of a desired level of apparent color intensity in a macro halftone cell region, a highest ranking level being associated with a minimum apparent color intensity and a lowest ranking level being associated with a maximum apparent color intensity; allocating to each ranking level one or more pixels of each macro halftone cell such that the pixels of the macro halftone cell are non-uniformly distributed among the plurality of ranking levels; selecting one of the ranking levels for each macro halftone cell based upon an input value associated with the macro halftone cell;</claim-text>
      <claim-text>and in each macro halftone cell, darkening each pixel allocated to a ranking level greater than the ranking level selected for the macro halftone cell, wherein the pixels of each macro halftone cell are non-uniformly allocated among the ranking levels such that the apparent level of color intensity of each macro halftone cell is linearly proportional to the associated input value.</claim-text>
      <claim-text>2. The method of claim 1, further comprising partitioning each macro halftone cell into a plurality of sub-halftone cells, each sub-halftone cell having a center, and wherein said step of allocating to each ranking level one or more pixels includes associating a ranking level with each individual pixel which is a decreasing function of the distance between the center of the sub-halftone cell and the pixel, wherein a pixel closest to the center of the sub-halftone cell is associated with the maximum ranking level of pixels within the sub-halftone cell and a pixel furthest from center of the sub-halftone cell minimum ranking level of pixels within the sub-halftone cell.</claim-text>
      <claim-text>3. The method of claim 2, wherein said macro halftone cell has boundary edges and each said sub-halftone cell has boundary edges which are inclined with respect to the macro halftone cell boundary edges.</claim-text>
      <claim-text>4. The method of claim 3, wherein each sub-halftone cell has an outline approximating a circle.</claim-text>
      <claim-text>5. The method of claim 4, wherein each said sub-halftone cell has a parallelogram shape.</claim-text>
      <claim-text>6. The method of claim 2, wherein each pixel has a respective position in a respective sub-halftone cell, and a pixel at one position in one sub-halftone cell has a rank different from the rank of the pixel in the corresponding position in an adjacent sub-halftone cell.</claim-text>
      <claim-text>7. The method of claim 2, wherein each sub-halftone cell is composed of a number of contiguous pixels which is an even-numbered submultiple of the number of pixels in one macro halftone cell.</claim-text>
      <claim-text>8. The method of claim 2, wherein all pixels which are darkened within a sub-halftone cell are contiguous.</claim-text>
      <claim-text>9. The method of claim 1, wherein a plurality of pixels in one said macro halftone cell have the same rank.</claim-text>
      <claim-text>10. The method of claim 1, wherein said step of allocating to each ranking level one or more pixels is performed according to a non-linear function of the level of color intensity so that a gamma correction is effected during said step of darkening.</claim-text>
    </claim>
    <claim num="12">
      <claim-text>12. The system of claim 11, wherein each macro halftone cell is partitioned into a plurality of sub-halftone cells, each sub-halftone cell having a center, and wherein said means for allocating to each ranking level associates each individual pixel within each sub-halftone cell with a ranking level which is a decreasing function of the distance between the center of the sub-halftone cell and the pixel, wherein a pixel closest to the center of the sub-halftone cell is associated with the maximum ranking level of pixels within the sub-halftone cell and a pixel furthest from center of the sub-halftone cell minimum ranking level of pixels within the sub-halftone cell.</claim-text>
    </claim>
    <claim num="13">
      <claim-text>13. The system of claim 12, wherein said macro halftone cell has boundary edges and each said sub-halftone cell has boundary edges which are inclined with respect to the macro halftone cell boundary edges.</claim-text>
    </claim>
    <claim num="14">
      <claim-text>14. The system of claim 13, wherein each sub-halftone cell has an outline approximating a circle.</claim-text>
    </claim>
    <claim num="15">
      <claim-text>15. The system of claim 14, wherein each said sub-halftone cell has a parallelogram shape.</claim-text>
    </claim>
    <claim num="16">
      <claim-text>16. The system of claim 12, wherein each pixel has a respective position in a respective sub-halftone cell, and a pixel at one position in one sub-halftone cell has a rank different from the rank of the pixel in the corresponding position in an adjacent sub-halftone cell.</claim-text>
    </claim>
    <claim num="17">
      <claim-text>17. The system of claim 12, wherein each sub-halftone cell is composed of a number of contiguous pixels which is an even-numbered submultiple of the number of pixels in one macro halftone cell.</claim-text>
    </claim>
    <claim num="18">
      <claim-text>18. The system of claim 12, wherein all pixels which are darkened within a sub-halftone cell are contiguous.</claim-text>
    </claim>
    <claim num="19">
      <claim-text>19. The system of claim 11, wherein a plurality of pixels in one said macro halftone cell have the same rank.</claim-text>
    </claim>
    <claim num="20">
      <claim-text>20. The system of claim 11, wherein said means for ranking are operative for ranking pixels in each macro halftone cell according to a non-linear function of the level of color intensity so that a gamma correction is effected during said step of darkening.</claim-text>
    </claim>
  </claims>
</questel-patent-document>