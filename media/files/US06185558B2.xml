<?xml version="1.0" encoding="UTF-8"?>
<questel-patent-document lang="en" date-produced="20180805" produced-by="Questel" schema-version="3.23" file="US06185558B2.xml">
  <bibliographic-data lang="en">
    <publication-reference publ-desc="Granted patent as second publication">
      <document-id>
        <country>US</country>
        <doc-number>06185558</doc-number>
        <kind>B2</kind>
        <date>20010206</date>
      </document-id>
      <document-id data-format="questel">
        <doc-number>US6185558</doc-number>
      </document-id>
    </publication-reference>
    <original-publication-kind>B2</original-publication-kind>
    <application-reference is-representative="YES" family-id="21872656" extended-family-id="601031">
      <document-id>
        <country>US</country>
        <doc-number>09041081</doc-number>
        <kind>A</kind>
        <date>19980310</date>
      </document-id>
      <document-id data-format="questel">
        <doc-number>1998US-09041081</doc-number>
      </document-id>
      <document-id data-format="questel_Uid">
        <doc-number>615572</doc-number>
      </document-id>
    </application-reference>
    <language-of-filing>en</language-of-filing>
    <language-of-publication>en</language-of-publication>
    <priority-claims>
      <priority-claim kind="national" sequence="1">
        <country>US</country>
        <doc-number>4108198</doc-number>
        <kind>A</kind>
        <date>19980310</date>
        <priority-active-indicator>N</priority-active-indicator>
      </priority-claim>
      <priority-claim data-format="questel" sequence="1">
        <doc-number>1998US-09041081</doc-number>
      </priority-claim>
      <priority-claim kind="national" sequence="2">
        <country>US</country>
        <doc-number>3382498</doc-number>
        <kind>A</kind>
        <date>19980303</date>
        <priority-linkage-type>C</priority-linkage-type>
        <priority-active-indicator>Y</priority-active-indicator>
      </priority-claim>
      <priority-claim data-format="questel" sequence="2">
        <doc-number>1998US-09033824</doc-number>
      </priority-claim>
    </priority-claims>
    <dates-of-public-availability>
      <publication-of-grant-date>
        <date>20010206</date>
      </publication-of-grant-date>
    </dates-of-public-availability>
    <term-of-grant>
      <disclaimer/>
    </term-of-grant>
    <classifications-ipcr>
      <classification-ipcr sequence="1">
        <text>G06F  17/30        20060101A I20051008RMEP</text>
        <ipc-version-indicator>
          <date>20060101</date>
        </ipc-version-indicator>
        <classification-level>A</classification-level>
        <section>G</section>
        <class>06</class>
        <subclass>F</subclass>
        <main-group>17</main-group>
        <subgroup>30</subgroup>
        <classification-value>I</classification-value>
        <generating-office>
          <country>EP</country>
        </generating-office>
        <classification-status>R</classification-status>
        <classification-data-source>M</classification-data-source>
        <action-date>
          <date>20051008</date>
        </action-date>
      </classification-ipcr>
      <classification-ipcr sequence="2">
        <text>G06Q  30/02        20120101A I20140531RMEP</text>
        <ipc-version-indicator>
          <date>20120101</date>
        </ipc-version-indicator>
        <classification-level>A</classification-level>
        <section>G</section>
        <class>06</class>
        <subclass>Q</subclass>
        <main-group>30</main-group>
        <subgroup>02</subgroup>
        <classification-value>I</classification-value>
        <generating-office>
          <country>EP</country>
        </generating-office>
        <classification-status>R</classification-status>
        <classification-data-source>M</classification-data-source>
        <action-date>
          <date>20140531</date>
        </action-date>
      </classification-ipcr>
    </classifications-ipcr>
    <classification-national>
      <country>US</country>
      <further-classification sequence="1">
        <text>705007290</text>
        <class>705</class>
        <subclass>007290</subclass>
      </further-classification>
      <further-classification sequence="2">
        <text>705037000</text>
        <class>705</class>
        <subclass>037000</subclass>
      </further-classification>
      <further-classification sequence="3">
        <text>707999005</text>
        <class>707</class>
        <subclass>999005</subclass>
      </further-classification>
      <further-classification sequence="4">
        <text>707E17063</text>
        <class>707</class>
        <subclass>E17063</subclass>
      </further-classification>
      <further-classification sequence="5">
        <text>707E17071</text>
        <class>707</class>
        <subclass>E17071</subclass>
      </further-classification>
      <further-classification sequence="6">
        <text>707E17075</text>
        <class>707</class>
        <subclass>E17075</subclass>
      </further-classification>
      <further-classification sequence="7">
        <text>707E17081</text>
        <class>707</class>
        <subclass>E17081</subclass>
      </further-classification>
      <further-classification sequence="8">
        <text>707E17082</text>
        <class>707</class>
        <subclass>E17082</subclass>
      </further-classification>
      <further-classification sequence="9">
        <text>707E17108</text>
        <class>707</class>
        <subclass>E17108</subclass>
      </further-classification>
    </classification-national>
    <patent-classifications>
      <patent-classification sequence="1">
        <classification-scheme office="EP" scheme="CPC">
          <date>20130101</date>
        </classification-scheme>
        <classification-symbol>G06F-017/30675</classification-symbol>
        <section>G</section>
        <class>06</class>
        <subclass>F</subclass>
        <main-group>17</main-group>
        <subgroup>30675</subgroup>
        <symbol-position>F</symbol-position>
        <classification-value>I</classification-value>
        <classification-status>B</classification-status>
        <classification-data-source>H</classification-data-source>
        <action-date>
          <date>20130823</date>
        </action-date>
      </patent-classification>
      <patent-classification sequence="2">
        <classification-scheme office="EP" scheme="CPC">
          <date>20130101</date>
        </classification-scheme>
        <classification-symbol>G06F-017/30646</classification-symbol>
        <section>G</section>
        <class>06</class>
        <subclass>F</subclass>
        <main-group>17</main-group>
        <subgroup>30646</subgroup>
        <symbol-position>L</symbol-position>
        <classification-value>I</classification-value>
        <classification-status>B</classification-status>
        <classification-data-source>H</classification-data-source>
        <action-date>
          <date>20130823</date>
        </action-date>
      </patent-classification>
      <patent-classification sequence="3">
        <classification-scheme office="EP" scheme="CPC">
          <date>20130101</date>
        </classification-scheme>
        <classification-symbol>G06F-017/30663</classification-symbol>
        <section>G</section>
        <class>06</class>
        <subclass>F</subclass>
        <main-group>17</main-group>
        <subgroup>30663</subgroup>
        <symbol-position>L</symbol-position>
        <classification-value>I</classification-value>
        <classification-status>B</classification-status>
        <classification-data-source>H</classification-data-source>
        <action-date>
          <date>20130823</date>
        </action-date>
      </patent-classification>
      <patent-classification sequence="4">
        <classification-scheme office="EP" scheme="CPC">
          <date>20130101</date>
        </classification-scheme>
        <classification-symbol>G06F-017/30693</classification-symbol>
        <section>G</section>
        <class>06</class>
        <subclass>F</subclass>
        <main-group>17</main-group>
        <subgroup>30693</subgroup>
        <symbol-position>L</symbol-position>
        <classification-value>I</classification-value>
        <classification-status>B</classification-status>
        <classification-data-source>H</classification-data-source>
        <action-date>
          <date>20130823</date>
        </action-date>
      </patent-classification>
      <patent-classification sequence="5">
        <classification-scheme office="EP" scheme="CPC">
          <date>20130101</date>
        </classification-scheme>
        <classification-symbol>G06F-017/30696</classification-symbol>
        <section>G</section>
        <class>06</class>
        <subclass>F</subclass>
        <main-group>17</main-group>
        <subgroup>30696</subgroup>
        <symbol-position>L</symbol-position>
        <classification-value>I</classification-value>
        <classification-status>B</classification-status>
        <classification-data-source>H</classification-data-source>
        <action-date>
          <date>20130823</date>
        </action-date>
      </patent-classification>
      <patent-classification sequence="6">
        <classification-scheme office="EP" scheme="CPC">
          <date>20130101</date>
        </classification-scheme>
        <classification-symbol>G06F-017/30864</classification-symbol>
        <section>G</section>
        <class>06</class>
        <subclass>F</subclass>
        <main-group>17</main-group>
        <subgroup>30864</subgroup>
        <symbol-position>L</symbol-position>
        <classification-value>I</classification-value>
        <classification-status>B</classification-status>
        <classification-data-source>H</classification-data-source>
        <action-date>
          <date>20130823</date>
        </action-date>
      </patent-classification>
      <patent-classification sequence="7">
        <classification-scheme office="EP" scheme="CPC">
          <date>20130101</date>
        </classification-scheme>
        <classification-symbol>G06Q-030/02</classification-symbol>
        <section>G</section>
        <class>06</class>
        <subclass>Q</subclass>
        <main-group>30</main-group>
        <subgroup>02</subgroup>
        <symbol-position>L</symbol-position>
        <classification-value>I</classification-value>
        <classification-status>B</classification-status>
        <classification-data-source>H</classification-data-source>
        <action-date>
          <date>20130823</date>
        </action-date>
      </patent-classification>
      <patent-classification sequence="8">
        <classification-scheme office="EP" scheme="CPC">
          <date>20130101</date>
        </classification-scheme>
        <classification-symbol>G06Q-030/0201</classification-symbol>
        <section>G</section>
        <class>06</class>
        <subclass>Q</subclass>
        <main-group>30</main-group>
        <subgroup>0201</subgroup>
        <symbol-position>L</symbol-position>
        <classification-value>I</classification-value>
        <classification-status>B</classification-status>
        <classification-data-source>H</classification-data-source>
        <action-date>
          <date>20130823</date>
        </action-date>
      </patent-classification>
      <patent-classification sequence="9">
        <classification-scheme office="EP" scheme="CPC">
          <date>20130101</date>
        </classification-scheme>
        <classification-symbol>G06Q-040/04</classification-symbol>
        <section>G</section>
        <class>06</class>
        <subclass>Q</subclass>
        <main-group>40</main-group>
        <subgroup>04</subgroup>
        <symbol-position>L</symbol-position>
        <classification-value>I</classification-value>
        <classification-status>B</classification-status>
        <classification-data-source>H</classification-data-source>
        <action-date>
          <date>20130823</date>
        </action-date>
      </patent-classification>
      <patent-classification sequence="10">
        <classification-scheme office="EP" scheme="CPC">
          <date>20130101</date>
        </classification-scheme>
        <classification-symbol>Y10S-707/99935</classification-symbol>
        <section>Y</section>
        <class>10</class>
        <subclass>S</subclass>
        <main-group>707</main-group>
        <subgroup>99935</subgroup>
        <symbol-position>L</symbol-position>
        <classification-value>A</classification-value>
        <classification-status>B</classification-status>
        <classification-data-source>H</classification-data-source>
        <action-date>
          <date>20130518</date>
        </action-date>
      </patent-classification>
    </patent-classifications>
    <number-of-claims>53</number-of-claims>
    <exemplary-claim>1</exemplary-claim>
    <figures>
      <number-of-drawing-sheets>9</number-of-drawing-sheets>
      <number-of-figures>9</number-of-figures>
      <image-key data-format="questel">US6185558</image-key>
    </figures>
    <invention-title format="original" lang="en" id="title_en">Identifying the items most relevant to a current query based on items selected in connection with similar queries</invention-title>
    <references-cited>
      <citation srep-phase="examiner">
        <patcit num="1">
          <text>SCHULTZ JOHN MICHAEL</text>
          <document-id>
            <country>US</country>
            <doc-number>5640553</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5640553</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="examiner">
        <patcit num="2">
          <text>SPENCER GRAHAM</text>
          <document-id>
            <country>US</country>
            <doc-number>5826261</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5826261</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="examiner">
        <patcit num="3">
          <text>NIELSEN JAKOB</text>
          <document-id>
            <country>US</country>
            <doc-number>5875443</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5875443</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="examiner">
        <patcit num="4">
          <text>LI YANHONG</text>
          <document-id>
            <country>US</country>
            <doc-number>5920859</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5920859</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="examiner">
        <patcit num="5">
          <text>BOWMAN DWAYNE E, et al</text>
          <document-id>
            <country>US</country>
            <doc-number>6006225</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US6006225</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="applicant">
        <patcit num="6">
          <text>HEY JOHN B</text>
          <document-id>
            <country>US</country>
            <doc-number>4996642</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US4996642</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="applicant">
        <patcit num="7">
          <text>KAPLAN CRAIG A, et al</text>
          <document-id>
            <country>US</country>
            <doc-number>5446891</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5446891</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="applicant">
        <patcit num="8">
          <text>MASSACHUSETTS INST TECHNOLOGY</text>
          <document-id>
            <country>EP</country>
            <doc-number>0751471</doc-number>
            <kind>A1</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>EP-751471</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="applicant">
        <patcit num="9">
          <text>APPLE COMPUTER, et al</text>
          <document-id>
            <country>WO</country>
            <doc-number>9529451</doc-number>
            <kind>A1</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>WO9529451</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="examiner">
        <nplcit num="1">
          <text>"Discover: A Resource Discovery System Based on Content Routing," Sheldon et al., Computer Networks and ISDN Systems, vol. 27, No. 6, pp. 953-972, Apr. 1995.</text>
        </nplcit>
      </citation>
      <citation srep-phase="applicant">
        <nplcit num="2">
          <text>Jurvis, "Serving up Knowledge," Informationweek 657: 141-150, Nov. 1997.</text>
        </nplcit>
      </citation>
      <citation srep-phase="applicant">
        <nplcit num="3">
          <text>Brooks, "Looking for Data in All the Wrong Places; Finding Data in Free-Form Data Sources; Technology Information," DBMS 11(10): 70, Oct. 1997.</text>
        </nplcit>
      </citation>
      <citation srep-phase="applicant">
        <nplcit num="4">
          <text>"PLS Speeds Time to Market for Content-Rich Web Sites With PL Web Turbo Version 2.6; New Version Delivers Open Platform Support and Flexible Interface Design," PR Newswire, Financial News Section, Sep. 1996.</text>
        </nplcit>
      </citation>
      <citation srep-phase="applicant">
        <nplcit num="5">
          <text>Munson, "World Wide Web Indexes and Hierarchical Lists: Finding Tools for the Internet," Computers in Libraries 16(6): 54, Jun. 1996.</text>
        </nplcit>
      </citation>
      <citation srep-phase="applicant">
        <nplcit num="6">
          <text>"Sageware Introduces Knowledge Sets for Verity's Line of Information Searching Products," PR Newswire, Financial News Section, May 1996.</text>
        </nplcit>
      </citation>
      <citation srep-phase="applicant">
        <nplcit num="7">
          <text>Banet, "Searching Far and Wide: The Powerful Document Retrieval Software of PLS, part 1," Seybold Report on Desktop Publishing 10(8), Apr. 1996.</text>
        </nplcit>
      </citation>
      <citation srep-phase="applicant">
        <nplcit num="8">
          <text>"Searching Far and Wide: The Powerful Document Retrieval Software of PLS, part 2," Seybold Report on Desktop Publishing 10(8), Apr. 1996.</text>
        </nplcit>
      </citation>
      <citation srep-phase="applicant">
        <nplcit num="9">
          <text>"Searching Far and Wide: The Powerful Document Retrieval Software of PLS, part 3," Seybold Report on Desktop Publishing 10(8), Apr. 1996.</text>
        </nplcit>
      </citation>
      <citation srep-phase="applicant">
        <nplcit num="10">
          <text>Courtois et al., "Cool Tools for Searching the Web; World Wide Web Search Databases; Includes Related Articles," Online 19(6): 14, Nov.1995.</text>
        </nplcit>
      </citation>
      <citation srep-phase="applicant">
        <nplcit num="11">
          <text>Notess, "Northern Light: New Search Engine for the Web and Full-Text articles; Includes Related Article," Database 21(1): 32, Feb. 1998.</text>
        </nplcit>
      </citation>
      <citation srep-phase="applicant">
        <nplcit num="12">
          <text>Klingler, "Search the Internet the Easy Way," LAN Times 14(10): 56, May 1997.</text>
        </nplcit>
      </citation>
      <citation srep-phase="applicant">
        <nplcit num="13">
          <text>Munro, "Filtering Utilities," PC Magazine 16(7): 235, Apr. 1997.</text>
        </nplcit>
      </citation>
      <citation srep-phase="applicant">
        <nplcit num="14">
          <text>Paul, "News Archives: One-Stp Shopping, Boutique Hopping and the Specialty News Search Site; Includes Related Article Battle of the Search Engines," Searcher 6(1): 64, Jan. 1998.</text>
        </nplcit>
      </citation>
      <citation srep-phase="applicant">
        <nplcit num="15">
          <text>"Distributed Search Patent," http://software,infoseek.com/patents/dist-search/Default.htm (Accessed Dec. 21, 1998).</text>
        </nplcit>
      </citation>
      <citation srep-phase="applicant">
        <nplcit num="16">
          <text>"Infoseek Gets Patent on Internet Search Technique," http://software,infoseek.com/patents/dist-search/bg-info.htm (Accessed Dec. 21, 1998).</text>
        </nplcit>
      </citation>
    </references-cited>
    <related-documents>
      <related-publication>
        <document-id>
          <country>US</country>
          <doc-number>3382498</doc-number>
          <kind>A</kind>
          <date>19980303</date>
        </document-id>
      </related-publication>
    </related-documents>
    <parties>
      <applicants>
        <applicant data-format="original" app-type="applicant" sequence="1">
          <addressbook lang="en">
            <orgname>Amazon.com, Inc.</orgname>
            <address>
              <address-1>Seattle, WA, US</address-1>
              <city>Seattle</city>
              <state>WA</state>
              <country>US</country>
            </address>
          </addressbook>
          <nationality>
            <country>US</country>
          </nationality>
        </applicant>
        <applicant data-format="questel" app-type="applicant" sequence="2">
          <addressbook lang="en">
            <orgname>AMAZON COM</orgname>
          </addressbook>
          <nationality>
            <country>US</country>
          </nationality>
        </applicant>
      </applicants>
      <inventors>
        <inventor data-format="original" sequence="1">
          <addressbook lang="en">
            <name>Bowman, Dwayne</name>
            <address>
              <address-1>Woodinville, WA, US</address-1>
              <city>Woodinville</city>
              <state>WA</state>
              <country>US</country>
            </address>
          </addressbook>
          <nationality>
            <country>US</country>
          </nationality>
        </inventor>
        <inventor data-format="original" sequence="2">
          <addressbook lang="en">
            <name>Ortega, Ruben E.</name>
            <address>
              <address-1>Seattle, WA, US</address-1>
              <city>Seattle</city>
              <state>WA</state>
              <country>US</country>
            </address>
          </addressbook>
          <nationality>
            <country>US</country>
          </nationality>
        </inventor>
        <inventor data-format="original" sequence="3">
          <addressbook lang="en">
            <name>Linden, Greg</name>
            <address>
              <address-1>Seattle, WA, US</address-1>
              <city>Seattle</city>
              <state>WA</state>
              <country>US</country>
            </address>
          </addressbook>
          <nationality>
            <country>US</country>
          </nationality>
        </inventor>
        <inventor data-format="original" sequence="4">
          <addressbook lang="en">
            <name>Spiegel, Joel R.</name>
            <address>
              <address-1>Woodinville, WA, US</address-1>
              <city>Woodinville</city>
              <state>WA</state>
              <country>US</country>
            </address>
          </addressbook>
          <nationality>
            <country>US</country>
          </nationality>
        </inventor>
      </inventors>
      <agents>
        <agent sequence="1" rep-type="agent">
          <addressbook lang="en">
            <orgname>Perkins Coie LLP</orgname>
          </addressbook>
        </agent>
      </agents>
    </parties>
    <examiners>
      <primary-examiner>
        <name>Alam, Hosain T.</name>
      </primary-examiner>
    </examiners>
    <lgst-data>
      <lgst-status>EXPIRED</lgst-status>
    </lgst-data>
  </bibliographic-data>
  <abstract format="original" lang="en" id="abstr_en">
    <p id="P-EN-00001" num="00001">
      <br/>
      The present invention provides a software facility for identifying the items most relevant to a current query based on items selected in connection with similar queries.
      <br/>
      In preferred embodiments of the invention, the facility receives a query specifying one or more query terms.
      <br/>
      In response, the facility generates a query result identifying a plurality of items that satisfy the query.
      <br/>
      The facility then produces a ranking value for at least a portion of the items identified in the query result by combining the relative frequencies with which users selected that item from the query results generated from queries specifying each of the terms specified by the query.
      <br/>
      The facility identifies as most relevant those items having the highest ranking values.
    </p>
  </abstract>
  <description format="original" lang="en" id="desc_en">
    <heading>CROSS-REFERENCE TO RELATED APPLICATION</heading>
    <p num="1">
      This application is a continuation-in-part of U.S. patent application Ser.
      <br/>
      No. 09/033,824, filed Mar. 3, 1998, now abandoned.
    </p>
    <heading>TECHNICAL FIELD</heading>
    <p num="2">The present invention is directed to the field of query processing.</p>
    <heading>BACKGROUND OF THE INVENTION</heading>
    <p num="3">
      Many World Wide Web sites permit users to perform searches to identify a small number of interesting items among a much larger domain of items.
      <br/>
      As an example, several web index sites permit users to search for particular web sites among most of the known web sites.
      <br/>
      Similarly, many online merchants, such as booksellers, permit users to search for particular products among all of the products that can be purchased from a merchant.
      <br/>
      In many cases, users perform searches in order to ultimately find a single item within an entire domain of items.
    </p>
    <p num="4">
      In order to perform a search, a user submits a query containing one or more query terms.
      <br/>
      The query also explicitly or implicitly identifies a domain of items to search.
      <br/>
      For example, a user may submit a query to an online bookseller containing terms that the user believes are words in the title of a book.
      <br/>
      A query server program processes the query to identify within the domain items matching the terms of the query.
      <br/>
      The items identified by the query server program are collectively known as a query result.
      <br/>
      In the example, the query result is a list of books whose titles contain some or all of the query terms.
      <br/>
      The query result is typically displayed to the user as a list of items.
      <br/>
      This list may be ordered in various ways.
      <br/>
      For example, the list may be ordered alphabetically or numerically based on a property of each item, such as the title, author, or release date of each book.
      <br/>
      As another example, the list may be ordered based on the extent to which each identified item matches the terms of the query.
    </p>
    <p num="5">
      When the domain for a query contains a large number of items, it is common for query results to contain tens or hundreds of items.
      <br/>
      Where the user is performing the search in order to find a single item, application of conventional approaches to ordering the query result often fail to place the sought item or items near the top of the query result, so that the user must read through many other items in the query result before reaching the sought item.
      <br/>
      In view of this disadvantage of conventional approaches to ordering query results, a new, more effective technique for automatically ordering query results in accordance with collective and individual user behavior would have significant utility.
    </p>
    <p num="6">
      Further, it is fairly common for users to specify queries that are not satisfied by any items.
      <br/>
      This may happen, for example, where a user submits a detailed query that is very narrow, or where a user mistypes or misremembers a term in the query.
      <br/>
      In such cases, conventional techniques, which present only items that satisfy the query, present no items to the user.
      <br/>
      When no items are presented to a user in response to issuing a query, the user can become frustrated with the search engine, and may even discontinue its use.
      <br/>
      Accordingly, a technique for displaying items relating to at least some of the terms in a query even when no items completely match the query would have significant utility.
    </p>
    <p num="7">
      In order to satisfy this need, some search engines adopt a strategy of effectively automatically revising the query until a non-empty result set is produced.
      <br/>
      For example, a search engine may progressively delete conjunctive, i.e., ANDed, terms from a multiple term query until the result set produced for that query contains items.
      <br/>
      This strategy has the disadvantage that important information for choosing the correct items can be lost when query terms are arbitrarily deleted.
      <br/>
      As a result, the first nonempty result set can be quite large, and may contain a large percentage of items that are irrelevant to the original query as a whole.
      <br/>
      For this reason, a more effective technique for displaying items relating to at least some of the terms in a query even when no items completely match the query would have significant utility.
    </p>
    <heading>SUMMARY OF THE INVENTION</heading>
    <p num="8">
      The present invention provides a software facility ("the facility") for identifying the items most relevant to a current query based on items selected in connection with similar queries.
      <br/>
      The facility preferably generates ranking values for items indicating their level of relevance to the current query, which specifies one or more query terms.
      <br/>
      The facility generates a ranking value for an item by combining rating scores, produced by a rating function, that each correspond to the level of relevance of the item to queries containing one of the ranking values.
      <br/>
      The rating function preferably retrieves a rating score for the combination of an item and a term from a rating table generated by the facility.
      <br/>
      The scores in the rating table preferably reflect, for a particular item and term, how often users have selected the item when the item has been identified in query results produced for queries containing particular term.
    </p>
    <p num="9">
      In different embodiments, the facility uses the rating scores to either generate a ranking value for each item in a query result, or generate ranking values for a smaller number of items in order to select a few items having the top ranking values.
      <br/>
      To generate a ranking value for a particular item in a query result, the facility combines the rating scores corresponding to that item and the terms of the query.
      <br/>
      In embodiments in which the goal is to generate ranking values for each item in the query result, the facility preferably loops through the items in the query results and, for each item, combines all of the rating scores corresponding to that item and any of the terms in the query.
      <br/>
      On the other hand, in embodiments in which the goal is to select a few items in the query result having the largest ranking values, the facility preferably loops through the terms in the query, and, for each item, identifies the top few rating scores for that term and any item.
      <br/>
      The facility then combines the scores identified for each item to generate ranking values for a relatively small number of items, which may include items not identified in the query result.
      <br/>
      Indeed, these embodiments of the invention are able to generate ranking values for and display items even in cases in which the query result is empty, i.e., when no items completely satisfy the query.
    </p>
    <p num="10">
      Once the facility has generated ranking values for at least some items, the facility preferably orders the items of the query result in decreasing order of ranking value.
      <br/>
      The facility may also use the ranking values to subset the items in the query result to a smaller number of items.
      <br/>
      By ordering and/or subsetting the items in the query result in this way in accordance with collective and individual user behavior rather than in accordance with attributes of the items, the facility substantially increases the likelihood that the user will quickly find within the query result the particular item or items that he or she seeks.
      <br/>
      For example, while a query result for a query containing the query terms "human" and "dynamic" may contain a book about human dynamics and a book about the effects on human beings of particle dynamics, selections by users from earlier query results produced for queries containing the term "human" show that these users select the human dynamics book much more frequently than they select the particle dynamics book.
      <br/>
      The facility therefore ranks the human dynamics book higher than the particle dynamics book, allowing users that are more interested in the human dynamics book to select it more easily.
      <br/>
      This benefit of the facility is especially useful in conjunction with the large, heterogeneous query results that are typically generated for single-term queries, which are commonly submitted by users.
    </p>
    <p num="11">
      Various embodiments of the invention base rating scores on different kinds of selection actions performed by the users on items identified in query results.
      <br/>
      These include whether the user displayed additional information about an item, how much time the user spent viewing the additional information about the item, how many hyperlinks the user followed within the additional information about the item, whether the user added the item to his or her shopping basket, and whether the user ultimately purchased the item.
      <br/>
      Embodiments of the invention also consider selection actions not relating to query results, such as typing an item's item identifier rather than choosing the item from a query result.
      <br/>
      Additional embodiments of the invention incorporate into the ranking process information about the user submitting the query by maintaining and applying separate rating scores for users in different demographic groups, such as those of the same sex, age, income, or geographic category.
      <br/>
      Certain embodiments also incorporate behavioral information about specific users.
      <br/>
      Further, rating scores may be produced by a rating function that combines different types of information reflecting collective and individual user preferences.
      <br/>
      Some embodiments of the invention utilize specialized strategies for incorporating into the rating scores information about queries submitted in different time frames.
    </p>
    <heading>BRIEF DESCRIPTION OF THE DRAWINGS</heading>
    <p num="12">
      FIG. 1 is a high-level block diagram showing the computer system upon which the facility preferably executes.
      <br/>
      FIG. 2 is a flow diagram showing the steps preferably performed by the facility in order to generate a new rating table.
      <br/>
      FIGS. 3 and 4 are table diagrams showing augmentation of an item rating table in accordance with step 206 (FIG. 2).
      <br/>
      FIG. 5 is a table diagram showing the generation of rating tables for composite periods of time from rating tables for constituent periods of time.
      <br/>
      FIG. 6 is a table diagram showing a rating table for a composite period.
      <br/>
      FIG. 7 is a flow diagram showing the steps preferably performed by the facility in order to identify user selections within a web server log.
      <br/>
      FIG. 8 is a flow diagram showing the steps preferably performed by the facility to order a query result using a rating table by generating a ranking value for each item in the query result.
      <br/>
      FIG. 9 is a flow diagram showing the steps preferably performed by the facility to select a few items in a query result having the highest ranking values using a rating table.
    </p>
    <heading>DETAILED DESCRIPTION OF THE INVENTION</heading>
    <p num="13">
      The present invention provides a software facility ("the facility") for identifying the items most relevant to a current query based on items selected in connection with similar queries.
      <br/>
      The facility preferably generates ranking values for items indicating their level of relevance to the current query, which specifies one or more query terms.
      <br/>
      The facility generates a ranking value for an item by combining rating scores, produced by a rating function, that each correspond to the level of relevance of the item to queries containing one of the ranking values.
      <br/>
      The rating function preferably retrieves a rating score for the combination of an item and a term from a rating table generated by the facility.
      <br/>
      The scores in the rating table preferably reflect, for a particular item and term, how often users have selected the item when the item has been identified in query results produced for queries containing the term.
    </p>
    <p num="14">
      In different embodiments, the facility uses the rating scores to either generate a ranking value for each item in a query result, or generate ranking values for a smaller number of items in order to select a few items having the top ranking values.
      <br/>
      To generate a ranking value for a particular item in a query result, the facility combines the rating scores corresponding to that item and the terms of the query.
      <br/>
      In embodiments in which the goal is to generate ranking values for each item in the query result, the facility preferably loops through the items in the query results and, for each item, combines all of the rating scores corresponding to that item and any of the terms in the query.
      <br/>
      On the other hand, in embodiments in which the goal is to select a few items in the query result having the largest ranking values, the facility preferably loops through the terms in the query, and, for each item, identifies the top few rating scores for that term and any item.
      <br/>
      The facility then combines the scores identified for each item to generate ranking values for a relatively small number of items, which may include items not identified in the query result.
      <br/>
      Indeed, these embodiments of the invention are able to generate ranking values for and display items even in cases in which the query result is empty, i.e., when no items completely satisfy the query.
    </p>
    <p num="15">
      Once the facility has generated ranking values for at least some items, the facility preferably orders the items of the query result in decreasing order of ranking value.
      <br/>
      The facility may also use the ranking values to subset the items in the query result to a smaller number of items.
      <br/>
      By ordering and/or subsetting the items in the query result in this way in accordance with collective and individual user behavior rather than in accordance with attributes of the items, the facility substantially increases the likelihood that the user will quickly find within the query result the particular item or items that he or she seeks.
      <br/>
      For example, while a query result for a query containing the query terms "human" and "dynamic" may contain a book about human dynamics and a book about the effects on human beings of particle dynamics, selections by users from earlier query results produced for queries containing the term "human" show that these users select the human dynamics book much more frequently than they select the particle dynamics book.
      <br/>
      The facility therefore ranks the human dynamics book higher than the particle dynamics book, allowing users, most of whom are more interested in the human dynamics book, to select it more easily.
      <br/>
      This benefit of the facility is especially useful in conjunction with the large, heterogeneous query results that are typically generated for single-term queries, which are commonly submitted by users.
    </p>
    <p num="16">
      Various embodiments of the invention base rating scores on different kinds of selection actions performed by the users on items identified in query results.
      <br/>
      These include whether the user displayed additional information about an item, how much time the user spent viewing the additional information about the item, how many hyperlinks the user followed within the additional information about the item, whether the user added the item to his or her shopping basket, and whether the user ultimately purchased the item.
      <br/>
      Embodiments of the invention also consider selection actions not relating to query results, such as typing an item's item identifier rather than choosing the item from a query result.
      <br/>
      Additional embodiments of the invention incorporate into the ranking process information about the user submitting the query by maintaining and applying separate rating scores for users in different demographic groups, such as those of the same sex, age, income, or geographic category.
      <br/>
      Certain embodiments also incorporate behavioral information about specific users.
      <br/>
      Further, rating scores may be produced by a rating function that combines different types of information reflecting collective and individual user preferences.
      <br/>
      Some embodiments of the invention utilize specialized strategies for incorporating into the rating scores information about queries submitted in different time frames.
    </p>
    <p num="17">
      FIG. 1 is a high-level block diagram showing the computer system upon which the facility preferably executes.
      <br/>
      As shown in FIG. 1, the computer system 100 comprises a central processing unit (CPU) 110, input/output devices 120, and a computer memory (memory) 130.
      <br/>
      Among the input/output devices is a storage device 121, such as a hard disk drive; a computer-readable media drive 122, which can be used to install software products, including the facility, which are provided on a computer-readable medium, such as a CD-ROM; and a network connection 123 for connection the computer system 100 to other computer systems (not shown).
      <br/>
      The memory 130 preferably contains a query server 131 for generating query results from queries, a query result ranking facility 132 for automatically ranking the items in a query result in accordance with collective user preferences, and item rating tables 133 used by the facility.
      <br/>
      While the facility is preferably implemented on a computer system configured as described above, those skilled in the art will recognize that it may also be implemented on computer systems having different configurations.
    </p>
    <p num="18">
      The facility preferably generates a new rating table periodically, and, when a query result is received, uses the last-generated rating table to rank the items in the query result.
      <br/>
      FIG. 2 is a flow diagram showing the steps preferably performed by the facility in order to generate a new rating table.
      <br/>
      In step 201, the facility initializes a rating table for holding entries each indicating the rating score for a particular combination of a query term and an item identifier.
      <br/>
      The rating table preferably has no entries when it is initialized.
      <br/>
      In step 202, the facility identifies all of the query result item selections made by users during the period of time for which the rating table is being generated.
      <br/>
      The rating table may be generated for the queries occurring during a period of time such as a day, a week, or month.
      <br/>
      This group of queries is termed a "rating set" of queries.
      <br/>
      The facility also identifies the terms of the queries that produced these query results in step 202.
      <br/>
      Performance of step 202 is discussed in greater detail below in conjunction with FIG. 7.
      <br/>
      In steps 204-208, the facility loops through each item selection from a query result that was made by a user during the time period.
      <br/>
      In step 204, the facility identifies the terms used in the query that produced the query result in which the item selection took place.
      <br/>
      In steps 205-207, the facility loops through each term in the query.
      <br/>
      In step 206, the facility increases the rating score in the rating table corresponding to the current term and item.
      <br/>
      Where an entry does not yet exist in the rating table for the term and item, the facility adds a new entry to the rating table for the term and item.
      <br/>
      Increasing the rating score preferably involves adding an increment value, such as 1, to the existing rating score for the term and item.
      <br/>
      In step 207, if additional terms remain to be processed, the facility loops back to step 205 to process the next term in the query, else the facility continues in step 208.
      <br/>
      In step 208, if additional item selections remain to be processed, then the facility loops back to step 203 to process the next item selection, else these steps conclude.
    </p>
    <p num="19">
      FIGS. 3 and 4 are table diagrams showing augmentation of an item rating table in accordance with step 206 (FIG. 2).
      <br/>
      FIG. 3 shows the state of the item rating table before its augmentation.
      <br/>
      It can be seen that the table 300 contains a number of entries, including entries 301-306.
      <br/>
      Each entry contains the rating score for a particular combination of a query term and an item identifier.
      <br/>
      For example, entry 302 identifies the score "22" for the term "dynamics" the item identifier "1883823064".
      <br/>
      It can be seen by examining entries 301-303 that, in query results produced from queries including the term "dynamics", the item having item identifier "1883823064" has been selected by users more frequently than the item having item identifier "9676530409", and much more frequently than the item having item identifier "0801062272".
      <br/>
      In additional embodiments, the facility uses various other data structures to store the rating scores, such as sparse arrays.
    </p>
    <p num="20">
      In augmenting the item rating table 300, the facility identifies the selection of the item having item identifier "1883823064" from a query result produced by a query specifying the query terms "human" and "dynamics".
      <br/>
      FIG. 4 shows the state of the item rating table after the item rating table is augmented by the facility to reflect this selection.
      <br/>
      It can be seen by comparing entry 405 in item rating table 400 to entry 305 in item rating table 300 that the facility has incremented the score for this entry from "45" to "46".
      <br/>
      Similarly, the facility has incremented the rating score for this item identifier the term "dynamics" from "22" to "23".
      <br/>
      The facility augments the rating table in a similar manner for the other selections from query results that it identifies during the time period.
    </p>
    <p num="21">
      Rather than generating a new rating table from scratch using the steps shown in FIG. 2 each time new selection information becomes available, the facility preferably generates and maintains separate rating tables for different constituent time periods, of a relatively short length, such as one day.
      <br/>
      Each time a rating table is generated for a new constituent time period, the facility preferably combines this new rating table with existing rating tables for earlier constituent time periods to form a rating table for a longer composite period of time.
      <br/>
      FIG. 5 is a table diagram showing the generation of rating tables for composite periods of time from rating tables for constituent periods of time.
      <br/>
      It can be seen in FIG. 5 that rating tables 501-506 each correspond to a single day between Feb. 8, 1998 and Feb. 13, 1998. Each time a new constituent period is completed, the facility generates a new rating table reflecting the user selections made during that constituent period.
      <br/>
      For example, at the end of Feb. 12, 1998, the facility generates rating table 505, which reflects all of the user selections occurring during Feb. 12, 1998. After the facility generates a new rating table for a completed constituent period, the facility also generates a new rating table for a composite period ending with that constituent period.
      <br/>
      For example, after generating the rating table 505 for the constituent period Feb. 12, 1998, the facility generates rating table 515 for the composite period Feb. 8, 1998 to Feb. 12, 1998. The facility preferably generates such a rating table for a composite period by combining the entries of the rating tables for the constituent periods making up the composite period, and combining the scores of corresponding entries, for example, by summing them.
      <br/>
      In one preferred embodiment, the scores and rating tables for more recent constituent periods are weighted more heavily than those in rating tables for less recent constituent periods.
      <br/>
      When ranking query results, the rating table for the most recent composite period is preferably used.
      <br/>
      That is, until rating table 516 can be generated, the facility preferably uses rating table 515 to rank query results.
      <br/>
      After rating table 516 is generated, the facility preferably uses rating table 516 to rank query results.
      <br/>
      The lengths of both constituent periods and composite periods are preferably configurable.
    </p>
    <p num="22">
      FIG. 6 is a table diagram showing a rating table for a composite period.
      <br/>
      By comparing the item rating table 600 shown in FIG. 6 to item rating table 400 shown in FIG. 4, it can be seen that the contents of rating table 600 constitute the combination of the contents of rating table 400 with several other rating tables for constituent periods.
      <br/>
      For example, the score for entry 602 is "116", or about five times the score for corresponding entry 402.
      <br/>
      Further, although rating table 400 does not contain an entry for the term "dynamics" and the item identifier "1887650024", entry 607 has been added to table 600 for this combination of term and item identifier, as a corresponding entry occurs in a rating table for one of the other constituent periods within the composite period.
    </p>
    <p num="23">
      The process used by the facility to identify user selections is dependent upon both the kind of selection action used by the facility and the manner in which the data relating to such selection actions is stored.
      <br/>
      One preferred embodiment uses as its selection action requests to display more information about items identified in query results.
      <br/>
      In this embodiment, the facility extracts this information from logs generated by a web server that generates query results for a user using a web client, and allows the user to select an item with the web client in order display additional information about it.
      <br/>
      A web server generally maintains a log detailing of all the HTTP requests that it has received from web clients and responded to.
      <br/>
      Such a log is generally made up of entries, each containing information about a different HTTP request.
      <br/>
      Such logs are generally organized chronologically.
      <br/>
      Log Entry 1 below is a sample log entry showing an HTTP request submitted by a web client on behalf of the user that submits a query.
    </p>
    <p num="24">
      1. Friday, Feb. 13, 1998 16:59:27
      <br/>
      2.
      <br/>
      User Identifier=82707238671
      <br/>
      3.
      <br/>
      HTTP_REFERER=http://www.amazon.com/book_query_page
      <br/>
      4.
      <br/>
      PATH_INFO=/book_query
      <br/>
      5. author="Seagal"
      <br/>
      6. title="Human Dynamics"
    </p>
    <p num="25">Log Entry 1</p>
    <p num="26">
      It can be seen by the occurrence of the keyword "book_query" in the "PATH_INFO"line 4 of Log Entry 1 that this log entry corresponds to a user's submission of a query.
      <br/>
      It further can be seen in term lines 5 and 6 that the query includes the terms "Seagal", "Human", and "Dynamics".
      <br/>
      In line 2, the entry further contains a user identifier corresponding to the identity of the user and, in some embodiments, also to this particular interaction with the web server.
    </p>
    <p num="27">
      In response to receiving the HTTP request documented in Log Entry 1, the query server generates a query result for the query and returns it to the web client submitting the query.
      <br/>
      Later the user selects an item identified in the query result, and the web client submits another HTTP request to display detailed information about the selected item.
      <br/>
      Log Entry 2, which occurs at a point after Log Entry 1 in the log, describes this second HTTP request.
      <br/>
      1. Friday, Feb. 13, 1998 17:02:39
      <br/>
      2.
      <br/>
      User Identifier=82707238671
      <br/>
      3.
      <br/>
      HTTP_REFERER=http://www.amazon.com/book_query
      <br/>
      4.
      <br/>
      PATH_INFO=/ISBN=1883823064
    </p>
    <p num="28">Log Entry 2</p>
    <p num="29">
      By comparing the user identifier in line 2 of Log Entry 2 to the user identifier in line 2 of Log Entry 1, it can be seen that these log entries correspond to the same user and time frame.
      <br/>
      In the "PATH_INFO" line 4 of Log Entry 2, it can be seen that the user has selected an item having item identifier ("ISBN") "1883823064".
      <br/>
      It can further be seen from the occurrence of the keyword "book_query" on the "HTTP_REFERER" line 3 that the selection of this item was from a query result.
    </p>
    <p num="30">
      Where information about user selections is stored in web server logs such as those discussed above, the facility preferably identifies user selections by traversing these logs.
      <br/>
      Such traversal can occur either in a batch processing mode after a log for a specific period of time has been completely generated, or in a real-time processing mode so that log entries are processed as soon as they are generated.
    </p>
    <p num="31">
      FIG. 7 is a flow diagram showing the steps preferably performed by the facility in order to identify user selections within a web server log.
      <br/>
      In step 701, the facility positions a first pointer at the top, or beginning, of the log.
      <br/>
      The facility then repeats steps 702-708 until the first pointer reaches the end of the log.
      <br/>
      In step 703, the facility traverses forward with the first pointer to the next item selection event.
      <br/>
      In terms of the log entry shown above, step 703 involves traversing forward through log entries until one is found that contains in its "HTTP_REFERER" line a keyword denoting a search entry, such as "book_query".
      <br/>
      In step 704, the facility extracts from this item selection event the identity of the item that was selected and session identifier that identifies the user that selected the item.
      <br/>
      In terms of the log entries above, this involves reading the ten-digit number following the string "ISBN=" in the "PATH_INFO" line of the log entry, and reading the user identifier from the "User Identifier" line of the log entry.
      <br/>
      Thus, in Log Entry 2, the facility extracts item identifier "1883823064" and session identifier "82707238761".
      <br/>
      In step 705, the facility synchronizes the position of the second pointer with the position of the first pointer.
      <br/>
      That is, the facility makes the second pointer point to the same log entry as the first pointer.
      <br/>
      In step 706, the facility traverses backwards with the second pointer to a query event having a matching user identifier.
      <br/>
      In terms of the log entries above, the facility traverses backward to the log entry having the keyword "book_query" in its "PATH_INFO" line, and having a matching user identifier on its "User Identifier" line.
      <br/>
      In step 707, the facility extracts from the query event to which the second pointer points the terms of the query.
      <br/>
      In terms of the query log entries above, the facility extracts the quoted words from the query log entry to which the second pointer points, in the lines after the "PATH_INFO" line.
      <br/>
      Thus, in Log Entry 1, the facility extracts the terms "Seagal", "Human", and "Dynamics".
      <br/>
      In step 708, if the first pointer has not yet reached the end of the log, then the facility loops back to step 702 to continue processing the log, else these steps conclude.
    </p>
    <p num="32">
      When other selection actions are used by the facility, extracting information about the selection from the web server log can be somewhat more involved.
      <br/>
      For example, where the facility uses purchase of the item as the selection action, instead of identifying a log entry describing a request by the user for more information about an item, like Log Entry 1, the facility instead identifies a log entry describing a request to purchase items in a "shopping basket." The facility then traverses backwards in the log, using the entries describing requests to add items to and remove items from the shopping basket to determine which items were in the shopping basket at the time of the request to purchase.
      <br/>
      The facility then continues traversing backward in the log to identify the log entry describing the query, like Log Entry 2, and to extract the search terms.
    </p>
    <p num="33">
      Rather than relying solely on a web server log where item purchase is the selection action that is used by the facility, the facility alternatively uses a database separate from the web server log to determine which items are purchased in each purchase transaction.
      <br/>
      This information from the database is then matched up with the log entry containing the query terms for the query from which item is selected for purchase.
      <br/>
      This hybrid approach, using the web server logs and a separate database, may be used for any of the different kinds of selection actions.
      <br/>
      Additionally, where a database separate from the web server log contains all the information necessary to augment the rating table, the facility may use the database exclusively, and avoid traversing the web server log.
    </p>
    <p num="34">
      The facility uses rating tables that it has generated to generate ranking values for items in new query results.
      <br/>
      FIG. 8 is a flow diagram showing the steps preferably performed by the facility to order a query result using a rating table by generating a ranking value for each item in the query result.
      <br/>
      In steps 801-807, the facility loops through each item identified in the query result.
      <br/>
      In step 802, the facility initializes a ranking value for the current item.
      <br/>
      In steps 803-805, the facility loops through each term occurring in the query.
      <br/>
      In step 804, the facility determines the rating score contained by the most recently-generated rating table for the current term and item.
      <br/>
      In step 805, if any terms of the query remain to be processed, then the facility loops up to step 803, else the facility continues in step 806.
      <br/>
      In step 806, the facility combines the scores for the current item to generate a ranking value for the item.
      <br/>
      As an example, with reference to FIG. 6, in processing datum having item identifier "1883823064", the facility combines the score "116" extracted from entry 602 for this item and the term "dynamics", and the score "211" extracted from entry 605 for this item and the term "human".
      <br/>
      Step 806 preferably involves summing these scores.
      <br/>
      These scores may be combined in other ways, however.
      <br/>
      In particular, scores may be adjusted to more directly reflect the number of query terms that are matched by the item, so that items that match more query terms than others are favored in the ranking.
      <br/>
      In step 807, if any items remain to be processed, the facility loops back to step 801 to process the next item, else the facility continues in step 808.
      <br/>
      In step 808, the facility displays the items identified in the query result in accordance with the ranking values generated for the items in step 806.
      <br/>
      Step 808 preferably involves sorting the items in the query result in decreasing order of their ranking values, and/or subsetting the items in the query result to include only those items above a threshold ranking value, or only a predetermined number of items having the highest ranking values.
      <br/>
      After step 808, these steps conclude.
    </p>
    <p num="35">
      FIG. 9 is a flow diagram showing the steps preferably performed by the facility to select a few items in a query result having the highest ranking values using a rating table.
      <br/>
      In steps 901-903, the facility loops through each term in the query.
      <br/>
      In step 902, the facility identifies among the table entries for the current term and those entries having the three highest rating scores.
      <br/>
      For example, with reference to FIG. 6, if the only entries in item rating table 600 for the term "dynamics" are entries 601, 602, 603, and 607, the facility would identify entries 601, 602, and 603, which are the entries for the term "dynamics" having the three highest rating scores.
      <br/>
      In additional preferred embodiments, a small number of table entries other than three is used.
      <br/>
      In step 903, if additional terms remain in the query to be processed, then the facility loops back to step 901 to process the next term in the query, else the facility continues in step 904.
      <br/>
      In steps 904-906, the facility loops through each unique item among the identified entries.
      <br/>
      In step 905, the facility combines all of the scores for the item among the identified entries.
      <br/>
      In step 906, if additional unique items remain among the identified entries to be processed, then the facility loops back to step 904 to process the next unique item, else the facility continues in step 907.
      <br/>
      As an example, if, in item rating table 600, the facility selected entries 601, 602, and 603 for the term "dynamics", and selected entries 604, 605, and 606 for the term "human", then the facility would combine the scores "116" and "211" for the item having item identifier "1883823064", and would use the following single scores for the remaining item identifiers: "77" for the item having item identifier "0814403484", "45" for the item having item identifier "9676530409", "12" for the item having item identifier "6303702473", and "4" for the item having item identifier "0801062272".
      <br/>
      In step 907, the facility selects for prominent display items having the top three combined scores.
      <br/>
      In additional embodiments, the facility selects a small number of items having the top combined scores that is other than three.
      <br/>
      In the example discussed above, the facility would select for prominent display the items having item identifiers "1883823064", "0814403484", and "9676530409".
      <br/>
      Because the facility in step 907 selects items without regard for their presence in the query result, the facility may select items that are not in the query result.
      <br/>
      This aspect of this embodiment is particularly advantageous in situations in which a complete query result is not available when the facility is invoked.
      <br/>
      Such as the case, for instance, where the query server only provides a portion of the items satisfying the query at a time.
      <br/>
      This aspect of the invention is further advantageous in that, by selecting items without regard for their presence in the query result, the facility is able to select and display to the user items relating to the query even where the query result is empty, i.e., when no items completely satisfy the query.
      <br/>
      After step 907, these steps conclude.
    </p>
    <p num="36">
      While the present invention has been shown and described with reference to preferred embodiments, it will be understood by those skilled in the art that various changes or modifications in form and detail may be made without departing from the scope of the invention.
      <br/>
      For example, the facility may be used to rank query results of all types.
      <br/>
      The facility may use various formulae to determine in the case of each item selection, the amount by which to augment rating scores with respect to the selection.
      <br/>
      Further, the facility may employ various formulae to combine rating scores into a ranking value for an item.
      <br/>
      The facility may also use a variety of different kinds of selection actions to augment the rating table, and may augment the rating table for more than one kind of selection action at a time.
      <br/>
      Additionally, the facility, may augment the rating table to reflect selections by users other than human users, such as software agents or other types of artificial users.
    </p>
  </description>
  <claims format="original" lang="en" id="claim_en">
    <claim num="1">
      <claim-text>We claim:</claim-text>
      <claim-text>1.</claim-text>
      <claim-text>A method in a computer system for ranking items in a search result, the method comprising:</claim-text>
      <claim-text>receiving a rating set of queries, each query in the rating set specifying one or more terms; for each query in the rating set,</claim-text>
      <claim-text>- generating a query result identifying one or more items satisfying the query; - allowing a user to select one or more of the items identified in the query result; for each item selected from the query result, for each term specified by the query, increasing a rating value corresponding to the combination of the selected item and the term specified by the query, the rating value indicating a relative frequency with which users have selected the selected item when the selected item has been identified in query results generated from queries containing the term specified by the query; receiving a distinguished query specifying one or more terms; generating a distinguished query result identifying a plurality of items satisfying the distinguished query;</claim-text>
      <claim-text>and for each item identified in the distinguished query result, - for the rating values corresponding to the combination of the item identified in the distinguished query result and one of the terms specified by the distinguished query, combining these rating values to generate a ranking value for the item within the distinguished query result.</claim-text>
    </claim>
    <claim num="2">
      <claim-text>2. The method of claim 1, further comprising imposing on the items identified in the distinguished query result an order in which the ranking values of the items monotonically decreases.</claim-text>
    </claim>
    <claim num="3">
      <claim-text>3. The method of claim 1, further comprising using the ranking values of the items identified in the distinguished query result to create a proper subset of the items.</claim-text>
    </claim>
    <claim num="4">
      <claim-text>4. The method of claim 3 wherein the creating creates a subset of the items identified in the distinguished query result that contains all of the items whose ranking values exceed a predetermined minimum ranking value.</claim-text>
    </claim>
    <claim num="5">
      <claim-text>5. The method of claim 3 wherein the creating creates a subset of the items identified in the distinguished query result that contains all of the items whose ranking values exceed a predetermined minimum ranking value.</claim-text>
    </claim>
    <claim num="6">
      <claim-text>6. The method of claim 1 wherein the increasing increases rating values for selections made to display additional information about items.</claim-text>
    </claim>
    <claim num="7">
      <claim-text>7. The method of claim 1 wherein the increasing increases rating values for selections made to purchase items.</claim-text>
    </claim>
    <claim num="8">
      <claim-text>8. The method of claim 1 wherein the increasing increases rating values for selections made to add items to a tentative list of purchases.</claim-text>
    </claim>
    <claim num="9">
      <claim-text>9. The method of claim 1 wherein the increasing increases rating values for selections of portions of detailed information displayed about items.</claim-text>
    </claim>
    <claim num="10">
      <claim-text>10. The method of claim 1 wherein the increasing increases rating values for units of time for which the user displays detailed information about items.</claim-text>
    </claim>
    <claim num="11">
      <claim-text>11. A method in a computer system for ranking items in a search result, the method comprising: for each of a multiplicity of search terms, compiling data indicating the extent to which users have selected each of a multiplicity of items when returned in search results produced from queries containing the search term; receiving a query and a search result, the received query containing a term among the multiplicity of terms, the received search result identifying a plurality of items among the multiplicity of items that satisfy the received query;</claim-text>
      <claim-text>and using the compiled data to rank at least a portion of the items identified in the received search result in accordance with the extent to which users have selected each of the plurality of items identified in the received search result when returned in search results produced from queries containing the search term contained in the received query.</claim-text>
    </claim>
    <claim num="12">
      <claim-text>12. The method of claim 11 wherein at least a portion of the users are identified with one of a plurality of demographic groups, and wherein the compiling step compiles, for each demographic group of the plurality of demographic groups, data indicating the extent to which users identified with the demographic group have selected each of a multiplicity of items when returned in search results produced from queries containing the search term, and wherein the received query is submitted on behalf of a distinguished user identified with a distinguished demographic group, and wherein the ranking step uses the compiled data to rank the items identified in the received search result in accordance with the extent to which users identified with the distinguished demographic group have selected each of the plurality of items identified in the received search result when returned in search results produced from queries containing the search term contained in the received query.</claim-text>
    </claim>
    <claim num="13">
      <claim-text>13. The method of claim 11, further comprising imposing on the items identified in the distinguished search result an order in which the ranking values of the items monotonically decreases.</claim-text>
    </claim>
    <claim num="14">
      <claim-text>14. The method of claim 11, further comprising using the ranking values of the items identified in the distinguished search result to create a proper subset of the items.</claim-text>
    </claim>
    <claim num="15">
      <claim-text>15. The method of claim 14 wherein the creating creates a subset of the items identified in the distinguished search result that contains all of the items whose ranking values exceed a predetermined minimum ranking value.</claim-text>
    </claim>
    <claim num="16">
      <claim-text>16. The method of claim 11, further comprising improving the ranks of items for selections made to display additional information about items.</claim-text>
    </claim>
    <claim num="17">
      <claim-text>17. The method of claim 11, further comprising improving the ranks of items for selections made to purchase items.</claim-text>
    </claim>
    <claim num="18">
      <claim-text>18. The method of claim 11, further comprising improving the ranks of items for selections made to add items to a tentative list of purchases.</claim-text>
    </claim>
    <claim num="19">
      <claim-text>19. The method of claim 11, further comprising improving the ranks of items for selections of portions of detailed information displayed about items.</claim-text>
    </claim>
    <claim num="20">
      <claim-text>20. The method of claim 11 wherein the increasing increases rating values for units of time for which the user displays detailed information about items.</claim-text>
    </claim>
    <claim num="21">
      <claim-text>21. A computer-readable medium whose contents cause a computer system to rank items in a search result by: for each of a multiplicity of search terms, compiling data indicating the extent to which users have selected each of a multiplicity of items when returned in search results produced from queries containing the search term; receiving a query and a search result, the received query containing a term among the multiplicity of terms, the received search result identifying a plurality of items among the multiplicity of items that satisfy the received query;</claim-text>
      <claim-text>and using the compiled data to rank at least a portion of the items identified in the received search result in accordance with the extent to which users have selected each of the plurality of items identified in the received search result when returned in search results produced from queries containing the search term contained in the received query.</claim-text>
    </claim>
    <claim num="22">
      <claim-text>22. A method in a computer system for ranking items in a search result, the method comprising: receiving a query specifying one or more terms; generating a query result identifying a plurality of items satisfying the query;</claim-text>
      <claim-text>and for a plurality of items identified in the query result, combining ratings of frequencies with which users selected the item in earlier queries specifying one or more terms of the query to producing a ranking value for the item.</claim-text>
    </claim>
    <claim num="23">
      <claim-text>23. The method of claim 22, further comprising adjusting the produced ranking values to reflect the number of terms specified by the query that are matched by the item.</claim-text>
    </claim>
    <claim num="24">
      <claim-text>24. The method of claim 22, further comprising imposing on the items identified in the distinguished query result an order in which the ranking values of the items monotonically decreases.</claim-text>
    </claim>
    <claim num="25">
      <claim-text>25. The method of claim 22, further comprising using the ranking values of the items identified in the distinguished query result to create a proper subset of the items.</claim-text>
    </claim>
    <claim num="26">
      <claim-text>26. The method of claim 25 wherein the creating creates a subset of the items identified in the distinguished query result that contains all of the items whose ranking values exceed a predetermined minimum ranking value.</claim-text>
    </claim>
    <claim num="27">
      <claim-text>27. The method of claim 25 wherein the creating creates a subset of the items identified in the distinguished query result that contains all of the items whose ranking values exceed a predetermined minimum ranking value.</claim-text>
    </claim>
    <claim num="28">
      <claim-text>28. A computer-readable medium whose contents cause a computer system to rank items in a search result by: receiving a query specifying one or more terms; generating a query result identifying a plurality of items satisfying the query;</claim-text>
      <claim-text>and for each item identified in the query result, combining the relative frequencies with which users selected the item in earlier queries specifying each of the terms of the query to producing a ranking value for the item.</claim-text>
    </claim>
    <claim num="29">
      <claim-text>29. The computer-readable medium of claim 28 wherein the contents of the computer-readable medium further cause the computer system to perform the step of adjusting the ranking value produced for each item identified in the query result to reflect the number of terms specified by the query that are matched by the item.</claim-text>
    </claim>
    <claim num="30">
      <claim-text>30. A method in a computer system for identifying significant items satisfying a query, the method comprising: receiving a query specifying a plurality of terms; for each term specified by the query, identifying a predetermined number of items that users have selected most frequently in earlier queries specifying the term; for each unique item identified in the identifying step, producing a ranking value for the item by combining one or more indications of the relative frequencies with which users have selected the item in earlier queries specifying one of the terms specified by the received query;</claim-text>
      <claim-text>and selecting as the significant items a predetermined number of items having the largest ranking values.</claim-text>
    </claim>
    <claim num="31">
      <claim-text>31. The method of claim 30, further comprising displaying information relating to the selected items in a manner distinct from that in which information about unselected items is displayed.</claim-text>
    </claim>
    <claim num="32">
      <claim-text>32. A computer-readable medium whose contents cause a computer system to identify the most significant items satisfying a query by: receiving a query specifying one or more terms; for each term specified by the query, identifying a predetermined number of items having the largest relative frequencies with which users selected the items in earlier queries specifying the term; for each unique item identified in the identifying step, combining the relative frequencies for the item to produce a ranking value for the item;</claim-text>
      <claim-text>and selecting as the most significant items a predetermined number of items having the largest ranking values.</claim-text>
    </claim>
    <claim num="33">
      <claim-text>33. A computer system for ranking items in a search result, comprising: a query memory that stores information about previously submitted queries and items selected from the query results of previously submitted queries; a query receiver that receives queries each specifying one or more terms; a query server that generating a query result for each query received by the query receiver that identifies a plurality of items satisfying the query;</claim-text>
      <claim-text>and an item ranking subsystem that, for each query result generated by the query server, for at least a portion of the items identified in the query result, combines from the contents of the query memory the relative frequencies with which users selected the item in earlier queries specifying each of the terms of the query to producing a ranking value for the item.</claim-text>
    </claim>
    <claim num="34">
      <claim-text>34. A method in a computer system for compiling statistics usable to rank items in a distinguished query result produced for a distinguished query, the method comprising: receiving a rating set of queries, each query in the rating set specifying one or more terms; for each query in the rating set, - generating a query result identifying one or more items satisfying the query; - allowing a user to select one or more of the items identified in the query result;</claim-text>
      <claim-text>and - for items selected from the query result, for terms specified by the query, adjusting a rating score corresponding to the combination of the selected item and the term specified by the query, the rating score indicating the relative frequency with which users have selected the selected item when the selected item has been identified in search results generated from queries containing the search term specified by the query, to produce rating scores usable to rank items in a distinguished query result produced for a distinguished query.</claim-text>
    </claim>
    <claim num="35">
      <claim-text>35. The method of claim 34 wherein the adjusting is performed in real-time with user selections.</claim-text>
    </claim>
    <claim num="36">
      <claim-text>36. The method of claim 34 wherein the adjusting is performed periodically for a batch of earlier-occurring user selections.</claim-text>
    </claim>
    <claim num="37">
      <claim-text>37. The method of claim 36 wherein the queries received are each identified with a different time period, and wherein the adjusting for each query increases a rating score corresponding to the time period with which the query is identified, to produce a different body of rating scores for each time period, and wherein the method further comprises combining a subset of the produced bodies of rating scores to generate a composite body of rating scores usable to order items in a distinguished query result produced for a distinguished query.</claim-text>
    </claim>
    <claim num="38">
      <claim-text>38. The method of claim 37 wherein the combining weights scores from different bodies of rating scores differently depending on the recency of the time periods for which the bodies of rating scores are produced.</claim-text>
    </claim>
    <claim num="39">
      <claim-text>39. The method of claim 34 wherein each query term is specified for one of a plurality of query fields, and wherein the adjusting step for each term increases a rating score corresponding to the query field for which the term is identified, to produce different rating scores for each different field for which a query term is specified.</claim-text>
    </claim>
    <claim num="40">
      <claim-text>40. The method of claim 34, further comprising: for each received query, generating a query log entry, the query log entry containing the terms specified by the query and a query identifier identifying the query; for each user selection of an item identified in a query result generated for a received query, generating a selection log entry, the selection log entry containing a query identifier identifying the query and an item identifier identifying the item selected;</claim-text>
      <claim-text>and identifying each user selection by: - identifying a selection log entry; - extracting from the identified selection log entry the query identifier and the item identifier; - identifying a query log entry containing the extracted query identifier;</claim-text>
      <claim-text>and - extracting from the identified query log entry the terms specified by the query.</claim-text>
    </claim>
    <claim num="41">
      <claim-text>41. The method of claim 36, further comprising: for each user selection of an item identified in a query result generated for a received query, generating a database record identifying both the terms of the query and the item selected;</claim-text>
      <claim-text>and identifying each user selection by: - retrieving a database record, and - extracting from the retrieved database record the terms of the query and the item selected.</claim-text>
    </claim>
    <claim num="42">
      <claim-text>42. The method of claim 34 wherein the adjusting increases rating values for selections made to display additional information about items.</claim-text>
    </claim>
    <claim num="43">
      <claim-text>43. The method of claim 34 wherein the adjusting increases rating values for selections made to purchase items.</claim-text>
    </claim>
    <claim num="44">
      <claim-text>44. The method of claim 34 wherein the adjusting increases rating values for selections made to add items to a tentative list of purchases.</claim-text>
    </claim>
    <claim num="45">
      <claim-text>45. The method of claim 34 wherein the adjusting increases rating values for selections of portions of detailed information displayed about items.</claim-text>
    </claim>
    <claim num="46">
      <claim-text>46. The method of claim 34 wherein the adjusting increases rating values for units of time for which the user displays detailed information about items.</claim-text>
    </claim>
    <claim num="47">
      <claim-text>47. A computer-readable medium whose contents cause a computer system to compile statistics usable to rank items in a distinguished query result produced for a distinguished query by: receiving a rating set of queries, each query in the rating set specifying one or more terms; for each query in the rating set, - generating a query result identifying one or more items satisfying the query; - allowing a user to select one or more of the items identified in the query result;</claim-text>
      <claim-text>and - for each item selected from the query result, for each term specified by the query, increasing a rating score corresponding to the combination of the selected item and the term specified by the query, the rating score indicating the relative frequency with which users have selected the selected item when the selected item has been identified in search results generated from queries containing the search term specified by the query, to produce a body of rating scores usable to rank items in a distinguished query result produced for a distinguished query.</claim-text>
    </claim>
    <claim num="48">
      <claim-text>48. The computer-readable medium of claim 47 wherein the queries received in the receiving step are each identified with a different time period, and wherein the increasing step for each query increases a rating score corresponding to the time period with which the query is identified, to produce a different body of rating scores for each time period, and wherein the computer readable medium further causes the computer system to perform the step of combining a subset of the produced bodies of rating scores to generate a composite body of rating scores usable to order items in a distinguished query result produced for a distinguished query.</claim-text>
    </claim>
    <claim num="49">
      <claim-text>49. A computer memory containing a user behavior data structure usable to rank the relevance of items in a query result, the data structure comprising a plurality of rating scores, each rating score corresponding both to a query term and to an item, and reflecting quantitatively the extent to which users have selected the item from query results generated from queries specifying the query term, such that the data structure may be used to rank items in a distinguished query result produced for a distinguished query by, for each item in the distinguished query result, retrieving from the data structure the rating scores corresponding to the item and any term specified in the distinguished query and combining the retrieved rating scores to generate a ranking value for the item.</claim-text>
    </claim>
    <claim num="50">
      <claim-text>50. A method in a computer system for handling a query, comprising: receiving a query containing one or more terms; processing the query to produce a result set of items that satisfy the query; where the result set contains no items, identifying one or more items that, though they do not satisfy the received query, have been selected by users relatively frequently when presented in response to queries containing at least some of the same terms as the received query;</claim-text>
      <claim-text>and displaying the identified items, such that items are displayed even though the result set contains no items.</claim-text>
    </claim>
    <claim num="51">
      <claim-text>51. The method of claim 50 wherein the identifying step comprises: accessing rating scores indicating, for different combinations of terms and items, the frequency with which users have selected the item when presented in response to queries containing the term; for each term contained in the query, gathering one or more items whose combination with the term have the largest rating scores among the rating scores for any item in combination with the term;</claim-text>
      <claim-text>and identifying at least a portion of the gathered items.</claim-text>
    </claim>
    <claim num="52">
      <claim-text>52. A computer-readable medium whose contents cause a computer system to handle a query by: receiving a query containing one or more terms; processing the query to produce a result set of items that satisfy the query; where the result set contains no items, identifying one or more items that, though they do not satisfy the received query, have been selected by users relatively frequently when presented in response to queries containing at least some of the same terms as the received query.</claim-text>
    </claim>
    <claim num="53">
      <claim-text>53. The computer-readable medium of claim 52 wherein the identifying includes: accessing rating scores indicating, for different combinations of terms and items, the frequency with which users have selected the item when presented in response to queries containing the term; for each term contained in the query, gathering one or more items whose combination with the term have the largest rating scores among the rating scores for any item in combination with the term;</claim-text>
      <claim-text>and identifying at least a portion of the gathered items.</claim-text>
    </claim>
  </claims>
</questel-patent-document>