<?xml version="1.0" encoding="UTF-8"?>
<questel-patent-document lang="en" date-produced="20180805" produced-by="Questel" schema-version="3.23" file="US06178749B2.xml">
  <bibliographic-data lang="en">
    <publication-reference publ-desc="Granted patent as second publication">
      <document-id>
        <country>US</country>
        <doc-number>06178749</doc-number>
        <kind>B2</kind>
        <date>20010130</date>
      </document-id>
      <document-id data-format="questel">
        <doc-number>US6178749</doc-number>
      </document-id>
    </publication-reference>
    <original-publication-kind>B2</original-publication-kind>
    <application-reference family-id="22894948" extended-family-id="13605625">
      <document-id>
        <country>US</country>
        <doc-number>09237737</doc-number>
        <kind>A</kind>
        <date>19990126</date>
      </document-id>
      <document-id data-format="questel">
        <doc-number>1999US-09237737</doc-number>
      </document-id>
      <document-id data-format="questel_Uid">
        <doc-number>13898496</doc-number>
      </document-id>
    </application-reference>
    <language-of-filing>en</language-of-filing>
    <language-of-publication>en</language-of-publication>
    <priority-claims>
      <priority-claim kind="national" sequence="1">
        <country>US</country>
        <doc-number>23773799</doc-number>
        <kind>A</kind>
        <date>19990126</date>
        <priority-active-indicator>Y</priority-active-indicator>
      </priority-claim>
      <priority-claim data-format="questel" sequence="1">
        <doc-number>1999US-09237737</doc-number>
      </priority-claim>
    </priority-claims>
    <dates-of-public-availability>
      <publication-of-grant-date>
        <date>20010130</date>
      </publication-of-grant-date>
    </dates-of-public-availability>
    <classifications-ipcr>
      <classification-ipcr sequence="1">
        <text>F02M  25/07        20060101A N20051008RMEP</text>
        <ipc-version-indicator>
          <date>20060101</date>
        </ipc-version-indicator>
        <classification-level>A</classification-level>
        <section>F</section>
        <class>02</class>
        <subclass>M</subclass>
        <main-group>25</main-group>
        <subgroup>07</subgroup>
        <classification-value>N</classification-value>
        <generating-office>
          <country>EP</country>
        </generating-office>
        <classification-status>R</classification-status>
        <classification-data-source>M</classification-data-source>
        <action-date>
          <date>20051008</date>
        </action-date>
      </classification-ipcr>
      <classification-ipcr sequence="2">
        <text>F02B  37/18        20060101A I20051008RMEP</text>
        <ipc-version-indicator>
          <date>20060101</date>
        </ipc-version-indicator>
        <classification-level>A</classification-level>
        <section>F</section>
        <class>02</class>
        <subclass>B</subclass>
        <main-group>37</main-group>
        <subgroup>18</subgroup>
        <classification-value>I</classification-value>
        <generating-office>
          <country>EP</country>
        </generating-office>
        <classification-status>R</classification-status>
        <classification-data-source>M</classification-data-source>
        <action-date>
          <date>20051008</date>
        </action-date>
      </classification-ipcr>
      <classification-ipcr sequence="3">
        <text>F02B  37/24        20060101A I20051008RMEP</text>
        <ipc-version-indicator>
          <date>20060101</date>
        </ipc-version-indicator>
        <classification-level>A</classification-level>
        <section>F</section>
        <class>02</class>
        <subclass>B</subclass>
        <main-group>37</main-group>
        <subgroup>24</subgroup>
        <classification-value>I</classification-value>
        <generating-office>
          <country>EP</country>
        </generating-office>
        <classification-status>R</classification-status>
        <classification-data-source>M</classification-data-source>
        <action-date>
          <date>20051008</date>
        </action-date>
      </classification-ipcr>
      <classification-ipcr sequence="4">
        <text>F02D  21/08        20060101A I20051008RMEP</text>
        <ipc-version-indicator>
          <date>20060101</date>
        </ipc-version-indicator>
        <classification-level>A</classification-level>
        <section>F</section>
        <class>02</class>
        <subclass>D</subclass>
        <main-group>21</main-group>
        <subgroup>08</subgroup>
        <classification-value>I</classification-value>
        <generating-office>
          <country>EP</country>
        </generating-office>
        <classification-status>R</classification-status>
        <classification-data-source>M</classification-data-source>
        <action-date>
          <date>20051008</date>
        </action-date>
      </classification-ipcr>
      <classification-ipcr sequence="5">
        <text>F02D  41/00        20060101A I20051008RMEP</text>
        <ipc-version-indicator>
          <date>20060101</date>
        </ipc-version-indicator>
        <classification-level>A</classification-level>
        <section>F</section>
        <class>02</class>
        <subclass>D</subclass>
        <main-group>41</main-group>
        <subgroup>00</subgroup>
        <classification-value>I</classification-value>
        <generating-office>
          <country>EP</country>
        </generating-office>
        <classification-status>R</classification-status>
        <classification-data-source>M</classification-data-source>
        <action-date>
          <date>20051008</date>
        </action-date>
      </classification-ipcr>
    </classifications-ipcr>
    <classification-national>
      <country>US</country>
      <main-classification>
        <text>060605200</text>
        <class>060</class>
        <subclass>605200</subclass>
      </main-classification>
    </classification-national>
    <patent-classifications>
      <patent-classification sequence="1">
        <classification-scheme office="EP" scheme="CPC">
          <date>20130101</date>
        </classification-scheme>
        <classification-symbol>F02D-041/0052</classification-symbol>
        <section>F</section>
        <class>02</class>
        <subclass>D</subclass>
        <main-group>41</main-group>
        <subgroup>0052</subgroup>
        <symbol-position>F</symbol-position>
        <classification-value>I</classification-value>
        <classification-status>B</classification-status>
        <classification-data-source>H</classification-data-source>
        <action-date>
          <date>20160204</date>
        </action-date>
      </patent-classification>
      <patent-classification sequence="2">
        <classification-scheme office="EP" scheme="CPC">
          <date>20130101</date>
        </classification-scheme>
        <classification-symbol>F02B-037/18</classification-symbol>
        <section>F</section>
        <class>02</class>
        <subclass>B</subclass>
        <main-group>37</main-group>
        <subgroup>18</subgroup>
        <symbol-position>L</symbol-position>
        <classification-value>I</classification-value>
        <classification-status>B</classification-status>
        <classification-data-source>H</classification-data-source>
        <action-date>
          <date>20160204</date>
        </action-date>
      </patent-classification>
      <patent-classification sequence="3">
        <classification-scheme office="EP" scheme="CPC">
          <date>20130101</date>
        </classification-scheme>
        <classification-symbol>F02B-037/24</classification-symbol>
        <section>F</section>
        <class>02</class>
        <subclass>B</subclass>
        <main-group>37</main-group>
        <subgroup>24</subgroup>
        <symbol-position>L</symbol-position>
        <classification-value>I</classification-value>
        <classification-status>B</classification-status>
        <classification-data-source>H</classification-data-source>
        <action-date>
          <date>20160204</date>
        </action-date>
      </patent-classification>
      <patent-classification sequence="4">
        <classification-scheme office="EP" scheme="CPC">
          <date>20130101</date>
        </classification-scheme>
        <classification-symbol>F02D-041/0007</classification-symbol>
        <section>F</section>
        <class>02</class>
        <subclass>D</subclass>
        <main-group>41</main-group>
        <subgroup>0007</subgroup>
        <symbol-position>L</symbol-position>
        <classification-value>I</classification-value>
        <classification-status>B</classification-status>
        <classification-data-source>H</classification-data-source>
        <action-date>
          <date>20160204</date>
        </action-date>
      </patent-classification>
      <patent-classification sequence="5">
        <classification-scheme office="EP" scheme="CPC">
          <date>20130101</date>
        </classification-scheme>
        <classification-symbol>F02D-041/18</classification-symbol>
        <section>F</section>
        <class>02</class>
        <subclass>D</subclass>
        <main-group>41</main-group>
        <subgroup>18</subgroup>
        <symbol-position>L</symbol-position>
        <classification-value>A</classification-value>
        <classification-status>B</classification-status>
        <classification-data-source>H</classification-data-source>
        <action-date>
          <date>20160204</date>
        </action-date>
      </patent-classification>
      <patent-classification sequence="6">
        <classification-scheme office="EP" scheme="CPC">
          <date>20130101</date>
        </classification-scheme>
        <classification-symbol>F02D-2200/0406</classification-symbol>
        <section>F</section>
        <class>02</class>
        <subclass>D</subclass>
        <main-group>2200</main-group>
        <subgroup>0406</subgroup>
        <symbol-position>L</symbol-position>
        <classification-value>A</classification-value>
        <classification-status>B</classification-status>
        <classification-data-source>H</classification-data-source>
        <action-date>
          <date>20160204</date>
        </action-date>
      </patent-classification>
      <patent-classification sequence="7">
        <classification-scheme office="EP" scheme="CPC">
          <date>20160201</date>
        </classification-scheme>
        <classification-symbol>F02M-026/05</classification-symbol>
        <section>F</section>
        <class>02</class>
        <subclass>M</subclass>
        <main-group>26</main-group>
        <subgroup>05</subgroup>
        <symbol-position>L</symbol-position>
        <classification-value>A</classification-value>
        <classification-status>B</classification-status>
        <classification-data-source>H</classification-data-source>
        <action-date>
          <date>20160201</date>
        </action-date>
      </patent-classification>
      <patent-classification sequence="8">
        <classification-scheme office="EP" scheme="CPC">
          <date>20160201</date>
        </classification-scheme>
        <classification-symbol>F02M-026/10</classification-symbol>
        <section>F</section>
        <class>02</class>
        <subclass>M</subclass>
        <main-group>26</main-group>
        <subgroup>10</subgroup>
        <symbol-position>L</symbol-position>
        <classification-value>A</classification-value>
        <classification-status>B</classification-status>
        <classification-data-source>H</classification-data-source>
        <action-date>
          <date>20160201</date>
        </action-date>
      </patent-classification>
      <patent-classification sequence="9">
        <classification-scheme office="EP" scheme="CPC">
          <date>20130101</date>
        </classification-scheme>
        <classification-symbol>Y02T-010/144</classification-symbol>
        <section>Y</section>
        <class>02</class>
        <subclass>T</subclass>
        <main-group>10</main-group>
        <subgroup>144</subgroup>
        <symbol-position>L</symbol-position>
        <classification-value>A</classification-value>
        <classification-status>B</classification-status>
        <classification-data-source>H</classification-data-source>
        <action-date>
          <date>20160204</date>
        </action-date>
      </patent-classification>
      <patent-classification sequence="10">
        <classification-scheme office="EP" scheme="CPC">
          <date>20130101</date>
        </classification-scheme>
        <classification-symbol>Y02T-010/47</classification-symbol>
        <section>Y</section>
        <class>02</class>
        <subclass>T</subclass>
        <main-group>10</main-group>
        <subgroup>47</subgroup>
        <symbol-position>L</symbol-position>
        <classification-value>A</classification-value>
        <classification-status>B</classification-status>
        <classification-data-source>H</classification-data-source>
        <action-date>
          <date>20160204</date>
        </action-date>
      </patent-classification>
    </patent-classifications>
    <number-of-claims>9</number-of-claims>
    <exemplary-claim>1</exemplary-claim>
    <figures>
      <number-of-drawing-sheets>4</number-of-drawing-sheets>
      <number-of-figures>12</number-of-figures>
      <image-key data-format="questel">US6178749</image-key>
    </figures>
    <invention-title format="original" lang="en" id="title_en">Method of reducing turbo lag in diesel engines having exhaust gas recirculation</invention-title>
    <references-cited>
      <citation srep-phase="examiner">
        <patcit num="1">
          <text>DUNGNER STEFAN</text>
          <document-id>
            <country>US</country>
            <doc-number>5794445</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5794445</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="examiner">
        <patcit num="2">
          <text>GAERTNER UWE</text>
          <document-id>
            <country>US</country>
            <doc-number>6029451</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US6029451</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="examiner">
        <patcit num="3">
          <text>KOLMANOVSKY ILYA V, et al</text>
          <document-id>
            <country>US</country>
            <doc-number>6035639</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US6035639</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="applicant">
        <patcit num="4">
          <text>YOUNESSI RAMIN, et al</text>
          <document-id>
            <country>US</country>
            <doc-number>5123246</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5123246</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="applicant">
        <patcit num="5">
          <text>AKIYAMA EITETSU, et al</text>
          <document-id>
            <country>US</country>
            <doc-number>5187935</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5187935</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="applicant">
        <patcit num="6">
          <text>KLOPP GERHARD O</text>
          <document-id>
            <country>US</country>
            <doc-number>5520161</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5520161</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="applicant">
        <patcit num="7">
          <text>BOSCH GMBH ROBERT</text>
          <document-id>
            <country>DE</country>
            <doc-number>19607071</doc-number>
            <kind>A1</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>DE19607071</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="applicant">
        <patcit num="8">
          <text>NISSAN MOTOR</text>
          <document-id>
            <country>DE</country>
            <doc-number>19802106</doc-number>
            <kind>A1</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>DE19802106</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="applicant">
        <patcit num="9">
          <text>MITSUBISHI MOTORS CORP</text>
          <document-id>
            <country>EP</country>
            <doc-number>0774574</doc-number>
            <kind>A1</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>EP-774574</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="applicant">
        <patcit num="10">
          <text>FIAT RICERCHE</text>
          <document-id>
            <country>EP</country>
            <doc-number>0786589</doc-number>
            <kind>A1</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>EP-786589</doc-number>
          </document-id>
        </patcit>
      </citation>
    </references-cited>
    <parties>
      <applicants>
        <applicant data-format="original" app-type="applicant" sequence="1">
          <addressbook lang="en">
            <orgname>Ford Motor Company</orgname>
            <address>
              <address-1>Dearborn, MI, US</address-1>
              <city>Dearborn</city>
              <state>MI</state>
              <country>US</country>
            </address>
          </addressbook>
          <nationality>
            <country>US</country>
          </nationality>
        </applicant>
        <applicant data-format="questel" app-type="applicant" sequence="2">
          <addressbook lang="en">
            <orgname>FORD MOTOR</orgname>
          </addressbook>
          <nationality>
            <country>US</country>
          </nationality>
        </applicant>
      </applicants>
      <inventors>
        <inventor data-format="original" sequence="1">
          <addressbook lang="en">
            <name>Kolmanovsky, Ilya V.</name>
            <address>
              <address-1>Ypsilanti, MI, US</address-1>
              <city>Ypsilanti</city>
              <state>MI</state>
              <country>US</country>
            </address>
          </addressbook>
          <nationality>
            <country>US</country>
          </nationality>
        </inventor>
        <inventor data-format="original" sequence="2">
          <addressbook lang="en">
            <name>Van Nieuwstadt, Michiel J.</name>
            <address>
              <address-1>Ann Arbor, MI, US</address-1>
              <city>Ann Arbor</city>
              <state>MI</state>
              <country>US</country>
            </address>
          </addressbook>
          <nationality>
            <country>US</country>
          </nationality>
        </inventor>
        <inventor data-format="original" sequence="3">
          <addressbook lang="en">
            <name>Moraal, Paul Eduard</name>
            <address>
              <address-1>Wuerselen, DE</address-1>
              <city>Wuerselen</city>
              <country>DE</country>
            </address>
          </addressbook>
          <nationality>
            <country>DE</country>
          </nationality>
        </inventor>
      </inventors>
      <agents>
        <agent sequence="1" rep-type="agent">
          <addressbook lang="en">
            <name>Drouillard, Jerome R.</name>
          </addressbook>
        </agent>
      </agents>
    </parties>
    <examiners>
      <primary-examiner>
        <name>Koczo, Michael</name>
      </primary-examiner>
    </examiners>
    <lgst-data>
      <lgst-status>GRANTED</lgst-status>
    </lgst-data>
  </bibliographic-data>
  <abstract format="original" lang="en" id="abstr_en">
    <p id="P-EN-00001" num="00001">
      <br/>
      A method of reducing turbo lag in a compression ignition engine having an exhaust gas recirculation system (EGR) and a variable geometry turbocharger (VGT).
      <br/>
      The method includes the steps of determining an intake manifold pressure and intake manifold mass airflow setpoint, MAPd and MAFd, as a function of the current engine speed and requested fueling rate (Wf,REQ).
      <br/>
      The method further includes modifying the setpoints by a transient governor to generate modified setpoints, MAFc and MAPc, as a function of MAFd and MAPd, respectively, and feeding the modified setpoints to the controller to drive the turbocharger and EGR valve to the desired setpoints, thereby maximizing the amount of fresh air admitted to the engine during transient operation.
      <br/>
      Another embodiment of the method for reducing turbo lag coordinates the controller gains between the EGR and VGT.
      <br/>
      The method speeds up the MAF response by using multivariable control of both the EGR and VGT to aggressively regulate airflow to the desired setpoint.
    </p>
  </abstract>
  <description format="original" lang="en" id="desc_en">
    <heading>TECHNICAL FIELD</heading>
    <p num="1">This invention relates to turbocharged compression ignition engines and, more particularly, to methods of reducing turbo lag in turbocharged diesel engines having an exhaust gas recirculation (EGR) system.</p>
    <heading>BACKGROUND OF THE INVENTION</heading>
    <p num="2">High performance, high speed diesel engines are often equipped with turbochargers to increase power density over a wider engine operating range, and EGR systems to reduce the production of NOx emissions.</p>
    <p num="3">
      Turbochargers use a portion of the exhaust gas energy to increase the mass of the air charge delivered to the engine combustion chambers.
      <br/>
      The larger mass of air can be burned with a larger quantity of fuel, thereby resulting in increased power and torque as compared to naturally aspirated engines.
    </p>
    <p num="4">
      A typical turbocharger consists of a compressor and turbine coupled by a common shaft.
      <br/>
      The exhaust gas drives the turbine which drives the compressor which, in turn, compresses ambient air and directs it into the intake manifold.
      <br/>
      Variable geometry turbochargers (VGTs) allow the intake airflow to be optimized over a range of engine speeds.
      <br/>
      This may be accomplished by changing the angle of the inlet guide vanes on the turbine stator.
      <br/>
      An optimal position for the inlet guide vanes is determined from a combination of desired torque response, fuel economy, and emissions requirements.
    </p>
    <p num="5">
      EGR systems are used to reduce NOx emissions by increasing the dilution fraction in the intake manifold.
      <br/>
      EGR is typically accomplished with an EGR valve that connects the intake manifold and the exhaust manifold.
      <br/>
      In the cylinders, the recirculated exhaust gas acts as an inert gas, thus lowering the flame and in-cylinder gas temperature and, hence, decreasing the formation of NOx.
      <br/>
      On the other hand, the recirculated exhaust gas displaces fresh air and reduces the air-to-fuel ratio of the in-cylinder mixture.
    </p>
    <p num="6">
      A particular problem with turbocharged diesel engines is poor acceleration, particularly from idle or low engine speeds.
      <br/>
      This "turbo-lag" is due to the time delay associated with filling the intake manifold with enough fresh air to support the amount of fuel required to satisfy the operator's torque demand.
      <br/>
      To meet this requirement, however, the delivered fuel often must be limited as a function of the available air in order to maintain the air-to-fuel ratio above the threshold at which visible smoke occurs.
      <br/>
      The rate at which the air supply can be increased is limited by the dynamics of the turbocharger and the transport delay between the turbocharger compressor and the intake manifold of the engine.
    </p>
    <p num="7">
      A traditional control strategy for diesel engines having an EGR system and a VGT is two single loop controllers.
      <br/>
      In other words, the two devices are controlled independently with the EGR valve controlling the mass of airflow into the intake manifold (MAF), and the VGT controlling the intake manifold pressure (MAP, or boost).
      <br/>
      The desired values for compressor mass airflow (MAF) and boost pressure (MAP) are stored as lookup table values referenced to engine speed and load or fueling rate.
      <br/>
      For each engine speed and fueling rate, the control algorithm retrieves the desired values for MAP and MAF and controls the EGR and VGT to achieve those values.
    </p>
    <p num="8">
      The two single loop controllers can be represented as follows:
      <br/>
      EGR=KEGR (MAF-MAFd)
      <br/>
      VGT=KVGT (MAP-MAPd)
    </p>
    <p num="9">
      wherein the subscript "d" denote the desired setpoints for the given variable.
      <br/>
      The controller K is usually a proportional-integral-derivative (PID) controller, with gains scheduled on the speed-load condition of the engine.
    </p>
    <p num="10">
      The desired setpoints for MAP and MAF are typically optimized for steady-state engine operation.
      <br/>
      Because these values were optimized for steady-state engine operation, however, they are poorly suited for generating feedback errors to drive the EGR and VGT during transient conditions.
      <br/>
      This straightforward engine control strategy often results in excessively large turbo lag and slow engine torque response.
    </p>
    <p num="11">
      To improve acceleration, some engine control systems use a transient detection feature to turn off the feedback control to the EGR and close the EGR valve when fuel limiting is active.
      <br/>
      This is done to provide as much fresh air as possible to the intake manifold so that the maximum amount of fuel can be injected without violating the air/fuel threshold at which visible smoke occurs.
      <br/>
      The independent feedback control for MAF is then reinitiated after the transient condition is over and the engine is essentially operating at steady-state.
      <br/>
      Such engine control strategies fail to account for the interaction between the VGT and EGR, however, because of their independent control of the two systems.
    </p>
    <p num="12">Thus, there exists a need to control the EGR and VGT and, hence, MAF and MAP, to deliver fuel to the engine at a rate which generates the torque demanded by the driver, yet maintains the air/fuel ratio above the threshold at which visible smoke occurs.</p>
    <heading>DISCLOSURE OF THE INVENTION</heading>
    <p num="13">One object of the present invention is to provide a fast airflow response during transient engine operating conditions to reduce turbo lag.</p>
    <p num="14">Another object is to modify the setpoints for MAP and MAF during transient engine operations to reduce turbo lag.</p>
    <p num="15">A further object of the invention is to coordinate the control of the VGT and EGR to speed up the system response and, thereby, reduce turbo lag.</p>
    <p num="16">The invention is advantageous in that it improves engine system performance while preventing the occurrence of visible smoke or, viewed another way, reduces the smoke content of the engine exhaust gas while maintaining engine performance.</p>
    <p num="17">
      According to the present invention, the foregoing and other objects and advantages are obtained by a method of reducing turbo lag in a compression ignition engine having an EGR system and a VGT.
      <br/>
      The method comprises the steps of determining an intake manifold pressure and intake manifold mass airflow setpoint, MAPd and MAFd, as a function of the current engine speed and requested fueling rate (Wf,REQ) and generating modified setpoints, MAFc and MAPc, as a function of MAFd and MAPd, respectively.
      <br/>
      These modified setpoints are then compared to the actual MAF and MAP values to generate control signals for the turbocharger and EGR valve.
      <br/>
      The controller then dynamically adjusts the position of the EGR valve and turbocharger vanes to drive the turbocharger and EGR valve to the modified setpoints, thereby maximizing the amount of fresh air admitted to the engine during transient operation.
    </p>
    <p num="18">
      Thus, the setpoints for MAP and MAF are dynamically modified by a shaping filter before being fed to the controller.
      <br/>
      Accordingly, during transient conditions such as tip-in, the modified setpoints cause the EGR valve to close, and the VGT to initially open, then close, as the EGR valve moves toward the desired position.
      <br/>
      This coordinates the EGR and VGT actions during transient operation, insuring that the maximum amount of fresh air is admitted to the engine during transient conditions.
      <br/>
      Furthermore, this control strategy is implemented without modifying the feedback control law.
    </p>
    <p num="19">
      According to another aspect of the present invention, control of the EGR and VGT is coordinated to aggressively regulate airflow to the desired setpoint value, particularly during low engine speed conditions.
      <br/>
      This control strategy further includes the steps of generating the turbocharger control signal as a function of MAP, MAPd, MAF and MAFd, and generating the EGR valve control signal as a function of MAP, MAPd, MAF and MAFd.
      <br/>
      The method thus increases the MAF response by using multivariable control of both the EGR and VGT to aggressively regulate airflow to the desired setpoint, particularly during low airflow engine operation.
    </p>
    <p num="20">Other objects and advantages of the invention will become apparent upon reading the following detailed description and appended claims, and upon reference to the accompanying drawings.</p>
    <heading>BRIEF DESCRIPTION OF THE DRAWINGS</heading>
    <p num="21">
      For a more complete understanding of the invention, reference should now be had to the embodiments illustrated in greater detail in the accompanying drawings and described below by way of examples of the invention. In the drawings:
      <br/>
      FIG. 1 is a schematic view of a compression ignition engine system having an EGR system and a VGT in accordance with one embodiment of the present invention;
      <br/>
      FIG. 2 is a control diagram for a compression ignition engine according to one embodiment of the present invention;
      <br/>
      FIG. 3 is a flow diagram of one method of reducing turbo lag according to the present invention;
      <br/>
      FIGS. 4a-c illustrate estimated EGR and VGT positions according to one control method of the present invention;
      <br/>
      FIGS. 5a-b illustrate the MAF and MAP responses according to one control method of the present invention;
      <br/>
      FIGS. 6a-b illustrate the air/fuel ratio and visible smoke responses according to one control method of the present invention; and
      <br/>
      FIGS. 7a-b illustrate the MAF response according to the coordinated control method of one embodiment of the present invention.
    </p>
    <heading>DESCRIPTION OF THE PREFERRED EMBODIMENT</heading>
    <p num="22">
      Turning first to FIG. 1, there is shown a simplified schematic diagram of a compression ignition engine system 10 equipped with an exhaust gas recirculation (EGR) system 12 and a variable geometry turbocharger (VGT) 14. A representative engine block 16 is shown having four combustion chambers 18.
      <br/>
      Each of the combustion chambers 18 includes a direct-injection fuel injector 20.
      <br/>
      The duty cycle of the fuel injectors 20 is determined by the engine control unit (ECU) 24 and transmitted along signal line 22.
      <br/>
      Air enters the combustion chambers 18 through the intake manifold 26, and combustion gases are exhausted through the exhaust manifold 28 in the direction of arrow 30.
    </p>
    <p num="23">
      To reduce the level of NOx emissions, the engine is equipped with an EGR system 12.
      <br/>
      The EGR system 12 comprises a conduit 32 connecting the exhaust manifold 28 to the intake manifold 26.
      <br/>
      This allows a portion of the exhaust gases to be circulated from the exhaust manifold 28 to the intake manifold 26 in the direction of arrow 31.
      <br/>
      An EGR valve 34 regulates the amount of exhaust gas recirculated from the exhaust manifold 28.
      <br/>
      In the combustion chambers, the recirculated exhaust gas acts as an inert gas, thus lowering the flame and in- cylinder gas temperature and decreasing the formation of NOx.
      <br/>
      On the other hand, the recirculated exhaust gas displaces fresh air and reduces the air-to-fuel ratio of the in-cylinder mixture.
    </p>
    <p num="24">
      The turbocharger 14 uses exhaust gas energy to increase the mass of the aircharge delivered to the engine combustion chambers 18.
      <br/>
      The exhaust gas flowing in the direction of arrow 30 drives the turbocharger 14.
      <br/>
      This larger mass of air can be burned with a larger quantity of fuel, resulting in more torque and power as compared to naturally aspirated, non-turbocharged engines.
    </p>
    <p num="25">
      The turbocharger 14 consists of a compressor 36 and a turbine 38 coupled by a common shaft 40.
      <br/>
      The exhaust gas 30 drives the turbine 38 which drives the compressor 36 which, in turn, compresses ambient air 42 and directs it (arrow 43) into the intake manifold 26.
      <br/>
      The VGT 14 can be modified as a function of engine speed during engine operation by varying the turbine flow area and the angle at which the exhaust gas 30 is directed at the turbine blades.
      <br/>
      This is accomplished by changing the angle of the inlet guide vanes 44 on the turbine 38.
      <br/>
      The optimal position for the engine guide vanes 44 is determined from the desired engine operating characteristics at various engine speeds.
    </p>
    <p num="26">
      As can be appreciated from FIG. 1, both the EGR system 12 and the VGT 14 regulate gas flow from the exhaust manifold 28.
      <br/>
      The effect of the EGR and VGT is, therefore, jointly dependent upon the conditions in the exhaust manifold 28.
    </p>
    <p num="27">
      All of the engine systems, including the EGR system 12, VGT 14 and fuel injectors 20 are controlled by the ECU.
      <br/>
      For example, signal 46 from the ECU 24 regulates the EGR valve position, and signal 48 regulates the position of the VGT guide vanes 44.
    </p>
    <p num="28">
      In the ECU 24, the command signals 46, 48 to the EGR system 12 and VGT 14 actuators are calculated from measured variables and engine operating parameters by means of a control algorithm.
      <br/>
      Sensors and calibratable lookup tables provide the ECU 24 with engine operating information.
      <br/>
      For example, manifold absolute pressure (MAP) sensor 50 provides a signal 52 to the ECU 24 indicative of the pressure in the intake manifold 26.
      <br/>
      Likewise, exhaust manifold pressure (EXMP) sensor 54 provides an EXMP signal 56 to the ECU 24 indicative of the pressure in the exhaust manifold 28.
      <br/>
      Further, an air charge temperature sensor 58 provides a signal 60 to the ECU 24 indicative of the temperature of the intake air charge 42.
      <br/>
      A mass airflow (MAF) sensor 64 also provides a signal 66 indicative of the compressor intake airflow to the ECU 24.
      <br/>
      Additional sensory inputs can also be received by the ECU along signal line 62 such as engine coolant temperature, engine speed, and throttle position.
      <br/>
      Additional operator inputs 68 are received along signal 70 such as acceleration pedal position.
      <br/>
      Based on the sensory inputs and engine mapping data stored in memory, the ECU controls the EGR to regulate the intake airflow (MAF), controls the VGT to regulate the intake manifold pressure (MAP) and controls injectors 20 to regulate fuel delivery.
    </p>
    <p num="29">
      FIG. 2 is a control diagram for a compression ignition engine according to one embodiment of the present invention.
      <br/>
      In FIG. 2, the engine 200 is operating at a certain speed (in RPM) 202 and fueling rate 204 and outputs an exhaust gas having an oxygen content relating to the air/fuel ratio (AFR) 206. The composition of the AFR is governed by the position of the EGR value and VGT 210, and the fueling rate 204.
      <br/>
      The fueling rate 204, EGR flow 208 and VGT position 210 are, in turn controlled as a function of MAP 212 and MAF 214 feedback measurements.
      <br/>
      A fuel limiter 216 acts to limit the amount of fuel delivered to the engine 200 as a function of MAP 212, MAF 214, and the requested fueling rate, Wf,REQ, 218 to avoid the production of visible smoke.
      <br/>
      The desired values for compressor mass airflow, MAFd, and boost pressure, MAPd, are stored as lookup tables defining the setpoint strategy 220 as a function of the requested fueling rate 218 and the current engine speed 202.
      <br/>
      To achieve the desired values, MAFd and MAPd, as quickly as possible, a transient governor 222 modifies the setpoints MAPd, MAFd to MAPc and MAFc before passing them on to the feedback controller 224.
      <br/>
      The feedback controller 224 then drives the EGR value to achieve the desired MAF and VGT to achieve the desired MAP.
      <br/>
      Alternatively, or additionally, the feedback controller 224 coordinates the EGR and VGT control to achieve faster airflow response.
      <br/>
      The implementation of the control strategy of FIG. 2 will now be described with reference to FIG. 3.
    </p>
    <p num="30">
      FIG. 3 is a flow diagram of one method of reducing turbo lag according to the present invention.
      <br/>
      This control logic resides in the ECU memory and is executed as part of the foreground logic routine which regulates and monitors engine operating conditions.
    </p>
    <p num="31">
      In step 302, the engine speed and requested fueling rate (Wf,REQ) are determined from signals 62 and 70, respectively, of FIG. 1.
      <br/>
      From these inputs, a lookup table provides setpoints for MAP and MAF (Step 304).
      <br/>
      If it is assumed that Y=(MAP,MAF), then the desired setpoints can be represented as Yd =(MAPd,MAFd).
      <br/>
      These setpoints are functions of engine speed and the desired fueling rate, therefore, Yd =f(N,Wf,REQ) The transient governor modifies these setpoints at step 306 before feeding them to the feedback controller to increase the airflow response.
      <br/>
      Thus, the filtered setpoints are represented as Yc =Tf(N(t),Wf,REQ (t)) wherein the filter, T, represents the transient governor.
    </p>
    <p num="32">
      In step 308, values for MAP and MAF are transmitted to the ECU from sensors 50 and 64 of FIG. 1.
      <br/>
      Alternatively, these values can be estimated from other engine operating inputs.
      <br/>
      For example, MAF can be estimated as a function of MAP and exhaust manifold pressure (EXMP) sensor measurements.
    </p>
    <p num="33">
      Referring again to FIG. 3, the measured values of MAP and MAF are compared to the modified desired setpoints, MAFc, MAPc, in step 310 to generate error values, eVGT and eEGR.
      <br/>
      In step 312, the amount of EGR and VGT movement necessary to achieve MAFc and MAPc, is determined from the error values.
    </p>
    <p num="34">
      The controller effort is then expressed as follows:
      <br/>
      uVGT (MAP-MAPc)
      <br/>
      uEGR (MAF-MAFc)
    </p>
    <p num="35">
      Preferably, the EGR and VGT movement necessary to achieve MAFc and MAPc is coordinated as in step 314 to further increase the airflow response.
      <br/>
      In step 314, the coordinated control is accomplished by adding the coordinated term to uVGT and/or uEGR as follows:
      <br/>
      uVGT (MAP-MAPc)+vVGT (MAF-MAFc)
      <br/>
      uEGR (MAP-MAPc)+vEGR (MAF-MAFc)
    </p>
    <p num="36">In step 316, the coordinated EGR and VGT positions (u+v) are then applied via the ECU to the EGR valve and VGT guide vanes.</p>
    <p num="37">The transient governor and feedback controller (222 and 224 of FIG. 2, respectively) will now be discussed in greater detail.</p>
    <p num="38">
      Setpoints for MAP and MAF are a function of fueling rate and engine speed.
      <br/>
      In particular, higher fueling rates correspond to higher setpoints for MAP and MAF.
      <br/>
      Since MAP increases by closing the VGT, and MAF increases by closing the EGR valve, conventional single loop controllers begin closing the VGT and EGR valve upon increased driver demanded power.
      <br/>
      Closing the VGT, however, increases the pressure in the exhaust manifold and, under certain conditions, will result in increased EGR flow although the EGR valve is simultaneously closing.
      <br/>
      This increased EGR flow displaces fresh air from the intake manifold, thereby reducing the fresh air charge, resulting in the opposite of the desired effect.
      <br/>
      Specifically, the desired action is for VGT to initially open and then close.
    </p>
    <p num="39">
      To remedy this, the transient governor modifies the setpoints for MAP and MAF so that a more aggressive control response is obtained.
      <br/>
      Specifically, the setpoint for MAF is increased and the setpoint for MAP is decreased as compared to the values obtained from the steady-state setpoint lookup table.
      <br/>
      The filtered setpoints that are fed to the feedback controller have the following form:
      <br/>
      Yc =Tf(N(t), Wf,REQ (t))  (1)
    </p>
    <p num="40">
      wherein the filter, T, represents the transient governor.
      <br/>
      The filter T is a "wash-out" system in that it only modifies the setpoints during transient conditions, not during steady-state operation.
      <br/>
      One embodiment of the transient governor is the following transfer function matrix with the steady-state gain equal to identity:  (Equation image '1' not included in text)
    </p>
    <p num="41">
      where  TAU 1,  TAU 2,  TAU 3, and  TAU 4 are parameters selected to achieve faster MAF response and slower MAP response relative to the engine operation without the transient governor.
      <br/>
      In one embodiment, the transient governor is applied only for requested fuel increases, and disabled for requested fuel decreases.
      <br/>
      Additionally, if the requested fuel increase is below a predetermined small threshold, the transient governor can be disabled.
    </p>
    <p num="42">
      The transient governor algorithm as given by the transfer function matrix (2) is discretized as follows:
      <br/>
      PHI 1 (t+1)= PHI 1 (t)+St(- LAMBDA 1 PHI 1 (t)+ LAMBDA 1 (1- MU 1)MAPd)
      <br/>
      MAPc = PHI 1 (t)+- MU 1 MAPd
      <br/>
      PHI 2 (t+1)= PHI 2 (t)+St(- LAMBDA 2 PHI 2 (t)+ LAMBDA 2 (1- MU 2)MAFd)
      <br/>
      MAFc = PHI 2 (t)+- MU 2 MAFd
    </p>
    <p num="43">
      where
      <br/>
      MU 1 =T1 /T2,  LAMBDA 1 =1/T2
      <br/>
      MU 2 =T3 /T4,  LAMBDA 2 =1/T4
    </p>
    <p num="44">
      The parameters  LAMBDA 1,  LAMBDA 2 control the convergence speed of MAPc to MAPd and of MAFc to MAFd, respectively.
      <br/>
      Their values should be positive:  LAMBDA 1 &gt;0,  LAMBDA 2 &gt;0.
      <br/>
      The value of  MU 1 should be less than zero and the value of  MU 2 should be greater than zero to generate an undershoot in the set-point for MAP and an overshoot in the set-point for MAF.
      <br/>
      The transient governor algorithm is initialized at  PHI 1 (t')=MAFd and  PHI 2 (t')=MAFd at the time-instant t' when an aggressive tip-in is detected (i.e. when Wf &gt;Wf,REQ-E where E is a deadband).
    </p>
    <p num="45">Simulated results for a 2.0 liter direct inject diesel engine model are shown in FIGS. 4a-4c, FIGS. 5a-5b, and FIGS. 6a-6b. In the figures the following values were used:  TAU 1 =-1,  TAU 2 =1,  TAU 3 =1.5, and  TAU 4 =0.25. The transfer function for the proportional integral controller feedback controller from MAP and MAF errors to EGR and VGT position commands used in this simulation was of the form:  (Equation image '2' not included in text)</p>
    <p num="46">
      FIG. 4a shows the demanded fueling rate (line 400) and limited fueling rate (line 402), and resulting EGR and VGT positions.
      <br/>
      FIG. 4b shows the EGR position for the tip-in of FIG. 4a with the transient governor (line 404) and without the transient governor (line 406), and FIG. 4c shows the corresponding VGT position with the transient governor (line 408) and without the transient governor (line 410).
      <br/>
      The resulting MAP and MAF responses are shown in FIGS. 5a and 5b. In FIG. 5a, lines 500 and 504 represent the MAP and MAF responses with the transient governor, respectively, and lines 502 and 506 represent the MAP and MAF responses without the transient governor.
      <br/>
      Similarly, FIGS. 6a and 6b represent the resulting smoke level and AFR with the transient governor (lines 600, 604) and without (lines 602, 606).
      <br/>
      These figures demonstrate that the reduction in AFR and the peak of the smoke level can be significantly reduced when the transient governor is used to modify the setpoints for MAP and MAF.
    </p>
    <p num="47">
      In addition to the transient governor, or alternatively, control of the VGT can be coordinated with control of the EGR valve to prevent an increase in EGR flow upon increased driver demanded power.
      <br/>
      Specifically, the MAF error term can be fed back to the VGT by the feedback controller to allow the VGT to take appropriate action to increase MAF and decrease the EGR flow.
    </p>
    <p num="48">
      Accordingly, the control scheme provides a faster MAF response at the expense of a slower MAP response during transient engine operating conditions.
      <br/>
      The benefits of this scheme are most dramatic during low power engine operation.
      <br/>
      During tip-in at low power, a rapid increase in airflow is needed for complete combustion of the requested fuel.
      <br/>
      Hence, for transient conditions during low power operation, the control scheme can be expressed as follows:
      <br/>
      EGR=KEGR,MAF (MAF-MAFd)
      <br/>
      VGT=KVGT,MAF (MAF-MAFd)+KVGT,MAP (MAP-MAPd)
    </p>
    <p num="49">In the case of a coordinated proportional-integral controller, the control scheme can be expressed as follows:  (Equation image '3' not included in text)</p>
    <p num="50">
      where Kpva and Kiva are 0 for higher fueling rates (Wf).
      <br/>
      In other words, for higher power levels, the controller reduces to a single loop controller.
      <br/>
      In the control scheme, the first subscript represents proportional (p) or integral (i) control, the second subscript represents the VGT (v) or EGR (e), and the last subscript represents pressure (p) or airflow (a).
    </p>
    <p num="51">
      FIGS. 7a and 7b illustrate the MAF response for a single loop controller and coordinated controller, respectively.
      <br/>
      In FIGS. 7a and 7b, line 700 represents the desired MAP setpoint based on the lookup table values for the given engine speed and requested fueling rate.
      <br/>
      As can be seen, the time constant of the MAF response changes from approximately 0.5 seconds for single loop control (line 702) to approximately 0.25 seconds for coordinated control (line 704) for a fueling level step of 2 kg/h to 3 kg/h at 2000 RPM.
    </p>
    <p num="52">From the foregoing, it will be seen that there has been brought to the art a new and improved method of reducing turbo lag by modifying the transient setpoints for MAP and MAF and/or coordinating the control of the EGR and VGT to achieve faster MAF response.</p>
    <p num="53">
      While the invention has been described in connection with one or more embodiments, it will be understood that the invention is not limited to those embodiments.
      <br/>
      On the contrary, the invention covers all alternatives, modifications, and equivalents, as may be included within the spirit and scope of the appended claims.
    </p>
  </description>
  <claims format="original" lang="en" id="claim_en">
    <claim num="1">
      <claim-text>What is claimed is:</claim-text>
      <claim-text>1.</claim-text>
      <claim-text>In a compression ignition engine including a variable geometry turbocharger having a compressor and turbine, said turbine responsive to a turbocharger signal for regulating the intake manifold pressure (MAP), and an exhaust gas recirculation (EGR) passage having an EGR valve connecting an intake manifold and exhaust manifold of the engine, said EGR valve responsive to an EGR valve control signal for regulating the flow of exhaust gas and resulting mass airflow into said intake manifold (MAF), a method fo reducing turbo lag comprising the steps of:</claim-text>
      <claim-text>determining an intake manifold pressure and intake manifold mass airflow setpoint, MAPd and MAFd, as a function of the current engine speed and requested fueling rate (Wf,REQ) said setpoints indicative of the desired MAF and MAP for the requested fueling rate; generating modified setpoints, MAFc and MAPc, as a function of MAFd and MAPd, respectively; determining a MAP value indicative of the current intake manifold pressure; determining a MAF value indicative of the current intake manifold mass airflow: generating said turbocharger signal as a function of MAPc and said MAP value; generating said EGR valve control signal as a function of MAFc and said MAF value;</claim-text>
      <claim-text>and incrementally adjusting the position of said EGR valve and said turbocharger turbine as a function of said turbocharger signal and said EGR valve control signal until said MAF value corresponds to said MAFd and said MAP value corresponds to said MAPd.</claim-text>
    </claim>
    <claim num="2">
      <claim-text>2. The method as set forth in claim 1 wherein the step of generating said turbocharger signal includes generating said turbocharger signal as a function of MAPc, MAP, MAFc, and MAF.</claim-text>
    </claim>
    <claim num="3">
      <claim-text>3. The method as set forth in claim 1 wherein the step of generating said EGR valve control signal includes generating said EGR valve control signal as a function of MAPc, MAP, MAFc, and MAF.</claim-text>
    </claim>
    <claim num="4">
      <claim-text>4. The method as set forth in claim 1 wherein the steps of generating said turbocharger signal and generating said EGR valve control signal includes the steps of generating said turbocharger signal and said EGR valve control signal as a function of MAPc, MAP, MAFc, and MAF.</claim-text>
    </claim>
    <claim num="5">
      <claim-text>5. The method as set forth in claim 1 wherein said modified setpoints MAFc and MAPc are generated as a function of MAFd and MAPd such that MAFc is greater than or equal to MAFd and MAPc is less than or equal to MAPd.</claim-text>
    </claim>
    <claim num="6">
      <claim-text>6. In a compression ignition engine including a variable geometry turbocharger having a compressor and turbine, said turbine responsive to a turbocharger signal for regulating the intake manifold pressure (MAP), and an exhaust gas recirculation (EGR) passage having an EGR valve connecting an intake manifold and exhaust manifold of the engine, said EGR valve responsive to an EGR valve control signal for regulating the flow of exhaust gas and resulting mass airflow into said intake manifold (MAF), a method of reducing turbo lag comprising the steps of: determining a first value indicative of the engine speed; determining the current engine fueling rate (Wf); determining the requested fueling rate (Wf,REQ); determining a MAP value indicative of the current intake manifold pressure; determining a MAF value indicative of the current intake manifold mass airflow;</claim-text>
      <claim-text>and if Wf,REQ &gt;Wf, then determining an intake manifold pressure and intake manifold mass airflow setpoint, MAPd and MAFd, as a function of said first value and Wf,REQ ;</claim-text>
      <claim-text>generating modified setpoints, MAFc and MAPc, as a function of MAFd and MAPd, respectively;</claim-text>
      <claim-text>generating said turbocharger signal as a function of MAPc, MAP, MAFc, and MAF;</claim-text>
      <claim-text>generating said EGR valve control signal as a function of MAFc and said MAF value; else, generating said turbocharger signal as a function of MAPd and said MAP value;</claim-text>
      <claim-text>generating said EGR valve control signal as a function of MAFd and said MAF value;</claim-text>
      <claim-text>and incrementally adjusting the position of said EGR valve and said turbocharger turbine as a function of said turbocharger signal and said EGR valve control signal until said MAF value corresponds to said MAFd and said MAP value corresponds to said MAPd.</claim-text>
    </claim>
    <claim num="7">
      <claim-text>7. The method as set forth in claim 6 wherein the step of generating said EGR valve control signal includes generating said EGR valve control signal as a function of MAPc, MAP, MAFc, and MAF.</claim-text>
    </claim>
    <claim num="8">
      <claim-text>8. In a compression ignition engine including a variable geometry turbocharger having a compressor and turbine, said turbine responsive to a turbocharger signal for regulating the intake manifold pressure (MAP), and an exhaust gas recirculation (EGR) passage having an EGR valve connecting an intake manifold and exhaust manifold of the engine, said EGR valve responsive to an EGR valve control signal for regulating the flow of exhaust gas and resulting mass airflow into said intake manifold (MAF), a method of reducing turbo lag comprising the steps of: determining a first value indicative of the engine speed; determining the current engine fueling rate (Wf); determining the requested fueling rate (Wf,REQ); determining a MAP value indicative of the current intake manifold pressure; determining a MAF value indicative of the current intake manifold mass airflow; determining an intake manifold pressure and intake manifold mass airflow setpoint, MAPd and MAFd, as a function of said first value and Wf,REQ ; generating said turbocharger signal as a function of MAPc S, MAP, MAFc, and MAF; generating said EGR valve control signal as a function of MAFc and MAF;</claim-text>
      <claim-text>and incrementally adjusting the position of said EGR valve and said turbocharger turbine as a function of said turbocharger signal and said EGR valve control signal until said MAF value corresponds to said MAFd and said MAP value corresponds to said MAPd.</claim-text>
    </claim>
    <claim num="9">
      <claim-text>9. The method as set forth in claim 8 wherein the step of generating said EGR valve control signal includes generating said EGR valve control signal as a function of MAPc, MAP, MAFc, and MAF.</claim-text>
    </claim>
  </claims>
</questel-patent-document>