<?xml version="1.0" encoding="UTF-8"?>
<questel-patent-document lang="en" date-produced="20180805" produced-by="Questel" schema-version="3.23" file="US06185468B2.xml">
  <bibliographic-data lang="en">
    <publication-reference publ-desc="Granted patent as second publication">
      <document-id>
        <country>US</country>
        <doc-number>06185468</doc-number>
        <kind>B2</kind>
        <date>20010206</date>
      </document-id>
      <document-id data-format="questel">
        <doc-number>US6185468</doc-number>
      </document-id>
    </publication-reference>
    <original-publication-kind>B2</original-publication-kind>
    <application-reference family-id="21832564" extended-family-id="3882272">
      <document-id>
        <country>US</country>
        <doc-number>09026569</doc-number>
        <kind>A</kind>
        <date>19980220</date>
      </document-id>
      <document-id data-format="questel">
        <doc-number>1998US-09026569</doc-number>
      </document-id>
      <document-id data-format="questel_Uid">
        <doc-number>4014642</doc-number>
      </document-id>
    </application-reference>
    <language-of-filing>en</language-of-filing>
    <language-of-publication>en</language-of-publication>
    <priority-claims>
      <priority-claim kind="national" sequence="1">
        <country>US</country>
        <doc-number>2656998</doc-number>
        <kind>A</kind>
        <date>19980220</date>
        <priority-active-indicator>Y</priority-active-indicator>
      </priority-claim>
      <priority-claim data-format="questel" sequence="1">
        <doc-number>1998US-09026569</doc-number>
      </priority-claim>
    </priority-claims>
    <dates-of-public-availability>
      <publication-of-grant-date>
        <date>20010206</date>
      </publication-of-grant-date>
    </dates-of-public-availability>
    <classifications-ipcr>
      <classification-ipcr sequence="1">
        <text>G05B  13/02        20060101ALI20051220RMJP</text>
        <ipc-version-indicator>
          <date>20060101</date>
        </ipc-version-indicator>
        <classification-level>A</classification-level>
        <section>G</section>
        <class>05</class>
        <subclass>B</subclass>
        <main-group>13</main-group>
        <subgroup>02</subgroup>
        <symbol-position>L</symbol-position>
        <classification-value>I</classification-value>
        <generating-office>
          <country>JP</country>
        </generating-office>
        <classification-status>R</classification-status>
        <classification-data-source>M</classification-data-source>
        <action-date>
          <date>20051220</date>
        </action-date>
      </classification-ipcr>
      <classification-ipcr sequence="2">
        <text>G05B  11/32        20060101AFI20051220RMJP</text>
        <ipc-version-indicator>
          <date>20060101</date>
        </ipc-version-indicator>
        <classification-level>A</classification-level>
        <section>G</section>
        <class>05</class>
        <subclass>B</subclass>
        <main-group>11</main-group>
        <subgroup>32</subgroup>
        <symbol-position>F</symbol-position>
        <classification-value>I</classification-value>
        <generating-office>
          <country>JP</country>
        </generating-office>
        <classification-status>R</classification-status>
        <classification-data-source>M</classification-data-source>
        <action-date>
          <date>20051220</date>
        </action-date>
      </classification-ipcr>
      <classification-ipcr sequence="3">
        <text>D21F   5/06        20060101ALI20051220RMJP</text>
        <ipc-version-indicator>
          <date>20060101</date>
        </ipc-version-indicator>
        <classification-level>A</classification-level>
        <section>D</section>
        <class>21</class>
        <subclass>F</subclass>
        <main-group>5</main-group>
        <subgroup>06</subgroup>
        <symbol-position>L</symbol-position>
        <classification-value>I</classification-value>
        <generating-office>
          <country>JP</country>
        </generating-office>
        <classification-status>R</classification-status>
        <classification-data-source>M</classification-data-source>
        <action-date>
          <date>20051220</date>
        </action-date>
      </classification-ipcr>
      <classification-ipcr sequence="4">
        <text>D21G   9/00        20060101A I20051008RMEP</text>
        <ipc-version-indicator>
          <date>20060101</date>
        </ipc-version-indicator>
        <classification-level>A</classification-level>
        <section>D</section>
        <class>21</class>
        <subclass>G</subclass>
        <main-group>9</main-group>
        <subgroup>00</subgroup>
        <classification-value>I</classification-value>
        <generating-office>
          <country>EP</country>
        </generating-office>
        <classification-status>R</classification-status>
        <classification-data-source>M</classification-data-source>
        <action-date>
          <date>20051008</date>
        </action-date>
      </classification-ipcr>
      <classification-ipcr sequence="5">
        <text>G01N  33/34        20060101A N20051008RMEP</text>
        <ipc-version-indicator>
          <date>20060101</date>
        </ipc-version-indicator>
        <classification-level>A</classification-level>
        <section>G</section>
        <class>01</class>
        <subclass>N</subclass>
        <main-group>33</main-group>
        <subgroup>34</subgroup>
        <classification-value>N</classification-value>
        <generating-office>
          <country>EP</country>
        </generating-office>
        <classification-status>R</classification-status>
        <classification-data-source>M</classification-data-source>
        <action-date>
          <date>20051008</date>
        </action-date>
      </classification-ipcr>
      <classification-ipcr sequence="6">
        <text>G05B  11/36        20060101ALI20051220RMJP</text>
        <ipc-version-indicator>
          <date>20060101</date>
        </ipc-version-indicator>
        <classification-level>A</classification-level>
        <section>G</section>
        <class>05</class>
        <subclass>B</subclass>
        <main-group>11</main-group>
        <subgroup>36</subgroup>
        <symbol-position>L</symbol-position>
        <classification-value>I</classification-value>
        <generating-office>
          <country>JP</country>
        </generating-office>
        <classification-status>R</classification-status>
        <classification-data-source>M</classification-data-source>
        <action-date>
          <date>20051220</date>
        </action-date>
      </classification-ipcr>
      <classification-ipcr sequence="7">
        <text>G05B  13/04        20060101ALI20051220RMJP</text>
        <ipc-version-indicator>
          <date>20060101</date>
        </ipc-version-indicator>
        <classification-level>A</classification-level>
        <section>G</section>
        <class>05</class>
        <subclass>B</subclass>
        <main-group>13</main-group>
        <subgroup>04</subgroup>
        <symbol-position>L</symbol-position>
        <classification-value>I</classification-value>
        <generating-office>
          <country>JP</country>
        </generating-office>
        <classification-status>R</classification-status>
        <classification-data-source>M</classification-data-source>
        <action-date>
          <date>20051220</date>
        </action-date>
      </classification-ipcr>
      <classification-ipcr sequence="8">
        <text>G05D  27/00        20060101ALI20051220RMJP</text>
        <ipc-version-indicator>
          <date>20060101</date>
        </ipc-version-indicator>
        <classification-level>A</classification-level>
        <section>G</section>
        <class>05</class>
        <subclass>D</subclass>
        <main-group>27</main-group>
        <subgroup>00</subgroup>
        <symbol-position>L</symbol-position>
        <classification-value>I</classification-value>
        <generating-office>
          <country>JP</country>
        </generating-office>
        <classification-status>R</classification-status>
        <classification-data-source>M</classification-data-source>
        <action-date>
          <date>20051220</date>
        </action-date>
      </classification-ipcr>
    </classifications-ipcr>
    <classification-national>
      <country>US</country>
      <main-classification>
        <text>700030000</text>
        <class>700</class>
        <subclass>030000</subclass>
      </main-classification>
      <further-classification sequence="1">
        <text>162253000</text>
        <class>162</class>
        <subclass>253000</subclass>
      </further-classification>
      <further-classification sequence="2">
        <text>162DIG010</text>
        <class>162</class>
        <subclass>DIG010</subclass>
      </further-classification>
      <further-classification sequence="3">
        <text>700053000</text>
        <class>700</class>
        <subclass>053000</subclass>
      </further-classification>
      <further-classification sequence="4">
        <text>700072000</text>
        <class>700</class>
        <subclass>072000</subclass>
      </further-classification>
    </classification-national>
    <patent-classifications>
      <patent-classification sequence="1">
        <classification-scheme office="EP" scheme="CPC">
          <date>20130101</date>
        </classification-scheme>
        <classification-symbol>D21G-009/0027</classification-symbol>
        <section>D</section>
        <class>21</class>
        <subclass>G</subclass>
        <main-group>9</main-group>
        <subgroup>0027</subgroup>
        <symbol-position>F</symbol-position>
        <classification-value>I</classification-value>
        <classification-status>B</classification-status>
        <classification-data-source>H</classification-data-source>
        <action-date>
          <date>20130823</date>
        </action-date>
      </patent-classification>
      <patent-classification sequence="2">
        <classification-scheme office="EP" scheme="CPC">
          <date>20130101</date>
        </classification-scheme>
        <classification-symbol>D21G-009/0036</classification-symbol>
        <section>D</section>
        <class>21</class>
        <subclass>G</subclass>
        <main-group>9</main-group>
        <subgroup>0036</subgroup>
        <symbol-position>L</symbol-position>
        <classification-value>I</classification-value>
        <classification-status>B</classification-status>
        <classification-data-source>H</classification-data-source>
        <action-date>
          <date>20130823</date>
        </action-date>
      </patent-classification>
      <patent-classification sequence="3">
        <classification-scheme office="EP" scheme="CPC">
          <date>20130101</date>
        </classification-scheme>
        <classification-symbol>G01N-033/34</classification-symbol>
        <section>G</section>
        <class>01</class>
        <subclass>N</subclass>
        <main-group>33</main-group>
        <subgroup>34</subgroup>
        <symbol-position>L</symbol-position>
        <classification-value>A</classification-value>
        <classification-status>B</classification-status>
        <classification-data-source>H</classification-data-source>
        <action-date>
          <date>20130823</date>
        </action-date>
      </patent-classification>
      <patent-classification sequence="4">
        <classification-scheme office="EP" scheme="CPC">
          <date>20130101</date>
        </classification-scheme>
        <classification-symbol>Y10S-162/10</classification-symbol>
        <section>Y</section>
        <class>10</class>
        <subclass>S</subclass>
        <main-group>162</main-group>
        <subgroup>10</subgroup>
        <symbol-position>L</symbol-position>
        <classification-value>A</classification-value>
        <classification-status>B</classification-status>
        <classification-data-source>H</classification-data-source>
        <action-date>
          <date>20130518</date>
        </action-date>
      </patent-classification>
    </patent-classifications>
    <number-of-claims>9</number-of-claims>
    <exemplary-claim>1</exemplary-claim>
    <figures>
      <number-of-drawing-sheets>6</number-of-drawing-sheets>
      <number-of-figures>7</number-of-figures>
      <image-key data-format="questel">US6185468</image-key>
    </figures>
    <invention-title format="original" lang="en" id="title_en">Decoupling controller for use with a process having two input variables and two output variables</invention-title>
    <references-cited>
      <citation srep-phase="examiner">
        <patcit num="1">
          <text>DAHLIN ERIK B</text>
          <document-id>
            <country>US</country>
            <doc-number>3610899</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US3610899</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="examiner">
        <patcit num="2">
          <text>PERSIK SPENCER R JR</text>
          <document-id>
            <country>US</country>
            <doc-number>3619360</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US3619360</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="examiner">
        <patcit num="3">
          <text>RICE JAMES S</text>
          <document-id>
            <country>US</country>
            <doc-number>3676295</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US3676295</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="examiner">
        <patcit num="4">
          <text>DOERING G</text>
          <document-id>
            <country>US</country>
            <doc-number>3847730</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US3847730</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="examiner">
        <patcit num="5">
          <text>RICE J</text>
          <document-id>
            <country>US</country>
            <doc-number>3852578</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US3852578</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="examiner">
        <patcit num="6">
          <text>BARTLEY THOMAS M, et al</text>
          <document-id>
            <country>US</country>
            <doc-number>4054780</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US4054780</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="examiner">
        <patcit num="7">
          <text>CASEY JOSEPH M, et al</text>
          <document-id>
            <country>US</country>
            <doc-number>4098641</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US4098641</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="examiner">
        <patcit num="8">
          <text>BALAKRISHNAN RAMESH, et al</text>
          <document-id>
            <country>US</country>
            <doc-number>5121332</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5121332</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="examiner">
        <patcit num="9">
          <text>HE GEORGE X</text>
          <document-id>
            <country>US</country>
            <doc-number>5400247</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5400247</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="examiner">
        <patcit num="10">
          <text>HE GEORGE X</text>
          <document-id>
            <country>US</country>
            <doc-number>5400258</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5400258</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="examiner">
        <patcit num="11">
          <text>WOJSZNIS WILHELM K</text>
          <document-id>
            <country>US</country>
            <doc-number>5568378</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5568378</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="examiner">
        <patcit num="12">
          <text>MANDLER JORGE ANIBAL, et al</text>
          <document-id>
            <country>US</country>
            <doc-number>5791160</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5791160</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="examiner">
        <patcit num="13">
          <text>HU HUNG-TZAW, et al</text>
          <document-id>
            <country>US</country>
            <doc-number>5853543</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5853543</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="examiner">
        <patcit num="14">
          <text>BOSSEN DAVID A, et al</text>
          <document-id>
            <country>US</country>
            <doc-number>5944955</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5944955</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="examiner">
        <nplcit num="1">
          <text>Wells, Charles H. "Robust Multivariable IMC Control for Paper Machines." Tappi Journal, Jul. 1999: 140-144.</text>
        </nplcit>
      </citation>
      <citation srep-phase="examiner">
        <nplcit num="2">
          <text>Zhang, Weidong and Xiaoming Xu. "Simple Predictor for Processes with Time Delay." Proceedings of the American Control Conference. San Diego, California. Jun. 1999: 822-826.</text>
        </nplcit>
      </citation>
      <citation srep-phase="examiner">
        <nplcit num="3">
          <text>Dahlin, E. B. et al. "Designing and Tuning Digital Controllers: Part 1." Instruments and Control Systems. Part 1, Jun. 1968:77-83. Part 2, Jul. 1968:87-91.</text>
        </nplcit>
      </citation>
      <citation srep-phase="examiner">
        <nplcit num="4">
          <text>Mahieddine, F. et al. "Decoupling Multivariable Self-Tuning Controller for Varying Time Delays." IEE Proceedings. Part D, Control Theory and Applications v. 134 (Sep. '89) pp. 209-14.</text>
        </nplcit>
      </citation>
      <citation srep-phase="examiner">
        <nplcit num="5">
          <text>Heaven, M. et al. "Applications of Model-Based Tuning and Analysis Tools to Paper Machine Control." Pulp and Paper Canada, vol. 98, No. 7, Jul. 1997, pp. 54-48.</text>
        </nplcit>
      </citation>
      <citation srep-phase="examiner">
        <nplcit num="6">
          <text>Morari, M. and Zafirious, E., "Robust Process Control." Englewood Cliffs, 1989, pp. 393-428.</text>
        </nplcit>
      </citation>
      <citation srep-phase="examiner">
        <nplcit num="7">
          <text>Bahill, A. Terry. "A Simple Adaptive Smith-Predictor for Controlling Time-Delay Systems." Control Systems Magazine. vol. 3. May, 1983, 16-22.</text>
        </nplcit>
      </citation>
      <citation srep-phase="examiner">
        <nplcit num="8">
          <text>Dumont, Guy A. "System Identification and Adaptive Control in Papermaking." Fundamentals of Papermaking: Transactions of the Ninth Fundamental Research Symposium Head at Campridge: Sep. 1989. Mechanical Engineering Publication Limited, London.</text>
        </nplcit>
      </citation>
    </references-cited>
    <parties>
      <applicants>
        <applicant data-format="original" app-type="applicant" sequence="1">
          <addressbook lang="en">
            <orgname>Impact Systems, Inc.</orgname>
            <address>
              <address-1>Los Gatos, CA, US</address-1>
              <city>Los Gatos</city>
              <state>CA</state>
              <country>US</country>
            </address>
          </addressbook>
          <nationality>
            <country>US</country>
          </nationality>
        </applicant>
        <applicant data-format="questel" app-type="applicant" sequence="2">
          <addressbook lang="en">
            <orgname>IMPACT SYSTEMS</orgname>
          </addressbook>
          <nationality>
            <country>US</country>
          </nationality>
        </applicant>
      </applicants>
      <inventors>
        <inventor data-format="original" sequence="1">
          <addressbook lang="en">
            <name>Wells, Charles H.</name>
            <address>
              <address-1>Redwood City, CA, US</address-1>
              <city>Redwood City</city>
              <state>CA</state>
              <country>US</country>
            </address>
          </addressbook>
          <nationality>
            <country>US</country>
          </nationality>
        </inventor>
      </inventors>
      <agents>
        <agent sequence="1" rep-type="agent">
          <addressbook lang="en">
            <name>Wright, Jerry G.</name>
          </addressbook>
        </agent>
        <agent sequence="2" rep-type="agent">
          <addressbook lang="en">
            <orgname>Flehr Hohbach Test Albritton &amp; Herbert LLP</orgname>
          </addressbook>
        </agent>
      </agents>
    </parties>
    <examiners>
      <primary-examiner>
        <name>Grant, William</name>
      </primary-examiner>
    </examiners>
    <lgst-data>
      <lgst-status>EXPIRED</lgst-status>
    </lgst-data>
  </bibliographic-data>
  <abstract format="original" lang="en" id="abstr_en">
    <p id="P-EN-00001" num="00001">
      <br/>
      A decoupling controller for use with a process such as paper-making having two input variables such as stock flow and steam pressure and two output variables such as moisture and basis weight.
      <br/>
      Decoupling is accomplished by the use of linked internal model controllers where for each individual unit of the linked pairs, a P.I.D. (proportional, integral, derivative) unit includes all of the feedback loop gains and then the process itself is modeled by a first order transfer function and deadtime units with two cross-linked error signals fed back.
      <br/>
      A specific technique of cross-linking the internal model controllers eliminates cross-coupling between the input and output variables.
    </p>
  </abstract>
  <description format="original" lang="en" id="desc_en">
    <heading>INTRODUCTION</heading>
    <p num="1">The present invention is directed to a decoupling controller for use with a process having two input variables and two output variables and, more specifically, to a paper-making process where the input variables are dry stock flow and steam pressure to a dryer section and the output variables are basis weight and moisture.</p>
    <heading>BACKGROUND</heading>
    <p num="2">
      In the paper-making process, the process itself has long deadtimes relative to the process time constant.
      <br/>
      This makes control difficult.
      <br/>
      There are typically two unique deadtimes; one is for the time required for a change in basis weight when the input variable, stock flow, is changed and the other is the time for variation in steam to affect the final moisture carried by the paper sheet.
      <br/>
      A further difficulty in the paper-making process is the cross-coupling affect; that is, each input variable affects both output variables.
      <br/>
      Hence, a decoupling controller is desired to regulate the outputs independently; for example, the operator would like to change the setpoint of the basis weight controller without changing the value of the moisture.
    </p>
    <p num="3">
      Two rather crude techniques have been utilized for decoupling.
      <br/>
      In a first, a setpoint is changed only once every five minutes, for example, for changes in stock flow and once every minute for changes in steam.
      <br/>
      This is a much longer period of time than the generation of output data by a sensor which scans across the width of the paper, for example, every 20 seconds.
    </p>
    <p num="4">
      A second proposed decoupling technique is to provide absolute decoupling constants between changes in stock flow and steam pressure.
      <br/>
      These might be termed "compensating changes".
      <br/>
      However, these are mere guesses and do not compensate for grade changes or speed changes and do not take into account that the coupling effect may be nonlinear.
      <br/>
      One other problem with a controller for a paper-making machine discussed above, is the fact that the measurements of outputs occur either at long intervals or can occur asynchronously due to sheet breaks or standardization.
      <br/>
      In any case, scan measurements (which may take up to 120 seconds) only occur every 20 seconds at best.
    </p>
    <heading>OBJECT AND SUMMARY OF INVENTION</heading>
    <p num="5">A general object of the present invention is to provide an improved decoupling controller for use with a process having two input variables and two output variables.</p>
    <p num="6">
      In accordance with the above object, there is provided a decoupling controller for use with a process having two input variables U1, U2 and two output variables X1, X2 where in the process each input variable affects both output variables (that is they are coupled), such process having desired setpoints S1, S2 for the output variables.
      <br/>
      Such decoupling controller comprising two pairs of linked internal model controllers, each internal model controller (IMC) including a proportional, integral, derivative (P.I.D.) velocity unit C11, C21, C12, and C22 for respectively receiving from a first pair of difference junctions total process error, et1, et2, in a feedback loop for the process and producing said input variables U1, U2, which are control inputs to the process itself, such P.I.D. units taking into account loop, proportional, integral and derivative gains of the feedback loop for both direct and cross-coupling.
    </p>
    <p num="7">Four first order transfer function units K11, K12, K21, and K22 receive as inputs U1, U2, the K11, K22 units providing predicted values of X1, X2, the K21, K12 units providing predicted outputs of X1, X2 due to cross-coupling.</p>
    <p num="8">Means feed back to a pair of second summing junctions the outputs of K11, K12 and K22, K21 respectively.</p>
    <p num="9">Means couple the outputs of the second summing junctions, which are total predicted values of X1 and X2 taking into account cross-coupling, to a pair of third summing junctions, which also receive modeling error signals representing the difference between the actual X1 and X2 values and estimated values Y1 and Y2, from a pair of fifth junctions.</p>
    <p num="10">Means feed the summed output of the third pair of summing junctions to the first pair of difference junctions, which have as the other difference input the setpoints S1, S2 to provide the total process error inputs et1 and et2 to C11, C21 and C12, C22;</p>
    <p num="11">Means take the deadtime of the process into account (that is the lag time between the change of input variables and output variables), including four deadtime units, D11, D21, and D12, D22, having their inputs respectively connected to the outputs of K11, K21, K12, and K22, including a pair of fourth summing junctions having as outputs the current estimated values Y1, Y2 of the X1, X2 output variables, where one of the pair of fourth summing junctions, sums the outputs of D11, D12 and the other of the pair of summing junctions, sums the outputs of D22, D21.</p>
    <p num="12">Means couple the outputs of the fourth pair of summing junctions, to the fifth pair of difference junctions to take the difference between the actual outputs X1, X2 and the estimated values Y1, Y2, such differences being the modeling error signals.</p>
    <p num="13">Means feed back the modeling error signals to the third pair of summing junctions.</p>
    <heading>BRIEF DESCRIPTION OF THE DRAWINGS</heading>
    <p num="14">
      FIG. 1 is a simplified block diagram of a paper-making machine, including the associated control hardware and software embodying the present invention.
      <br/>
      FIG. 2 is a detailed schematic block diagram of the control units of FIG. 1.
      <br/>
      FIG. 3 is a schematic representation of the four transfer functions involved in the present paper-making process.
      <br/>
      FIG. 4 shows characteristic curves useful in understanding the present invention.
      <br/>
      FIG. 5 is a schematic block diagram of a prior art controller as utilized in the present invention.
      <br/>
      FIG. 6 is a scan data output characteristic useful in understanding the present invention.
      <br/>
      FIG. 7 is a phase planes chart used in the present invention.
    </p>
    <heading>DETAILED DESCRIPTION OF PREFERRED EMBODIMENT</heading>
    <p num="15">
      FIG. 1 illustrates a typical paper-making machine, which includes an associated control hardware and software configuration as used in the present invention.
      <br/>
      Raw paper stock is supplied to the machine via a stock valve 10 and a stock line 11 to a head box 12 by a fan pump 13.
      <br/>
      The pump and water mixture jets from head box 12 through a slice 14 on top of and parallel to wire 16.
      <br/>
      This forms a wet web 17, which on leaving wire 16 passes through rollers 18, which remove much of the water from the web and essentially converts it to a sheet of wet paper.
      <br/>
      Thereafter, the paper sheet passes through a dryer section 19 consisting of several rollers to which steam is supplied by steam control valve 20.
      <br/>
      Steam heats the rollers and, consequently, evaporates much of the water in the paper sheet so that the paper emerging from the dryer section 19 has the desired moisture content (MOI).
      <br/>
      Thereafter, the paper passes through a calendar stack 22 through scanning sensors 23 and is wound on the reel 24.
    </p>
    <p num="16">
      Scanning sensors 23 scan across the width of the paper approximately every 20 seconds and provide a measurement of the output variables of basis weight (B.W.) and moisture (MOI).
      <br/>
      In the present invention, either basis weight, dry weight, or conditioned weight may be used; the latter is preferred.
      <br/>
      Conditioned weight is from a practical standpoint, dry weight where a standard 8 percent moisture factor is added.
      <br/>
      The two output variables from the scanning sensors 23 are also designated X1 and X2.
      <br/>
      The scanned moisture and basis weight values are coupled to the digital computer 26 for processing along with an operator input 25.
      <br/>
      Typically, in the cross direction of the paper, 240 measurements are made and these are averaged to provide a single "end of scan" measurement.
      <br/>
      This is therefore one of the measurements made in the machine direction.
      <br/>
      Both basis weight and moisture (X1 and X2) are also connected to control units 30A and 30B in a manner which will be illustrated in FIG. 2.
      <br/>
      The two control units are actually part of a single interlinked decoupling controller embodying the present invention as indicated by the 6-wire interface 31.
      <br/>
      Controller portion 30A has as inputs a setpoint S1 from the digital computer 26 and X1 and as an output, the control value U1, which drives the stock valve 10 to provide a dry stock (fiber) flow rate of U1.
      <br/>
      Similarly, controller portion 30B receives the setpoint S2 (actually, the steam pressure) from digital computer 26 along with X2 and by its output U2 drives the steam valve 20 to provide a U2 steam input.
    </p>
    <p num="17">Digital computer 26 has as other feedbacks the steam pressure line 31 from dryer section 19 and also flow meter 27 and a consistency meter 32, which determine the pounds per minute of dry stock flow.</p>
    <p num="18">
      Referring to FIG. 2, the decoupling controller portions 30A and 30B are shown in greater detail and especially how they are interlinked.
      <br/>
      The paper-making process, fully illustrated in FIG. 1 is shown twice, both at 36A and 36B, as being driven by the input variables U1 (stock flow) and U2 (steam) and having the outputs X1 (basis weight) and X2 (moisture).
    </p>
    <p num="19">
      The real process, illustrated in FIG. 3, is represented by four unknown transfer functions P11, P12, P21, and P22.
      <br/>
      The P-type functions, with the 11 and 22 subscripts represent the direct transfer functions of stock to basis weight and steam to moisture; the other cross-coupling subscripts 21 and 12, relate to how moisture is affected by changing stock and how basis weight is affected by a change in steam.
      <br/>
      The P functions can be represented by the associated Laplace Transform where the theta superscript is a deadtime function or delay function and the remainder is a time constant and gain, or rather a first order transfer function K.
    </p>
    <p num="20">
      FIG. 4 illustrates the delay or deadtime of the process.
      <br/>
      Assuming a time, to, when a change is made for stock, there is a delay until basis weight reaches a constant value; and the same is true for the change in steam for moisture.
      <br/>
      In the background of the invention, prior attempts at decoupling were discussed.
    </p>
    <p num="21">
      With regard to the present invention and referring to FIG. 5, it has been found that when a prior art type internal model controller (IMC), as shown in FIG. 5, for a single loop only and for synchronous measurements in time, is adapted to a multi-variable system, it will accommodate deadtime, asynchronous behavior, and when two pairs of IMC's are linked, as is illustrated in FIG. 2, provide very effective decoupling.
      <br/>
      However, first referring to FIG. 5, to serve as a background for the total decoupling controller of FIG. 2, the internal model controller has a setpoint input S and a process at 36 and an output variable X. A difference junction 37 provides a total error signal, et, to a controller C, 40, which then provides an input control signal U to the process 36.
      <br/>
      This input control signal, however, also drives a simulated model of process 36, which is characterized by the Laplace Transform (see FIG. 3) of a K function 38 and a D function 39 as illustrated by the accompanying formulas.
      <br/>
      This process model provides an estimated X value at 41, which at the difference junction 42 is compared to the actual X value to generate a feedback error signal on line 43.
      <br/>
      However, this error signal is not coupled back to the input until it is summed at a junction 44 with the raw output of the K model 38 (that is before a deadtime is taken into account).
      <br/>
      Then on line 46 and junction 37, a difference is taken with the setpoint, S, to provide the total error, et.
      <br/>
      The unit 40 is actually a proportional, integral, derivative (P.I.D.) type controller which is illustrated by the following equation which produces an output U in response to a total error input, et:  (Equation image '1' not included in text)
    </p>
    <p num="22">Its constants are:</p>
    <p num="23">
      KL =loop gain
      <br/>
      KP =proportional gain (generally approx. less 1)
      <br/>
      KI /s=integral gain (this is an acceleration factor which is about 0.5) and s is the Laplace operator.
    </p>
    <p num="24">Kd s=Kd is derivative gain which is in the range of 0.3 to 0.8 and s is the Laplace operator.</p>
    <p num="25">
      Thus, in summary the internal model controller models the process 36 by the use of the first order transfer function K (unit 38) with a deadtime D (unit 39).
      <br/>
      In general, this internal model controller (IMC) is for a single loop only and not for asynchronous use.
      <br/>
      For use in the chemical industry see the book entitled, "Robust Control" by Manfred Morari and Evanghulos Zafiriou, Prentice-Hall, 1989.
      <br/>
      It is quite apparent, from examination of FIG. 5, if there is a deadtime equal to 0, that is D=0, then it becomes a standard proportional integral derivative (P.I.D.) controller.
      <br/>
      The loop gain, KL is not normally part of a standard IMC.
      <br/>
      In the present invention, it has been discovered that if KL is made the reciprocal of the model gain, K (unit 38), the above equation becomes non-dimensional to allow the loop to be easily pre-tuned.
      <br/>
      The value of the constants are believed ideal to pretune for a typical paper making machine.
      <br/>
      They were derived by trial and error.
    </p>
    <p num="26">
      Referring back to FIG. 2, this illustrates the decoupling controller of the present invention, which in effect incorporates four internal model controllers which are linked together.
      <br/>
      The C-type unit 40 of FIG. 5, designated 40', has two pairs of linked P.I.D. units C11, C21, C12, and C22.
      <br/>
      The numerical designations, of course, conform to the transfer functions illustrated in FIG. 3.
      <br/>
      Thus, C11 and C22 are the direct model of the process change for driving U1 and U2, respectively, and then for the other two, C21 relates to S1, X2, and C12 to S2, X1.
      <br/>
      In other words, these P.I.D. units are cross-coupled to produce at the additive junctions 51 and 52, the U1 and U2 control values to the process 36A, 36B.
      <br/>
      In order to provide fast response, the units 40' are of the P.I.D. velocity type to eliminate "reset windup".
    </p>
    <p num="27">
      "Reset Windup" occurs in a feedback control system which integrates error.
      <br/>
      But when the system variable is constrained at a 100% value (and thus the setpoint cannot be achieved) an intolerable error is built up by integration.
      <br/>
      This cannot happen with the present P.I.D. unit since the term, "KI et ", has no integral.
      <br/>
      The operation of units 40' is determined by the following equation which, of course is a form of its basic equation given above:
      <br/>
      sC(s)=sU(s)=KL (KP s+KI +Kds2)et (s)
    </p>
    <p num="28">
      or in time domain;  (Equation image '2' not included in text)
      <br/>
      (where  DELTA  is the difference operator)
    </p>
    <p num="29">As discussed in combination with FIG. 5, the units 40' take into account loop gain, proportional gain, integral gain, and derivative gains involved in the feedback loops illustrated in FIG. 2.</p>
    <p num="30">
      Next, the K11, K21, and K12, K22 units, also designated 38', receive as respective inputs U1, U2.
      <br/>
      The K12 and K21 units provide predicted outputs of X1, X2 due to cross-coupling.
      <br/>
      These outputs, in manner somewhat similar to FIG. 5, are cross-coupled back to junctions 2a and 2b and summed with the Kl1 and K22 outputs.
      <br/>
      Thus, the output of the second summing injunction pair, 2a and 2b, is actually the total predicted value of X1 and X2 (taking into account cross-coupling, but without deadtime).
      <br/>
      These are designated yp1 and yp2.
      <br/>
      These outputs of the 2a and 2b junctions are then connected to a third pair of junctions, 3a and 3b, which also receive on the lines 53 and 54 modeling error signals representing the difference between the actual X1 and X2 values and the estimated values, Y1 and Y2.
      <br/>
      Finally, the outputs of the junctions 3a and 3d are fed back to the first pair of difference junctions 1a and 1b to provide the total process error, et1 and et2.
    </p>
    <p num="31">
      Deadtime is taken in account by the D units 39' which receive the outputs of the respective K units.
      <br/>
      The deadtime is, of course, the lag time between the change of input variables and output variables.
      <br/>
      The deadtime units D11, D21 and D12, D22 have their inputs respectively connected to the outputs of K11, K21 and K12, K22.
      <br/>
      A current estimate Y1, Y2 of the X1 and X2 output variables is provided at the summing junctions 4a and 4b; junction 4a sums D11 and the cross-coupled D12 and junction 4b sums D22 and the cross-coupled D21.
    </p>
    <p num="32">And then lastly, the junctions 5a, 5b take the difference between the actual outputs X1 and X2 and the estimated values Y1 and Y2 to provide the modeling error signal on lines 53 and 54.</p>
    <p num="33">Thus, in a robust and elegant manner, the internal model controller of FIG. 5 has been converted by the specific interlinking as shown in FIG. 2 to compensate for deadtime and provide for instant response to setpoint changes and at the same time to effectively decouple weight from moisture.</p>
    <p num="34">To estimate values for the K and D units, 38' and 39', bump tests are used along with the knowledge and experience of an operator of the process.</p>
    <p num="35">
      The above process model with four transfer functions also accommodates use in a wide variety of processes in addition to paper machines, such as in the petrochemical, mining, waste water treatment and food processing industries.
      <br/>
      Typically, in these cases, the gas or liquid stream is sampled isokinetically with the sample drawn to a chemical analyzer, such as a gas or liquid chromatograph resulting in a time lag.
    </p>
    <p num="36">
      In order to execute the above equations asynchronously, the differential equations are solved analytically.
      <br/>
      For example:  (Equation image '3' not included in text)
    </p>
    <p num="37">Solving for x, given u=constant over a short period.  (Equation image '4' not included in text)</p>
    <p num="38">
      So, given the measurement at t=to ; x(to); the future values of x can be computed using Eq.(1) as long as u is constant beginning at to.
      <br/>
      To find yp(t), simply delay x(t) by the time delay.
      <br/>
      Thus, the foregoing demonstrates how to execute the equations asynchronously.
    </p>
    <p num="39">
      Executing the controller at random intervals is ideal for paper machine control systems since the end of scan measurements are at random times.
      <br/>
      Also, since the P.I.D. unit 40' is of the velocity form, no movement of the inputs to the process are possible between scan intervals.
      <br/>
      The controller does not have to be programmed explicitly to handle scanner standardizations or sheet breaks.
    </p>
    <p num="40">
      The P.I.D. units 40' are preferably implemented in the velocity mode to eliminate "reset wind-up".
      <br/>
      However, depending on the process other type modes might be used.
    </p>
    <p num="41">
      FIG. 6 illustrates typical data received in the machine direction of either basis weight or moisture.
      <br/>
      Five data points are illustrated.
      <br/>
      The use of a sliding least squares method of polynomial filters provides a single best estimated value of X1 or X2, as well as dx/dt and dx2 /dt2 which, of course, relate to velocity and acceleration.
    </p>
    <p num="42">In order to provide a well-tuned feedback system, the loop gain, KL, (see FIG. 5) of the controller units 40' is set as the inverse of the related K functions of the K11, K12, K21, and K22 modeling units.</p>
    <p num="43">
      In addition, the K11 first order transfer function is adjusted for an increase in the paper machines' speed (or trim).
      <br/>
      Here, with a speed increase the loop gain, KL, of the P.I.D. is decreased since it is the inverse of K11.
      <br/>
      This is computed by the following fiber balance equation:
      <br/>
      D1n *K11 =Dw *S*t
    </p>
    <p num="44">
      where
      <br/>
      D1n --input fiber rate, g/sec,
      <br/>
      DW --output dry weight scan average, g/m2,
      <br/>
      K11 --process gain,
      <br/>
      S--speed of paper, m/min,
      <br/>
      t--trim of paper, m
    </p>
    <p num="45">
      FIG. 7 shows a method of displaying the two dependent variables such as basis weight and moisture.
      <br/>
      In the case of a paper machine, the display includes the last 20 values of weight and moisture displayed on an XY chart with connecting lines between the data points.
      <br/>
      The chart is known as a phase planes chart in control theory and is used to analyze regions of stability and performance under transient conditions.
      <br/>
      Thus, as shown by the straight line 61, this is a perfect transition between an original setpoint and a new setpoint.
      <br/>
      However, the dashed line 62 illustrates a somewhat imperfect transition which, however, presents to the operator a possibility of improving by tuning the feedback system, the transition.
    </p>
    <p num="46">Thus, an improved decoupling controller for use with a process having two input variables and two output variables has been provided.</p>
  </description>
  <claims format="original" lang="en" id="claim_en">
    <claim num="1">
      <claim-text>What is claimed is:</claim-text>
      <claim-text>1.</claim-text>
      <claim-text>A decoupling controller for use with a paper making machine process having two input variables (U1 and U2) which are dry stock flow and steam pressure and two output variables (X1 and X2) which are basis weight and moisture where in the process each input variable affects both output variables, such process having desired setpoints (S1, S2) for said output variables such decoupling controller comprising:</claim-text>
      <claim-text>linked internal model controller means including two pairs of proportional, integral, derivative P.I.D. velocity units (C11, C21;</claim-text>
      <claim-text>and C12, C22) each pair respectively receiving from a first pair of difference junctions total process error, (et1, et2) in a feedback loop for the process and producing said inputs (U1, U2), which are control inputs to the process itself, such P.I.D. units taking into account loop, proportional, integral, and derivative gains of the feedback loop for both direct and cross-coupling; four first order transfer function units (K11, K12, K21, and K22) for receiving as inputs U1, U2, said K11, K22 units providing predicted values of X1, X2, said K21, K12 units providing predicted outputs of X1, X2 due to cross-coupling; means for feeding back to a pair of second summing junctions the outputs of K11, K12 and K22, K21 respectively; means for coupling the outputs of said second summing junctions, which are total predicted values of X1 and X2 taking into account cross-coupling, to a pair of third summing junctions; means for feeding the summed output of said third pair of summing junctions to said first pair of difference junctions, which have as the other difference input the setpoints S1, S2 to provide said total process error inputs et1 and et2 to C11, C21 and C12, C22, respectively; means for taking the deadtime of said process into account which is the lag time between the change of input variables and output variables, including four deadtime units, (D11, D21, and D12, D22), having their inputs respectively connected to the outputs of K11, K21, K12, and K22, including a pair of fourth summing junctions having as outputs current estimated values (Y1, Y2) of the X1, X2 output variables where one of the pair of fourth summing junctions, sums the outputs of D11, D12 and the other of the pair of summing junctions, sums the outputs of D22, D21; means for coupling the outputs of said fourth pair of summing junctions, to a fifth pair of difference junctions to take the difference between the actual outputs X1, X2 and the estimated values Y1, Y2, such differences being modeling error output signals; means for feeding back said modeling error output signals to said third pair of summing junctions; and where said K11 the process gain for stock, is increased for an increase in the paper machine speed and said feed back loop gain of the correspondin a P.I.D. unit, C11, is decreased.</claim-text>
    </claim>
    <claim num="2">
      <claim-text>2. A decoupling controller as in claim 1 where measurement of said output variables is done asynchronously.</claim-text>
    </claim>
    <claim num="3">
      <claim-text>3. A decoupling controller as in claim 2 where a plurality of said measurements are made over said paper in a machine direction and including polynomial filtering means for such measurements to produce a best estimate of value.</claim-text>
    </claim>
    <claim num="4">
      <claim-text>4. A decoupling controller as in claim 3 where said paper is scanned in a cross-direction to provide a plurality of measurements of X1, X2 including means for averaging to provide an end of scan measurement which constitutes one of said plurality of measurements in such machine direction.</claim-text>
    </claim>
    <claim num="5">
      <claim-text>5. A decoupling controller as in claim 4 where said polynomial filtering also provides first and second derivatives proportional to velocity and acceleration.</claim-text>
    </claim>
    <claim num="6">
      <claim-text>6. A decoupling controller as in claim 1 where said loop gain of said internal model controllers is the inverse of corresponding a K11, K12, K12, K21, and K22 units.</claim-text>
    </claim>
    <claim num="7">
      <claim-text>7. A decoupling controller as in claim 1 where said process gain change K11 is computed in the following fiber balance equation:</claim-text>
      <claim-text>where D1n --input fiber rate DW --output fiber rate K11 --process gain S--speed of paper t--trim of paper.</claim-text>
    </claim>
    <claim num="8">
      <claim-text>8. A decoupling controller as in claim 1 where bump tests are used to estimate gains for said K and D units.</claim-text>
    </claim>
    <claim num="9">
      <claim-text>9. A decoupling controller as in claim 1 including means for plotting a phase planes chart using said basis weight and moisture outputs as graph ordinates.</claim-text>
    </claim>
  </claims>
</questel-patent-document>