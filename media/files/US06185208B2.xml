<?xml version="1.0" encoding="UTF-8"?>
<questel-patent-document lang="en" date-produced="20180805" produced-by="Questel" schema-version="3.23" file="US06185208B2.xml">
  <bibliographic-data lang="en">
    <publication-reference publ-desc="Granted patent as second publication">
      <document-id>
        <country>US</country>
        <doc-number>06185208</doc-number>
        <kind>B2</kind>
        <date>20010206</date>
      </document-id>
      <document-id data-format="questel">
        <doc-number>US6185208</doc-number>
      </document-id>
    </publication-reference>
    <original-publication-kind>B2</original-publication-kind>
    <application-reference family-id="22307265" extended-family-id="4781104">
      <document-id>
        <country>US</country>
        <doc-number>09105691</doc-number>
        <kind>A</kind>
        <date>19980626</date>
      </document-id>
      <document-id data-format="questel">
        <doc-number>1998US-09105691</doc-number>
      </document-id>
      <document-id data-format="questel_Uid">
        <doc-number>14757710</doc-number>
      </document-id>
    </application-reference>
    <language-of-filing>en</language-of-filing>
    <language-of-publication>en</language-of-publication>
    <priority-claims>
      <priority-claim kind="national" sequence="1">
        <country>US</country>
        <doc-number>10569198</doc-number>
        <kind>A</kind>
        <date>19980626</date>
        <priority-active-indicator>Y</priority-active-indicator>
      </priority-claim>
      <priority-claim data-format="questel" sequence="1">
        <doc-number>1998US-09105691</doc-number>
      </priority-claim>
      <priority-claim kind="national" sequence="2">
        <country>US</country>
        <doc-number>7137998</doc-number>
        <kind>A</kind>
        <date>19980430</date>
        <priority-linkage-type>2</priority-linkage-type>
        <priority-active-indicator>N</priority-active-indicator>
      </priority-claim>
      <priority-claim data-format="questel" sequence="2">
        <doc-number>1998US-09071379</doc-number>
      </priority-claim>
    </priority-claims>
    <dates-of-public-availability>
      <publication-of-grant-date>
        <date>20010206</date>
      </publication-of-grant-date>
    </dates-of-public-availability>
    <classifications-ipcr>
      <classification-ipcr sequence="1">
        <text>G06F  13/00        20060101AFI20051220RMJP</text>
        <ipc-version-indicator>
          <date>20060101</date>
        </ipc-version-indicator>
        <classification-level>A</classification-level>
        <section>G</section>
        <class>06</class>
        <subclass>F</subclass>
        <main-group>13</main-group>
        <subgroup>00</subgroup>
        <symbol-position>F</symbol-position>
        <classification-value>I</classification-value>
        <generating-office>
          <country>JP</country>
        </generating-office>
        <classification-status>R</classification-status>
        <classification-data-source>M</classification-data-source>
        <action-date>
          <date>20051220</date>
        </action-date>
      </classification-ipcr>
      <classification-ipcr sequence="2">
        <text>H04B   7/26        20060101ALI20051220RMJP</text>
        <ipc-version-indicator>
          <date>20060101</date>
        </ipc-version-indicator>
        <classification-level>A</classification-level>
        <section>H</section>
        <class>04</class>
        <subclass>B</subclass>
        <main-group>7</main-group>
        <subgroup>26</subgroup>
        <symbol-position>L</symbol-position>
        <classification-value>I</classification-value>
        <generating-office>
          <country>JP</country>
        </generating-office>
        <classification-status>R</classification-status>
        <classification-data-source>M</classification-data-source>
        <action-date>
          <date>20051220</date>
        </action-date>
      </classification-ipcr>
      <classification-ipcr sequence="3">
        <text>H04L  12/28        20060101A I20051008RMEP</text>
        <ipc-version-indicator>
          <date>20060101</date>
        </ipc-version-indicator>
        <classification-level>A</classification-level>
        <section>H</section>
        <class>04</class>
        <subclass>L</subclass>
        <main-group>12</main-group>
        <subgroup>28</subgroup>
        <classification-value>I</classification-value>
        <generating-office>
          <country>EP</country>
        </generating-office>
        <classification-status>R</classification-status>
        <classification-data-source>M</classification-data-source>
        <action-date>
          <date>20051008</date>
        </action-date>
      </classification-ipcr>
      <classification-ipcr sequence="4">
        <text>H04L  12/56        20060101A I20051008RMEP</text>
        <ipc-version-indicator>
          <date>20060101</date>
        </ipc-version-indicator>
        <classification-level>A</classification-level>
        <section>H</section>
        <class>04</class>
        <subclass>L</subclass>
        <main-group>12</main-group>
        <subgroup>56</subgroup>
        <classification-value>I</classification-value>
        <generating-office>
          <country>EP</country>
        </generating-office>
        <classification-status>R</classification-status>
        <classification-data-source>M</classification-data-source>
        <action-date>
          <date>20051008</date>
        </action-date>
      </classification-ipcr>
      <classification-ipcr sequence="5">
        <text>H04L  12/58        20060101ALI20060101BMKR</text>
        <ipc-version-indicator>
          <date>20060101</date>
        </ipc-version-indicator>
        <classification-level>A</classification-level>
        <section>H</section>
        <class>04</class>
        <subclass>L</subclass>
        <main-group>12</main-group>
        <subgroup>58</subgroup>
        <symbol-position>L</symbol-position>
        <classification-value>I</classification-value>
        <generating-office>
          <country>KR</country>
        </generating-office>
        <classification-status>B</classification-status>
        <classification-data-source>M</classification-data-source>
        <action-date>
          <date>20060101</date>
        </action-date>
      </classification-ipcr>
      <classification-ipcr sequence="6">
        <text>H04L  29/04        20060101ALI20051220RMJP</text>
        <ipc-version-indicator>
          <date>20060101</date>
        </ipc-version-indicator>
        <classification-level>A</classification-level>
        <section>H</section>
        <class>04</class>
        <subclass>L</subclass>
        <main-group>29</main-group>
        <subgroup>04</subgroup>
        <symbol-position>L</symbol-position>
        <classification-value>I</classification-value>
        <generating-office>
          <country>JP</country>
        </generating-office>
        <classification-status>R</classification-status>
        <classification-data-source>M</classification-data-source>
        <action-date>
          <date>20051220</date>
        </action-date>
      </classification-ipcr>
      <classification-ipcr sequence="7">
        <text>H04Q   7/38        20060101ALI20051220RMJP</text>
        <ipc-version-indicator>
          <date>20060101</date>
        </ipc-version-indicator>
        <classification-level>A</classification-level>
        <section>H</section>
        <class>04</class>
        <subclass>Q</subclass>
        <main-group>7</main-group>
        <subgroup>38</subgroup>
        <symbol-position>L</symbol-position>
        <classification-value>I</classification-value>
        <generating-office>
          <country>JP</country>
        </generating-office>
        <classification-status>R</classification-status>
        <classification-data-source>M</classification-data-source>
        <action-date>
          <date>20051220</date>
        </action-date>
      </classification-ipcr>
    </classifications-ipcr>
    <classification-national>
      <country>US</country>
      <main-classification>
        <text>370392000</text>
        <class>370</class>
        <subclass>392000</subclass>
      </main-classification>
      <further-classification sequence="1">
        <text>370471000</text>
        <class>370</class>
        <subclass>471000</subclass>
      </further-classification>
    </classification-national>
    <patent-classifications>
      <patent-classification sequence="1">
        <classification-scheme office="EP" scheme="CPC">
          <date>20130101</date>
        </classification-scheme>
        <classification-symbol>H04L-067/02</classification-symbol>
        <section>H</section>
        <class>04</class>
        <subclass>L</subclass>
        <main-group>67</main-group>
        <subgroup>02</subgroup>
        <symbol-position>F</symbol-position>
        <classification-value>I</classification-value>
        <classification-status>B</classification-status>
        <classification-data-source>H</classification-data-source>
        <action-date>
          <date>20131017</date>
        </action-date>
      </patent-classification>
      <patent-classification sequence="2">
        <classification-scheme office="EP" scheme="CPC">
          <date>20130101</date>
        </classification-scheme>
        <classification-symbol>H04L-047/50</classification-symbol>
        <section>H</section>
        <class>04</class>
        <subclass>L</subclass>
        <main-group>47</main-group>
        <subgroup>50</subgroup>
        <symbol-position>L</symbol-position>
        <classification-value>I</classification-value>
        <classification-status>B</classification-status>
        <classification-data-source>H</classification-data-source>
        <action-date>
          <date>20170502</date>
        </action-date>
      </patent-classification>
    </patent-classifications>
    <number-of-claims>22</number-of-claims>
    <exemplary-claim>1</exemplary-claim>
    <figures>
      <number-of-drawing-sheets>10</number-of-drawing-sheets>
      <number-of-figures>10</number-of-figures>
      <image-key data-format="questel">US6185208</image-key>
    </figures>
    <invention-title format="original" lang="en" id="title_en">Method and apparatus for fragmenting messages for a wireless network using group sharing of reference numbers</invention-title>
    <references-cited>
      <citation srep-phase="examiner">
        <patcit num="1">
          <text>SHUEN PAULINE</text>
          <document-id>
            <country>US</country>
            <doc-number>5572528</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5572528</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="examiner">
        <patcit num="2">
          <text>JACOBSON DAVID M</text>
          <document-id>
            <country>US</country>
            <doc-number>5587997</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5587997</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="examiner">
        <patcit num="3">
          <text>ROSTOKER MICHAEL D, et al</text>
          <document-id>
            <country>US</country>
            <doc-number>5708659</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5708659</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="examiner">
        <patcit num="4">
          <text>RODERIQUE WILLIAM J, et al</text>
          <document-id>
            <country>US</country>
            <doc-number>5841764</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5841764</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="examiner">
        <patcit num="5">
          <text>ROSTOKER MICHAEL D, et al</text>
          <document-id>
            <country>US</country>
            <doc-number>5864554</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5864554</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="examiner">
        <patcit num="6">
          <text>HURVIG HANS</text>
          <document-id>
            <country>US</country>
            <doc-number>5867652</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5867652</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="examiner">
        <patcit num="7">
          <text>CONNERY GLENN WILLIAM, et al</text>
          <document-id>
            <country>US</country>
            <doc-number>5937169</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5937169</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="examiner">
        <patcit num="8">
          <text>BERL STEVEN H, et al</text>
          <document-id>
            <country>US</country>
            <doc-number>5940390</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5940390</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="examiner">
        <patcit num="9">
          <text>BERL STEVEN H, et al</text>
          <document-id>
            <country>US</country>
            <doc-number>5991302</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5991302</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="examiner">
        <nplcit num="1">
          <text>Benahm, David, ATM in Local Area Networks: A Tutorial, Hughes LAN Systems, Inc., pp. 33-40, Apr. 1994.</text>
        </nplcit>
      </citation>
      <citation srep-phase="examiner">
        <nplcit num="2">
          <text>Corner, Douglas E., Internetworking With TCP/IP vol. I: Principles, Protocols, and Architecture, second edition, Prentice Hall, pp. 92-97, 178-184, 283-284, Dec. 1991.</text>
        </nplcit>
      </citation>
      <citation srep-phase="examiner">
        <nplcit num="3">
          <text>Stallings, William, Networking Standards: A Guide to OSI, ISDN, LAN, and MAN Standards, Addison-Wesley Publishing Co., Inc., pp. 34-35, 49-52, 64-67, 119-122, 293-300, 307, Dec. 1993.</text>
        </nplcit>
      </citation>
      <citation srep-phase="examiner">
        <nplcit num="4">
          <text>Tanenbaum, Andrew S., Computer Networks, Prentice-Hall, Inc., pp. 273, 364-368, Dec. 1981.</text>
        </nplcit>
      </citation>
      <citation srep-phase="applicant">
        <nplcit num="5">
          <text>"The Wireless Application Protocol", Wireless Internet Today, Nov. 1998.</text>
        </nplcit>
      </citation>
      <citation srep-phase="applicant">
        <nplcit num="6">
          <text>"Wireless Application Protocol Wireless Datagram Protocol Specification" (WAP WDP), Version 30, Apr. 1998.</text>
        </nplcit>
      </citation>
      <citation srep-phase="applicant">
        <nplcit num="7">
          <text>"HDML 2.0 Language Reference", Version 2.0, Unwired Planet, Inc. Software Developer Kit, Jul. 1997.</text>
        </nplcit>
      </citation>
      <citation srep-phase="applicant">
        <nplcit num="8">
          <text>"HDTP Draft Specification", Version 1.1, Unwired Planet, Inc. 1997.</text>
        </nplcit>
      </citation>
    </references-cited>
    <related-documents>
      <continuation-in-part>
        <relation>
          <parent-doc>
            <document-id>
              <country>US</country>
              <doc-number>7137998</doc-number>
              <kind>A</kind>
              <date>19980430</date>
            </document-id>
          </parent-doc>
        </relation>
      </continuation-in-part>
    </related-documents>
    <parties>
      <applicants>
        <applicant data-format="original" app-type="applicant" sequence="1">
          <addressbook lang="en">
            <orgname>Phone.com, Inc.</orgname>
            <address>
              <address-1>Redwood City, CA, US</address-1>
              <city>Redwood City</city>
              <state>CA</state>
              <country>US</country>
            </address>
          </addressbook>
          <nationality>
            <country>US</country>
          </nationality>
        </applicant>
        <applicant data-format="questel" app-type="applicant" sequence="2">
          <addressbook lang="en">
            <orgname>PHONE COM</orgname>
          </addressbook>
          <nationality>
            <country>US</country>
          </nationality>
        </applicant>
      </applicants>
      <inventors>
        <inventor data-format="original" sequence="1">
          <addressbook lang="en">
            <name>Liao, Hanqing</name>
            <address>
              <address-1>Danville, CA, US</address-1>
              <city>Danville</city>
              <state>CA</state>
              <country>US</country>
            </address>
          </addressbook>
          <nationality>
            <country>US</country>
          </nationality>
        </inventor>
      </inventors>
      <agents>
        <agent sequence="1" rep-type="agent">
          <addressbook lang="en">
            <orgname>Beyer Weaver &amp; Thomas, LLP</orgname>
          </addressbook>
        </agent>
      </agents>
    </parties>
    <examiners>
      <primary-examiner>
        <name>Feild, Joseph H.</name>
      </primary-examiner>
    </examiners>
    <lgst-data>
      <lgst-status>EXPIRED</lgst-status>
    </lgst-data>
  </bibliographic-data>
  <abstract format="original" lang="en" id="abstr_en">
    <p id="P-EN-00001" num="00001">
      <br/>
      Improved techniques for providing reference numbers for purposes of fragmenting a message for transmission over a network (e.g., a wireless data network) that supports only a limited size message are disclosed.
      <br/>
      The reference numbers for the fragmented messages are shared by groups of destinations (e.g., subscribers or mobile devices).
      <br/>
      As a result, the number of reference numbers to be stored is small compared to the number of possible destinations, and the size of the reference numbers themselves is also kept small.
      <br/>
      The number of groupings and the size of the reference numbers can also be adjusted to fit system objectives.
    </p>
  </abstract>
  <description format="original" lang="en" id="desc_en">
    <heading>CROSS-REFERENCE TO RELATED APPLICATION</heading>
    <p num="1">
      This application is a continuation-in-part of U.S. application Ser.
      <br/>
      No. 09/071,379, filed Apr. 30, 1998, and entitled "METHOD AND SYSTEM FOR INTEGRATING NARROWBAND AND WIDEBAND DATA TRANSPORTS" by Stephen S. Boyle, et al, the contents of which is hereby incorporated by reference.
    </p>
    <heading>BACKGROUND OF THE INVENTION</heading>
    <p num="2">
      1.
      <br/>
      Field of the Invention
    </p>
    <p num="3">The present invention relates to wireless networks, and more particularly, to transmitting messages over wireless networks.</p>
    <p num="4">2. Description of the Related Art</p>
    <p num="5">
      Wireless networks are often used to transmit messages from one location in a network to a destination location in the network.
      <br/>
      These messages contain data to be supplied to the destination location.
      <br/>
      More specifically, the messages include a header portion and a data portion.
      <br/>
      The header portion includes an address of the destination location, and the data portion contains data.
      <br/>
      The header portion also indicates the size of the message.
      <br/>
      The destination location is, for example, a mobile device.
    </p>
    <p num="6">
      A wireless network, however, has a pre-defined or maximum message size that it is able to transmit efficiently through the wireless network.
      <br/>
      For example, one common wireless network, such as Short Messaging System (SMS) and Unstructured Supplementary Service Data (USSD), has a maximum size of 140 bytes.
      <br/>
      When a message to be transmitted has a size greater than the maximum message size for the wireless network, the message must be fragmented prior to transmission.
      <br/>
      More particularly, during fragmentation, the message is divided into smaller fragments or sub-messages.
      <br/>
      Each of the fragments or sub-messages has a size that is smaller than or equal to the maximum message size.
      <br/>
      After the fragments or sub-messages are formed, they are transmitted in order to the destination location.
    </p>
    <p num="7">
      Although the fragments or sub-messages are sent in order, the order in which they are received at the destination location is not always in sequential order.
      <br/>
      Each fragment can take seconds, minutes or hours to reach the destination location depending on the network traffic.
      <br/>
      As a result, each of the fragments or sub-messages includes (within the header portion) a sequence number that identifies the relative order of the particular fragment or sub-message within the message.
      <br/>
      The sequence number assists the destination location in reassembling the message from the message fragments or sub-elements.
    </p>
    <p num="8">
      Additionally, multiple messages may be concurrently received at a given destination location.
      <br/>
      The destination location needs some way to keep the fragments or sub-messages for the multiple messages separate.
      <br/>
      Conventionally, all the fragments or sub-messages for a given message include a particular reference number.
      <br/>
      In other words, each of the fragments or sub-messages for a given message will include a reference number of the same value in their header portion.
      <br/>
      The reference number thus allows the destination location to separate those fragments and sub-messages of different messages so that the multiple messages can be properly reassembled at the destination location.
    </p>
    <p num="9">
      Conventionally, the management and utilization of the reference numbers has some problems.
      <br/>
      With a wireless network, it is common that there are a large number of subscribers that can serve as destination locations.
      <br/>
      One conventional approach is to assign a unique reference number to each subscriber on the wireless network.
      <br/>
      However, with so many subscribers, the amount of data storage needed at a server (e.g., message server) just for all the reference numbers is large and costly.
      <br/>
      As an example, a wireless network with one million subscribers would need to store one million reference numbers.
      <br/>
      The large amount of data storage required with this approach is a problem.
    </p>
    <p num="10">
      Another conventional approach uses a single, large reference number for all transmission from a source location.
      <br/>
      For example, the large reference number can be 64 bits or more.
      <br/>
      The reference number needs to be large to minimize the likelihood that an overlap in reference number to the same destination location could occur.
      <br/>
      The problem with this approach is that the large size of the reference number consumes a significant portion of the bandwidth of each fragment or sub-message being transmitted.
    </p>
    <p num="11">Thus, there is a need for improved management and utilization of reference numbers for use in transmitting messages.</p>
    <heading>SUMMARY OF THE INVENTION</heading>
    <p num="12">
      Broadly speaking, the invention relates to improved techniques for providing reference numbers for purposes of fragmenting a message for transmission over a network (e.g., a wireless data network) supporting only a limited size message.
      <br/>
      The reference numbers for the fragmented messages are shared by groups of destinations (e.g., subscribers or mobile devices).
      <br/>
      As a result, the number of reference numbers to be stored is small compared to the number of possible destinations, and the size of the reference numbers themselves is also kept small.
      <br/>
      The number of groupings and the size of the reference numbers can also be adjusted to fit system objectives.
    </p>
    <p num="13">
      The invention can be implemented in numerous ways, including as a method, a computer readable medium, an apparatus, and a system.
      <br/>
      Several embodiments of the invention are discussed below.
    </p>
    <p num="14">As a method for transmitting fragments of a message, an embodiment of the invention includes the operations of: receiving a message to be transmitted; obtaining a message size for the message; determining whether the message size is greater than a predetermined maximum size, determining a group number for the message; obtaining a reference number for the message based on the group number; fragmenting the message to form message fragments when the message size is determined to be greater than the predetermined maximum size, with each of the message fragments including the reference number; and thereafter transmitting the message fragments.</p>
    <p num="15">As a computer readable medium storing computer program code for transmitting fragments of a message, an embodiment of the invention includes: computer program code for receiving a message to be transmitted; computer program code for determining a group number for the message; computer program code for obtaining a reference number for the message based on the group number; computer program code for fragmenting the message to form message fragments, with each of the message fragments including the reference number; and computer program code for transmitting the message fragments.</p>
    <p num="16">
      As an apparatus for transmitting messages through a wireless data network to mobile devices, an embodiment of the invention includes: a message buffer, a group determination unit, a reference number table, a fragmentation unit, and a message transmission unit.
      <br/>
      The message buffer for storing a message to be transmitted to a particular mobile device.
      <br/>
      The group determination unit determines a group number for the message, where the group number identifies a group associated with the particular mobile device.
      <br/>
      The reference number table associates a different one of a plurality of reference numbers with each of the groups.
      <br/>
      The fragmentation unit receives a particular reference number from said reference number table based on the group number for the message and receives the message from the message buffer.
      <br/>
      The fragmentation unit then operates to fragment the message into sub-messages, with each of the sub-messages including the particular reference number and a portion of the message.
      <br/>
      The message transmission unit thereafter transmits the sub-messages to the particular mobile device.
    </p>
    <p num="17">
      The advantages of the invention are numerous.
      <br/>
      One advantage of the invention is that transmission of the appropriate reference number with each fragment or sub-message does not severely impinge upon the available transmission bandwidth because the reference number can be kept relatively small.
      <br/>
      Another advantage of the invention is that a server for receiving messages to be transmitted need not store large amount of data because only reference numbers for a limited number of groups need be stored.
      <br/>
      Still another advantage of the invention is that the size of the reference numbers and the number of groups which share reference numbers can both be adjusted as desired to meet system objectives.
    </p>
    <p num="18">Other aspects and advantages of the invention will become apparent from the following detailed description, taken in conjunction with the accompanying drawings, illustrating by way of example the principles of the invention.</p>
    <heading>BRIEF DESCRIPTION OF THE DRAWINGS</heading>
    <p num="19">
      The present invention will be readily understood by the following detailed description in conjunction with the accompanying drawings, wherein like reference numerals designate like structural elements, and in which:
      <br/>
      FIG. 1 is a block diagram of a wireless communication network according to an embodiment of the invention;
      <br/>
      FIG. 2 illustrates a fragmentation process according to an embodiment of the invention;
      <br/>
      FIGS. 3A and 3B are flow diagrams of server processing according to an embodiment of the invention;
      <br/>
      FIG. 4 is a partial flow diagram of reference number determination processing according to another embodiment of the invention;
      <br/>
      FIG. 5 is a flow diagram of mobile message processing according to an embodiment of the invention;
      <br/>
      FIG. 6A is a block diagram of a representative communication system for use with the invention;
      <br/>
      FIG. 6B is a block diagram of a message server according to an embodiment of the invention;
      <br/>
      FIG. 7A is a block diagram of a network gateway suitable for use with the representative communication system illustrated in FIG. 6; and
      <br/>
      FIG. 7B is a block diagram of mobile device suitable for use with the representative communication system illustrated in FIG. 6.
    </p>
    <heading>DETAILED DESCRIPTION OF THE INVENTION</heading>
    <p num="20">
      The invention relates to improved techniques for providing reference numbers for purposes of fragmenting a message for transmission over a network (e.g., a wireless data network) supporting only a limited size message.
      <br/>
      The reference numbers for the fragmented messages are shared by groups of destinations (e.g., subscribers or mobile devices).
      <br/>
      As a result, the number of reference numbers to be stored is small compared to the number of possible destinations, and the size of the reference numbers themselves is also kept small.
      <br/>
      The number of groupings and the size of the reference numbers can also be adjusted to fit system objectives.
    </p>
    <p num="21">Embodiments of the invention are discussed below with reference to FIGS. 1-7B. However, those skilled in the art will readily appreciate that the detailed description given herein with respect to these figures is for explanatory purposes as the invention extends beyond these limited embodiments.</p>
    <p num="22">
      FIG. 1 is a block diagram of a wireless communication network 100 according to an embodiment of the invention.
      <br/>
      The wireless communication system 100 includes a sever 102, a wireless network 104, and mobile devices 106.
      <br/>
      There are n mobile devices 106-1 through 106-n.
      <br/>
      The server 102 is typically a computer system that operates to send and receive messages to and from the mobile devices 106.
      <br/>
      The messages are generally blocks of data that are to be transmitted to the mobile device 106.
      <br/>
      As examples, the data can pertain to various types of notifications, electronic mail, news data, etc.
      <br/>
      The server 102 may also connect to other wired or wireless networks to receive messages from or forward messages to other computer systems.
      <br/>
      As an example, the server 102 can be connected to the Internet.
      <br/>
      For example, the server 102 can be a link server coupled to the Internet or a network gateway coupled to a network.
    </p>
    <p num="23">
      The wireless network 104 typically uses radio transmissions to communicate with the mobile devices 106.
      <br/>
      The wireless network 104 can use a variety of different networks and communication protocols.
      <br/>
      Examples of wireless networks include Cellular Digital Packet Data (CDPD), Global System for Mobile Communications (GSM), Code Division Multiple Access (CDMA) and Time Division Multiple Access (TDMA) to name a few, and each of these wireless networks has different data transfer characteristics such as latency, bandwidth, protocols and connection methods.
      <br/>
      As examples, protocols can be Internet Protocol (IP), Short Messaging System (SMS) and Unstructured Supplementary Service Data (USSD), and connection methods can include packet switched or circuit switched.
    </p>
    <p num="24">
      As an example, a message to be sent by the server 102 to the mobile device 106-2 would contain an address that particularly identifies the mobile device 106-2.
      <br/>
      The message is then provided by the server 102 to the wireless network 104.
      <br/>
      For example, a typical wireless data network is a packet switched networks using a Small Message Server Center (SMSC) which has a maximum packet size of 140 bytes.
      <br/>
      The wireless network 104 causes the message to be properly routed to the mobile device 106-2 (i.e., in accordance with the address).
      <br/>
      The transmission between the wireless network 104 and mobile device 106-2 is wireless.
      <br/>
      The mobile device 106-2 receives the message that has been transmitted the wireless network 104.
      <br/>
      The mobile device 106-2 can then store the message and perform predetermined processing actions such as, for example, notifying a user of the mobile device 106-2 of the reception of the message.
    </p>
    <p num="25">
      The messages that are transmitted to the mobile devices 106 via the wireless network 104 are often limited in size due to the wireless network 104.
      <br/>
      For example, when the wireless network 104 is a wireless data network using packet switching, then there is a maximum packet size for use on the wireless network 104.
      <br/>
      As such, if a message is larger than the maximum packet size for the wireless network 104, then the message must be fragmented for transmission and then later reassembled upon reception.
      <br/>
      In effect, then, fragmentation is a process that divides a message into several smaller sub-messages, such that each of the sub-messages is able to fit within a single packet of the wireless network 104.
      <br/>
      The sub-messages are then transmitted in order to the appropriate one of the mobile devices 106.
      <br/>
      Thereafter, at the mobile device 106, the sub-messages are reassembled to form the original message.
      <br/>
      Additional details on the fragmentation of a message to be transmitted are provided below with reference to FIGS. 2-4.
    </p>
    <p num="26">
      FIG. 2 illustrates a fragmentation process 200 according to an embodiment of the invention.
      <br/>
      An original message 202 that is to be transmitted is provided to a server, such as the server 102 illustrated in FIG. 1.
      <br/>
      The message 202 generally has a format that includes a header portion (H) and a data portion (DATA).
      <br/>
      It is assumed that the message 202 has a size that exceeds a maximum packet size for the wireless data network (e.g., the wireless network 104 illustrated in FIG. 1).
      <br/>
      As such, the message 202 needs to undergo a fragmentation process to produce multiple smaller sub-messages.
      <br/>
      According to the fragmentation process 200 illustrated in FIG. 2, the original message 202 is fragmented to form x sub-messages.
      <br/>
      Of the x sub-messages, sub-messages 204, 206, 208 and 210 are illustrated in FIG. 2.
      <br/>
      The representative format for each of the sub-messages 204, 206, 208 and 210 includes a reference number (Rn), a series number (Sn), an address (A), and data (DATA).
      <br/>
      For example, for the sub-message 210, the format includes the reference number (Rn), the series number (Sn+x), the address (A), and the data (DATAx).
      <br/>
      Note that for each of the fragments or sub-messages, the reference number (Rn) is the same because it refers to the original message 202.
      <br/>
      The reference number (Rn) is used to ensure that the mobile device 106 receiving the fragments or sub-messages from various different messages is able to reassemble the fragments or sub-messages to form the appropriate messages.
      <br/>
      The series number (Sn) typically starts at 0 or 1 and is incremented with each successive fragment or sub-message.
      <br/>
      The series number (Sn) thus identifies the number of the fragment or sub message for a given message which is also needed for reassembly.
      <br/>
      The address (A) is the same for all of the fragments or sub-messages because the address (A) points to a particular one of the mobile devices 106 that is to receive the original message 202.
      <br/>
      The data (DATA0 -DATAx) in each of the fragments or sub-messages is different and represents a portion of the data (DATA) associated with the original message 202.
      <br/>
      FIGS. 3A, 3B and 4 detail the transmission and reception of an original message in a fragmented fashion.
    </p>
    <p num="27">
      FIGS. 3A and 3B are flow diagrams of server processing 300 according to an embodiment of the invention.
      <br/>
      The server processing 300 is, for example, performed by the server 102 illustrated in FIG. 1.
      <br/>
      In general, the task of the server processing 300 is to forward any messages received to the appropriate mobile devices.
    </p>
    <p num="28">
      The server processing 300 initially begins with a decision block 302 that determines whether a message has been received.
      <br/>
      If the decision block 302 determines that a message has not been received, then the server processing 300 awaits the reception of a message.
      <br/>
      On the other hand, when the decision block 302 determines that a message has been received, then the server processing 300 continues to process the message.
    </p>
    <p num="29">
      Once a message has been received, the size of the message is obtained 304.
      <br/>
      Typically, the message has a header portion and a data portion.
      <br/>
      Among other things, the header portion contains the size of the message.
      <br/>
      A decision block 306 then determines whether the size of the message is greater than a predetermined maximum size.
      <br/>
      The predetermined maximum size corresponds with a maximum packet size for a wireless data network.
      <br/>
      The wireless data network can, for example, be a packet switched network or a circuit switched network.
      <br/>
      In the case where the wireless data network is a narrowband packet switched network (e.g., SMS network), a typical maximum size would be 140 bytes.
      <br/>
      In the case where the wireless data network is a circuit switched network, a typical maximum size would be 1492 bytes.
      <br/>
      When the decision block 306 determines that the message size is not greater than the predetermined maximum size, then fragmentation is not required.
      <br/>
      Hence, in such cases, the message is sent 308 to the appropriate mobile device via the wireless data network.
      <br/>
      Following block 308, the server processing 300 is complete and ends.
    </p>
    <p num="30">
      On the other hand, when the decision block 306 determines that the message size is greater than the predetermined maximum size, then fragmentation is required.
      <br/>
      The fragmentation of the message is then performed as follows.
      <br/>
      The server processing 300 initially determines 310 a group number for the message.
      <br/>
      The group number identifies one of a plurality of groups of mobile devices, with each of the groups containing a different set of mobile devices.
      <br/>
      After the group number is determined 310, a reference number is obtained 312 based on the group number.
      <br/>
      The reference number obtained is used to transmit all the fragments of the message to the mobile device that is to receive the message.
      <br/>
      The size of the reference number can vary but is, for example, on the order of 8-16 bits.
      <br/>
      After obtaining the reference number the message can be fragmented 314 using the reference number.
      <br/>
      In other words, as illustrated in FIG. 2, the reference number is obtained and then used to encode within the fragments or sub-messages a reference (i.e., reference number) to a particular original message such that the mobile device upon receiving the fragments or sub-messages is able to reconstruct the original message.
      <br/>
      As shown in FIG. 2, each fragment or sub-message for a given message includes the same reference number (Rn).
    </p>
    <p num="31">
      After the fragments or sub-messages are created, an initial fragment is sent 316 to the appropriate mobile device.
      <br/>
      The appropriate mobile device is that mobile device having the same address as the address contained in the initial fragment.
      <br/>
      Next, a decision block 318 determines whether there are additional fragments to be sent.
      <br/>
      When the decision block 318 determines that there are additional fragments to be sent, a next fragment is then sent 320.
      <br/>
      Again, the next fragment is sent 320 to the appropriate mobile device in the same manner as was the initial fragment.
      <br/>
      Following block 320, the server processing 300 returns to repeat the decision block 318 and subsequent blocks.
      <br/>
      When the last fragment comes, a flag in the last fragment indicating the end of the message is turned on.
      <br/>
      The flag helps the appropriate mobile device to properly reconstruct the message from the sequence of received fragments.
      <br/>
      Once the decision block 318 determines that there are no more fragments to be sent, then the server processing 300 is complete and ends.
    </p>
    <p num="32">
      FIG. 4 is a partial flow diagram of reference number determination processing 400 according to another embodiment of the invention.
      <br/>
      The reference number determination processing 400 is, for example, suitable for use for blocks 310 and 312 of the server processing 300 illustrated in FIG. 3A. The reference number determination processing 400 operates to initially obtain 402 an address from the message.
      <br/>
      As noted previously, the message contains an address in its header portion.
      <br/>
      Hence, in block 402, the address is obtained from the message.
      <br/>
      After the address for the message is obtained, then a hash function is performed 404 on the address to determine a group number.
      <br/>
      Here, the hash function is used to select a group number based on the address of the message.
      <br/>
      In one embodiment, the group number is in effect randomly chosen by the hash function which uses the address of the mobile device that is to receive the message as an input to the hash function.
      <br/>
      In one embodiment, the address input to the hash function can include the address of the mobile device and a port number.
      <br/>
      In wireless networks, the address of the mobile device is typically an Internet Protocol (IP) address or a phone number (i.e., MSISDN number).
    </p>
    <p num="33">
      Once the group number is determined, a reference number associated with the group number is obtained 406 from a group number reference table.
      <br/>
      For each group number, there is a reference number of a certain size that is used with a fragmented message to inform the mobile device receiving the fragments that they belong to a particular message.
      <br/>
      Each time the reference number is used in sending a message to a mobile device within a particular group, the reference number is incremented.
      <br/>
      An exemplary group number reference table is illustrated below with respect to Table 1.
      <br/>
      Thereafter, the reference number determination processing 400 is completed and processing thereafter follows the processing of the server processing 300 beginning with block 314 in FIG. 3B.
    </p>
    <p num="34">
      Although block 404 used a hash function to determine the group number, a variety of other operations can be performed to determine the group number.
      <br/>
      It was noted above that one suitable hash function provides an essentially random distribution of the mobile devices to the groups.
      <br/>
      Some other more complicated approaches to determine the group number for mobile devices can include statistical analysis of traffic on the wireless data network to the mobile devices.
      <br/>
      Another approach would be to estimate the traffic to mobile devices based on the amount of services subscribed to by the mobile devices.
      <br/>
      In such cases, measured or estimated traffic load can be used to balance the message load across the groups by appropriately assigning the mobile devices to groups.
    </p>
    <p num="35">Table 1 below illustrates a representative reference number table suitable for use with the reference number determination processing 400 illustrated in FIG. 4.</p>
    <p num="36">
      --           TABLE 1
      <br/>
      --           Reference Number Group Number
      <br/>
      --           Rn1         GP1
      <br/>
      --           Rn2         GP2
      <br/>
      --           Rn3         GP3
      <br/>
      --           Rn4         GP4
      <br/>
      --           Rn5         GP5
      <br/>
      --           .                .
      <br/>
      --           .                .
      <br/>
      --           .                .
      <br/>
      --           Rnj         GPj
    </p>
    <p num="37">
      An example of how the reference number table is utilized is described below.
      <br/>
      For example, in a wireless network supporting one million subscribers, a reference number table can have 256 entries, with each entry containing a 16 bit unsigned integer for one of the groups.
      <br/>
      In such an embodiment, on average, each of the 256 groups support about 3906 subscribers.
      <br/>
      The 16 bit unsigned integer provides 65,536 unique reference numbers before repeating.
      <br/>
      Given that there are only 3906 subscribers (instead of one million), the 16 bits for the reference number is sufficiently large to effectively prevent the same mobile device from ever receiving two messages with the same reference number and thus be unable to reassemble the messages.
    </p>
    <p num="38">
      Assume that the input to the hash function is an address (i.e., IP address) and a port number.
      <br/>
      A representative hash function is then an exclusive-OR of all four bytes of the IP address (IP1, IP2, IP3 and IP4) and all two bytes of the port number (P1 and P2), namely in accordance with Equation 1 below.
    </p>
    <p num="39">IP1.sym.IP2.sym.IP3.sym.IP4.sym.P1.sym.P2 =hash value  (1)</p>
    <p num="40">
      For example, if the IP address is "204.163.165.111" and the port number is "8502", then the hash value (or hash result) is 178.
      <br/>
      Specifically, the hash value is determined as follows:
      <br/>
      11001100.sym.10100011.sym.10100101.sym.01101111.sym.00100001.sym.00110110 =10110010=178
    </p>
    <p num="41">
      Thus, the reference number stored in the 178th entry of the reference number table is selected for the message to be sent to the address and the port number.
      <br/>
      Hence, all the fragments or sub-messages for the message will include the selected reference number.
    </p>
    <p num="42">
      After the selected reference number is retrieved from the reference number table, the reference number stored in the reference number table is incremented.
      <br/>
      For example, if the reference number stored in the 178th entry of the reference number table when read is 10, then after the reference number is read, the stored reference number is incremented to 11.
      <br/>
      As a result, the next message directed to the same group will receive a different reference number.
      <br/>
      Thus, the likelihood that the same mobile device would ever receive two messages with the same reference number is very low.
    </p>
    <p num="43">
      FIG. 5 is a flow diagram of mobile message processing 500 according to an embodiment of the invention.
      <br/>
      The mobile message processing 500 concerns the reception of messages transmitted in a fragmented manner.
      <br/>
      The mobile message processing 500 is, for example, performed by the mobile devices 106 illustrated in FIG. 1.
    </p>
    <p num="44">
      The mobile message processing 500 initially beings with a decision block 502 that determines whether a message fragment (or sub-message) has been received.
      <br/>
      When the decision block 502 determines that no message fragment has been received, then the mobile message processing 500 awaits the reception of a message fragment.
      <br/>
      On the other hand, once the decision block 502 determines that a message fragment has been received, the mobile message processing 500 continues.
    </p>
    <p num="45">
      When the mobile message processing 500 continues, a decision block 504 determines whether the message contains a new reference number.
      <br/>
      When the decision block 504 determines that the message fragment does contain a new reference number, then a buffer is created 506 for the message.
      <br/>
      The reference number is considered new when the mobile device is not already processing the reception of fragments of a message that are using the same reference number.
      <br/>
      On the other hand, when the decision block determines that the message fragment does not contain a new reference number, then the buffer associated with the reference number of the message fragment is located 508.
    </p>
    <p num="46">
      Following either block 508 or block 506, the message fragment is stored 510 in the appropriate buffer.
      <br/>
      Note that for each incoming message fragment, the reference number serves to not only indicate whether the mobile device is already processing the message but also whether or not a new buffer is required for a new message or where the appropriate buffer already created is located for storing the subsequent message fragments.
    </p>
    <p num="47">
      Following block 510, a decision block 512 determines whether the message fragment is the last fragment of the message.
      <br/>
      There are a variety of different ways for the mobile message processing 500 to determine whether the message fragment is the last fragment of the message.
      <br/>
      One example is for the fragments or sub-messages to indicate the total number of fragments associated with the message, and then have the mobile message processing 500 count the number of fragments that have been stored in the appropriate buffer.
      <br/>
      In any event, when the decision block 512 determines that the message fragment that has been received is not the last fragment for the message, then the processing returns to repeat the decision block 502 and subsequent blocks for each of the remaining message fragments that are still to be received.
      <br/>
      Because the message fragments often arrive at the mobile device out of order, the determination in block 512 of whether the last fragment has been received concerns whether all the fragments of a given message have been received, regardless of the order in which they were received.
      <br/>
      Once the decision block 512 determines that the message fragment received is the last message fragment for the message then a mobile message processing 500 is complete and ends.
    </p>
    <p num="48">
      The mobile message processing 500 is, for example, described with respect to the reception of message fragments from a single message.
      <br/>
      However, those skilled in the art should recognize that often the mobile device operates to receive message fragments from multiple messages and thus the fragments tend to come out of order and overlapped with other different messages.
      <br/>
      Hence, the mobile message processing 500 can operate to track the number fragments received for each of the messages as well as the buffer locations where the fragments of the messages are stored.
      <br/>
      Once all of the message fragments for a particular message are received, then the mobile message processing 500 is complete as with respect to that particular message, but other messages may be ongoing and thus the processing would continue for those messages.
    </p>
    <p num="49">
      FIG. 6A is a block diagram of a representative communication system 600 for use with the invention.
      <br/>
      The communication system 600 includes a wired section 602 and a wireless section 604.
      <br/>
      The wired section 602 includes a network 606 and a network gateway 608.
      <br/>
      In one embodiment, the network 606 is the Internet, which represents a large number of interconnected computers.
      <br/>
      In another embodiment, the network 606 is an intranet or private network of computers.
    </p>
    <p num="50">
      The network gateway 608 operates to provide a gateway from the wired section 602 and the wireless section 604.
      <br/>
      The network gateway 608 serves as a primary transition point between the wireless communication of the wireless section 604 and the wired communication of the wired section 604.
      <br/>
      The network gateway 608 receives the incoming content request from the carrier network 614 and performs protocol conversion as necessary.
      <br/>
      The network gateway 608 will normally perform some protocol translation and other account management and verification operations.
      <br/>
      The network gateway 608 includes an account information storage area 610 that stores account, configuration and other information.
      <br/>
      The wireless section 604 includes a carrier network 614 and at least one remote wireless computing device 616.
      <br/>
      According to the invention, the network gateway 608 also receives messages from the network 606 and forwards them to the appropriate remote computing devices.
      <br/>
      In such case, the network gateway 608 also stores a reference number table 617 to provide for the sharing of reference numbers among a group of mobile devices.
    </p>
    <p num="51">
      The remote computing device 616 can, for example, be a mobile phone, a Personal Digital Assistant (PDA), or a portable general purpose computer.
      <br/>
      The remote wireless computing device 616 includes a display 618 for displaying screens or pages of information, a remote wireless browser 620, and navigation buttons 622 and 624.
      <br/>
      The remote wireless browser 620 is usually an application program that executes on the remote computing device 616.
      <br/>
      The remote wireless browser 620 provides the screens or pages of information to be displayed on the display 618.
      <br/>
      The navigation buttons 622 and 624 allow a user to navigate through or make selections from menus or lists being displayed on the display 618 by the remote wireless browser 620.
      <br/>
      The remote wireless computing device 616 can also include an alphanumeric keypad (not shown) that allows a user to enter alphanumeric information with respect to the mobile telephone 616, though such is not necessary as alphanumeric information can also be entered using a dial screen displayed on the display 618 with selections being made using the navigation buttons 622 and 624.
      <br/>
      By interacting with the remote wireless browser 620, a user is able to access information located on the network 606.
    </p>
    <p num="52">
      Typically, the wireless section 604 will include a plurality of remote wireless browsers 620, each of which executes on a different remote computing device.
      <br/>
      The configuration and other information stored in the account information storage area 610 can store service limitations, security limitations, preference information, screen configuration information, and the like for each of the remote wireless browsers 620.
      <br/>
      The account information storage area 610 can also store data or pages of data that are of interest to the remote wireless browsers 620.
      <br/>
      The stored data or pages can operate as a cache of information previously requested from the network 606 or can operate as an information server within the network gateway 608.
      <br/>
      For example, as an information server, the storage pages can represent pages to be displayed by the remote wireless browsers.
    </p>
    <p num="53">
      FIG. 6B is a block diagram of a message server 650 according to an embodiment of the invention.
      <br/>
      The message server 650 is, for example, includes within the server 102 illustrated in FIG. 1 or the network gateway 608 illustrated in FIG. 6A.
    </p>
    <p num="54">
      The message server 650 operates to receive messages to be transmitted to mobile devices, fragments the messages as necessary, and then transmits the messages to the appropriate mobile device through a wireless data network.
      <br/>
      The message server 650 includes a message buffer 652 that receives and stores an incoming message.
      <br/>
      A group determination unit 654 determines a group number for the message.
      <br/>
      The group number identifies a group associated with the particular mobile device.
      <br/>
      There are a plurality of mobile devices within each of the groups.
      <br/>
      A reference number table 656 stores a different reference number for each of the groups.
      <br/>
      Once the group number is determined, a suitable reference number is read from the reference number table 656.
      <br/>
      A fragmentation unit 658 receives a particular reference number from said reference number table based on the group number for the message and receives the message from the message buffer.
      <br/>
      The fragmentation unit 658 then operates to fragment the message into sub-messages, with each of the sub-messages including the particular reference number and a portion of the message.
      <br/>
      A message transmission unit 660 receives the sub-messages from the fragmentation unit 658 and then transmits the sub-messages to the appropriate mobile device.
    </p>
    <p num="55">
      FIG. 7A is a block diagram of a network gateway 700 suitable for use with the representative communication system 600 illustrated in FIG. 6.
      <br/>
      The network gateway 700 can, for example, represent the network gateway 708 illustrated in FIG. 6 which is typically a server computer.
      <br/>
      To avoid obscuring aspects of the present invention, well known methods, procedures, components, and circuitry in the network gateway 700 are not described in detail.
    </p>
    <p num="56">
      The network gateway 700 includes a User Datagram Protocol (UDP) interface 702 that couples to the carrier network 614, an HTTP interface 704 that couples to the network 606, and a server module 706 coupled between the UDP interface 702 and the HTTP interface 704.
      <br/>
      The server module 706 performs traditional server processing pass as well as protocol conversion processing.
      <br/>
      In particular, the protocol conversion processing includes protocol conversion between UDP and HTTP.
      <br/>
      The server module 706 also performs the processing associated with message fragmentation and delivery described above with respect to FIGS. 3A-4. Further, to assist the server module 706 in its processing, the proxy server 700 includes a random access memory (RAM) 708 and a read-only memory (ROM) 710. Among other things, the RAM 708 will store device identifiers, subscriber identifiers, configuration information, and alias conversion information.
      <br/>
      In one embodiment, such information is stored in the RAM 710 as a database.
      <br/>
      Also, the RAM 710 can represent the account information storage area 610 illustrated in FIG. 6.
      <br/>
      Either the RAM 708 or the ROM 710 can be used to store the reference number table 617 illustrated in FIG. 6.
    </p>
    <p num="57">
      FIG. 7B is a block diagram of mobile device 750 suitable for use with the representative communication system 600 illustrated in FIG. 6.
      <br/>
      The mobile device 750 can, for example, correspond to the remote computing device 618 that operates the remote wireless browser 616 illustrated in FIG. 6.
    </p>
    <p num="58">
      The mobile device 750 includes a UDP interface 752 that couples to the carrier network 614 via a RF transceiver 753 to receive incoming and outgoing signals.
      <br/>
      A device identifier (ID) storage 754 supplies a device ID to the UDP interface 752.
      <br/>
      The device ID identifies a specific code that is associated with a particular mobile device 750.
      <br/>
      In addition, the mobile device 750 includes a client module 756 that performs many of the processing tasks performed by the mobile device 750 including establishing a communication session with the carrier network 714 and the network gateway 608, requesting and receiving data (e.g., pages) from the network 606, displaying information on a display of the remote computing device, and receiving user input.
      <br/>
      The client module 756 is coupled to the UDP interface 752 for the establishment of a communication session and the requesting and receiving of data.
      <br/>
      The client module 756 also performs the processing associated with the reception of the messages transmitted from the gateway computer 608, 700, including the reassembling of messages from fragments or sub-messages.
      <br/>
      The client module 756 controls the display driver 758 to display information on the display 760 to the user.
      <br/>
      Additionally, the client module 756 is coupled to an input device 762, a ROM 764, and a RAM 766.
      <br/>
      Preferably, among other things, the client module 756 operates a network browser, such as a Handheld Device Markup Language (HDML) web browser.
      <br/>
      The input device 762 allows a user of the mobile device 750 to input data and thus make selections in controlling and using the mobile device 750.
      <br/>
      The ROM 764 stores predetermined data and processing instructions for the client module 756.
      <br/>
      The RAM 766 is used to provide temporary data storage for incoming and outgoing data being received and transmitted.
    </p>
    <p num="59">
      Although embodiments of the network gateway 700 and the mobile device 750 described in FIGS. 7A and 7B using UDP and HTTP protocols, it should be recognized that other protocols and other protocol stacks can be provided and utilized.
      <br/>
      Additional details on the design and construction of the network gateway 700 and the mobile device 750 are contained in U.S. patent application Ser.
      <br/>
      No. 08/570,210 entitled "METHOD AND ARCHITECTURE FOR AN INTERACTIVE TWO-WAY DATA COMMUNICATION NETWORK" by Alain Rossmann, which is hereby incorporated by reference in its entireties.
    </p>
    <p num="60">
      The advantages of the invention are numerous.
      <br/>
      One advantage of the invention is that transmission of the appropriate reference number with each fragment or sub-message does not severely impinge upon the available transmission bandwidth because the reference number can be kept relatively small.
      <br/>
      Another advantage of the invention is that a server for receiving messages to be transmitted need not store large amount of data because only reference numbers for a limited number of groups need be stored.
      <br/>
      Still another advantage of the invention is that the size of the reference numbers and the number of groups which share reference numbers can both be adjusted as desired to meet system objectives.
    </p>
    <p num="61">
      The many features and advantages of the present invention are apparent from the written description, and thus, it is intended by the appended claims to cover all such features and advantages of the invention.
      <br/>
      Further, since numerous modifications and changes will readily occur to those skilled in the art, it is not desired to limit the invention to the exact construction and operation as illustrated and described.
      <br/>
      Hence, all suitable modifications and equivalents may be resorted to as falling within the scope of the invention.
    </p>
  </description>
  <claims format="original" lang="en" id="claim_en">
    <claim num="1">
      <claim-text>What is claimed is:</claim-text>
      <claim-text>1.</claim-text>
      <claim-text>A method for transmitting a message over a data network having a preferred message size, said method comprising:</claim-text>
      <claim-text>receiving the message to be transmitted over the data network, the message including at least message data; obtaining a message size for the message; determining whether the message size is greater than the preferred message size; determining a group number for the message; obtaining a reference number for the message based on the group number; fragmenting the message to a plurality of message fragments when the message size is determined to be greater than the preferred message size, each of the plurality of the message fragments having a length not longer than the preferred message size and including at least a portion of the message data and the reference number but not including the group number;</claim-text>
      <claim-text>and thereafter transmitting the message fragments sequentially over the data network.</claim-text>
    </claim>
    <claim num="2">
      <claim-text>2. A method as recited in claim 1, wherein each of the plurality of the message fragments comprises a destination address included in the message and a sequence number to signify an order in the message.</claim-text>
    </claim>
    <claim num="3">
      <claim-text>3. A method as recited in claim 1, wherein said obtaining the reference number for the message comprises: indexing into a reference number table using the group number to select one of a plurality of reference numbers within the reference number table, each of the reference numbers being associated with a different group.</claim-text>
    </claim>
    <claim num="4">
      <claim-text>4. A method as recited in claim 3, wherein said determining of the group number comprises: obtaining an address from the message;</claim-text>
      <claim-text>and determining the group number based on the address from the message.</claim-text>
    </claim>
    <claim num="5">
      <claim-text>5. A method as recited in claim 4, wherein each of the plurality of message fragments comprises the address and a sequence number to signify an order in the message.</claim-text>
    </claim>
    <claim num="6">
      <claim-text>6. A method for transmitting a message over a data network having a limited message size, said method comprising: receiving the message to be transmitted over the data network; obtaining a message size for the message; determining whether the message size is greater than the limited message size; determining a group number for the message, said determining of the group number includes at least obtaining the destination address from the message, and determining the group number based on the destination address from the message; obtaining a reference number for the message based on the group number; fragmenting the message to a plurality of message fragments when the message size is determined to be greater than the limited message size, each of the plurality of the message fragments having a length not longer than the limited message size and including the reference number;</claim-text>
      <claim-text>and thereafter transmitting the message fragments sequentially over the data network.</claim-text>
    </claim>
    <claim num="7">
      <claim-text>7. A method for transmitting a message over a data network having a preferred message size, said method comprising: receiving the message to be transmitted over the data network; obtaining a message size for the message; determining whether the message size is greater than the preferred message size; determining a group number for the message, said determining of the group number includes at least obtaining an address from the message, and performing a hash function on the address from the message to determine the group number for the message; obtaining a reference number for the message based on the group number; fragmenting the message to a plurality of message fragments when the message size is determined to be greater than the preferred message size, each of the plurality of the message fragments having a length not longer than the preferred message size and including the reference number;</claim-text>
      <claim-text>and thereafter transmitting the message fragments sequentially over the data network.</claim-text>
    </claim>
    <claim num="8">
      <claim-text>8. A method as recited in claim 7, wherein the hash function operates substantially randomly with respect to determining the group number from the address from the message.</claim-text>
    </claim>
    <claim num="9">
      <claim-text>9. A method as recited in claim 7, wherein said obtaining the reference number for the message comprises: indexing into a reference number table using the group number to select one of a plurality of reference numbers within the reference number table, each of the reference numbers being associated with a different group.</claim-text>
    </claim>
    <claim num="10">
      <claim-text>10. A computer readable medium storing computer program code for transmitting a message over a data network having a limited message length, the message being transmitted to a receiving device, said computer readable medium comprising: computer program code for receiving the message to be transmitted the message including at least message data; computer program code for determining a group number for the message; computer program code for obtaining a reference number for the message based on the group number; computer program code for fragmenting the message to a plurality of message fragments, each of the message fragments having a length not longer than the limited message length and including at least a portion of the message data and the reference number but not including the group number;</claim-text>
      <claim-text>and computer program code for transmitting the message fragments over the data network.</claim-text>
    </claim>
    <claim num="11">
      <claim-text>11. A computer readable medium as recited in claim 10, wherein the reference number is one of a plurality of reference numbers, each of the reference numerals is shared by a group of the receiving devices so that the size of the reference number is reduced.</claim-text>
    </claim>
    <claim num="12">
      <claim-text>12. A computer readable medium as recited in claim 10, wherein the message fragments of the message are transmitted over a wireless communication protocol in the data network.</claim-text>
    </claim>
    <claim num="13">
      <claim-text>13. A computer readable medium as recited in claim 12, wherein said computer program code for fragmenting the message to a plurality of message fragments comprises: computer program code for obtaining a message size for the message;</claim-text>
      <claim-text>and computer program code for determining whether the message size is greater than the limited message length, and wherein when the message size is not greater than the limited message length, avoiding performance of said computer program code for fragmenting, and then transmitting the message without fragmentation.</claim-text>
    </claim>
    <claim num="14">
      <claim-text>14. A computer readable medium as recited in claim 10, wherein said computer program code for determining of the group number comprises: computer program code for obtaining an address from the message;</claim-text>
      <claim-text>and computer program code for determining the group number based on the address from the message.</claim-text>
    </claim>
    <claim num="15">
      <claim-text>15. A computer readable medium as recited in claim 10, wherein said computer program code for determining of the group number comprises: computer program code for obtaining an address from the message;</claim-text>
      <claim-text>and computer program code for performing a hash function on the address from the message to determine the group number for the message.</claim-text>
    </claim>
    <claim num="16">
      <claim-text>16. A computer readable medium as recited in claim 15, wherein the hash function operates substantially randomly with respect to determining the group number from the address from the message.</claim-text>
    </claim>
    <claim num="17">
      <claim-text>17. A computer readable medium as recited in claim 15, wherein said computer program code for obtaining the reference number for the message comprises: computer program code for indexing into a reference number table using the group number to select one of a plurality of reference numbers within the reference number table, each of the reference numbers being associated with a different group.</claim-text>
    </claim>
    <claim num="18">
      <claim-text>18. A computer readable medium as recited in claim 10, wherein said computer program code for obtaining the reference number for the message comprises: computer program code for indexing into a reference number table using the group number to select one of a plurality of reference numbers within the reference number table, each of the reference numbers being associated with a different group.</claim-text>
    </claim>
    <claim num="19">
      <claim-text>19. A computer readable medium as recited in claim 18, wherein said computer program code for determining of the group number comprises: computer program code for obtaining the address from the message;</claim-text>
      <claim-text>and computer program code for determining the group number based on the address from the message.</claim-text>
    </claim>
    <claim num="20">
      <claim-text>20. A computer readable medium as recited in claim 19, wherein the message is transmitted over a wireless communication protocol in the data network.</claim-text>
    </claim>
    <claim num="21">
      <claim-text>21. An apparatus for transmitting messages through a data network to mobile devices, said apparatus comprising: a message buffer for storing a message to be transmitted to a particular mobile device over the data network a group determination unit operatively connected to said message buffer, said group determination unit determines a group number for the message, the group number identifying a group associated with the particular mobile device; a reference number table operatively connected to said group determination unit said reference number table associating a different one of a plurality of reference numbers with each of the groups; a fragmentation unit operatively connected to said reference number table and said message buffer, wherein said fragmentation unit receives a particular reference number from said reference number table based on the group number for the message and receives the message from the message buffer, and said fragmentation unit operates to fragment the message into sub-messages, with each of the sub-messages including the particular reference number and a portion of the message;</claim-text>
      <claim-text>and a message transmission unit, said message transmission unit transmits the sub-messages to the particular mobile device.</claim-text>
    </claim>
    <claim num="22">
      <claim-text>22. An apparatus as recited in claim 21, wherein the sub-messages are sequentially transmitted over the data network.</claim-text>
    </claim>
  </claims>
</questel-patent-document>