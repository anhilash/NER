<?xml version="1.0" encoding="UTF-8"?>
<questel-patent-document lang="en" date-produced="20180805" produced-by="Questel" schema-version="3.23" file="US06181500B2.xml">
  <bibliographic-data lang="en">
    <publication-reference publ-desc="Granted patent as second publication">
      <document-id>
        <country>US</country>
        <doc-number>06181500</doc-number>
        <kind>B2</kind>
        <date>20010130</date>
      </document-id>
      <document-id data-format="questel">
        <doc-number>US6181500</doc-number>
      </document-id>
    </publication-reference>
    <original-publication-kind>B2</original-publication-kind>
    <application-reference is-representative="YES" family-id="22040467" extended-family-id="42108000">
      <document-id>
        <country>US</country>
        <doc-number>09062140</doc-number>
        <kind>A</kind>
        <date>19980417</date>
      </document-id>
      <document-id data-format="questel">
        <doc-number>1998US-09062140</doc-number>
      </document-id>
      <document-id data-format="questel_Uid">
        <doc-number>43164347</doc-number>
      </document-id>
    </application-reference>
    <language-of-filing>en</language-of-filing>
    <language-of-publication>en</language-of-publication>
    <priority-claims>
      <priority-claim kind="national" sequence="1">
        <country>US</country>
        <doc-number>6214098</doc-number>
        <kind>A</kind>
        <date>19980417</date>
        <priority-active-indicator>Y</priority-active-indicator>
      </priority-claim>
      <priority-claim data-format="questel" sequence="1">
        <doc-number>1998US-09062140</doc-number>
      </priority-claim>
    </priority-claims>
    <dates-of-public-availability>
      <publication-of-grant-date>
        <date>20010130</date>
      </publication-of-grant-date>
    </dates-of-public-availability>
    <classifications-ipcr>
      <classification-ipcr sequence="1">
        <text>G11B   5/596       20060101A N20051008RMEP</text>
        <ipc-version-indicator>
          <date>20060101</date>
        </ipc-version-indicator>
        <classification-level>A</classification-level>
        <section>G</section>
        <class>11</class>
        <subclass>B</subclass>
        <main-group>5</main-group>
        <subgroup>596</subgroup>
        <classification-value>N</classification-value>
        <generating-office>
          <country>EP</country>
        </generating-office>
        <classification-status>R</classification-status>
        <classification-data-source>M</classification-data-source>
        <action-date>
          <date>20051008</date>
        </action-date>
      </classification-ipcr>
      <classification-ipcr sequence="2">
        <text>G11B  20/18        20060101A I20051008RMEP</text>
        <ipc-version-indicator>
          <date>20060101</date>
        </ipc-version-indicator>
        <classification-level>A</classification-level>
        <section>G</section>
        <class>11</class>
        <subclass>B</subclass>
        <main-group>20</main-group>
        <subgroup>18</subgroup>
        <classification-value>I</classification-value>
        <generating-office>
          <country>EP</country>
        </generating-office>
        <classification-status>R</classification-status>
        <classification-data-source>M</classification-data-source>
        <action-date>
          <date>20051008</date>
        </action-date>
      </classification-ipcr>
      <classification-ipcr sequence="3">
        <text>G11B  21/08        20060101A I20051008RMEP</text>
        <ipc-version-indicator>
          <date>20060101</date>
        </ipc-version-indicator>
        <classification-level>A</classification-level>
        <section>G</section>
        <class>11</class>
        <subclass>B</subclass>
        <main-group>21</main-group>
        <subgroup>08</subgroup>
        <classification-value>I</classification-value>
        <generating-office>
          <country>EP</country>
        </generating-office>
        <classification-status>R</classification-status>
        <classification-data-source>M</classification-data-source>
        <action-date>
          <date>20051008</date>
        </action-date>
      </classification-ipcr>
    </classifications-ipcr>
    <classification-national>
      <country>US</country>
      <main-classification>
        <text>360053000</text>
        <class>360</class>
        <subclass>053000</subclass>
      </main-classification>
      <further-classification sequence="1">
        <text>G9B020046</text>
        <class>G9B</class>
        <subclass>020046</subclass>
      </further-classification>
      <further-classification sequence="2">
        <text>G9B021014</text>
        <class>G9B</class>
        <subclass>021014</subclass>
      </further-classification>
    </classification-national>
    <classifications-ecla>
      <classification-ecla sequence="1">
        <text>G11B-020/18</text>
        <section>G</section>
        <class>11</class>
        <subclass>B</subclass>
        <main-group>20</main-group>
        <subgroup>18</subgroup>
      </classification-ecla>
      <classification-ecla sequence="2">
        <text>G11B-021/08A1</text>
        <section>G</section>
        <class>11</class>
        <subclass>B</subclass>
        <main-group>021</main-group>
        <subgroup>08A1</subgroup>
      </classification-ecla>
    </classifications-ecla>
    <patent-classifications>
      <patent-classification sequence="1">
        <classification-scheme office="EP" scheme="CPC">
          <date>20130101</date>
        </classification-scheme>
        <classification-symbol>G11B-021/083</classification-symbol>
        <section>G</section>
        <class>11</class>
        <subclass>B</subclass>
        <main-group>21</main-group>
        <subgroup>083</subgroup>
        <symbol-position>F</symbol-position>
        <classification-value>I</classification-value>
        <classification-status>B</classification-status>
        <classification-data-source>H</classification-data-source>
        <action-date>
          <date>20130101</date>
        </action-date>
      </patent-classification>
      <patent-classification sequence="2">
        <classification-scheme office="EP" scheme="CPC">
          <date>20130101</date>
        </classification-scheme>
        <classification-symbol>G11B-005/59633</classification-symbol>
        <section>G</section>
        <class>11</class>
        <subclass>B</subclass>
        <main-group>5</main-group>
        <subgroup>59633</subgroup>
        <symbol-position>L</symbol-position>
        <classification-value>A</classification-value>
        <classification-status>B</classification-status>
        <classification-data-source>H</classification-data-source>
        <action-date>
          <date>20130101</date>
        </action-date>
      </patent-classification>
      <patent-classification sequence="3">
        <classification-scheme office="EP" scheme="CPC">
          <date>20130101</date>
        </classification-scheme>
        <classification-symbol>G11B-020/18</classification-symbol>
        <section>G</section>
        <class>11</class>
        <subclass>B</subclass>
        <main-group>20</main-group>
        <subgroup>18</subgroup>
        <symbol-position>L</symbol-position>
        <classification-value>I</classification-value>
        <classification-status>B</classification-status>
        <classification-data-source>H</classification-data-source>
        <action-date>
          <date>20130101</date>
        </action-date>
      </patent-classification>
      <patent-classification sequence="4">
        <classification-scheme office="EP" scheme="CPC">
          <date>20130101</date>
        </classification-scheme>
        <classification-symbol>G11B-2020/183</classification-symbol>
        <section>G</section>
        <class>11</class>
        <subclass>B</subclass>
        <main-group>2020</main-group>
        <subgroup>183</subgroup>
        <symbol-position>L</symbol-position>
        <classification-value>A</classification-value>
        <classification-status>B</classification-status>
        <classification-data-source>H</classification-data-source>
        <action-date>
          <date>20130101</date>
        </action-date>
      </patent-classification>
      <patent-classification sequence="5">
        <classification-scheme office="EP" scheme="ICO"/>
        <classification-symbol>S11B-005/596F</classification-symbol>
      </patent-classification>
      <patent-classification sequence="6">
        <classification-scheme office="EP" scheme="ICO"/>
        <classification-symbol>S11B-020/18C4</classification-symbol>
      </patent-classification>
    </patent-classifications>
    <number-of-claims>29</number-of-claims>
    <exemplary-claim>1</exemplary-claim>
    <figures>
      <number-of-drawing-sheets>5</number-of-drawing-sheets>
      <number-of-figures>7</number-of-figures>
      <image-key data-format="questel">US6181500</image-key>
    </figures>
    <invention-title format="original" lang="en" id="title_en">Self servo rewrite method and apparatus</invention-title>
    <references-cited>
      <citation srep-phase="examiner">
        <patcit num="1">
          <text>CRIBBS DANIEL F, et al</text>
          <document-id>
            <country>US</country>
            <doc-number>5541784</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5541784</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="examiner">
        <patcit num="2">
          <text>SOMPEL MARK A, et al</text>
          <document-id>
            <country>US</country>
            <doc-number>5553086</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5553086</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="examiner">
        <patcit num="3">
          <text>SWEARINGEN PAUL A, et al</text>
          <document-id>
            <country>US</country>
            <doc-number>5668679</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5668679</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="examiner">
        <patcit num="4">
          <text>TENG JACK MING, et al</text>
          <document-id>
            <country>US</country>
            <doc-number>5710677</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5710677</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="examiner">
        <patcit num="5">
          <text>CHAINER TIMOTHY, et al</text>
          <document-id>
            <country>US</country>
            <doc-number>5875064</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5875064</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="examiner">
        <patcit num="6">
          <text>BROWN DANA HENRY, et al</text>
          <document-id>
            <country>US</country>
            <doc-number>5949603</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5949603</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="applicant">
        <patcit num="7">
          <text>SIDMAN MICHAEL</text>
          <document-id>
            <country>US</country>
            <doc-number>4536809</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US4536809</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="applicant">
        <patcit num="8">
          <text>MOON RONALD R, et al</text>
          <document-id>
            <country>US</country>
            <doc-number>4669004</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US4669004</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="applicant">
        <patcit num="9">
          <text>ARTER NELSON K, et al</text>
          <document-id>
            <country>US</country>
            <doc-number>4823330</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US4823330</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="applicant">
        <patcit num="10">
          <text>HOFER GREGORY V, et al</text>
          <document-id>
            <country>US</country>
            <doc-number>4942564</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US4942564</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="applicant">
        <patcit num="11">
          <text>DUNN MARY E, et al</text>
          <document-id>
            <country>US</country>
            <doc-number>5293276</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5293276</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="applicant">
        <patcit num="12">
          <text>WAKABAYASHI NORIAKI, et al</text>
          <document-id>
            <country>US</country>
            <doc-number>5317468</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5317468</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="applicant">
        <patcit num="13">
          <text>SUPINO LOUIS</text>
          <document-id>
            <country>US</country>
            <doc-number>5402280</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5402280</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="applicant">
        <patcit num="14">
          <text>WILSON BRIAN D, et al</text>
          <document-id>
            <country>US</country>
            <doc-number>5583842</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5583842</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="applicant">
        <patcit num="15">
          <text>NIPPON ELECTRIC CO</text>
          <document-id>
            <country>JP</country>
            <doc-number>S59146484</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>JP59146484</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="applicant">
        <patcit num="16">
          <text>FUJITSU LTD</text>
          <document-id>
            <country>JP</country>
            <doc-number>H03160614</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>JP03160614</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="applicant">
        <patcit num="17">
          <text>TOKICO LTD</text>
          <document-id>
            <country>JP</country>
            <doc-number>H05144180</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>JP05144180</doc-number>
          </document-id>
        </patcit>
      </citation>
    </references-cited>
    <parties>
      <applicants>
        <applicant data-format="original" app-type="applicant" sequence="1">
          <addressbook lang="en">
            <orgname>International Business Machines Corporation</orgname>
            <address>
              <address-1>Armonk, NY, US</address-1>
              <city>Armonk</city>
              <state>NY</state>
              <country>US</country>
            </address>
          </addressbook>
          <nationality>
            <country>US</country>
          </nationality>
        </applicant>
        <applicant data-format="questel" app-type="applicant" sequence="2">
          <addressbook lang="en">
            <orgname>IBM</orgname>
          </addressbook>
          <nationality>
            <country>US</country>
          </nationality>
        </applicant>
      </applicants>
      <inventors>
        <inventor data-format="original" sequence="1">
          <addressbook lang="en">
            <name>Serrano, Louis Joseph</name>
            <address>
              <address-1>San Jose, CA, US</address-1>
              <city>San Jose</city>
              <state>CA</state>
              <country>US</country>
            </address>
          </addressbook>
          <nationality>
            <country>US</country>
          </nationality>
        </inventor>
        <inventor data-format="original" sequence="2">
          <addressbook lang="en">
            <name>Yu, Mantle M.</name>
            <address>
              <address-1>San Jose, CA, US</address-1>
              <city>San Jose</city>
              <state>CA</state>
              <country>US</country>
            </address>
          </addressbook>
          <nationality>
            <country>US</country>
          </nationality>
        </inventor>
      </inventors>
      <agents>
        <agent sequence="1" rep-type="agent">
          <addressbook lang="en">
            <orgname>Altera Law Group, LLC</orgname>
          </addressbook>
        </agent>
      </agents>
    </parties>
    <examiners>
      <primary-examiner>
        <name>Kim, W. Chris</name>
      </primary-examiner>
    </examiners>
    <lgst-data>
      <lgst-status>LAPSED</lgst-status>
    </lgst-data>
  </bibliographic-data>
  <abstract format="original" lang="en" id="abstr_en">
    <p id="P-EN-00001" num="00001">
      <br/>
      A method and apparatus is disclosed that detects servo sectors that contain defects that need to be rewritten and writes in the servo field to correct the detected defects.
      <br/>
      The system includes a disk for storing data in data regions, the disk further comprising a plurality of servo regions formed radially between the data regions, a motor for rotating the disk, an actuator arm assembly including a head for reading and writing data on the disk and drive electronics for detecting defective servo sectors on the disk and rewriting a servo in the servo sector to correct the detected defective servo sectors.
      <br/>
      The drive electronics further includes arm electronics, coupled to the head, for receiving read and write signals for reading and writing data on the disk, a channel electronics circuit, coupled to the arm electronics, for rewriting the servo on the disk in response to a trigger, an interface processor, coupled to the channel electronics circuit, for processing control signals and data between the channel electronics circuit and a host processor and a servo processor, coupled to the interface processor, for analyzing detected servo fields to detect servo signals and errors therein and to provide the trigger for initiating a servo rewrite by the channel electronics circuit.
    </p>
  </abstract>
  <description format="original" lang="en" id="desc_en">
    <heading>BACKGROUND OF THE INVENTION</heading>
    <p num="1">
      1.
      <br/>
      Field of the Invention
    </p>
    <p num="2">This invention relates in general to a method and apparatus for performing self servo rewrites, and more particularly to a method and apparatus for detecting servo errors and rewriting the servo data.</p>
    <p num="3">2. Description of Related Art</p>
    <p num="4">
      Disk drives typically employ electromagnetic read/write heads to store and recover information from the recording surfaces of rotating disks.
      <br/>
      The disks generally include a high coercivity magnetic storage layer at each planar surface.
      <br/>
      Data is normally stored along concentric data tracks in the magnetic storage layer.
      <br/>
      For disk drives having more than one data recording surface, the set of tracks at a common radial location is referred to as a cylinder.
      <br/>
      Head positioning relative to a track or cylinder is usually performed using a closed-loop servo scheme, so that the head(s) can be precisely positioned for track following.
      <br/>
      Servo data may be recorded on a dedicated disk surface (i.e., "dedicated-servo") or embedded in every track of every recording surface (i.e., "embedded-servo").
      <br/>
      The latter servo scheme tends to provide more accurate head positioning and in the case of a disk drive having a few disks, an embedded-servo scheme will tend to use a smaller percentage of the potential data storage area for servo overhead.
      <br/>
      Accordingly, disk drives incorporating embedded-servo schemes currently dominate the market.
    </p>
    <p num="5">
      Typically a data track is divided up into a number of blocks for storing user data.
      <br/>
      The actual number of data blocks depends upon the size of each block, as measured in the number bytes stored therein, the radius of the track, the data transfer rate, etc.
      <br/>
      The embedded servo sectors may follow the data rates of the data blocks, or they may be recorded e.g. at a single rate across the radial extent of the disk, thereby interrupting and splitting fixed length data blocks into segments.
    </p>
    <p num="6">
      In order for an embedded servo drive to operate properly, the servo information defining the position of the data tracks must be written with great accuracy.
      <br/>
      Typically, the servo information is written on each surface which is transverse to and interspersed between data tracks.
      <br/>
      This information typically includes a sector identifier (SID), binary position information and an analog position error sensing (PES) burst pattern.
      <br/>
      Other formats and servo patterns are also employed within embedded servo disk drives.
      <br/>
      Coarse positioning is provided by the binary position information with fine head positioning relative to a track center can be determined and corrected, if necessary, by reading and noting the respective amplitudes and timings of these latter offset bursts.
    </p>
    <p num="7">
      Traditionally, the machine used to write the embedded servo information is called servowriter.
      <br/>
      A servowriter typically includes a large, massive granite base to minimize the effects of vibration, precision fixtures to hold the target disk drive, a precision laser interferometer based actuator arm positioning mechanism to position the arms radially with respect to the axis of rotation of the disks in the drive, and an external clock head to position the servo information on time(i.e., generally in a radial direction).
      <br/>
      Once the set is written, a read back procedure is employed while the disk drive head and disk assembly remains at the servo writer station in order to verify that the servo information have validly been written and will be useful by the disk drive head positioner servo loop during subsequent drive operations.
      <br/>
      Due to the incorporation of large granite structures, laser based sensors, and high precision fixtures, present servowriters are extremely large and expensive.
    </p>
    <p num="8">
      During the manufacture of the disk drive, the above described servo information is permanently written on the disk by the servowriters.
      <br/>
      Unfortunately, sometimes the information written is erroneous.
      <br/>
      In this case it is usually only a few sectors on the drive that are miswritten; but this can be enough that the drive needs to be reservowritten.
      <br/>
      Worse, the false servo information may lead to rework in some other, expensive, way.
    </p>
    <p num="9">
      One proposed solution is to exhaustively check each file at the servo writer itself.
      <br/>
      A disadvantage of this solution is that the extensive checking is time consuming, which ties up capital equipment and so adversely effects profit margins for the disk drives.
      <br/>
      In effect, this type of check will more than double the cost to servowrite the file.
      <br/>
      Furthermore, even if the drive passes the manufacture test, asperities at the servo region may develop on the disk at a later time.
    </p>
    <p num="10">It can be seen that there is a need for a method and apparatus that corrects errors that occur during servowriting without requiring the disk to be re-servowritten, i.e., rewriting the servo information for the entire disk.</p>
    <p num="11">It can also be seen that there is a need for a method and apparatus to detect defective servo sectors need to be rewritten and to correct defective servo sectors by writing in the servo fields.</p>
    <heading>SUMMARY OF THE INVENTION</heading>
    <p num="12">To overcome the limitations in the prior art described above, and to overcome other limitations that will become apparent upon reading and understanding the present specification, the present invention discloses a method and apparatus that fixes errors that occur during servowriting without requiring the disk to be re-servowritten.</p>
    <p num="13">The present invention provides a method and apparatus that detects the servo sectors that contain defects that need to be rewritten and writes in the servo field to correct the detected defects.</p>
    <p num="14">A system in accordance with the principles of the present invention includes a disk for storing data in data regions, the disk further including a plurality of servo regions radially formed between the data regions, a motor for rotating the disk, an actuator arm assembly including a head for reading and writing data on the disk and drive electronics for detecting the defective servo sectors on the disk that need to be rewritten and correcting the detected servo sectors candidates.</p>
    <p num="15">
      Other embodiments of a system in accordance with the principles of the invention may include alternative or optional additional aspects.
      <br/>
      One such aspect of the present invention is that the disk drive further includes arm electronics, coupled to the head, for receiving read and write signals for reading and writing data on the disk, a channel electronics circuit, coupled to the arm electronics, for rewriting the servo on the disk in response to a trigger, an interface processor, coupled to the channel electronics circuit, for processing control signals and data between the channel electronics circuit and a host processor and a servo processor, coupled to the interface processor, for analyzing detected servo fields to detect servo signals and errors therein and to provide the trigger for initiating a servo rewrite by the channel electronics circuit.
    </p>
    <p num="16">In accordance with the present invention a method for performing self servo rewrites is provided comprising the step of detecting defective servo sectors on a disk.</p>
    <p num="17">Another aspect of the present invention is that the step of detecting defective servo sectors on a disk further includes the steps of detecting which servo sectors contain errors.</p>
    <p num="18">Another aspect of the present invention is that the errors includes track ID errors, sector ID errors, or PES errors.</p>
    <p num="19">Another aspect of the present invention is that the step of detecting servo sectors on a disk that are candidates for rewrite is performed by drive electronics.</p>
    <p num="20">Another aspect of the present invention is that the step of detecting servo sectors on a disk that are candidates for rewrite is performed by a host computer.</p>
    <p num="21">Another aspect of the present invention is that the step of rewriting in the servo field further includes the steps of overriding write blocking that prevents an overwriting of original servo fields.</p>
    <p num="22">Another aspect of the present invention is that the step of rewriting in the servo field further includes the steps of configuring a pattern to be written.</p>
    <p num="23">Another aspect of the present invention is that the method further including the steps of writing the pattern to registers and triggering a delayed writing of the pattern on the disk.</p>
    <p num="24">Another aspect of the present invention is that the step of triggering the delayed writing of the pattern on the disk further includes the step of detecting a sector ID and issuing a trigger for initiating the delayed writing of the pattern on the disk in response to the detection of the sector ID.</p>
    <p num="25">Another aspect of the present invention is that the step of rewriting in the servo field further includes the steps of determining when the servo rewriting is to be performed.</p>
    <p num="26">Another aspect of the present invention is that the step of rewriting in the servo field further includes the step of synchronizing a rewriting of a pattern with data previously recorded in servo sectors on the disk.</p>
    <p num="27">Yet another aspect of the present invention is that the step of synchronizing a rewriting of a pattern with data in the previously recorded in servo sectors on the disk further includes the steps of triggering on a servo ID mark on the servo sector and aligning the pattern according to a write clock.</p>
    <p num="28">Another aspect of the present invention is that the step of aligning the pattern according to a write clock further includes the step of phase locking the write clock with the original data using a servo AGC field.</p>
    <p num="29">Another aspect of the present invention is that the step of rewriting in the servo field further includes the step of rewriting a pattern on the disk in the sector field within a predetermined time of original servo data.</p>
    <p num="30">Another aspect of the present invention is that the step of rewriting a pattern on the disk in the sector field within a predetermined time of original servo data further includes the step of aligning a write clock to a servo ID from a prior sector.</p>
    <p num="31">Another aspect of the present invention is that the step of rewriting in the servo field further includes the step of rewriting servo information while serving on previously written servo data.</p>
    <p num="32">Another aspect of the present invention is that the step of rewriting in the servo field further includes the step of rewriting only a portion of the servo sector</p>
    <p num="33">Another aspect of the present invention is that the step of rewriting in the servo field further includes the step of writing a servo field identifying portions of the servo sector that are valid.</p>
    <p num="34">Another aspect of the present invention is that the step of rewriting in the servo field further includes the step of writing a servo field identifying portions of the servo sector that are invalid.</p>
    <p num="35">Another aspect of the present invention is that the step of rewriting in the servo field further includes the step of writing a first and second servo field containing identifying information regarding valid and invalid portions of the servo sector, wherein the first servo field is at the read center and the second servo field is at the write center.</p>
    <p num="36">Another aspect of the present invention is that the step of rewriting in the servo field further includes the step of rewriting servo sectors during operation in a customer environment.</p>
    <p num="37">Still another aspect of the present invention is that the step of rewriting in the servo field further includes the step of rewriting servo sectors to recover sites formerly affected by thermal asperities.</p>
    <p num="38">Another aspect of the present invention is that the step of rewriting in the servo field further includes the step of erasing a portion of the servo pattern.</p>
    <p num="39">Another aspect of the present invention is that the step of rewriting in the servo field further includes the step of writing a constant frequency pattern in the servo sector.</p>
    <p num="40">
      These and various other advantages and features of novelty which characterize the invention are pointed out with particularity in the claims annexed hereto and form a part hereof.
      <br/>
      However, for a better understanding of the invention, its advantages, and the objects obtained by its use, reference should be made to the drawings which form a further part hereof, and to accompanying descriptive matter, in which there are illustrated and described specific examples of an apparatus in accordance with the invention.
    </p>
    <heading>BRIEF DESCRIPTION OF THE DRAWINGS</heading>
    <p num="41">
      Referring now to the drawings in which like reference numbers represent corresponding parts throughout:
      <br/>
      FIG. 1 illustrates an hard disk drive (HDD);
      <br/>
      FIG. 2 illustrates the recording surface of a conventional disk;
      <br/>
      FIG. 3 shows a conventional track signal construction;
      <br/>
      FIG. 4 illustrates one embodiment of the self servo rewrite apparatus according to the present invention;
      <br/>
      FIG. 5 is a flow chart showing a self servo rewrite process for one embodiment of the present invention;
      <br/>
      FIG. 6 is a flow chart of a method for writing in the servo field according to one embodiment of the present invention; and
      <br/>
      FIG. 7 illustrates the use of a separate servo field for indicating whether another field in the servo sector is to be ignored.
    </p>
    <heading>DETAILED DESCRIPTION OF THE INVENTION</heading>
    <p num="42">
      In the following description of the exemplary embodiment, reference is made to the accompanying drawings which form a part hereof, and in which is shown by way of illustration the specific embodiment in which the invention may be practiced.
      <br/>
      It is to be understood that other embodiments may be utilized as structural changes may be made without departing from the scope of the present invention.
    </p>
    <p num="43">The present invention provides a method and apparatus that detects the servo sectors that contain defects that need to be rewritten and writes in the servo field to correct the detected defects.</p>
    <p num="44">
      FIG. 1 illustrates a hard disk drive (HDD) 100. The HDD 100 includes a disk 118 and a hard disk controller (hereinafter referred to as HDC) 130.
      <br/>
      The disk part has a motor 114 for rotating a shaft 112 at a high speed.
      <br/>
      A cylindrical support 116 is attached to the shaft 112 so that the their axes are in coincidence.
      <br/>
      One or more information recording disks 118A and 118B are mounted between support 116.
      <br/>
      Magnetic heads 120A, 120B, 120C and 120D are respectively provided to face the disk surface, and these magnetic heads are supported from an actuator 124 by access arms 122A, 122B, 122C, and 122D, respectively.
      <br/>
      The individual magnetic heads 120A to 120D receive the drive force transmitted from an actuator drive device 128 by a shaft 126 and rotates about the shaft 126 as the axis of rotation, and moved on the disk 118 to a predetermined position.
    </p>
    <p num="45">
      FIG. 2 illustrates a recording surface of a conventional disk 200.
      <br/>
      As shown in FIG. 2, the disk is formatted with a fixed block architecture having sector servo and zone-bit recording.
      <br/>
      Also illustrated in FIG. 2 with the disk, designated generally as 204, is an actuator arm 206, data recording transducer 208 (also referred to as a recording head) and a voice coil motor 210.
      <br/>
      The storage disk 204 also includes center of rotation 211, and is divided for head positioning purposes into a set of radially spaced tracks one of which is shown at 218.
      <br/>
      The tracks are grouped radially into a number of zones, three of which are shown as 251, 252, 253.
      <br/>
      Data is recorded at a different data rate in each zone to maximize bit density across the disk.
      <br/>
      The disk contains a plurality of servo sectors 220, which extend across the tracks in a generally radial direction.
      <br/>
      These will be described in more detail subsequently.
    </p>
    <p num="46">
      Each track has a reference index 221.
      <br/>
      Within each zone, the tracks are circumferentially divided into a number of data sectors 254.
      <br/>
      Preferably the data sectors contain no sector ID fields for increased data capacity, as described in U.S. Pat. No. 5,523,903 to Hetzler et al.
      <br/>
      In accordance with the normal meaning of "fixed block architecture", all data sectors are substantially the same size, e.g., 512 bytes of data.
      <br/>
      However, it should be noted that the present invention may easily be adapted to variable length architectures.
      <br/>
      The number of data sectors per track varies from zone to zone. consequently, some of the data sectors are split by servo sectors.
      <br/>
      If the disk drive has multiple heads, then the set of tracks which are at the same radius on all surfaces is referred to as a "cylinder."
    </p>
    <p num="47">
      Conventional servo-patterns in the servo regions 220 typically include short bursts of a constant frequency signal, very precisely located offset from a data track's center line, on either side.
      <br/>
      The bursts are written in the sector area 220, and can be used to find the center line of a track.
      <br/>
      Staying on center is required during both reading and writing.
      <br/>
      These servo-data areas 220 allow a head to follow a track center line around a disk, even when the track is out of round, as can occur with spindle wobble, disk slip and/or thermal expansion.
      <br/>
      As technology advances provide smaller disk drives, and increased track densities, the placement of servo data in the servo regions 220 must also be proportionately more accurate.
    </p>
    <p num="48">
      FIG. 3 shows a prior art track signal construction 300.
      <br/>
      The main structural elements are data regions 352 and servo regions 350, and in the servo regions 350, there are recorded a gray code 356 for coarsely adjusting the head position, and a servo signal 358 formed of a burst pattern for finely adjusting the head position.
      <br/>
      The data region has a signal for data error recovery such as error correction codes (ECC).
      <br/>
      Between the data region 352 and the servo region 350, a write recovery area 382 is formed.
      <br/>
      As stated above, this region provides a signal for ensuring the adjustment and control time for AGC and a read amplifier when the system mode is changed from the write mode in the data region 352 to the read mode before the next servo region 350 is reached.
    </p>
    <p num="49">
      FIG. 4 illustrates one embodiment of the self servo rewrite apparatus 400 according to the present invention.
      <br/>
      In FIG. 4, a servo processor 410 determines the information to be written and stores the data in a register 412.
      <br/>
      For example, a register 412 for storing the data may be provided in either the channel electronics 420 or the interface processor 430.
      <br/>
      For ease of explanation, only a register 412 in the interface processor 430 is shown in FIG. 4.
    </p>
    <p num="50">
      The servo processor 410 provides the timing signals to the channel electronics 420.
      <br/>
      The host 440 may determine the sectors to be rewritten to the disk 450 via the arm electronics 460.
      <br/>
      Alternatively, the drive electronics 462 may determine the sectors to be written to the disk 450.
      <br/>
      The interface processor 430 overrides the protective safeguards for writing in the servo fields, and the servo pattern is generated, e.g. by the channel electronics 420 or the servo processor 410.
      <br/>
      A trigger line 470 is provided to trigger a counter 490 in the drive electronics 462 to write the servo pattern to the disk 450.
      <br/>
      A data line 480 is provided between the servo processor 410 and the interface processor 430 for the passing of data between the servo processor 410 and the interface processor 430.
    </p>
    <p num="51">
      FIG. 5 is a flow chart showing the self servo rewrite process 500 according to one embodiment of the present invention.
      <br/>
      According to FIG. 5, defective servo sectors are first detected 510.
      <br/>
      According to the present invention, the detection of which servo sectors are defective 510 may be performed by a servo surface analysis test (SAT).
      <br/>
      The servo SAT test is typically performed during the manufacturing process and determines the location of the servo information on each track and detects gray code errors, SID errors, PES errors and other errors.
      <br/>
      This information may be recorded by a host computer or in a register in the drive electronics.
      <br/>
      For example, the host computer may issue the appropriate commands to attempt to correct the servo information error.
      <br/>
      Alternatively, the drive electronics can detect and correct the errors itself.
      <br/>
      However, additional coding is required for the drive electronics to detect and correct errors.
      <br/>
      Nevertheless, providing additional code to the drive electronics may be advantageous if a servo rewrite is to be performed in the field.
    </p>
    <p num="52">
      Then, the blocking by the write electronics is overridden so that all or a portion of the original servo sectors may be rewritten 520.
      <br/>
      To be able to write the servo field, a method of blocking of the write electronics must be circumvented 520.
      <br/>
      The servo information in the prior art is only written during manufacture.
      <br/>
      Thus, there are safeguards in the write electronics to prevent writing in the servo fields to protect the drive from inadvertently rendering the drive inoperable.
      <br/>
      Still, it is desirable for the drive electronics alone to write the servo fields.
    </p>
    <p num="53">
      Thereafter, the pattern to be written is configured 530.
      <br/>
      Finally, the time that the servo rewrite is to be performed is determined 540.
    </p>
    <p num="54">
      FIG. 6 is a flow chart of a method for writing in the servo field 600 according to one embodiment of the present invention.
      <br/>
      The servo processor writes several registers with the data to be written to the disk 610.
      <br/>
      Another option is to have the channel electronics generate the pattern.
      <br/>
      This is more efficient when a fixed frequency PES burst is to be generated, or an erase signal is to be written.
    </p>
    <p num="55">
      The servo processor then loads a counter with the value that delays the start of write from reception of trigger 620.
      <br/>
      The trigger is provided to enable the arbitrary placement of the written field 630.
      <br/>
      The servo processor also disables error reporting and the servo processor or the interface processor may override the write safeguards 640.
      <br/>
      Then, the servo processor arms the drive electronics circuit 650.
    </p>
    <p num="56">
      Upon receipt of the trigger, e.g., a servo mark found, the counter decrements to zero as shown in step 640.
      <br/>
      Once the counter decrements to zero, the data in the registers is sequentially loaded onto the write data line and with a write clock is sent to the channel electronics 650.
      <br/>
      The channel electronics then writes the data as specified by the clock 660.
      <br/>
      In this way an arbitrary pattern can be written at an arbitrary location on the disk.
    </p>
    <p num="57">
      With regard to the triggering 630, if the servo data on the disk is coherent, i.e., the pulses are aligned in time from one track to the next, then another requirement is that the data to be written needs to be synchronized with the data already on the disk.
      <br/>
      This can be done using the existing servo ID mark on the servo sector as the trigger.
      <br/>
      The detection delay is fixed.
      <br/>
      Once the delay is accounted for, the only real impediment to aligning the existing data is getting the write clock's phase correct.
      <br/>
      For example, a 40 MHz clock can write a 10 MHz pattern with one of four phases.
      <br/>
      If this is inadequate resolution then the write clock can be phase locked to the original data using the servo AGC field.
      <br/>
      In fact, if the AGC frequency is low enough, a prior servo ID can be used to provide data alignment, and the AGC field can be used to correct any drift due to motor speed errors.
    </p>
    <p num="58">
      If the servo data is incoherent, then the alignment requirement is less stringent.
      <br/>
      Now all that is required is that the servo sector be written within about a hundred nanoseconds of the original position.
      <br/>
      This accuracy is easily met by aligning the write clock to the servo ID from a prior sector.
      <br/>
      To ease matters more, the servo pattern can be specifically designed with these margins in mind.
    </p>
    <p num="59">
      Now turning to the writing of a pattern 610, several options are available.
      <br/>
      First, the entire servo pattern for that sector can be rewritten.
      <br/>
      Alternatively, only a particular PES burst, or a digital information field or track ID may be written.
      <br/>
      Another alternative is to erase the offending field in the sector and to use this as a signal to the servo at a later time to indicate that the data is invalid.
      <br/>
      That is, if the gray code is zero, it was erased, so the zero may be ignored.
    </p>
    <p num="60">
      A more desirable alternative is to write a separate field that specifies if any of the fields in the sector are to be ignored.
      <br/>
      FIG. 7 illustrates the use of a separate servo field for indicating whether another field in the servo sector is to be ignored 700.
      <br/>
      In FIG. 7, a separate servo field 710 between a first servo sector 720 and a second servo sector 730 indicates which portions of a servo sector is valid.
      <br/>
      The separate servo field 710 may refer to either the first 720 or second 730 servo sector.
      <br/>
      Further, two separate servo fields 710 may be used: one at the read center and one at the write center.
      <br/>
      The default value is written at servowrite, and rewritten at servo rewrite as needed.
      <br/>
      This field may be difficult to read at both read and write offset, so two fields can be used.
    </p>
    <p num="61">
      The above method may be implemented by having the host, or the tester if during manufacture, specify which sectors to rewrite and with what pattern.
      <br/>
      Alternatively, the rewrite may be made independent of the host.
      <br/>
      While making the rewrite independent of the host may be more difficult to implement, the possibility of doing servo rewrite as part of a recovery procedure in the field is facilitated.
      <br/>
      In fact this method is flexible enough that if a thermal asperity were to grow in a the gray code field can be ignored while the thermal asperity is present, but then used after the thermal asperity is burnished, or moved away.
    </p>
    <p num="62">
      In summary, a method and apparatus is disclosed for detecting the servo sectors that contain defects that need to be rewritten and writing in the servo field to correct the detected defects.
      <br/>
      According to the present invention, arbitrary patterns are written in arbitrary locations on the disk to correct the detected defects.
      <br/>
      The servo information may be written using just the drive electronics and the servo processor may be used to trigger the drive electronics to cause an arbitrary pattern to be written in an arbitrary location.
    </p>
    <p num="63">
      The foregoing description of the exemplary embodiment of the invention has been presented for the purposes of illustration and description.
      <br/>
      It is not intended to be exhaustive or to limit the invention to the precise form disclosed.
      <br/>
      Many modifications and variations are possible in light of the above teaching.
      <br/>
      It is intended that the scope of the invention be limited not with this detailed description, but rather by the claims appended hereto.
    </p>
  </description>
  <claims format="original" lang="en" id="claim_en">
    <claim num="1">
      <claim-text>What is claimed is:</claim-text>
      <claim-text>1.</claim-text>
      <claim-text>A method for performing self servo rewrites, comprising the steps of:</claim-text>
      <claim-text>detecting defective servo sectors on a disk; overriding write blocking that prevents an overwriting of original servo fields;</claim-text>
      <claim-text>and rewriting in a servo field to correct at least a portion of the detected defective servo sectors.</claim-text>
    </claim>
    <claim num="2">
      <claim-text>2. The method of claim 1 wherein the defective servo sectors comprise track ID errors, sector ID errors, or PES errors.</claim-text>
    </claim>
    <claim num="3">
      <claim-text>3. The method of claim 1 wherein the step of detecting defective servo sectors on a disk is performed by drive electronics.</claim-text>
    </claim>
    <claim num="4">
      <claim-text>4. The method of claim 1 wherein the step of detecting defective servo sectors on a disk is performed by a host computer.</claim-text>
    </claim>
    <claim num="5">
      <claim-text>5. The method of claim 1 wherein the step of rewriting in the servo field further comprises the step of writing a constant frequency pattern in the servo sector.</claim-text>
    </claim>
    <claim num="6">
      <claim-text>6. The method of claim 1 wherein the step of rewriting in the servo field further comprises the steps of configuring a pattern to be written.</claim-text>
    </claim>
    <claim num="7">
      <claim-text>7. The method of claim 6 further comprising the steps of writing the pattern to registers and triggering a delayed writing of the pattern on the disk.</claim-text>
    </claim>
    <claim num="8">
      <claim-text>8. The method of claim 7 wherein the step of triggering the delayed writing of the pattern on the disk further comprises the step of detecting a sector ID and issuing a trigger for initiating the delayed writing of the pattern on the disk in response to the detection of the sector ID.</claim-text>
    </claim>
    <claim num="9">
      <claim-text>9. The method of claim 1 wherein the step of rewriting in the servo field further comprises the step of determining when the servo rewriting is to be performed.</claim-text>
    </claim>
    <claim num="10">
      <claim-text>10. The method of claim 1 wherein the step of rewriting in the servo field further comprises the step of synchronizing a rewriting of a pattern with data previously recorded in servo sectors on the disk.</claim-text>
    </claim>
    <claim num="11">
      <claim-text>11. The method of claim 10 wherein the step of synchronizing a rewriting of a pattern with data in the previously recorded in servo sectors on the disk further comprises the steps of triggering on a servo ID mark on the servo sector and aligning the pattern according to a write clock.</claim-text>
    </claim>
    <claim num="12">
      <claim-text>12. The method of claim 11 wherein the step of aligning the pattern according to a write clock further comprises the step of phase locking the write clock with the original data using a servo AGC field.</claim-text>
    </claim>
    <claim num="13">
      <claim-text>13. The method of claim 1 wherein the step of rewriting in the servo field further comprises the step of rewriting a pattern on the disk in the sector field within a predetermined time of original servo data.</claim-text>
    </claim>
    <claim num="14">
      <claim-text>14. The method of claim 13 wherein the step of rewriting a pattern on the disk in the sector field within a predetermined time of original servo data further comprises the step of aligning a write clock to a servo ID from a prior sector.</claim-text>
    </claim>
    <claim num="15">
      <claim-text>15. The method of claim 1 wherein the step of rewriting in the servo field further comprises the step of rewriting servo information while serving on previously written servo data.</claim-text>
    </claim>
    <claim num="16">
      <claim-text>16. The method of claim 1 wherein the step of rewriting in the servo field further comprises the step of rewriting only a portion of the servo sector.</claim-text>
    </claim>
    <claim num="17">
      <claim-text>17. The method of claim 1 wherein the step of rewriting in the servo field further comprises the step of writing a servo field to identify portions of the servo sector that are valid.</claim-text>
    </claim>
    <claim num="18">
      <claim-text>18. The method of claim 1 wherein the step of rewriting in the servo field further comprises the step of writing a servo field identifying portions of the servo sector that are invalid.</claim-text>
    </claim>
    <claim num="19">
      <claim-text>19. The method of claim 1 wherein the step of rewriting in the servo field further comprises the step of writing a first and second servo field containing identifying information regarding valid and invalid portions of the servo sector, wherein the first servo field is at the read center and the second servo field is at the write center.</claim-text>
    </claim>
    <claim num="20">
      <claim-text>20. The method of claim 1 wherein the step of rewriting in the servo field further comprises the step of rewriting servo sectors during operation in a customer environment.</claim-text>
    </claim>
    <claim num="21">
      <claim-text>21. The method of claim 1 wherein the step of rewriting in the servo field further comprises: eliminating thermal asperities from sites on the disk;</claim-text>
      <claim-text>and rewriting servo sectors to recover the sites formerly affected by the thermal asperities.</claim-text>
    </claim>
    <claim num="22">
      <claim-text>22. The method of claim 1 wherein the step of rewriting in the servo field further comprises the step of erasing a portion of the servo pattern.</claim-text>
    </claim>
    <claim num="23">
      <claim-text>23. A disk drive comprising: a disk for storing data in data regions, the disk further comprising a plurality of servo regions diametrally formed between the data regions; a motor for rotating the disk; an actuator arm assembly including a head for reading and writing data on the disk; drive electronics, electrically coupled to the head, for detecting defective servo sectors on the disk, overriding write blocking that prevents an overwriting of original servo fields and rewriting a servo portion in the servo sector to correct at least a portion of the detected defective servo sectors.</claim-text>
    </claim>
    <claim num="24">
      <claim-text>24. The disk drive of claim 23 wherein the drive electronics further comprise: arm electronics, coupled to the head, for receiving read and write signals for reading and writing data on the disk; a channel electronics circuit, coupled to the arm electronics, for rewriting the servo portion on the disk in response to a trigger; an interface processor, coupled to the channel electronics circuit, for processing control signals and data between the channel electronics circuit and a host processor;</claim-text>
      <claim-text>and a servo processor, coupled to the interface processor, for analyzing detected servo fields to detect servo signals and errors therein and to provide the trigger for initiating a servo rewrite by the channel electronics circuit.</claim-text>
    </claim>
    <claim num="25">
      <claim-text>25. The disk drive of claim 24 wherein the trigger provided by the servo processor to the channel electronics circuit is derived by detecting a servo ID on the disk.</claim-text>
    </claim>
    <claim num="26">
      <claim-text>26. The disk drive of claim 24 further comprising a data line coupling the servo processor and the interface processor for passing data there between.</claim-text>
    </claim>
    <claim num="27">
      <claim-text>27. Drive electronics for processing signals from arm electronics identifying defective servo sectors on a storage medium and rewriting a servo portion in the servo sector to correct the detected defective servo sectors, comprising: a channel electronics circuit for rewriting the servo portion on the storage medium in response to a trigger; an interface processor, coupled to the channel electronics circuit, for processing control signals and data between the channel electronics circuit and a host processor, and to override write blocking that prevents an overwriting of original servo fields;</claim-text>
      <claim-text>and a servo processor, coupled to the interface processor, for analyzing detected servo fields to detect servo signals and errors therein and to provide the trigger for initiating a servo rewrite by the channel electronics circuit.</claim-text>
    </claim>
    <claim num="28">
      <claim-text>28. The drive electronics of claim 27 further comprising a data line coupling the servo processor and the interface processor for passing data there between.</claim-text>
    </claim>
    <claim num="29">
      <claim-text>29. The drive electronics of claim 27 wherein the trigger provided by the servo processor to the channel electronics circuit is derived by detecting a servo ID on the storage medium.</claim-text>
    </claim>
  </claims>
</questel-patent-document>