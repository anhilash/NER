<?xml version="1.0" encoding="UTF-8"?>
<questel-patent-document lang="en" date-produced="20180805" produced-by="Questel" schema-version="3.23" file="US06181716B2.xml">
  <bibliographic-data lang="en">
    <publication-reference publ-desc="Granted patent as second publication">
      <document-id>
        <country>US</country>
        <doc-number>06181716</doc-number>
        <kind>B2</kind>
        <date>20010130</date>
      </document-id>
      <document-id data-format="questel">
        <doc-number>US6181716</doc-number>
      </document-id>
    </publication-reference>
    <original-publication-kind>B2</original-publication-kind>
    <application-reference is-representative="YES" family-id="23785049" extended-family-id="711889">
      <document-id>
        <country>US</country>
        <doc-number>09449674</doc-number>
        <kind>A</kind>
        <date>19991130</date>
      </document-id>
      <document-id data-format="questel">
        <doc-number>1999US-09449674</doc-number>
      </document-id>
      <document-id data-format="questel_Uid">
        <doc-number>729818</doc-number>
      </document-id>
    </application-reference>
    <language-of-filing>en</language-of-filing>
    <language-of-publication>en</language-of-publication>
    <priority-claims>
      <priority-claim kind="national" sequence="1">
        <country>US</country>
        <doc-number>44967499</doc-number>
        <kind>A</kind>
        <date>19991130</date>
        <priority-active-indicator>Y</priority-active-indicator>
      </priority-claim>
      <priority-claim data-format="questel" sequence="1">
        <doc-number>1999US-09449674</doc-number>
      </priority-claim>
    </priority-claims>
    <dates-of-public-availability>
      <publication-of-grant-date>
        <date>20010130</date>
      </publication-of-grant-date>
    </dates-of-public-availability>
    <classifications-ipcr>
      <classification-ipcr sequence="1">
        <text>H04J   3/06        20060101A I20051008RMEP</text>
        <ipc-version-indicator>
          <date>20060101</date>
        </ipc-version-indicator>
        <classification-level>A</classification-level>
        <section>H</section>
        <class>04</class>
        <subclass>J</subclass>
        <main-group>3</main-group>
        <subgroup>06</subgroup>
        <classification-value>I</classification-value>
        <generating-office>
          <country>EP</country>
        </generating-office>
        <classification-status>R</classification-status>
        <classification-data-source>M</classification-data-source>
        <action-date>
          <date>20051008</date>
        </action-date>
      </classification-ipcr>
      <classification-ipcr sequence="2">
        <text>G10L  19/00        20060101AFI20051220RMJP</text>
        <ipc-version-indicator>
          <date>20060101</date>
        </ipc-version-indicator>
        <classification-level>A</classification-level>
        <section>G</section>
        <class>10</class>
        <subclass>L</subclass>
        <main-group>19</main-group>
        <subgroup>00</subgroup>
        <symbol-position>F</symbol-position>
        <classification-value>I</classification-value>
        <generating-office>
          <country>JP</country>
        </generating-office>
        <classification-status>R</classification-status>
        <classification-data-source>M</classification-data-source>
        <action-date>
          <date>20051220</date>
        </action-date>
      </classification-ipcr>
      <classification-ipcr sequence="3">
        <text>H04L   7/00        20060101ALI20051220RMJP</text>
        <ipc-version-indicator>
          <date>20060101</date>
        </ipc-version-indicator>
        <classification-level>A</classification-level>
        <section>H</section>
        <class>04</class>
        <subclass>L</subclass>
        <main-group>7</main-group>
        <subgroup>00</subgroup>
        <symbol-position>L</symbol-position>
        <classification-value>I</classification-value>
        <generating-office>
          <country>JP</country>
        </generating-office>
        <classification-status>R</classification-status>
        <classification-data-source>M</classification-data-source>
        <action-date>
          <date>20051220</date>
        </action-date>
      </classification-ipcr>
      <classification-ipcr sequence="4">
        <text>H04L  12/56        20060101ALI20051220RMJP</text>
        <ipc-version-indicator>
          <date>20060101</date>
        </ipc-version-indicator>
        <classification-level>A</classification-level>
        <section>H</section>
        <class>04</class>
        <subclass>L</subclass>
        <main-group>12</main-group>
        <subgroup>56</subgroup>
        <symbol-position>L</symbol-position>
        <classification-value>I</classification-value>
        <generating-office>
          <country>JP</country>
        </generating-office>
        <classification-status>R</classification-status>
        <classification-data-source>M</classification-data-source>
        <action-date>
          <date>20051220</date>
        </action-date>
      </classification-ipcr>
    </classifications-ipcr>
    <classification-national>
      <country>US</country>
      <main-classification>
        <text>370519000</text>
        <class>370</class>
        <subclass>519000</subclass>
      </main-classification>
      <further-classification sequence="1">
        <text>370503000</text>
        <class>370</class>
        <subclass>503000</subclass>
      </further-classification>
      <further-classification sequence="2">
        <text>370508000</text>
        <class>370</class>
        <subclass>508000</subclass>
      </further-classification>
    </classification-national>
    <classifications-ecla>
      <classification-ecla sequence="1">
        <text>H04J-003/06B6</text>
        <section>H</section>
        <class>04</class>
        <subclass>J</subclass>
        <main-group>003</main-group>
        <subgroup>06B6</subgroup>
      </classification-ecla>
      <classification-ecla sequence="2">
        <text>H04J-003/06C4</text>
        <section>H</section>
        <class>04</class>
        <subclass>J</subclass>
        <main-group>003</main-group>
        <subgroup>06C4</subgroup>
      </classification-ecla>
    </classifications-ecla>
    <patent-classifications>
      <patent-classification sequence="1">
        <classification-scheme office="EP" scheme="CPC">
          <date>20130101</date>
        </classification-scheme>
        <classification-symbol>H04J-003/0682</classification-symbol>
        <section>H</section>
        <class>04</class>
        <subclass>J</subclass>
        <main-group>3</main-group>
        <subgroup>0682</subgroup>
        <symbol-position>F</symbol-position>
        <classification-value>I</classification-value>
        <classification-status>B</classification-status>
        <classification-data-source>H</classification-data-source>
        <action-date>
          <date>20130101</date>
        </action-date>
      </patent-classification>
      <patent-classification sequence="2">
        <classification-scheme office="EP" scheme="CPC">
          <date>20130101</date>
        </classification-scheme>
        <classification-symbol>H04J-003/0632</classification-symbol>
        <section>H</section>
        <class>04</class>
        <subclass>J</subclass>
        <main-group>3</main-group>
        <subgroup>0632</subgroup>
        <symbol-position>L</symbol-position>
        <classification-value>I</classification-value>
        <classification-status>B</classification-status>
        <classification-data-source>H</classification-data-source>
        <action-date>
          <date>20130101</date>
        </action-date>
      </patent-classification>
    </patent-classifications>
    <number-of-claims>9</number-of-claims>
    <exemplary-claim>1</exemplary-claim>
    <figures>
      <number-of-drawing-sheets>4</number-of-drawing-sheets>
      <number-of-figures>4</number-of-figures>
      <image-key data-format="questel">US6181716</image-key>
    </figures>
    <invention-title format="original" lang="en" id="title_en">Synchronization of voice packet generation to unsolicited grants in a DOCSIS cable modem voice over packet telephone</invention-title>
    <references-cited>
      <citation srep-phase="examiner">
        <patcit num="1">
          <text>BUCKLAND KENNETH M, et al</text>
          <document-id>
            <country>US</country>
            <doc-number>6064652</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US6064652</doc-number>
          </document-id>
        </patcit>
      </citation>
    </references-cited>
    <parties>
      <applicants>
        <applicant data-format="original" app-type="applicant" sequence="1">
          <addressbook lang="en">
            <orgname>Telogy Networks, Inc.</orgname>
            <address>
              <address-1>Germantown, MD, US</address-1>
              <city>Germantown</city>
              <state>MD</state>
              <country>US</country>
            </address>
          </addressbook>
          <nationality>
            <country>US</country>
          </nationality>
        </applicant>
        <applicant data-format="questel" app-type="applicant" sequence="2">
          <addressbook lang="en">
            <orgname>TELOGY NETWORKS</orgname>
          </addressbook>
          <nationality>
            <country>US</country>
          </nationality>
        </applicant>
      </applicants>
      <inventors>
        <inventor data-format="original" sequence="1">
          <addressbook lang="en">
            <name>Lide, David</name>
            <address>
              <address-1>Rockville, MD, US</address-1>
              <city>Rockville</city>
              <state>MD</state>
              <country>US</country>
            </address>
          </addressbook>
          <nationality>
            <country>US</country>
          </nationality>
        </inventor>
      </inventors>
      <agents>
        <agent sequence="1" rep-type="agent">
          <addressbook lang="en">
            <orgname>Levy &amp; Grandinetti</orgname>
          </addressbook>
        </agent>
      </agents>
    </parties>
    <examiners>
      <primary-examiner>
        <name>Felber, Joseph L.</name>
      </primary-examiner>
    </examiners>
    <lgst-data>
      <lgst-status>GRANTED</lgst-status>
    </lgst-data>
  </bibliographic-data>
  <abstract format="original" lang="en" id="abstr_en">
    <p id="P-EN-00001" num="00001">
      <br/>
      Packet production by a digital signal processor (DSP) is synchronized with modem transmission opportunities in a cable network.
      <br/>
      The cable modem computes the average waiting time a packet spends waiting to be transmitted by the modem.
      <br/>
      The DSP re-syncs transfer of packets to the modem by using this average waiting time minus a small amount sufficient to account for the maximum anticipated propagation delay, as the amount to delay the transmission of its next packet to the cable modem.
      <br/>
      This invention is a mechanism for re-synchronization that is largely independent of any propagation delays inherent in the hardware architecture.
    </p>
  </abstract>
  <description format="original" lang="en" id="desc_en">
    <heading>BACKGROUND OF THE INVENTION</heading>
    <p num="1">
      The present invention relates to cable modems.
      <br/>
      More specifically, the present invention relates to voice transmission over cable modems.
      <br/>
      The Data Over Cable Systems Interface Specification (DOCSIS) describes a standard for the cable modem interface between a cable TV operator and a computer.
      <br/>
      DOCSIS has been accepted as the standard for devices that handle incoming and outgoing data signals across this interface since DOCSIS 1.0 was ratified by the International Telecommunication Union (ITU) in March of 1998.
      <br/>
      Cable modems conforming to DOCSIS are available in many areas where cable operators operate.
    </p>
    <p num="2">
      The DOCSIS 1.1 specification provides for Unsolicited Grant service as one of several data transmission mechanisms for grabbing bandwidth for packets.
      <br/>
      This service is set up ahead of time between a cable modem and head-end equipment (CMTS), and is parameterized by the desired data packet arrival rate, packet size, and jitter tolerance.
      <br/>
      Once set up, the cable network head-end equipment will give unsolicited transmission opportunities (grants) to the cable modem at the requested rate.
      <br/>
      This service provides an efficient mechanism for transporting voice packets but does not provide for maximizing voice quality.
    </p>
    <p num="3">
      Unlike callers in a circuit-switched telephone network who are allocated a dedicated connection, cable modem users do not occupy a fixed amount of bandwidth during their online sessions but instead share the network with other online users, only using network resources when sending and receiving data in quick bursts.
      <br/>
      Users typically grab what they need from the available bandwidth at the instant they need to upload their packets.
      <br/>
      Delays in transmitting data packets do not affect data quality.
      <br/>
      However, for voice packets, delays in transmission degrade voice quality so there is a need to closely time voice packet availability with opportunities for transmission, especially in cable networks.
    </p>
    <p num="4">
      DOCSIS is an evolving standard which specifies modulation schemes and protocols for exchange of bidirectional signals over cable, allowing version 4 IP traffic to achieve transparent transfer between the Cable Modem Termination System-Network Side Interface (CMTS-NSI) and the Cable Modem to Customer Premise Equipment Interface (CMCI).
      <br/>
      Voice over IP (VoIP) is a new service capable of being supported by DOCSIS cable networks.
      <br/>
      Upgrades to existing cable modems and DSPs to maximize VoIP quality can be achieved by changing the programming in their EEPROM flash memory.
    </p>
    <heading>SUMMARY OF THE INVENTION</heading>
    <p num="5">
      The present invention relates to a method for synchronizing packet availability with the Unsolicited Grant data transfer opportunities in a DOCSIS 1.1 cable.
      <br/>
      The goal of this synchronization is to ensure that packet transmission delay in a cable modem is minimized by having the voice or data processed, packetized and ready to be transmitted by the cable modem as close to the grant opportunity as possible.
      <br/>
      This is an important consideration in voice over packet networks in general, and voice over cable networks specifically, due to the impact of delay on voice quality.
    </p>
    <p num="6">
      The major issue with implementation of packet/grant synchronization is that the module generating packets (digital signal processor or DSP) is typically separate from the module handling the cable data transmission/reception (cable modem).
      <br/>
      Thus, any synchronization scheme will need to account for latencies as well as minimizing packet wait time in issuing re-synchronization instructions, especially when the different modules reside on different physical hardware and are not running synchronized clocks.
      <br/>
      This invention describes a mechanism that is largely independent of these latencies, thus facilitating implementation.
    </p>
    <p num="7">Other advantages and features of the invention will be made apparent in connection with the following detailed description.</p>
    <p num="8">The present invention synchronizes availability of packets for transmission with the Unsolicited Grant data transfer opportunities in a DOCSIS 1.1 cable.</p>
    <p num="9">The present invention obtains a moving average of packet transmission waiting time in a DOCSIS 1.1 cable modem.</p>
    <p num="10">The present invention provides an apparatus for re-synchronizing packet transfer between a DSP and a cable modem that samples packet wait times and re-synchs if this time exceeds a presettable tolerance.</p>
    <p num="11">The present invention provides an apparatus for re-synchronizing packet transfer between a DSP and a cable modem that reaches a steady state within few sequential re-synchronization requests from a cable modem to the DSP in a DOCSIS 1.1 cable.</p>
    <p num="12">
      An exemplary embodiment of the invention, as described below includes a low pass filter and a device driver that samples the filter output, for a DOCSIS 1.1 cable modem such that the device driver determines average packet waiting time and maximum propagation delay and communicates their difference to the DSP as a re-sync amount.
      <br/>
      The DSP then re-syncs packet transfer by delaying transmission of the next packet in sequence by the re-sync amount.
      <br/>
      Thereafter, the DSP sends packets continuously, separated in time by the grant period.
      <br/>
      The net result is that subsequent packets arrive at the modem just-in-time for transmission over the cable, i.e., within a small time tolerance prior to the unsolicited grant opportunities in a DOCSIS 1.1 cable.
    </p>
    <heading>BRIEF DESCRIPTION OF THE DRAWINGS</heading>
    <p num="13">
      For a better understanding of the nature of the present invention its features and advantages, the subsequent detailed description is presented in connection with accompanying drawings in which:
      <br/>
      FIG. 1 is a diagram for DSP-to-cable modem packet transmission in a DOCSIS 1.1 cable modem according to the prior art.
      <br/>
      FIG. 2 is a diagram of re-sync which requires only one packetization period, according to the method of the present invention.
      <br/>
      FIG. 3 is an exemplary format for the re-sync message according to the current invention.
      <br/>
      FIG. 4 is an exemplary flow diagram of the process of re-synching according to the preferred embodiment of the current invention.
    </p>
    <heading>DETAILED DESCRIPTION OF PREFERRED EXEMPLARY EMBODIMENTS</heading>
    <p num="14">As illustrated in FIG. 1, after setup, a DOCSIS cable connection 10 provides unsolicited grant opportunities G spaced at a predetermined interval N. The modem 14 receives packet data PK from DSP 12 and uploads the packet data to the cable at G. The delay D between PK and XMIT comprises the propagation delay P between the DSP and modem and the wait time W in the modem waiting for the next unsolicited grant G. Without re-synching, as in the prior art, D remains constant.</p>
    <p num="15">Packet Transmission Delay</p>
    <p num="16">The situation in the current invention prior to re-sync is equivalent to that of the prior art and is illustrated in FIG. 1, where the following is assumed:</p>
    <p num="17">
      P=propagation delay or latency, i.e., time it takes for the packet transmission from the DSP to arrive at and process through the cable modem
      <br/>
      w=time packet waits in the modem's upstream queue before it is transmitted over the cable
      <br/>
      D=total packet delay time from the time it is transmitted by the DSP until the next grant opportunity, i.e., P+W
      <br/>
      N=packetization period.tbd.grant period
      <br/>
      T=wait time tolerance for D
    </p>
    <p num="18">Re-Sync by DSP</p>
    <p num="19">
      Suppose D&gt;T, i.e., the total delay exceeds the preset wait time tolerance.
      <br/>
      As illustrated in FIG. 2, an exemplary preferred embodiment, to accomplish a re-sync of the situation illustrated in FIG. 1, packet transmission by the DSP 16 to the cable modem 17 of the next packet 18 is delayed by
      <br/>
      W1 -P=re-sync delay=SHIFT AMOUNT
    </p>
    <p num="20">
      A re-sync request 18 is generated by the DSP 17 since the wait time exceeds the preset tolerance, T, such that the next packet can be available for transmission within the desired tolerance of the grant opportunity DOCSIS cable 15.
      <br/>
      When the packet transmission is shifted, the formation of the packet is also shifted.
      <br/>
      Because the packet must be of a standard size, this shift necessitates a small loss of the front end or trail end of the shifted packet.
    </p>
    <p num="21">
      The goal of a re-sync event is to minimize D. The propagation delay (latency), P, cannot be minimized: P varies but has a determinable upper limit, Pmax.
      <br/>
      Pmax is a configuration parameter and could be determined by measuring the worst case voice packet transfer time from the DSP to the modem with a logic analyzer or similar tools.
      <br/>
      In a preferred embodiment, a special loopback message could be used between the cable modem and the DSP.
      <br/>
      The DSP could periodically measure Pmax by timing the round-trip delay to send/receive this message and then dividing by two.
      <br/>
      This value could then be reported to the cable modem to use as Pmax.
      <br/>
      Only the packet's waiting time, W, in the upstream queue can be reduced.
      <br/>
      In the preferred embodiment this is accomplished by shifting to a later time the DSP's transmission of the next packet to the cable modem by:
      <br/>
      SHIFT AMOUNT=�AVG(W)-Pmax �=WAVE-Pmax
    </p>
    <p num="22">
      Ideally, to minimize the potential drop in voice quality, the DSP sends the next packet SHIFT AMOUNT later than normal, so that the next packet arrives at the device driver just-in-time for the unsolicited grant opportunity, i.e., just slightly earlier than the grant opportunity 11.
      <br/>
      However, it is not critical that this be the case as illustrated below.
    </p>
    <p num="23">
      Since the DSP continues to continuously send packets separated in time by N, this is a shift backward of SHIFT AMOUNT of all subsequent packets sent by the DSP to the cable modem.
      <br/>
      While this shift does not result in any loss of data for the subsequent packets, this delay may result in the loss of some information from the stream being sampled by the DSP which should have been included in the next packet.
      <br/>
      Adding a delay increases the packetization period beyond N for the next packet only.
      <br/>
      Potentially, this increase results in more data being sampled than can be packaged in a single packet.
      <br/>
      Some data may have to be discarded.
    </p>
    <p num="24">
      A few sequential re-synchs may be required before a steady state is achieved, i.e., where packets continue to arrive just prior to the grant opportunity without frequent re-synchs.
      <br/>
      In the preferred embodiment it is assumed that the DSP is always able to re-sync on the next packet following the one that triggered a re-sync request.
      <br/>
      This situation is illustrated in FIG. 2 where re-sync is achieved by one DSP re-synch, as directed by the cable modem, because the resultant waiting time is less than T.
    </p>
    <p num="25">
      In an alternative embodiment the DSP will not always be able to re-sync on the next packet it sends, but will transmit some number of packets in sequence, S, before accomplishing re-synch.
      <br/>
      In this alternative embodiment a guard gate is employed in the modem to inhibit both re-sync checking and request generation for S packets, to allow the DSP time to re-synch.
    </p>
    <p num="26">Cable Modem and Device Driver</p>
    <p num="27">
      In the preferred embodiment the cable modem includes a low pass filter for producing the moving average of packet waiting times.
      <br/>
      When the DOCSIS service flow for the voice stream is created, starting the unsolicited grant service, the driver can be provided with a grant-sync function and pointer to a piece of opaque state data or a cookie.
      <br/>
      When the service flow transmit routine is called, the time is noted and the grant-sync function is called with a PKT--ARR function code along with the cookie, which will be used to store the filter state.
      <br/>
      After the packet has been transmitted, the cable modem driver notes the time and calls the grant-sync function with a PKT--XMIT function code.
      <br/>
      Internally, this has the effect of producing the moving average of waiting time, WAVE.
      <br/>
      One approach to this calculation is to use exponential smoothing; with this technique, the output of the filter, WAVE, is determined as follows:
      <br/>
      WAVEnew=a*W+(1-a)*WAVEold;
      <br/>
      where "a" is the smoothing factor (0&lt;a&gt;1).
    </p>
    <p num="28">
      "a" would typically be a tunable parameter and would most likely be set so as to limit the impact of short duration oscillations in the waiting time measurement.
      <br/>
      For example, "a" could be set so that at least K observations of maximal waiting time would need to be observed before WAVE reaches the threshold for reissuing re-sync messages to the DSP.
    </p>
    <p num="29">
      This filtering object would provide a PKT--DROP function code, so that the cable modem driver can negate observations in the case where the packet was never transmitted.
      <br/>
      Also, a PKT--INIT function code would allow the cable modem driver to reset the moving average after exceptional conditions, such as loss of cable modem upstream, etc.
    </p>
    <p num="30">DSP/Cable Modem Interface Protocol</p>
    <p num="31">
      In the preferred embodiment, the DSP/modem protocol is upgraded to include the following steps, see FIG. 4:
      <br/>
      the DSP produces a packet, and transmits the packet to the cable modem 20;
      <br/>
      the packet arrives at the cable modem, packet arrival is time stamped, and the packet is placed in an upstream queue the packet is transmitted by the cable modem and packet transmission is time stamped 22;
      <br/>
      the cable modem device driver computes the wait time, W, for the packet by computing the difference between its transmission and arrival time stamps 23;
      <br/>
      W, the measured waiting time is fed by the device driver to a low pass filter (e.g., moving average) whose output is a measure of the average waiting time, WAVE 24;
      <br/>
      WAVE is compared to a threshold or tolerance 25, T, and if WAVE&gt;T a re-sync event takes place 27:
    </p>
    <p num="32">
      - a re-sync message, format shown in FIG. 3, containing SHIFT AMOUNT is sent to the DSP 26,
      <br/>
      - on the next packet the DSP performs re-sync 27, by delaying this packet's formation and transmission to the cable modem by SHIFT AMOUNT.
    </p>
    <p num="33">Re-Sync Message(s)</p>
    <p num="34">
      A simple format for the re-sync message to the DSP is illustrated in FIG. 3.
      <br/>
      The minimal requirements are:
      <br/>
      Channel: a field for identifying the voice channel within the DSP that needs to be re-synchronized.
    </p>
    <p num="35">
      Message Type: a message type, which will be equal to a constant GTANT--SYNCH, and
      <br/>
      Shift Amount: the shift amount, in convenient time units such as voice samples, (typically 125 micro seconds)
    </p>
    <p num="36">Re-Re-Synching</p>
    <p num="37">
      Since the DSP employs the grant interval, N, to equally space all packets subsequent to the re-sync event, all future packets sent by the DSP should arrive just-in-time for the grant opportunity.
      <br/>
      However, there will be some drift subsequent to re-sync events and, very occasionally, re-re-synching will be needed.
      <br/>
      To accommodate this drift, the average wait time, WAVE, is continually or periodically output, compared to a wait time tolerance T, and when and if WAVE&gt;T another re-sync event takes place.
      <br/>
      Thereafter, subject to drift, the packets will once again arrive within tolerance T of the grant interval, i.e., just-in-time to be transmitted by the cable modem.
    </p>
    <p num="38">Guard Gate</p>
    <p num="39">
      In an alternative embodiment, the cable modem may not send the re-sync message in real time and/or the DSP may not adjust immediately on receiving a re-sync message with the result that there will be several packets in a row arriving at the cable modem which would trigger additional re-sync events.
      <br/>
      To guard against sending a sequence of two or more identical re-sync messages to the DSP, once a re-sync event has been triggered, the cable modem must wait several packets, i.e., S, before again checking WAVE against T. In an alternative embodiment, this is realized as a guard gate 30.
    </p>
    <p num="40">
      As a person skilled in the art will realize, numerous other modifications to the DSP/Cable Modem interface can be made to accomplish the current invention.
      <br/>
      Because many varying and different embodiments may be made within the scope of the inventive concept herein taught, and because many modifications may be made in the embodiments herein detailed in accordance with the descriptive requirements of the law, it is to be understood that the details herein are to be interpreted as illustrative and not in a limiting sense.
    </p>
  </description>
  <claims format="original" lang="en" id="claim_en">
    <claim num="1">
      <claim-text>What is claimed is:</claim-text>
      <claim-text>1.</claim-text>
      <claim-text>A method for synchronizing packet production and receipt from a packetization module such as a digital signal processor (DSP) with unsolicited grant transmission opportunities in a cable modem, said method comprising:</claim-text>
      <claim-text>producing a packet by a DSP; transmitting said packet from said DSP to cable modem;</claim-text>
      <claim-text>and receiving said packet by said cable modem; time stamping the arrival of said packet at said cable modem;</claim-text>
      <claim-text>and transmitting said packet by said cable modem, wherein said packet transmission from said DSP to said cable modem is synchronized with said cable modem's next unsolicited transmission grant opportunity.</claim-text>
    </claim>
    <claim num="2">
      <claim-text>2. A method according to claim 1, wherein said method further comprises determination of the average waiting time of said packet in said cable modem by: time stamping said transmission of said packet by said cable modem;</claim-text>
      <claim-text>and computing the wait time of said packet in said cable modem as the difference between said arrival time stamp and said transmission time stamp.</claim-text>
    </claim>
    <claim num="3">
      <claim-text>3. A method according to claim 2, further comprising the step of: obtaining a moving average of said wait times up to the current time.</claim-text>
    </claim>
    <claim num="4">
      <claim-text>4. A method according to claim 3, wherein said method further comprises: determining a re-sync value based on said computed wait time; comparing said re-sync value to a re-sync value range; transmitting said re-sync value to said DSP whenever said re-sync value is outside said re-sync value range.</claim-text>
    </claim>
    <claim num="5">
      <claim-text>5. A method according to claim 4, wherein said DSP further comprises: redefining transmission slots for said packets to said modem in response to said re-sync amount transmitted from said modem; using said redefined slots to time the DSP'S production and transmission of said packet to the cable modem.</claim-text>
    </claim>
    <claim num="6">
      <claim-text>6. A method according to claim 1, wherein: transmitting said packets by said cable modem includes continuously monitoring said packets, at least some of said continuously transmitted packets generating a re-sync request to said DSP; transmitting of said packet continuously by the cable modem is according to predefined, fixed period, unsolicited grant opportunities; producing said packets continuously by the DSP in fixed time slots until new slot timer information is transmitted in a re-sync request to said DSP by said cable modem.</claim-text>
    </claim>
    <claim num="7">
      <claim-text>7. A method according to claim 6, wherein said method further comprises: analyzing timing of said packet arrivals relative to timing of said grant opportunities at said cable modem, and responsively identifying the need for new slot timer information;</claim-text>
      <claim-text>and transmitting said re-sync request to said DSP includes calculating said new slot timer information at the cable modem.</claim-text>
    </claim>
    <claim num="8">
      <claim-text>8. An apparatus for synchronizing packets from a packetization module with unsolicited grant transmission opportunities in a cable modem, comprising: a digital signal processor for producing packetized data in fixed times slots and for transmitting said packets to a cable modem; a cable modem for receiving said packets and for transmitting said packets at unsolicited grant opportunities; comparater logic for determining a wait time between an arrival of said packets at said cable modem and said unsolicited grant opportunities;</claim-text>
      <claim-text>and adjustment logic for adjusting the production and transmission of packets by said DSP in accordance with said determined wait time.</claim-text>
    </claim>
    <claim num="9">
      <claim-text>9. An apparatus according to claim 8, wherein said production adjustment comprises: means for redefining packet production time to minimize said determined wait time to produce packets for receipt by the cable modem just in time for transmission grant opportunities.</claim-text>
    </claim>
  </claims>
</questel-patent-document>