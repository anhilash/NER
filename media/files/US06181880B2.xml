<?xml version="1.0" encoding="UTF-8"?>
<questel-patent-document lang="en" date-produced="20180805" produced-by="Questel" schema-version="3.23" file="US06181880B2.xml">
  <bibliographic-data lang="en">
    <publication-reference publ-desc="Granted patent as second publication">
      <document-id>
        <country>US</country>
        <doc-number>06181880</doc-number>
        <kind>B2</kind>
        <date>20010130</date>
      </document-id>
      <document-id data-format="questel">
        <doc-number>US6181880</doc-number>
      </document-id>
    </publication-reference>
    <original-publication-kind>B2</original-publication-kind>
    <application-reference is-representative="YES" family-id="12799488" extended-family-id="28538017">
      <document-id>
        <country>US</country>
        <doc-number>09258823</doc-number>
        <kind>A</kind>
        <date>19990226</date>
      </document-id>
      <document-id data-format="questel">
        <doc-number>1999US-09258823</doc-number>
      </document-id>
      <document-id data-format="questel_Uid">
        <doc-number>29194365</doc-number>
      </document-id>
    </application-reference>
    <language-of-filing>en</language-of-filing>
    <language-of-publication>en</language-of-publication>
    <priority-claims>
      <priority-claim kind="national" sequence="1">
        <country>JP</country>
        <doc-number>4829698</doc-number>
        <kind>A</kind>
        <date>19980227</date>
        <priority-active-indicator>Y</priority-active-indicator>
      </priority-claim>
      <priority-claim data-format="questel" sequence="1">
        <doc-number>1998JP-0048296</doc-number>
      </priority-claim>
    </priority-claims>
    <dates-of-public-availability>
      <publication-of-grant-date>
        <date>20010130</date>
      </publication-of-grant-date>
    </dates-of-public-availability>
    <classifications-ipcr>
      <classification-ipcr sequence="1">
        <text>G03C   3/00        20060101AFI20051220RMJP</text>
        <ipc-version-indicator>
          <date>20060101</date>
        </ipc-version-indicator>
        <classification-level>A</classification-level>
        <section>G</section>
        <class>03</class>
        <subclass>C</subclass>
        <main-group>3</main-group>
        <subgroup>00</subgroup>
        <symbol-position>F</symbol-position>
        <classification-value>I</classification-value>
        <generating-office>
          <country>JP</country>
        </generating-office>
        <classification-status>R</classification-status>
        <classification-data-source>M</classification-data-source>
        <action-date>
          <date>20051220</date>
        </action-date>
      </classification-ipcr>
      <classification-ipcr sequence="2">
        <text>G03B   7/24        20060101A I20051008RMEP</text>
        <ipc-version-indicator>
          <date>20060101</date>
        </ipc-version-indicator>
        <classification-level>A</classification-level>
        <section>G</section>
        <class>03</class>
        <subclass>B</subclass>
        <main-group>7</main-group>
        <subgroup>24</subgroup>
        <classification-value>I</classification-value>
        <generating-office>
          <country>EP</country>
        </generating-office>
        <classification-status>R</classification-status>
        <classification-data-source>M</classification-data-source>
        <action-date>
          <date>20051008</date>
        </action-date>
      </classification-ipcr>
      <classification-ipcr sequence="3">
        <text>H04N   1/00        20060101A I20051008RMEP</text>
        <ipc-version-indicator>
          <date>20060101</date>
        </ipc-version-indicator>
        <classification-level>A</classification-level>
        <section>H</section>
        <class>04</class>
        <subclass>N</subclass>
        <main-group>1</main-group>
        <subgroup>00</subgroup>
        <classification-value>I</classification-value>
        <generating-office>
          <country>EP</country>
        </generating-office>
        <classification-status>R</classification-status>
        <classification-data-source>M</classification-data-source>
        <action-date>
          <date>20051008</date>
        </action-date>
      </classification-ipcr>
      <classification-ipcr sequence="4">
        <text>H04N   1/21        20060101A I20051008RMEP</text>
        <ipc-version-indicator>
          <date>20060101</date>
        </ipc-version-indicator>
        <classification-level>A</classification-level>
        <section>H</section>
        <class>04</class>
        <subclass>N</subclass>
        <main-group>1</main-group>
        <subgroup>21</subgroup>
        <classification-value>I</classification-value>
        <generating-office>
          <country>EP</country>
        </generating-office>
        <classification-status>R</classification-status>
        <classification-data-source>M</classification-data-source>
        <action-date>
          <date>20051008</date>
        </action-date>
      </classification-ipcr>
      <classification-ipcr sequence="5">
        <text>H04N   1/387       20060101ALI20051220RMJP</text>
        <ipc-version-indicator>
          <date>20060101</date>
        </ipc-version-indicator>
        <classification-level>A</classification-level>
        <section>H</section>
        <class>04</class>
        <subclass>N</subclass>
        <main-group>1</main-group>
        <subgroup>387</subgroup>
        <symbol-position>L</symbol-position>
        <classification-value>I</classification-value>
        <generating-office>
          <country>JP</country>
        </generating-office>
        <classification-status>R</classification-status>
        <classification-data-source>M</classification-data-source>
        <action-date>
          <date>20051220</date>
        </action-date>
      </classification-ipcr>
      <classification-ipcr sequence="6">
        <text>H04N   1/46        20060101A I20051008RMEP</text>
        <ipc-version-indicator>
          <date>20060101</date>
        </ipc-version-indicator>
        <classification-level>A</classification-level>
        <section>H</section>
        <class>04</class>
        <subclass>N</subclass>
        <main-group>1</main-group>
        <subgroup>46</subgroup>
        <classification-value>I</classification-value>
        <generating-office>
          <country>EP</country>
        </generating-office>
        <classification-status>R</classification-status>
        <classification-data-source>M</classification-data-source>
        <action-date>
          <date>20051008</date>
        </action-date>
      </classification-ipcr>
      <classification-ipcr sequence="7">
        <text>H04N   1/60        20060101ALI20051220RMJP</text>
        <ipc-version-indicator>
          <date>20060101</date>
        </ipc-version-indicator>
        <classification-level>A</classification-level>
        <section>H</section>
        <class>04</class>
        <subclass>N</subclass>
        <main-group>1</main-group>
        <subgroup>60</subgroup>
        <symbol-position>L</symbol-position>
        <classification-value>I</classification-value>
        <generating-office>
          <country>JP</country>
        </generating-office>
        <classification-status>R</classification-status>
        <classification-data-source>M</classification-data-source>
        <action-date>
          <date>20051220</date>
        </action-date>
      </classification-ipcr>
    </classifications-ipcr>
    <classification-national>
      <country>US</country>
      <main-classification>
        <text>396321000</text>
        <class>396</class>
        <subclass>321000</subclass>
      </main-classification>
      <further-classification sequence="1">
        <text>348096000</text>
        <class>348</class>
        <subclass>096000</subclass>
      </further-classification>
      <further-classification sequence="2">
        <text>348110000</text>
        <class>348</class>
        <subclass>110000</subclass>
      </further-classification>
      <further-classification sequence="3">
        <text>396429000</text>
        <class>396</class>
        <subclass>429000</subclass>
      </further-classification>
    </classification-national>
    <classifications-ecla>
      <classification-ecla sequence="1">
        <text>H04N-001/00C5A</text>
        <section>H</section>
        <class>04</class>
        <subclass>N</subclass>
        <main-group>001</main-group>
        <subgroup>00C5A</subgroup>
      </classification-ecla>
      <classification-ecla sequence="2">
        <text>G03B-007/24</text>
        <section>G</section>
        <class>03</class>
        <subclass>B</subclass>
        <main-group>7</main-group>
        <subgroup>24</subgroup>
      </classification-ecla>
      <classification-ecla sequence="3">
        <text>H04N-001/00C5</text>
        <section>H</section>
        <class>04</class>
        <subclass>N</subclass>
        <main-group>001</main-group>
        <subgroup>00C5</subgroup>
      </classification-ecla>
      <classification-ecla sequence="4">
        <text>H04N-001/00C5F</text>
        <section>H</section>
        <class>04</class>
        <subclass>N</subclass>
        <main-group>001</main-group>
        <subgroup>00C5F</subgroup>
      </classification-ecla>
      <classification-ecla sequence="5">
        <text>H04N-001/21B</text>
        <section>H</section>
        <class>04</class>
        <subclass>N</subclass>
        <main-group>001</main-group>
        <subgroup>21B</subgroup>
      </classification-ecla>
      <classification-ecla sequence="6">
        <text>H04N-001/21B7</text>
        <section>H</section>
        <class>04</class>
        <subclass>N</subclass>
        <main-group>001</main-group>
        <subgroup>21B7</subgroup>
      </classification-ecla>
      <classification-ecla sequence="7">
        <text>H04N-001/46</text>
        <section>H</section>
        <class>04</class>
        <subclass>N</subclass>
        <main-group>1</main-group>
        <subgroup>46</subgroup>
      </classification-ecla>
    </classifications-ecla>
    <patent-classifications>
      <patent-classification sequence="1">
        <classification-scheme office="EP" scheme="CPC">
          <date>20130101</date>
        </classification-scheme>
        <classification-symbol>H04N-001/00251</classification-symbol>
        <section>H</section>
        <class>04</class>
        <subclass>N</subclass>
        <main-group>1</main-group>
        <subgroup>00251</subgroup>
        <symbol-position>F</symbol-position>
        <classification-value>I</classification-value>
        <classification-status>B</classification-status>
        <classification-data-source>H</classification-data-source>
        <action-date>
          <date>20130101</date>
        </action-date>
      </patent-classification>
      <patent-classification sequence="2">
        <classification-scheme office="EP" scheme="CPC">
          <date>20130101</date>
        </classification-scheme>
        <classification-symbol>G03B-007/24</classification-symbol>
        <section>G</section>
        <class>03</class>
        <subclass>B</subclass>
        <main-group>7</main-group>
        <subgroup>24</subgroup>
        <symbol-position>L</symbol-position>
        <classification-value>I</classification-value>
        <classification-status>B</classification-status>
        <classification-data-source>H</classification-data-source>
        <action-date>
          <date>20130101</date>
        </action-date>
      </patent-classification>
      <patent-classification sequence="3">
        <classification-scheme office="EP" scheme="CPC">
          <date>20130101</date>
        </classification-scheme>
        <classification-symbol>G03B-2206/008</classification-symbol>
        <section>G</section>
        <class>03</class>
        <subclass>B</subclass>
        <main-group>2206</main-group>
        <subgroup>008</subgroup>
        <symbol-position>L</symbol-position>
        <classification-value>A</classification-value>
        <classification-status>B</classification-status>
        <classification-data-source>H</classification-data-source>
        <action-date>
          <date>20130101</date>
        </action-date>
      </patent-classification>
      <patent-classification sequence="4">
        <classification-scheme office="EP" scheme="CPC">
          <date>20130101</date>
        </classification-scheme>
        <classification-symbol>H04N-001/00249</classification-symbol>
        <section>H</section>
        <class>04</class>
        <subclass>N</subclass>
        <main-group>1</main-group>
        <subgroup>00249</subgroup>
        <symbol-position>L</symbol-position>
        <classification-value>I</classification-value>
        <classification-status>B</classification-status>
        <classification-data-source>H</classification-data-source>
        <action-date>
          <date>20130101</date>
        </action-date>
      </patent-classification>
      <patent-classification sequence="5">
        <classification-scheme office="EP" scheme="CPC">
          <date>20130101</date>
        </classification-scheme>
        <classification-symbol>H04N-001/00267</classification-symbol>
        <section>H</section>
        <class>04</class>
        <subclass>N</subclass>
        <main-group>1</main-group>
        <subgroup>00267</subgroup>
        <symbol-position>L</symbol-position>
        <classification-value>I</classification-value>
        <classification-status>B</classification-status>
        <classification-data-source>H</classification-data-source>
        <action-date>
          <date>20130101</date>
        </action-date>
      </patent-classification>
      <patent-classification sequence="6">
        <classification-scheme office="EP" scheme="CPC">
          <date>20130101</date>
        </classification-scheme>
        <classification-symbol>H04N-001/2104</classification-symbol>
        <section>H</section>
        <class>04</class>
        <subclass>N</subclass>
        <main-group>1</main-group>
        <subgroup>2104</subgroup>
        <symbol-position>L</symbol-position>
        <classification-value>I</classification-value>
        <classification-status>B</classification-status>
        <classification-data-source>H</classification-data-source>
        <action-date>
          <date>20130101</date>
        </action-date>
      </patent-classification>
      <patent-classification sequence="7">
        <classification-scheme office="EP" scheme="CPC">
          <date>20130101</date>
        </classification-scheme>
        <classification-symbol>H04N-001/2158</classification-symbol>
        <section>H</section>
        <class>04</class>
        <subclass>N</subclass>
        <main-group>1</main-group>
        <subgroup>2158</subgroup>
        <symbol-position>L</symbol-position>
        <classification-value>I</classification-value>
        <classification-status>B</classification-status>
        <classification-data-source>H</classification-data-source>
        <action-date>
          <date>20130101</date>
        </action-date>
      </patent-classification>
      <patent-classification sequence="8">
        <classification-scheme office="EP" scheme="CPC">
          <date>20130101</date>
        </classification-scheme>
        <classification-symbol>H04N-001/46</classification-symbol>
        <section>H</section>
        <class>04</class>
        <subclass>N</subclass>
        <main-group>1</main-group>
        <subgroup>46</subgroup>
        <symbol-position>L</symbol-position>
        <classification-value>I</classification-value>
        <classification-status>B</classification-status>
        <classification-data-source>H</classification-data-source>
        <action-date>
          <date>20130101</date>
        </action-date>
      </patent-classification>
      <patent-classification sequence="9">
        <classification-scheme office="EP" scheme="CPC">
          <date>20130101</date>
        </classification-scheme>
        <classification-symbol>H04N-2201/214</classification-symbol>
        <section>H</section>
        <class>04</class>
        <subclass>N</subclass>
        <main-group>2201</main-group>
        <subgroup>214</subgroup>
        <symbol-position>L</symbol-position>
        <classification-value>A</classification-value>
        <classification-status>B</classification-status>
        <classification-data-source>H</classification-data-source>
        <action-date>
          <date>20130101</date>
        </action-date>
      </patent-classification>
      <patent-classification sequence="10">
        <classification-scheme office="EP" scheme="ICO"/>
        <classification-symbol>S03B-206/00H</classification-symbol>
      </patent-classification>
      <patent-classification sequence="11">
        <classification-scheme office="EP" scheme="ICO"/>
        <classification-symbol>T04N-201/21Q</classification-symbol>
      </patent-classification>
    </patent-classifications>
    <number-of-claims>9</number-of-claims>
    <exemplary-claim>1</exemplary-claim>
    <figures>
      <number-of-drawing-sheets>13</number-of-drawing-sheets>
      <number-of-figures>19</number-of-figures>
      <image-key data-format="questel">US6181880</image-key>
    </figures>
    <invention-title format="original" lang="en" id="title_en">Image data recording method and frame image regenerating method</invention-title>
    <references-cited>
      <citation srep-phase="examiner">
        <patcit num="1">
          <text>INUIYA MASAFUMI</text>
          <document-id>
            <country>US</country>
            <doc-number>5640201</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5640201</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="examiner">
        <patcit num="2">
          <text>SUGIYAMA NAOSHI</text>
          <document-id>
            <country>US</country>
            <doc-number>5808667</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5808667</doc-number>
          </document-id>
        </patcit>
      </citation>
    </references-cited>
    <parties>
      <applicants>
        <applicant data-format="original" app-type="applicant" sequence="1">
          <addressbook lang="en">
            <orgname>Fuji Photo Film Co., Ltd.</orgname>
            <address>
              <address-1>Kanagawa, JP</address-1>
              <city>Kanagawa</city>
              <country>JP</country>
            </address>
          </addressbook>
          <nationality>
            <country>JP</country>
          </nationality>
        </applicant>
        <applicant data-format="questel" app-type="applicant" sequence="2">
          <addressbook lang="en">
            <orgname>FUJIFILM</orgname>
          </addressbook>
          <nationality>
            <country>JP</country>
          </nationality>
        </applicant>
      </applicants>
      <inventors>
        <inventor data-format="original" sequence="1">
          <addressbook lang="en">
            <name>Ishihara, Atsuhiko</name>
            <address>
              <address-1>Asaka, JP</address-1>
              <city>Asaka</city>
              <country>JP</country>
            </address>
          </addressbook>
          <nationality>
            <country>JP</country>
          </nationality>
        </inventor>
        <inventor data-format="original" sequence="2">
          <addressbook lang="en">
            <name>Nakazawa, Makoto</name>
            <address>
              <address-1>Asaka, JP</address-1>
              <city>Asaka</city>
              <country>JP</country>
            </address>
          </addressbook>
          <nationality>
            <country>JP</country>
          </nationality>
        </inventor>
      </inventors>
    </parties>
    <examiners>
      <primary-examiner>
        <name>Mathews, Alan A.</name>
      </primary-examiner>
    </examiners>
    <lgst-data>
      <lgst-status>LAPSED</lgst-status>
    </lgst-data>
  </bibliographic-data>
  <abstract format="original" lang="en" id="abstr_en">
    <p id="P-EN-00001" num="00001">
      <br/>
      An image data recording method for recording, in an IC memory mounted in a film cartridge, image data of one or more desired frames on developed photographic film stored in the film cartridge is provided.
      <br/>
      The image data recording method comprises the steps of: determining the residual capacity of IC memory, changing the quantity of image data of one or more desired frames to be recorded in the IC memory or erasing the data recorded in the IC memory in accordance with the determined residual capacity of IC memory, and recording the image data of one or more desired frames in the residual capacity of the IC memory.
    </p>
  </abstract>
  <description format="original" lang="en" id="desc_en">
    <heading>BACKGROUND OF THE INVENTION</heading>
    <p num="1">
      1.
      <br/>
      Field of the Invention
    </p>
    <p num="2">The present invention relates generally to an image data recording method and a frame image regenerating method, and more particularly to an image data recording method and a frame image regenerating method which display film images on a monitor within a short period of time by using data in an IC memory loaded in a film cartridge.</p>
    <p num="3">2. Description of Related Art</p>
    <p num="4">
      Recently, an Advanced Photo System (APS) film has been proposed as a new photographic film.
      <br/>
      A magnetic layer is coated on the surface of the APS film, and photographic information, printing information, etc. are magnetically recorded on the film.
      <br/>
      The APS film is stored in a film cartridge in the state wherein the film is completely shielded.
      <br/>
      After the photography, the developed film, which is stored in the film cartridge, is returned from a laboratory.
    </p>
    <p num="5">
      There is a conventional APS film cartridge loaded with an IC memory.
      <br/>
      The IC memory is capable of containing a lot of information which cannot be magnetically recorded on the film.
      <br/>
      Moreover, it is possible to immediately read the information recorded in the IC memory without removing the film from the film cartridge.
    </p>
    <p num="6">
      On the other hand, a film player is known which images a developed film by an image sensor such as a CCD and converts a film image into an image signal, which is output to a TV monitor that displays the film image.
      <br/>
      There is also proposed a film player, which records and regenerates with respect to the APS film, and a film player which writes and reads the data with respect to the IC memory loaded in the APS film cartridge.
    </p>
    <p num="7">
      If the film player displays the images on the APS film on a TV monitor, it is necessary to remove the film from the APS film cartridge and feed the film in order to image each frame image.
      <br/>
      For this reason, tension and friction are applied to the film, and, thus, regenerating frame images repeatedly would deteriorate the film.
    </p>
    <p num="8">
      If the film player displays the images on the APS film on the TV monitor, the image data of all frames is acquired in pre-scanning to obtain information such as the brightness and white balance of each frame.
      <br/>
      In accordance with the information, main scanning is performed for each frame and the image data acquired by the main scanning is processed appropriately and displayed on the TV monitor.
      <br/>
      Accordingly, the film must be fed reciprocally a plurality of times during one regeneration.
      <br/>
      This is a heavy stress on the film, and it takes a long time to regenerate the images.
    </p>
    <p num="9">
      To solve the above-mentioned problem, a film cartridge with IC memory has been proposed in which the image data of each frame is recorded in the IC memory and in which, when the film player regenerates the film image, the image data of each frame is read from the IC memory and is displayed on the TV monitor without removing the film from the film cartridge.
      <br/>
      This reduces stress on the film and shortens the regeneration time of the film image.
    </p>
    <p num="10">
      The IC memory is mounted in the film cartridge within a limited space, and thus, there is a limitation on the capacity of the memory.
      <br/>
      At present, it is difficult to record, in the IC memory, the image data of all frames with the quantity that can be processed by the film player.
      <br/>
      It is necessary to reduce and compress the image data in order to decrease the quantity of the image data that is recorded in the IC memory.
    </p>
    <heading>SUMMARY OF THE INVENTION</heading>
    <p num="11">
      The present invention has been developed to address the above-described circumstances.
      <br/>
      An object of the invention is the provision of an image data recording method and a frame image regenerating method which record image data of one or more desired frames in accordance with the residual capacity of the IC memory loaded in the film cartridge.
      <br/>
      A second object of the invention is the provision of a frame image regenerating method records, in the IC memory, the data used to process the image during the regeneration, in order to eliminate the necessity for scanning the film when the film image is regenerated.
      <br/>
      The prevention thereby prevents the deterioration of the film and displays the desired frame images on a monitor within a short period of time.
    </p>
    <p num="12">
      To achieve the above-mentioned object of image data recording method, the present invention is directed to a method for recording, in a storage medium attached to a film cartridge, image data of at least one desired frame on a developed photographic film stored in the film cartridge.
      <br/>
      The image recording method comprises the steps of: determining a residual memory capacity of the storage medium; changing a quantity of image data of the desired frame to be recorded in the storage medium or erasing data recorded in the storage medium in accordance with the residual memory capacity of the storage medium; and allowing the image data of the desired frame to be recorded within the residual memory capacity of the storage medium.
    </p>
    <p num="13">The image data recording method further comprises the steps of: calculating the number of frames which are permitted to be recorded in the storage medium in accordance with the residual memory capacity of the storage medium and the quantity of image data for one frame to be recorded; and displaying the calculated number of frames.</p>
    <p num="14">The image data recording method further comprises the step of arbitrarily changing the quantity of image data in each frame so that the quantity of the image data can be recorded in the storage medium.</p>
    <p num="15">The image data recording method further comprises the step of reducing and/or compressing the image data to thereby change the quantity of the image data.</p>
    <p num="16">
      According to the present invention, the image data of each frame is recorded in the storage medium loaded in the film cartridge, and thus, the image of each frame is regenerated without extracting the film from the film cartridge.
      <br/>
      This prevents the deterioration of the film and reduces the regeneration time of the frame image.
      <br/>
      The quantity of the image data of each frame is changed in accordance with the residual memory capacity of the storage medium, and it is therefore possible to arbitrarily set the number and quality of frame images recorded in the storage medium.
    </p>
    <p num="17">
      To achieve the above-mentioned object, the present invention is directed to a method comprising the steps of: using a film cartridge with a storage medium mounted therein, the storage medium containing setup data comprising an exposure time T0 of an electronic shutter for imaging a negative base on a developed photographic film stored in the film cartridge at a predetermined brightness, an exposure time Ti of the electronic shutter for regenerating each frame image on the photographic film at a proper brightness, where i is a frame number, and color correction data for regenerating each frame image on the photographic film in a proper color; reading the setup data recorded in the storage medium, finding an exposure time T'0 of the electronic shutter for imaging the negative base on the film at a predetermined brightness, and calculating an exposure time T'i for regenerating each frame image at a proper brightness in accordance with the following equation:
      <br/>
      T'i =T'0 /T0 * Ti,
    </p>
    <p num="18">whereby regenerating each frame image on the photographic film in accordance with the calculated exposure time T'i of the electronic shutter and the color correction data of the setup data.</p>
    <p num="19">In the frame image regenerating method, the color correction data comprises reference maximum values Rmax, Gmax and Bmax and reference minimum values Rmin, Gmin and Bmin of gradations in R, G and B colors.</p>
    <p num="20">The frame image regenerating method further comprises the steps of:</p>
    <p num="21">
      recording, in the storage medium, convergent values R0, G0 and B0 of gradations in R, G and B colors in the case in which the negative base on the photographic film is imaged in the exposure time T0 of the electronic shutter; determining convergent values R'0, G'0, B'0 of gradations in R, G and B colors in the case in which the negative base on the photographic film is imaged in the exposure time T'0 of the electronic shutter during the regeneration of frame images on the photographic film; and calibrating the reference maximum values R'max, G'max and B'max and the reference minimum values R'min, G'min and B'min of gradations in R, G and B colors during the regeneration of each frame in accordance with the following equations:
      <br/>
      R'max =R'0 /R0 * Rmax ;
      <br/>
      G'max =G'0 /G0 * Gmax ; and
      <br/>
      B'max =B'0 /B0 * Bmax.
    </p>
    <p num="22">
      According to the present inventions, the setup data required for regenerating the frame images is recorded in the storage medium loaded in the film cartridge, and the setup data is referred to during the regeneration of the frame images.
      <br/>
      It is therefore possible to immediately perform the main scanning for each frame without pre-scanning the film.
      <br/>
      This prevents the deterioration of the film and reduces the regeneration time of the frame images.
      <br/>
      Moreover, the setup data is calibrated in accordance with the information acquired by imaging the negative base.
      <br/>
      Consequently, it is possible to properly regenerate the image in each frame according to the setup data recorded in the storage medium even if there is a change in the apparatus as time passes or even if the different apparatuses record the setup data and regenerate the image in the storage medium.
    </p>
    <heading>BRIEF DESCRIPTION OF THE DRAWINGS</heading>
    <p num="23">
      The nature of this invention, as well as other objects and advantages thereof, will be explained in the following with reference to the accompanying drawings, in which like reference characters designate the same or similar parts throughout the figures and wherein:
      <br/>
      FIG. 1 is a view illustrating the structure of the whole system including a film player, to which a film image input method of the present invention is applied;
      <br/>
      FIG. 2 is a view illustrating an example of a film cartridge applied to the film player in FIG. 1;
      <br/>
      FIG. 3 is a view illustrating the side of a film cartridge applied to the film player in FIG. 1;
      <br/>
      FIG. 4 is a block diagram illustrating an embodiment of the inner structure the film player in FIG. 1;
      <br/>
      FIG. 5 is a histogram used for assistance in explaining how to fine a reference maximum value and a reference minimum value;
      <br/>
      FIGS. 6(A), 6(B), 6(C) and 6(D) are graphs showing the processing at each part of a digital signal processing circuit in FIG. 4:
      <br/>
      FIGS. 7(A), 7(B) and 7(C) are graphs used for assistance in explaining a gamma correction method;
      <br/>
      FIG. 8 is a view illustrating the specification of a memory area of an IC memory;
      <br/>
      9 is a flow chart showing the operation of a film player in the case that no required data is recorded in the IC memory;
      <br/>
      FIG. 10 is a view illustrating an example of a transport sequence of a film transported in the film player;
      <br/>
      FIG. 11 is a flow chart showing a procedure for recording image data in the IC memory;
      <br/>
      FIG. 12 is a flow chart showing a procedure in the case that the image data is recorded in the IC memory;
      <br/>
      FIG. 13 is a flow chart showing a procedure for recording setup data in the IC memory; and
      <br/>
      FIG. 14 is a flow chart showing a procedure in the case that the setup data is recorded in the IC memory.
    </p>
    <heading>DETAILED DESCRIPTION OF THE PREFERRED EMBODIMENT</heading>
    <p num="24">This invention will be described in further detail by way of example with reference to the accompanying drawings.</p>
    <p num="25">
      FIG. 1 is a perspective view illustrating the overall structure of a film player according to the present invention.
      <br/>
      As shown in FIG. 1, the film player 100 is rectangular parallelepiped, and a film cartridge storage part 102 and a power supply switch 104 are provided at the front of the film player 100.
      <br/>
      The film cartridge storage part 102 is driven forward and backward in loading/unloading directions of a film cartridge 110, so that the film cartridge 110 can be stored and taken out.
    </p>
    <p num="26">
      The film player 100 connects to a keypad 106 and a TV monitor 108.
      <br/>
      The keypad 106 outputs a variety of control signals to the film player 100 in order to control the film player 100.
      <br/>
      The film player 100 outputs a video signal to the TV monitor 108.
    </p>
    <p num="27">
      As shown in FIG. 2, the film cartridge 110 has a single spool 112, and a photographic film 114 is wound around the spool 112.
      <br/>
      Perforations 114A, which indicate the positions of frames, are punched in the photographic film 114, and a magnetic recording layer 114B is formed on the entire surface or the edge of the film.
      <br/>
      A camera with a magnetic head records, on the magnetic recording layer 114B, magnetic data representing photographic data for each frame.
      <br/>
      The developed photographic film 114 is wound up and stored in the film cartridge 110.
    </p>
    <p num="28">
      As shown in FIG. 3, an IC memory unit 20 is provided at one side (reference side) of the film cartridge 110.
      <br/>
      The IC memory unit 20 consists of a printed circuit board with six contact patterns and an IC memory (e.g., a flash memory), which is loaded on the printed circuit board and is electrically connected to the six contact patterns.
      <br/>
      The IC memory contains image data, etc. which requires a large memory capacity as described later.
    </p>
    <p num="29">
      FIG. 4 is a block diagram illustrating an example of the inner structure of the film player 100.
      <br/>
      The film player 100 is comprised mainly of an illumination light source 130, a taking lens 136, a CCD circuit 140 including a CCD line sensor 142, a first signal processing circuit 151, a second signal processing circuit 152, a third signal processing circuit 153, a memory control circuit 154, a CCD buffer M1, a display buffer M2, a central processing unit (CPU) 160, a film driving mechanism 170, an optical data reading unit 180, and a magnetic recording and regenerating unit 182.
    </p>
    <p num="30">
      The light source 130 is, for example, a long fluorescent lamp which is provided in a direction perpendicular to the feed direction of the film 114.
      <br/>
      The light source 130 illuminates the film 114 through an infrared cut filter 132.
      <br/>
      An image light is transmitted through the film 114, and it is formed on a light receiving surface of the CCD line sensor 142 through a taking lens 136.
      <br/>
      While the CCD line sensor 142 is imaging film images, the film driving mechanism 170 moves the film 114 at a constant speed in a direction indicated by an arrow A (forward direction) or B (reverse direction).
      <br/>
      This will be described later in further detail.
    </p>
    <p num="31">
      The CCD line sensor 142 is arranged in a direction perpendicular to the film feed direction.
      <br/>
      The image light, which is formed on the light receiving surface of the CCD line sensor 142, is electrically charged for a predetermined period in sensors provided with R, G and B filters.
      <br/>
      The image light is converted into R, G and B signal electric charges with quantity suitable for the intensity of light.
      <br/>
      The accumulated signal electric charges are read to a shift register by a lead gate pulse of a predetermined cycle, which is transmitted from a CCD drive circuit 144.
      <br/>
      A register transfer pulse reads the signal electric charges sequentially.
    </p>
    <p num="32">
      The CCD line sensor 142 has 1024 pixels in a direction perpendicular to the film feed direction.
      <br/>
      If there is no change in the cycle of the lead gate pulse, etc. of the CCD drive circuit 144, the number of pixels in one frame, in the same direction as the film feed direction, varies according to the film feed speed.
      <br/>
      In this embodiment, the number of pixels at a speed which is 1/2, 1, 8, and 16 times as fast as the film feeding speed at which a normal film image is captured are 1792 pixels, 896 pixels, 112 pixels and 56 pixels, respectively.
    </p>
    <p num="33">
      The signal electric charges read from the CCD line sensor 142 are clamped by a CDS clamp and are transmitted as R, G and B signals to an analog processing circuit 146, which controls the gains, etc. of the R, G and G signals.
      <br/>
      The R, G and B signals, which are output from the analog processing circuit 146, are dot-sequenced by a multiplexer 148, and are converted into digital signals by an A/D converter 150.
      <br/>
      The digital signals are transmitted to the first signal processing circuit 151 and the CPU 160.
    </p>
    <p num="34">
      The first signal processing circuit 151 has a white balance adjusting circuit, a negative/positive inversion circuit, a  GAMMA -correction circuit, a RGB simultaneously-output circuit, etc.
      <br/>
      The first signal processing circuit processes the dot-sequential R, G, B signals properly, and simultaneously outputs the R, G and B signals to the second signal processing circuit 152.
    </p>
    <p num="35">
      A detailed description will now be given of the white balance adjustment, the negative/positive inversion and the  GAMMA -correction.
      <br/>
      The CPU 160 calculates the gradations (the gradation of 10 bit (0-1023) in this embodiment) of the R, G and B digital image signals in a predetermined integration area, and finds the average gradations of the integration area.
      <br/>
      Thus, the CPU 160 creates each gradation data for the integration area with 5000-10000 points per one screen.
      <br/>
      Further, the CPU 160 counts the frequency for each gradation in accordance with the sequentially-created gradation data, and stops counting if the frequency exceeds a threshold TH established for the total points of the gradation data (1% of the total points in this embodiment).
      <br/>
      Specifically, an integration block creates a simple histogram (indicated by a slant line in FIG. 5) by counting the frequency up to the maximum threshold TH for all gradations from 0-1023 as shown in FIG. 5.
      <br/>
      In FIG. 5, the long and short alternate lines indicate a histogram in the case that the total points are counted.
    </p>
    <p num="36">
      The CPU 160 sequentially accumulates the frequencies from the smallest gradation of the simple histogram in FIG. 5, and finds the reference minimum value, which is the gradation when the accumulated frequency first corresponds to, or exceeds, the threshold TH, for each of the R, G and B colors.
      <br/>
      The CPU 160 also sequentially accumulates the frequencies from the largest gradation of the simple histogram and finds the maximum reference value, which is the gradation when the accumulated frequency first corresponds to, or exceeds, the threshold TH for each of the R, G and B colors.
    </p>
    <p num="37">
      A description will now be given of the processing in the first signal processing circuit 151.
      <br/>
      First, a description will be given of a method of calculating the offset values and the quantity of gain, which are used for adjusting the white balance and the black balance.
      <br/>
      The CPU 160 calculates the offset values for the R, G and B colors in accordance with the reference maximum value and the reference minimum values and calculates the quantity of gain for the R, G and B colors.
      <br/>
      If the reference maximum value of the R digital image signal is Rref max and the reference minimum value of the R digital image signal is Rref min, the offset value and the quantity of gain are as follows:
      <br/>
      The offset value=1023-Rref max ;  (1)
      <br/>
      The quantity of gain=1023/(Rref max -Rref min)  (2)
    </p>
    <p num="38">
      The offset value and the quantity of gain of R digital image signal are calculated by the above equations (1) and (2), and the other color channels are calculated in the same manner.
      <br/>
      The R, G and B digital image signals are represented in 10 bit, and 1023 is the maximum value of the R, G and B digital image signals.
    </p>
    <p num="39">
      The offset value of the R digital image signal is added to the original Rorg output from the A/D converter 150 during the scanning as shown in the following equation to acquire a digital image signal R1 which is black-point offset:
      <br/>
      R1=Rorg +offset value.  (3)
    </p>
    <p num="40">The originals of the G and B image signals are processed in the same manner so that the peak values of the R, G and B digital image signals can correspond to one another (see FIG. 6(A)).</p>
    <p num="41">
      The following equation is calculated for the offset digital image signal R1 in order to negative-positive invert the digital image signal R1 (see FIG. 6(B)):
      <br/>
      R2=1023-R1.  (4)
    </p>
    <p num="42">
      Then, the negative-positive inverted digital image signal R2 is multiplied by the quantity of gain, which is found by the equation (2), so that the other peak values (white in the positive image) of the R, G and B digital image signals can correspond to one another (see FIG. 6 (C)):
      <br/>
      R3=R2 * the quantity of gain.  (5)
    </p>
    <p num="43">Different gamma corrections are performed for the R, G and B digital image signals that have been multiplied by the quantity of gain, whereby the gray is adjusted (see FIG. 6(D)).</p>
    <p num="44">
      A description will be given of the gamma correction in further detail.
      <br/>
      First, as shown in FIG. 7, a lookup table (hereinafter referred to as a base LUT), which is a reference for the gamma correction, is prepared.
    </p>
    <p num="45">
      A gamma correction value, which represents a difference between a gamma curve of the negative film and a gamma curve (generally  GAMMA =0.45) of a video signal output to a Braun tube is recorded for each gradation in the base LUT.
      <br/>
      An actual lookup table representing input-output behavioral characteristics is obtained by subtracting the base LUT (the gamma correction value) from a function y=x as shown in FIG. 7(A).
    </p>
    <p num="46">
      It is possible to change the base LUT by multiplying the base LUT by a gamma gain (see FIG. 7(B)).
      <br/>
      If one base LUT is multiplied by a proper gamma gain, it is possible to obtain a LUT whose gamma correction values have been expanded or compressed for R, G and B signals.
      <br/>
      FIG. 7(C) shows the actual LUT for R, G and B signals, which is obtained by subtracting the LUT whose gamma correction values have been expanded or compressed for R, G and B colors from the function y=x.
    </p>
    <p num="47">
      The white balance and the black balance are adjusted by the above equations (3)-(5).
      <br/>
      In order to perform the gamma corrections for the dot-sequential R, G and B digital image signals that have been negative-positive inverted, the gamma correction values are read from the base LUT in accordance with the dot-sequential R, G and B digital image signals.
      <br/>
      The gamma correction values are multiplied by gamma gains for R, G and B colors to find the properly-expanded or compressed gamma correction values.
      <br/>
      It is possible to perform the dot-sequential gamma corrections for each color by subtracting the expanded or compressed gamma correction values from the dot-sequential R, G and B digital image signals.
    </p>
    <p num="48">
      The second signal processing circuit 152 in FIG. 4 has a matrix circuit, and generates a luminance signal Y and a chroma signal Cr/b in accordance with the received R, G and B signals.
      <br/>
      Then, the second signal processing circuit 152 outputs the luminance signal Y and the chroma signal Cr/b to the memory control circuit 154.
    </p>
    <p num="49">The memory control circuit 154 controls the reading and writing the luminance signal Y and the chroma signal Cr/b in the CCD buffer M1, and also controls the reading and writing the luminance signal Y and the chroma signal Cr/b, which are stored in the CCD buffer M1, in the display buffer M2.</p>
    <p num="50">
      The luminance signal Y and the chroma signal Cr/b, which are read from the display buffer M2 by the memory control circuit 154, are transmitted to the third signal processing circuit 153.
      <br/>
      The third signal processing circuit 153 generates, for example, an NTSC color composite video signal in accordance with the received luminance signal Y and the chroma signal Cr/b, and outputs the color composite video signal to a video output terminal 158 through a D/A converter 156.
      <br/>
      Incidentally, a synchronous signal generating circuit 159 transmits synchronous signals with a predetermined cycle to the memory control circuit 154, the third signal processing circuit 156 and the D/A converter 156.
      <br/>
      This synchronizes those circuits, and acquires video signals including necessary synchronous signals.
      <br/>
      A timing signal generating circuit 162, which is controlled by the CPU 160, transmits timing signals to the CCD circuit unit 140, the A/D converter 150, the first signal processing circuit 151, the second signal processing circuit 152 and the memory control circuit 154, so that the circuits can be synchronized.
    </p>
    <p num="51">
      The film drive mechanism 170 consists of a film supply part, which connects to the spool 112 of the film cartridge 110 and rotates the spool 112 forward and backward; a film take-up part for taking up the film 114 fed from the film supply part; and a means, which is arranged on a film transport route and feeds the film 114 at a constant speed in the state wherein the film 114 is pinched by the capstan and the pinch roller.
      <br/>
      The film supply part rotates the spool 112 of the film cartridge 110 clockwise in FIG. 4, and feeds the film 114 from the film cartridge 110 until the film take-up part takes up the film leader.
    </p>
    <p num="52">
      The optical data reading unit 180 has a first optical sensor 180A for optically detecting the perforations 114A on the film 114, and a second optical sensor 180B for optically reading optical data such as a bar code written at the film edge.
      <br/>
      The optical data reading unit 180 processes the optical data, which is read through the optical sensors 180A, 180B, and outputs the optical data to the CPU 160.
    </p>
    <p num="53">
      The magnetic recording and regenerating unit 182 has a magnetic head 182A, and reads the magnetic data from the magnetic recording layer 114B of the film 114.
      <br/>
      Then, the magnetic data regenerating unit 182 processes the magnetic data and outputs the processed data to the CPU 160 so that the data can be recorded in the RAM 160A.
      <br/>
      The magnetic recording and regenerating unit 182 also reads the data from the RAM 160A of the CPU 160, and converts the data into a signal suitable for magnetic recording.
      <br/>
      Then, the magnetic recording and regenerating unit 182 outputs the signal to the magnetic head 182A, and records the signal on the magnetic recording layer 114B of the film 114.
    </p>
    <p num="54">The CPU 160 connects to a random access memory (RAM) 121, a read only memory (ROM) 122, an erasable and electrically programmable read only memory (EEPROM) 123, and an IC memory interface 124.</p>
    <p num="55">
      The ROM 122 contains a film player control program and a load program for loading the contents of the IC memory 120 mounted in the film cartridge 110.
      <br/>
      In accordance with the program stored in the ROM 122, the CPU 160 performs the processing according to the user's manipulation of the keypad 106 and controls the film player 100.
      <br/>
      The CPU 160 also loads the contents of the IC memory 120 loaded in the film cartridge 110 through the IC memory interface 124, and writes the data recorded in the RAM 121, the EEPROM 123, etc. in the IC memory 120 through the IC memory interface 124.
    </p>
    <p num="56">
      A description will be given of the data recorded in the IC memory 120 of the film cartridge 110 in the film player 100.
      <br/>
      In the first embodiment, the IC memory 120 contains the image data of desired frames, which have been regenerated once by the film player 100.
      <br/>
      As shown in FIG. 8, the memory area of the IC memory 120 consists of a data management area and a data record area.
      <br/>
      Image data is recorded in the data record area, and necessary information for reading and regenerating the image data in the IC memory 120 such as frame numbers of the image data recorded in the data record area and the addresses where the image data corresponding to the frame numbers are recorded in the data management area.
      <br/>
      Since the image data of desired frames are recorded in the IC memory, it is possible to read the image data of the desired frame from the IC memory 120 and regenerate the image of the desired frames without reading the image with the film scanner when the film player 100 regenerates the film cartridge 110 loaded with the IC memory 120.
    </p>
    <p num="57">
      A description will now be given of the operation of the film player 100, which is constructed in the above-mentioned manner.
      <br/>
      First, a description will be given of the operation in the case where the IC memory 120 contains no image data with reference to the flow chart of FIG. 9.
      <br/>
      When the film cartridge 110 is mounted in the film cartridge storage part 102 (step S10), the CPU 160 determines whether or not the IC memory 120 of the film cartridge 110 contains the required data (image data) with reference to the contents stored in the data management area (see FIG. 8) of the IC memory 120 (step S12).
      <br/>
      If the required data is not recorded, the CPU 160 controls the film drive mechanism 170, which feeds the film 114 from the film cartridge 110 and winds the film leader around the take-up shaft of the film take-up part (film loading).
      <br/>
      Then, the negative base at the film leader is captured to execute the calibration (step S14).
      <br/>
      Specifically, the electronic shutter of the CCD line sensor 142 is set at an initial value 15%, and an amplifier gain of the analog signal processing circuit 146 is set at a preset value (an initial value).
      <br/>
      Then the CCD line sensor 142 images the negative base at the film leader, and the R, G and B output voltages from the analog processing circuit 146 are measured and memorized.
      <br/>
      The CPU 160 reads a difference between the reference voltage (e.g., 2V) and the maximum value d of the G output voltage from the analog processing circuit 146, and changes the exposure time (the electric charge accumulation time of the CCD line sensor 142) of the electronic shutter so that the maximum value d can be, for example, 2V Then, the CPU 160 outputs a gain control signal to the analog processing circuit 146 so that each maximum value of the R and B output voltages can be 2V
    </p>
    <p num="58">
      After the calibration, the first pre-scanning is performed (step S16).
      <br/>
      In the first pre-scanning, the CPU 160 feeds the film 148 forward at a high speed of 148.0 mm/sec. as shown in FIG. 10, and captures the image data through the CCD line sensor 142.
      <br/>
      The CPU 160 reads the optical data and the magnetic data through the optical data reading unit 180 and the magnetic recording and regenerating unit 182.
    </p>
    <p num="59">
      In accordance with the image data captured during the first pre-scanning, the CPU 160 finds the reference maximum value and the reference minimum values of the gradation for R, G and B colors.
      <br/>
      In accordance with the equations (1) and (2), the CPU 160 calculates the offset values and the quantity of gain, and stores offset data representing the offset value for each color and AWB data representing the gain adjustment quantity in the RAM 121.
      <br/>
      Incidentally, the CPU 160 is capable of detecting each frame on the film 114 in accordance with the optical data and/or the magnetic data, which are read through the optical data reading unit 180 and the magnetic recording and regenerating unit 182, and determining frame numbers by counting the frames.
    </p>
    <p num="60">
      Next, the second pre-scanning is performed for the film 114 (step S18).
      <br/>
      Specifically, as shown in FIG. 10, the CPU 160 rewinds the film 114 in a reverse direction at a high speed of 74.0 mm/sec., and captures the image data through the CCD line sensor 142.
      <br/>
      When the image data is captured, the CPU 160 controls the electric charge accumulation time of the CCD line sensor 142 in accordance with AE data stored in the RAM 121 in order to adjust the exposure for each frame.
    </p>
    <p num="61">
      The CPU 160 controls the first signal processing circuit 151, which adjusts the offset quantity and the white balance of R, G and B signals for each frame.
      <br/>
      More specifically, the CPU 160 outputs the offset data for each color signal of each frame from the RAM 121 to the first signal processing circuit 151.
      <br/>
      In accordance with the offset data, the first signal processing circuit 151 adjusts the offset quantity for dot-sequential R, G and B signals.
      <br/>
      Likewise, the CPU 160 outputs the AWB data for R, G and B color signals of each frame from the RAM 121 to the first signal processing circuit 151.
      <br/>
      In accordance with the AWB data, the first signal processing circuit 151 adjusts the gains of the dot-sequential R, G and B signals.
    </p>
    <p num="62">Since the image data of each frame is adjusted in accordance with the AE data, the AWB data or the like, the satisfactory image data can be captured regardless of the photographic conditions for each frame.</p>
    <p num="63">
      The adjusted image data of each frame, that is, the luminance signal Y and the chroma signal Cr/b output from the second signal processing circuit 152 are stored in the CCD buffer Ml through the memory control circuit 154.
      <br/>
      As described above, the film 114 is fed at a speed that is eight times as fast as the feeding speed for capturing the normal film image, and thus, the number of pixels in one frame in the same direction as the film feed direction is smaller than the number of pixels in the normal film image.
      <br/>
      The CCD line sensor 142 has the sensor of 1024 pixels in a direction perpendicular to the film feed direction as mentioned previously.
      <br/>
      If the number of pixels is decreased, for example, to 1/16 of 1024, the number of pixels in one frame in a direction perpendicular to the film feed direction is smaller than the number of pixels in the case of the normal film image.
      <br/>
      It is therefore possible to store the image data representing an index image of, for example, 40 frames (hereinafter referred to as index image data) in the CCD buffer M1, which is able to contain the image data of only about one frame in the case of the normal film image.
    </p>
    <p num="64">
      To store the index image data in the display buffer M2, the pixels of one frame is further reduced so that the image data of 20 frames, for example, can be stored in the display buffer M2.
      <br/>
      To display the index image on the TV monitor 108, the image data is read from the display buffer M2.
      <br/>
      The CPU 160 numbers the frames 1, 2, . . . in an order of reading the image data during the scanning, and outputs character signals indicating the frame number of each frame to thereby display the index image on which the frame numbers are superimposed.
    </p>
    <p num="65">
      The index image is created as described above (step S20).
      <br/>
      If the index image is displayed on the TV monitor 108, the user controls the keypad 106 while looking at the index image.
      <br/>
      The user interactively performs the edition and designations required for displaying one frame on the TV monitor 108 (step S22).
      <br/>
      For example, the user designates the direction to erect the regeneration image on the monitor, changes a frame size, and set or cancel the prohibition of the display.
      <br/>
      The edited data is stored in the RAM 121.
    </p>
    <p num="66">
      After the editions for displaying the frames are performed on the index image display screen, the frames are displayed and edited.
      <br/>
      In this case, the user selects frames to be displayed on the TV monitor 108, or selects a regeneration mode for automatically displaying all frame images in order, etc.
      <br/>
      If the user selects the first frame, the CPU 160 feeds the film 114 by one frame forward at a speed of 9.25 mm/sec as shown in FIG. 10 in order to scan the first frame (main scanning) (step S24).
      <br/>
      During the main scanning, the image data is captured into the CCD buffer M1 through the CCD line sensor 142.
    </p>
    <p num="67">When the image data is captured, the CPU 160 adjusts the image data of each frame in accordance with the AE data, AWB data, etc., stored in the RAM 121, Therefore, a satisfactory image data can be captured regardless of the photographic conditions for each frame.</p>
    <p num="68">
      The image data of one frame, which has been captured in the CCD buffer M1 as stated above, is transferred to the display buffer M2.
      <br/>
      The contents of the display buffer M2 are read repeatedly so that the image of one frame can be displayed on the TV monitor 108.
    </p>
    <p num="69">The user edits the image in further detail such as trimming and color correction while looking at the screen displayed for each frame (step S26).</p>
    <p num="70">
      The display and edition of each frame are repeatedly performed in accordance with the user's designation of the frames or the like.
      <br/>
      When the user instructs the operation to finish (step S28), the film 114 is fed in a reverse direction at a high speed of 148.0 mm/sec. as shown in FIG. 10. While the film is feeding, the data, which was previously read from the magnetic recording layer 114B of the film 114 and is stored in the RAM 121 of the CPU 160, is recorded in the magnetic recording layer 114B of the film 114.
      <br/>
      The required data is recorded in the IC memory 120, and after rewinding, the film cartridge 110 is taken out (step S29).
    </p>
    <p num="71">
      A description will be given of the operation of the film player 100 in the case where the image data of each frame on the film 114 can be recorded in the IC memory 120 of the film cartridge 110.
      <br/>
      First, a description will be given of the procedure for recording the image data in the IC memory 120 by the film player 100 with reference to the flow chart of FIG. 11. When the film cartridge 110 is mounted in the film cartridge storage part 102 (step S30), the CPU 160 reads the data from the IC memory 120 and determines the residual capacity of the IC memory 120.
      <br/>
      The CPU 160 records the residual capacity of the IC memory 120 in the RAM 121 (step S32).
      <br/>
      The residual capacity is the residual capacity of the data recording area (see FIG. 8).
      <br/>
      The residual capacity may be confirmed from the memory management information in the data management area (see FIG. 8).
    </p>
    <p num="72">
      Then, the CPU 160 determines whether the required data (image data) is recorded in the IC memory 120 as indicated at the step S12 in the flowchart of FIG. 9.
      <br/>
      If the image data is not recorded, the CPU 160 performs the processing from the step S14 in the flowchart of FIG. 9 as stated previously.
      <br/>
      On the other hand, if the image data is recorded, the CPU 160 executes a predetermined processing and then executes the processing from the step S14 in the flowchart of FIG. 9.
      <br/>
      A description will later be given of the processing procedure in the case where the IC memory 120 contains the image data.
    </p>
    <p num="73">
      After executing the processing from the step S14, the CPU 160 goes to the step S26 in the flowchart of FIG. 9 so as to display and edit each frame.
      <br/>
      When the user instructs the image data of a currently-displayed frame to be registered in the display and edition of each frame (step S34), the CPU 160 reads the residual capacity of the IC memory 120 from the RAM 121.
      <br/>
      The CPU 160 determines whether the residual capacity of the IC memory 120 is larger than the capacity required for recording the image data of one frame so as to determine whether it is possible to register the image data in the IC memory 120 (step S36).
      <br/>
      If it is possible to register the image data in the IC memory 120, the CPU 160 reads the image data of the designated frame recorded in the CCD buffer Ml, and records the image data and other management information in the free space in the IC memory 120 (step S38).
      <br/>
      The image data is recorded in the data recording area of the IC memory 120, whereas the other management information such as the frame number of the recorded image data and the address of the image data in the memory are recorded in the data management area (see FIG. 8).
      <br/>
      The quantity of the image data recorded in the IC memory 120 is subtracted from the residual capacity of the IC memory 120, which is recorded in the RAM 121, in order to update the residual capacity of the IC memory 120 before the registration of the image data to the residual capacity after the registration of the image data (step S40).
    </p>
    <p num="74">
      On the other hand, if it is impossible to register the image data in the IC memory 120 at the step S36, the user determines on the monitor whether to erase the other data stored in the IC memory 120 (step S42).
      <br/>
      If the user determines not to erase the data, the registration of the image data is cancelled and the processing returns to the step S34.
      <br/>
      If the user determines to erase the data, he or she determines which data will be erased (step S44).
      <br/>
      For instance, if the unnecessary image data is erased when other image data is recorded, the residual capacity for recording new image data can be secured.
      <br/>
      The CPU 160 erases the designated data from the IC memory 120 (step S46), and adds the capacity of the erased data to the residual capacity of the IC memory 120, which is recorded in the RAM 121 to find the residual capacity of the IC memory 120 after the data is erased (step S48).
      <br/>
      Then, the CPU 160 returns to the step S36, and determines again whether it is possible to register the image data in the residual capacity of the IC memory.
      <br/>
      If possible, the image data is recorded in the IC memory 120 as stated above.
      <br/>
      If the residual capacity is still in shortage after the data is erased, the processing from the step S42 to S48 is repeated.
    </p>
    <p num="75">
      The CPU 160 records the image data, which is read into the CCD buffer M1 when the images are displayed and edited on a frame-by-frame basis, in the IC memory 120 in accordance with the instruction of the user.
      <br/>
      If the residual capacity of the IC memory 120 is smaller than the capacity required for recording the image data, the CPU 160 gives the user an instruction to erase the unnecessary data in order to secure the residual capacity for recording the image data.
    </p>
    <p num="76">
      The image data may also be recorded in the IC memory 120 by designating a plurality of frames at the same time on the index image display screen.
      <br/>
      Moreover, the index image itself may be recorded with the image data of each frame in the IC memory 120.
    </p>
    <p num="77">In the above explanation, the image data captured into the CCD buffer M1 is recorded in the IC memory 120, but the image data (the image data which has been trimmed or the like) transferred from the CCD buffer M1 to the display buffer M2 may also be recorded in the IC memory 120.</p>
    <p num="78">
      There is no problem if the capacity of the IC memory 120 is enough to contain the image data of all frames, which has been read into the CCD buffer M1.
      <br/>
      If, however, the capacity of the IC memory 120 is not enough to contain the image data of all frames, which has been read into the CCD buffer M1, it is possible to select frames, which the user would like to store, among frames which may be recorded in the IC memory 120.
      <br/>
      It is also possible to reduce or compress the image data in the CCD buffer M1 according to the number of frames designated by the user in order to record the image data of the designated frames.
      <br/>
      It is also possible to previously set the reduction or compression rate for the image data according to the capacity of the IC memory in order to record the image data of all frames.
    </p>
    <p num="79">If, for example, the data recording area in the IC memory 120 of 2M bytes is 1.5M bytes and the quantity of the image data in each frame is 1M byte, the quantity of the image data is reduced to about 1/7, because 10/1.5=7, in order to record the image data of ten frames in the IC memory 120.</p>
    <p num="80">
      The user may adjust the reduction quantity or compression rate for the image data according to the residual capacity of the IC memory 120 instead of adjusting the quantity of the image data by designating the number of frames to be recorded in the IC memory 120.
      <br/>
      For instance, a plurality of modes such as a high resolution mode, a normal mode and a low resolution mode are provided as image data recording modes, so that the reduction quantity and compression rate can be selected by designating a mode.
      <br/>
      In this case, for example, the number of frames that may be recorded is displayed, and the user selects a mode in accordance with the purpose.
    </p>
    <p num="81">
      If the quantity of the image data to be recorded in the IC memory 120 is changeable as stated above, the quantity of the image data varies according to frames sometimes.
      <br/>
      If the kind of processing which has been performed to reduce the quantity of each image data is unknown, the image data cannot be restored to the original size.
      <br/>
      To avoid such a problem, the kind of processing which has been performed to reduce the quantity of data is recorded with the image data in the data management area in the IC memory 120.
    </p>
    <p num="82">
      A description will now be given of the procedure in the case when the image data is recorded in the IC memory 120 with reference to the flowchart of FIG. 12. When the film cartridge 110 is set in the film cartridge storage part 102 (step S60), the CPU 160 reads the data recorded in the IC memory 120 of the film cartridge 110 (step S62).
      <br/>
      At this time, the CPU 160 determines whether or not the image data is recorded in the IC memory 120 with reference to the data recorded in the data management area in the IC memory 120.
      <br/>
      If the image data is not recorded, the CPU 160 performs the processing from the step S14 in the flowchart of FIG. 9 as stated previously.
    </p>
    <p num="83">
      On the other hand, if the image data is recorded, the CPU 160 displays, on the TV monitor, a selection screen for deciding whether to display the image data in the IC memory 120 on the monitor or to scan the film (step S64).
      <br/>
      If the user decides to scan the film 114, the CPU 160 performs the processing from the step S14 in the flowchart of FIG. 9.
      <br/>
      On the other hand, if the user decides to display the image data, the CPU 160 displays frame numbers of the image data recorded in the IC memory 120 on the monitor with reference to the data management area in the IC memory 120, and instructs the user to select a frame to be regenerated (step S66).
      <br/>
      When the user selects a frame to be regenerated, the CPU 160 reads the image data of the selected frame from the IC memory 120 and displays the image on the TV monitor 108 through the display buffer M2 (step S68).
    </p>
    <p num="84">
      It is therefore possible to display the image of a certain frame on the TV monitor 108 without removing the film from the film cartridge 110.
      <br/>
      Consequently, the deterioration of the film is prevented, and the frame images on the film are displayed on the TV monitor 108 within a short period of time.
    </p>
    <p num="85">
      If the index image is recorded in the IC memory 120, the CPU 160 reads the index image from the IC memory 120 after the film cartridge 110 is mounted in the film cartridge storage part 102.
      <br/>
      Then, the CPU 160 displays the index image on the TV monitor 108.
    </p>
    <p num="86">
      A description will now be given of the second embodiment which makes it possible to record setup data of each frame, regenerated once by the film player 100, in the IC memory 120 of the film cartridge 110.
      <br/>
      The setup data consists of main scan data and calibration data.
      <br/>
      The main scan data is required to image and display each frame image on the monitor.
      <br/>
      More specifically, the main scan data includes the accumulation time of electric charge in the CCD line sensor 142, which is obtained during the regeneration of each frame image; the reference maximum value and the reference minimum value of the gradation in each color during the accumulation of the electric charge; and the amplifier gain of the LUT in each color.
      <br/>
      In other words, the main scan data includes the exposure time of the electronic shutter during the regeneration of each frame image and the color correction data used for determining the offset value, the quantity of gain and the gamma correction quantity.
    </p>
    <p num="87">
      The calibration data includes the accumulation time of the electric charge in the CCD line sensor 142 for imaging the negative base at a predetermined brightness when the negative base on the film 114 is imaged, and a convergent value of a signal in each color, which is obtained during the accumulation of the electric charge.
      <br/>
      The calibration data indicates the characteristics of the imaging optical system of the film player, which has recorded the setup data.
      <br/>
      For example, the calibration data is used to calibrate the changes in the apparatus from the recording of the setup data to the regeneration of the image and differences in characteristics between apparatuses if different apparatuses record the setup data and regenerate the image.
    </p>
    <p num="88">
      Since the setup data is recorded in the IC memory 120, the setup data can be read from the IC memory 120 when each frame image is regenerated.
      <br/>
      It is therefore possible to immediately regenerate each frame image without pre-scanning the film to acquire the setup data.
    </p>
    <p num="89">
      First, a description will be given of the procedure for recording the setup data in the IC memory 120 by the film player 100 with reference to the flowchart of FIG. 13. When the film cartridge 110 is set in the film cartridge storage part 102 (step S70), the CPU 160 reads the data in the IC memory 120 to determine whether the setup data is recorded or not.
      <br/>
      If the setup data is not recorded, the CPU 160 executes the processing from the step S14 in the flowchart of FIG. 9.
      <br/>
      On the other hand, if the setup data is recorded, the CPU 160 performs a predetermined processing.
      <br/>
      A description will later be given of the processing in the case where the setup data is recorded.
    </p>
    <p num="90">
      If the setup data is not recorded, the CPU 160 performs the processing from the step S14.
      <br/>
      The CPU 160 executes the calibration for the negative base of the film 114 as stated previously (step S72) to acquire the calibration data (step S74).
      <br/>
      Afterwards, the CPU 160 performs the first and second pre-scanning as shown in the flowchart of FIG. 9 (step S76) to acquire the main scan data (step S78).
      <br/>
      After the predetermined processing, the CPU 160 records the setup data, which consists of the calibration data and the main scan data, in the IC memory 120 (step S80).
    </p>
    <p num="91">
      A description will now be given of the procedure in the case where the setup data is recorded in the IC memory 120.
      <br/>
      When the film cartridge 110 is set in the film cartridge storage part 102 (step S90), the CPU 160 reads the data in the IC memory 120 to determine whether the setup data is recorded or not.
      <br/>
      If the setup data is recorded, the setup data is read (step S92).
      <br/>
      Then, the film is loaded, and the negative base is imaged to perform the calibration (step S94).
      <br/>
      Then, the results of the calibration and the calibration data included in the setup data are compared to calibrate the main scan data (step S96).
    </p>
    <p num="92">
      A description will be given of the calibration for the main scan data in further detail.
      <br/>
      Suppose that the calibration data included in the setup data recorded in the IC memory 120 is as follows:
    </p>
    <p num="93">
      the accumulation time T0 of the electric charge in the CCD: 300  MU s; and
      <br/>
      the convergent value R0 : 950, G0 : 950, B0 : 950, and the main scan data of the first frame is as follows:
      <br/>
      the accumulation time T of the electric charge in the CCD: 600  MU s;
      <br/>
      the maximum value Rmax 900, Gmax : 920, Bmax : 910;
      <br/>
      the minimum value Rmin : 50, Gmin : 60, Bmin : 50; and  GAMMA -gain R: 10, G: 20, B: 30.
    </p>
    <p num="94">
      On the other hand, suppose that the calibration data obtained as a result of the calibration is as follows:
      <br/>
      the accumulation time T'0 of the electric charge in the CCD: 150  MU s; and
      <br/>
      the convergent value R'0 : 940, G'0 : 940, B'0 : 940.
    </p>
    <p num="95">
      In this case, the accumulation time T' of the electric charge in the CCD line sensor 142 in the main scanning for each frame is calculated by the following equation:
      <br/>
      T'=T * (T'0 /T0).
    </p>
    <p num="96">
      Accordingly, the accumulation time T' of the electric charge in the CCD line sensor 142 for the first frame is as follows:
      <br/>
      T'=600 * (150/300)=300  MU s.
    </p>
    <p num="97">
      The reference maximum value and the reference minimum value of the gradation in each color are substantially equal if the accumulation time of the electric charge in the CCD line sensor 142 is calibrated.
      <br/>
      For this reason, the reference maximum value and the reference minimum value do not always have to be calibrated.
      <br/>
      If they are calibrated, however, the calibrated reference maximum values R'max, G'max, B'max and the calibrated reference minimum values R'min, G'min, B'min are as follows.
    </p>
    <p num="98">
      R'max =Rmax * (R'0 /R0);
      <br/>
      G'max =Gmax * (G'0 /G0);
      <br/>
      B'max =Bmax * (B'0 /B0);
      <br/>
      R'min =Rmin * (R'0 /R0);
      <br/>
      G'min =Gmin * (G'0 /G0); and
      <br/>
      B'min =Bmin * (B'0 /B0).
    </p>
    <p num="99">
      Accordingly, the reference maximum values R'max, G'max, B'max, and the reference minimum values R'min, G'min, B'min are as follows:
      <br/>
      R'max =900 * (940/950) (congruent to) 891;
      <br/>
      G'max =920 * (940/950) (congruent to) 910;
      <br/>
      B'max =910 * (940/950) (congruent to) 900;
      <br/>
      R'min =50 * (940/950) (congruent to) 49;
      <br/>
      G'min =60 * (940/950) (congruent to) 59; and
      <br/>
      B'min =50 * (940/950) (congruent to) 49.
    </p>
    <p num="100">Incidentally, the  GAMMA  gains of the main scan data are not corrected.</p>
    <p num="101">After the main scan data for each frame is calibrated, the CPU 160 performs the main scanning for the frames designated by the user in accordance with the calibrated main scan data (step S98).</p>
    <p num="102">The setup data is recorded in the IC memory 120 and the main scanning is performed for each frame in accordance with the setup data recorded in the IC memory 120, so that the pre-scanning for acquiring the main scan data can be omitted and each frame image can be regenerated within a short period of time.</p>
    <p num="103">
      In this embodiment, the image data or the setup data is recorded in the IC memory 120, but both the image data and the setup data may also be recorded in the IC memory 120.
      <br/>
      In this case, the main scanning is performed for frames with no image data in accordance with the setup data.
      <br/>
      This eliminates the necessity for pre-scanning and makes it possible to display the frame image on the TV monitor within a short period of time.
    </p>
    <p num="104">
      As set forth hereinabove, according to the image data recording method and the frame image regenerating method of the present invention, the image data of each frame is recorded in the storage medium loaded in the film cartridge.
      <br/>
      For this reason, the images in each frame on the photographic film can be regenerated without removing the film from the film cartridge.
      <br/>
      This prevents the deterioration of the film and reduces the regeneration time of the frame images.
      <br/>
      Moreover, the quantity of image data in each frame is changed according to the residual capacity of the storage medium.
      <br/>
      It is therefore possible to arbitrarily set the number and quality of frame images to be recorded in the storage medium in accordance with the residual capacity of the storage medium.
    </p>
    <p num="105">
      The setup data required for regenerating each frame image is recorded in the storage medium loaded in the film cartridge, and the setup data is referred to when each frame image is regenerated.
      <br/>
      It is therefore possible to immediately perform the main scanning for each frame without pre-scanning the film.
      <br/>
      This prevents the deterioration of the film and reduces the regeneration time of the frame images.
      <br/>
      Moreover, the setup data is calibrated in accordance with the information acquired by imaging the negative base.
      <br/>
      Consequently, it is possible to properly regenerate the image in each frame according to the setup data recorded in the storage medium even if there is a change in the apparatus as time passes or even if the different apparatuses record the setup data and regenerate the image in the storage medium.
    </p>
    <p num="106">It should be understood, however, that there is no intention to limit the invention to the specific forms disclosed, but on the contrary, the invention is to cover all modifications, alternate constructions and equivalents falling within the spirit and scope of the invention as expressed in the appended claims.</p>
  </description>
  <claims format="original" lang="en" id="claim_en">
    <claim num="1">
      <claim-text>What is claimed is:</claim-text>
      <claim-text>1.</claim-text>
      <claim-text>An image recording method for recording, in a storage medium attached to a film cartridge, image data of at least one desired frame on a developed photographic film stored in said film cartridge, said image recording method comprising the steps of:</claim-text>
      <claim-text>determining a residual memory capacity of said storage medium; changing a quantity of image data of the desired frame to be recorded in said storage medium or erasing data recorded in said storage medium in accordance with the residual memory capacity of said storage medium;</claim-text>
      <claim-text>and allowing the image data of the desired frame to be recorded within the residual memory capacity of said storage medium.</claim-text>
    </claim>
    <claim num="2">
      <claim-text>2. The image data recording method as defined in claim 1, further comprising the steps of: calculating the number of frames which are permitted to be recorded in said storage medium in accordance with the residual memory capacity of said storage medium and the quantity of image data for one frame to be recorded;</claim-text>
      <claim-text>and displaying the calculated number of frames.</claim-text>
    </claim>
    <claim num="3">
      <claim-text>3. The image data recording method as defined in claim 1, further comprising the step of arbitrarily changing the quantity of image data in each frame so that the quantity of the image data can be recorded in said storage medium.</claim-text>
    </claim>
    <claim num="4">
      <claim-text>4. The image data recording method as defined in claim 1, further comprising the step of reducing and/or compressing said image data to thereby change the quantity of said image data.</claim-text>
    </claim>
    <claim num="5">
      <claim-text>5. The image data recording method as defined in claim 3, further comprising the step of reducing and/or compressing said image data to thereby change the quantity of said image data.</claim-text>
    </claim>
    <claim num="6">
      <claim-text>6. A frame image recording method comprising the steps of: using a film cartridge with a storage medium mounted therein, said storage medium containing setup data comprising an exposure time T0 of an electronic shutter for imaging a negative base on a developed photographic film stored in said film cartridge at a predetermined brightness, an exposure time Ti of the electronic shutter for regenerating each frame image on said photographic film at a proper brightness, where i is a frame number, and color correction data for regenerating each frame image on said photographic film in a proper color; reading the setup data recorded in said storage medium, finding an exposure time T'0 of the electronic shutter for imaging the negative base on the film at a predetermined brightness, and calculating an exposure time T'i for regenerating each frame image at a proper brightness in accordance with the following equation:</claim-text>
      <claim-text>whereby regenerating each frame image on said photographic film in accordance with the calculated exposure time T'i of the electronic shutter and said color correction data of the setup data.</claim-text>
    </claim>
    <claim num="7">
      <claim-text>7. The frame image regenerating method as defined in claim 6, wherein said color correction data comprises reference maximum values Rmax, Gmax and Bmax and reference minimum values Rmin, Gmin and Bmin of gradations in R, G and B colors.</claim-text>
    </claim>
    <claim num="8">
      <claim-text>8. The frame image regenerating method as defined in claim 7, further comprising the steps of: recording, in said storage medium, convergent values R0, G0 and B0 of gradations in R, G and B colors in the case in which the negative base on said photographic film is imaged in said exposure time T0 of the electronic shutter; determining convergent values R'0, G'0, B'0 of gradations in R, G and B colors in the case in which the negative base on said photographic film is imaged in said exposure time T'0 of the electronic shutter during the regeneration of frame images on said photographic film;</claim-text>
      <claim-text>and calibrating the reference maximum values R'max, G'max and B'max and the reference minimum values R'min, G'min and B'min of gradations in R, G and B colors during the regeneration of each frame in accordance with the following equations:</claim-text>
    </claim>
    <claim num="9">
      <claim-text>9.</claim-text>
      <claim-text>A frame image recording method comprising the steps of: using a film cartridge with a storage medium mounted therein, said storage medium containing setup data comprising an exposure time T0 of a photographic shutter for imaging at a predetermined brightness a negative base on a photographic film stored in said film cartridge, an exposure time Ti of the photographic shutter for regenerating at a proper brightness a frame image on said photographic film, where i is the frame number, and color correction data for regenerating in proper colors the frame image on said photographic film; reading the setup data recorded in said storage medium; finding an exposure time T'0 of the photographic shutter for imaging at a predetermined brightness the negative base on the film;</claim-text>
      <claim-text>and calculating an exposure time T'i for regenerating the frame image at a proper brightness in accordance with the following equation: wherein said calculated exposure time T'i and said color correction data enables the regeneration of the frame image on said photographic film.</claim-text>
    </claim>
  </claims>
</questel-patent-document>