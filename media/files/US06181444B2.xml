<?xml version="1.0" encoding="UTF-8"?>
<questel-patent-document lang="en" date-produced="20180805" produced-by="Questel" schema-version="3.23" file="US06181444B2.xml">
  <bibliographic-data lang="en">
    <publication-reference publ-desc="Granted patent as second publication">
      <document-id>
        <country>US</country>
        <doc-number>06181444</doc-number>
        <kind>B2</kind>
        <date>20010130</date>
      </document-id>
      <document-id data-format="questel">
        <doc-number>US6181444</doc-number>
      </document-id>
    </publication-reference>
    <original-publication-kind>B2</original-publication-kind>
    <application-reference is-representative="YES" family-id="15539181" extended-family-id="28328605">
      <document-id>
        <country>US</country>
        <doc-number>08869087</doc-number>
        <kind>A</kind>
        <date>19970604</date>
      </document-id>
      <document-id data-format="questel">
        <doc-number>1997US-08869087</doc-number>
      </document-id>
      <document-id data-format="questel_Uid">
        <doc-number>28982611</doc-number>
      </document-id>
    </application-reference>
    <language-of-filing>en</language-of-filing>
    <language-of-publication>en</language-of-publication>
    <priority-claims>
      <priority-claim kind="national" sequence="1">
        <country>JP</country>
        <doc-number>15237696</doc-number>
        <kind>A</kind>
        <date>19960613</date>
        <priority-active-indicator>Y</priority-active-indicator>
      </priority-claim>
      <priority-claim data-format="questel" sequence="1">
        <doc-number>1996JP-0152376</doc-number>
      </priority-claim>
    </priority-claims>
    <dates-of-public-availability>
      <publication-of-grant-date>
        <date>20010130</date>
      </publication-of-grant-date>
    </dates-of-public-availability>
    <classifications-ipcr>
      <classification-ipcr sequence="1">
        <text>H04N   1/60        20060101AFI20051220RMJP</text>
        <ipc-version-indicator>
          <date>20060101</date>
        </ipc-version-indicator>
        <classification-level>A</classification-level>
        <section>H</section>
        <class>04</class>
        <subclass>N</subclass>
        <main-group>1</main-group>
        <subgroup>60</subgroup>
        <symbol-position>F</symbol-position>
        <classification-value>I</classification-value>
        <generating-office>
          <country>JP</country>
        </generating-office>
        <classification-status>R</classification-status>
        <classification-data-source>M</classification-data-source>
        <action-date>
          <date>20051220</date>
        </action-date>
      </classification-ipcr>
      <classification-ipcr sequence="2">
        <text>G06T   1/00        20060101ALI20051220RMJP</text>
        <ipc-version-indicator>
          <date>20060101</date>
        </ipc-version-indicator>
        <classification-level>A</classification-level>
        <section>G</section>
        <class>06</class>
        <subclass>T</subclass>
        <main-group>1</main-group>
        <subgroup>00</subgroup>
        <symbol-position>L</symbol-position>
        <classification-value>I</classification-value>
        <generating-office>
          <country>JP</country>
        </generating-office>
        <classification-status>R</classification-status>
        <classification-data-source>M</classification-data-source>
        <action-date>
          <date>20051220</date>
        </action-date>
      </classification-ipcr>
      <classification-ipcr sequence="3">
        <text>H04N   1/407       20060101A I20051008RMEP</text>
        <ipc-version-indicator>
          <date>20060101</date>
        </ipc-version-indicator>
        <classification-level>A</classification-level>
        <section>H</section>
        <class>04</class>
        <subclass>N</subclass>
        <main-group>1</main-group>
        <subgroup>407</subgroup>
        <classification-value>I</classification-value>
        <generating-office>
          <country>EP</country>
        </generating-office>
        <classification-status>R</classification-status>
        <classification-data-source>M</classification-data-source>
        <action-date>
          <date>20051008</date>
        </action-date>
      </classification-ipcr>
      <classification-ipcr sequence="4">
        <text>H04N   1/48        20060101ALI20051220RMJP</text>
        <ipc-version-indicator>
          <date>20060101</date>
        </ipc-version-indicator>
        <classification-level>A</classification-level>
        <section>H</section>
        <class>04</class>
        <subclass>N</subclass>
        <main-group>1</main-group>
        <subgroup>48</subgroup>
        <symbol-position>L</symbol-position>
        <classification-value>I</classification-value>
        <generating-office>
          <country>JP</country>
        </generating-office>
        <classification-status>R</classification-status>
        <classification-data-source>M</classification-data-source>
        <action-date>
          <date>20051220</date>
        </action-date>
      </classification-ipcr>
    </classifications-ipcr>
    <classification-national>
      <country>US</country>
      <main-classification>
        <text>358519000</text>
        <class>358</class>
        <subclass>519000</subclass>
      </main-classification>
      <further-classification sequence="1">
        <text>358521000</text>
        <class>358</class>
        <subclass>521000</subclass>
      </further-classification>
    </classification-national>
    <classifications-ecla>
      <classification-ecla sequence="1">
        <text>H04N-001/407B</text>
        <section>H</section>
        <class>04</class>
        <subclass>N</subclass>
        <main-group>001</main-group>
        <subgroup>407B</subgroup>
      </classification-ecla>
    </classifications-ecla>
    <patent-classifications>
      <patent-classification sequence="1">
        <classification-scheme office="EP" scheme="CPC">
          <date>20130101</date>
        </classification-scheme>
        <classification-symbol>H04N-001/4072</classification-symbol>
        <section>H</section>
        <class>04</class>
        <subclass>N</subclass>
        <main-group>1</main-group>
        <subgroup>4072</subgroup>
        <symbol-position>F</symbol-position>
        <classification-value>I</classification-value>
        <classification-status>B</classification-status>
        <classification-data-source>H</classification-data-source>
        <action-date>
          <date>20130101</date>
        </action-date>
      </patent-classification>
    </patent-classifications>
    <number-of-claims>18</number-of-claims>
    <exemplary-claim>1</exemplary-claim>
    <figures>
      <number-of-drawing-sheets>5</number-of-drawing-sheets>
      <number-of-figures>8</number-of-figures>
      <image-key data-format="questel">US6181444</image-key>
    </figures>
    <invention-title format="original" lang="en" id="title_en">Image reading apparatus and information storing medium used therefor</invention-title>
    <references-cited>
      <citation srep-phase="examiner">
        <patcit num="1">
          <text>VAN ROESSEL FREDERIK J</text>
          <document-id>
            <country>US</country>
            <doc-number>4535351</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US4535351</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="examiner">
        <patcit num="2">
          <text>NAKAYAMA YOSHIAKI, et al</text>
          <document-id>
            <country>US</country>
            <doc-number>4608595</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US4608595</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="examiner">
        <patcit num="3">
          <text>TANIOKA HIROSHI</text>
          <document-id>
            <country>US</country>
            <doc-number>4709274</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US4709274</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="examiner">
        <patcit num="4">
          <text>SUZUKI YOSHIYUKI</text>
          <document-id>
            <country>US</country>
            <doc-number>4763199</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US4763199</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="examiner">
        <patcit num="5">
          <text>FUJIMORI TOSHIRO</text>
          <document-id>
            <country>US</country>
            <doc-number>5177602</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5177602</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="examiner">
        <patcit num="6">
          <text>ITO AKIO, et al</text>
          <document-id>
            <country>US</country>
            <doc-number>5513007</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5513007</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="examiner">
        <patcit num="7">
          <text>WATANABE HIDEYUKI</text>
          <document-id>
            <country>US</country>
            <doc-number>5589954</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5589954</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="examiner">
        <patcit num="8">
          <text>WANG LAIQIANG, et al</text>
          <document-id>
            <country>US</country>
            <doc-number>5796876</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5796876</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="examiner">
        <patcit num="9">
          <text>YAMAKAWA SHINJI, et al</text>
          <document-id>
            <country>US</country>
            <doc-number>5809366</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5809366</doc-number>
          </document-id>
        </patcit>
      </citation>
    </references-cited>
    <parties>
      <applicants>
        <applicant data-format="original" app-type="applicant" sequence="1">
          <addressbook lang="en">
            <orgname>Brother Kogyo Kabushiki Kaisha</orgname>
            <address>
              <address-1>Nagoya, JP</address-1>
              <city>Nagoya</city>
              <country>JP</country>
            </address>
          </addressbook>
          <nationality>
            <country>JP</country>
          </nationality>
        </applicant>
        <applicant data-format="questel" app-type="applicant" sequence="2">
          <addressbook lang="en">
            <orgname>BROTHER KOGYO</orgname>
          </addressbook>
          <nationality>
            <country>JP</country>
          </nationality>
        </applicant>
      </applicants>
      <inventors>
        <inventor data-format="original" sequence="1">
          <addressbook lang="en">
            <name>Sato, Tatsuya</name>
            <address>
              <address-1>Ichinomiya, JP</address-1>
              <city>Ichinomiya</city>
              <country>JP</country>
            </address>
          </addressbook>
          <nationality>
            <country>JP</country>
          </nationality>
        </inventor>
      </inventors>
      <agents>
        <agent sequence="1" rep-type="agent">
          <addressbook lang="en">
            <orgname>Oliff &amp; Berridge, PLC</orgname>
          </addressbook>
        </agent>
      </agents>
    </parties>
    <examiners>
      <primary-examiner>
        <name>Mehta, Bhavesh</name>
      </primary-examiner>
    </examiners>
    <lgst-data>
      <lgst-status>EXPIRED</lgst-status>
    </lgst-data>
  </bibliographic-data>
  <abstract format="original" lang="en" id="abstr_en">
    <p id="P-EN-00001" num="00001">
      <br/>
      An image reading apparatus includes an image sensor for reading images for output of corresponding analog image signals, an A/D converter for converting the analog image signals into multi-bit digital image data, and a gamma-correction circuit for performing gamma-correction of the digital image data.
      <br/>
      The image reading apparatus further includes a background gray level detection circuit for detecting a background gray level of the analog image signals on the basis of the digital image data, and a coefficient modifying circuit for modifying a standard set of gamma-correction coefficient data into a modified set of gamma-correction coefficient data on the basis of the detected background gray level.
    </p>
  </abstract>
  <description format="original" lang="en" id="desc_en">
    <heading>BACKGROUND OF THE INVENTION</heading>
    <p num="1">
      1.
      <br/>
      Field of the Invention
    </p>
    <p num="2">
      The present invention relates to an image reading apparatus which is capable of performing  GAMMA -correction and background gray level correction in a facsimile machine or a photocopying machine for example.
      <br/>
      The present invention also relates to an information storing medium which is used for controlling such an image reading apparatus.
    </p>
    <p num="3">2. Description of the Related Art</p>
    <p num="4">
      Typically, an image reading apparatus, such as an image scanner of a facsimile machine, comprises an image reader for reading images of an image carrying paper for output of corresponding analog image signals, an A/D converter for converting the analog image signals into multi-bit digital image data, a  GAMMA -correction unit for performing  GAMMA -correction of the digital image data.
      <br/>
      Further, the image reading apparatus also includes means for correcting the background gray level of the image signals at the time of converting the analog image signals into the digital image data.
      <br/>
      Such background gray level correction is necessary because the dynamic range of the non-background image signals relative to the background image signals reduces to result in poor resolution if the background is relatively dark.
    </p>
    <p num="5">
      For background gray level correction, a conventional image reading apparatus incorporates a peak hold circuit for holding the peak level of analog image signals from an image reader, and the peak level held by the peak hold circuit is utilized as a high level reference value for an A/D converter.
      <br/>
      Thus, when the voltage of the analog image signals becomes equal to the peak value, the digital output of the A/D converter becomes equal to the high level reference value which is the highest value of the converter.
    </p>
    <p num="6">Another image reading apparatus is also known which incorporates an automatic gain control circuit including an amplifier for amplifying analog image signals to such a degree that the peak level of the analog image signals is elevated to coincide with the high level reference value of an A/D converter.</p>
    <p num="7">However, either of the image reading apparatuses described above requires hardware addition of the peak hold circuit or the automatic gain control circuit, consequently resulting in a cost increase.</p>
    <heading>SUMMARY OF THE INVENTION</heading>
    <p num="8">It is, therefore, an object of the present invention is to provide an image reading apparatus which is capable of performing background gray level correction without hardware addition.</p>
    <p num="9">Another object of the present invention is to provide an information storing medium which can be advantageously used for such an image reading apparatus.</p>
    <p num="10">According to one aspect of the present invention, there is provided an image reading apparatus comprising: reading means for reading images for output of corresponding analog image signals; an A/D converter for converting the analog image signals into multi-bit digital image data;  GAMMA -correction means for performing  GAMMA -correction of the digital image data; background gray level detection means for detecting a background gray level of the analog image signals on the basis of the digital image data; and coefficient modifying means for modifying a standard set of  GAMMA -correction coefficient data into a modified set of  GAMMA -correction coefficient data on the basis of the detected background gray level.</p>
    <p num="11">
      With the image reading apparatus described above, the background gray level detection means and the coefficient modifying means can be incorporated in a central processing unit of the image reading apparatus.
      <br/>
      Thus, the background gray level correction can be realized only by software addition, thereby obviating the need for hardware addition of a peak hold circuit or an automatic gain control circuit for example.
      <br/>
      Further, since the background gray level correction can be performed together with the  GAMMA -correction, the time required for performing the background gray level correction can be minimized.
    </p>
    <p num="12">
      Preferably, the image reading apparatus may further comprise storing means for storing a standard  GAMMA -correction look-up table, so that the coefficient modifying means modifies the standard  GAMMA -correction look-up table into a modified  GAMMA -correction look-up table on the basis of the detected background gray level for supplying to the  GAMMA -correction means.
      <br/>
      Further, the storing means may also store a coefficient modifying program used for modifying the standard  GAMMA -correction look-up table into the modified  GAMMA -correction look-up table.
      <br/>
      The storing means may advantageously comprise a ROM.
    </p>
    <p num="13">
      Preferably, the image reading apparatus may further comprise a shading compensation circuit between the reading means and the A/D converter for performing shading compensation of the analog image signals.
      <br/>
      In this case, the background gray level detection means may be in the form of a peak level detection circuit for detecting a peak level of the digital image data which is used for determining the background gray level of the analog image signals.
      <br/>
      Further, storing means such as a ROM may be provided for storing a peak level detection program.
    </p>
    <p num="14">According to a preferred embodiment, the  GAMMA -correction means, the background gray level detection means and the coefficient modifying means are incorporated in a central processing unit of the image reading apparatus.</p>
    <p num="15">According to another aspect of the present invention, there is provided an image reading apparatus comprising: reading means for reading images for output of corresponding analog image signals; an A/D converter for converting the analog image signals into multi-bit digital image data; and means for performing  GAMMA -correction of the digital image data together with background gray level correction of the digital image data.</p>
    <p num="16">Further, the means for performing the  GAMMA -correction and the background gray level correction comprises: background gray level detection means for detecting a background gray level of the analog image signals on the basis of the digital image data; coefficient modifying means for modifying a standard  GAMMA -correction look-up table into a modified  GAMMA -correction look-up table on the basis of the detected background gray level; and  GAMMA -correction means for performing  GAMMA -correction of the digital image data on the basis of the modified  GAMMA -correction look-up table.</p>
    <p num="17">According to a further aspect of the present invention, there is provided an information storing medium used for controlling an image reading apparatus which comprises reading means for reading images for output of corresponding analog image signals, an A/D converter for converting the analog image signals into multi-bit digital image data, and  GAMMA -correction means for performing  GAMMA -correction of the digital image data, the medium storing: a background gray level detection program for detecting a background gray level of the analog image signals on the basis of the digital image data; and a coefficient modifying program for modifying a standard set of  GAMMA -correction coefficient data into a modified set of  GAMMA -correction coefficient data on the basis of the detected background gray level.</p>
    <p num="18">
      Preferably, the standard set of  GAMMA -correction coefficient data may be in the form of a standard  GAMMA -correction look-up table.
      <br/>
      In this case, the coefficient modifying program is used for modifying the standard  GAMMA -correction look-up table into a modified  GAMMA -correction look-up table as the modified set of  GAMMA -correction coefficient data.
    </p>
    <p num="19">Preferably, the background gray level detection program may be in the form of a peak level detection program for detecting a peak level of the digital image data which is used for determining the background gray level of the analog image signals.</p>
    <p num="20">Typically, the information storing medium may be in the form of a ROM.</p>
    <p num="21">Other objects, features and advantages of the present invention will be apparent from the detailed description of the embodiment given below with reference to the accompanying drawings.</p>
    <heading>BRIEF DESCRIPTION OF THE DRAWINGS</heading>
    <p num="22">
      In the accompanying drawings:
      <br/>
      FIG. 1 is a circuit block diagram showing a facsimile machine which incorporates an image reading apparatus embodying the present invention;
      <br/>
      FIG. 2 is a circuit block diagram showing the reading unit of the facsimile machine illustrated in FIG. 1;
      <br/>
      FIG. 3 is a block diagram showing the arrangement of the CPU incorporated in the same facsimile machine;
      <br/>
      FIG. 4 is a flow diagram showing the successive steps of image processing in the same facsimile machine;
      <br/>
      FIG. 5 is a view showing the wave form of analog image signals for input to an A/D converter;
      <br/>
      FIG. 6 is a view showing the output digital image signals from the A/D converter;
      <br/>
      FIG. 7 is a graph showing the relationship between the input image data and the output image data for  GAMMA -correction; and
      <br/>
      FIG. 8 is a view showing the wave form of the output image signals after  GAMMA -correction.
    </p>
    <heading>DETAILED DESCRIPTION OF THE PREFERRED EMBODIMENTS</heading>
    <p num="23">The preferred embodiment of the present invention will be described below with reference to the accompanying drawings.</p>
    <p num="24">
      Reference is first made to FIG. 1 which is a circuit block diagram showing a facsimile machine embodying the present invention.
      <br/>
      This facsimile machine comprises a CPU (central processing unit) 1, an NCU (network control unit) 2, a RAM (random access memory) 3, a modem (modulator-demodulator) 4, a ROM (read-only memory) 5, an EEPROM (electrically erasable and programmable ROM) 6, a gate array 7, a codec (coder-decoder) 8, and a DMAC (direct memory access controller) 9.
      <br/>
      Further, the facsimile machine also comprises a reading unit 11, a recording unit 12, an operation unit 13, and a display unit 14.
    </p>
    <p num="25">
      The CPU 1, the NCU 2, the RAM 3, the modem 4, the ROM 5, the EEPROM 6, the gate array 7, the codec 8 and the DMAC 9 are connected to each other via bus lines (digital lines) which include data bus lines, address bus lines and control signal bus lines.
      <br/>
      The gate array 7 is connected to the reading unit 11, the recording unit 12, the operation unit 13 and the display unit 14, respectively.
    </p>
    <p num="26">The CPU 1 provides an overall control of the facsimile machine as a whole.</p>
    <p num="27">
      The NCU 2 is connected to a telephone line 21 for providing network control.
      <br/>
      The NCU 2 is also connected to the modem 4 through an analog line.
    </p>
    <p num="28">
      The RAM 3 stores various digital data such as image data.
      <br/>
      Of course, an additional RAM or RAMs may be provided to increase the capacity of data storage.
    </p>
    <p num="29">The modem 4 modulates the transmitting codes and demodulates the received codes.</p>
    <p num="30">
      The ROM 5 stores various programs or the like as required for controlling the facsimile machine.
      <br/>
      The ROM 5 also stores a standard set of  GAMMA -correction coefficients in the form of a standard look-up table for example.
      <br/>
      The ROM 5 further stores a coefficient modifying program used for modifying the standard set of  GAMMA -correction coefficients (standard look-up table), and a peak level detection program used for background gray level correction, as hereinafter described in detail.
    </p>
    <p num="31">The EEPROM 6 stores registered data (e.g. shortcut dials) and/or flags.</p>
    <p num="32">The gate array 7 functions as an I/O interface (input/output interface) for the CPU 1 for data transmission to and/or from the reading unit 11, the recording unit 12, the operation unit 13 and the display unit 14.</p>
    <p num="33">The codec 8 performs coding of the transmitting image data and decoding of the received image data.</p>
    <p num="34">The DMAC 9 provides memory access control with respect to the RAM 3 for example.</p>
    <p num="35">The reading unit 11 reads out the image data from an image carrying paper sheet (not shown) for output through the gate array 7, whereas the recording unit 12 performs printing of images on a recording paper sheet (not shown) on the basis of the image data received through the gate array 7.</p>
    <p num="36">The operation unit 13 has key switches to be operated by the user for output of operation signals, whereas the display unit 14 includes an LCD or the like for providing various indications under the control of the CPU 1.</p>
    <p num="37">
      FIG. 2 is a schematic block diagram showing the arrangement of the reading unit 11.
      <br/>
      As shown in this figure, the reading unit 11 includes a CCD (charge coupled device) sensor 31 as an image reading element, an amplifier 32, a shading compensation circuit 33, and an A/D converter (analog to digital converter) 34.
      <br/>
      The CCD sensor 31 may be replaced by a MOS image sensor or a contact type image sensor, but these examples are not limitative.
    </p>
    <p num="38">
      Though not illustrated, the reading unit 11 further includes other elements such as a light source for irradiating an image carrying paper and a feed motor for feeding the paper line by line.
      <br/>
      These other elements are well-known in the art and has nothing to do with the gist of the present invention, consequently requiring no description.
    </p>
    <p num="39">
      The CCD sensor 31 reads the images of the image carrying paper for output of analog image signals, whereas the amplifier 33 amplifies the analog image signals from the CCD sensor 31.
      <br/>
      The shading compensation circuit 33 performs shading compensation, in a known manner, with respect to the amplified image signals for correcting errors which are optically caused by positional deviations from the axis of the optical system.
      <br/>
      The A/D converter 34 converts the compensated analog signals into multi-bit digital image data for output through the gate array 7.
    </p>
    <p num="40">As shown in FIG. 3, the CPU 1 incorporates a  GAMMA -correction circuit 1a, a peak level detection circuit 1b, and a coefficient modifying circuit 1c.</p>
    <p num="41">The  GAMMA -correction circuit 1a performs  GAMMA -correction with respect to the digital image data from the A/D converter 34.</p>
    <p num="42">
      The peak level detection circuit 1b detects the peak level of the digital image data from the A/D converter 34 according to the peak level detection program read out from the ROM 5.
      <br/>
      The detected peak level represents the background gray level (darkness) of the image carrying paper scanned by the CCD sensor 31 (FIG. 2), and therefore can be used for correcting the background gray level correction.
    </p>
    <p num="43">
      The coefficient modifying circuit 1c reads out the standard set of  GAMMA -correction coefficients and the coefficient modifying program from the ROM 5 for preparing a modified set of  GAMMA -correction coefficients (a modified look-up table) according to the peak level detected at the peak level detection circuit 1b.
      <br/>
      The modified set of  GAMMA -correction coefficients thus obtained can be used at the  GAMMA -correction circuit la for performing  GAMMA -correction of the digital image data while also performing background gray level correction.
    </p>
    <p num="44">The facsimile machine thus designed operates in the following manner.</p>
    <p num="45">
      In the transmission mode, the reading unit 11 reads the images of an image carrying paper for output of analog image signals which are processed for shading compensation at the shading compensation circuit 33 and for digitizing at the A/D converter 34.
      <br/>
      The digital image data thus obtained are then processed at the CPU 1 for  GAMMA -correction and background gray level correction.
      <br/>
      Finally, the digital image data thus corrected are coded at the codec 8 and modulated at the modem 4 for transmission through the NCU 2 and the telephone line 21.
    </p>
    <p num="46">
      In the copy mode, the reading unit 11 reads the images of an image carrying paper for output of analog image signals which are processed for shading compensation at the shading compensation circuit 33 and for digitizing at the A/D converter 34.
      <br/>
      The digital image data thus obtained are then processed at the CPU 1 for  GAMMA -correction and background gray level correction.
      <br/>
      Finally, the digital image data thus corrected are transmitted, through the gate array 7, to the recording unit 12 for printing on a recording paper.
    </p>
    <p num="47">
      In this way, the CPU 1 processes the digital image data for  GAMMA -correction and background gray level correction at the same time by preparing a modified set of  GAMMA -correction coefficients.
      <br/>
      Next, reference is made to the flow diagram of FIG. 4 to explain how the CPU 1 performs such image data processing.
    </p>
    <p num="48">
      First, the CCD sensor 31 of the reading unit 11 reads one line of the image carrying paper (Step S1) for output of analog image signals (Step S2).
      <br/>
      As previously described, the resulting analog image signals are amplified at the amplifier 32 and then subjected to shading compensation at the shading compensation circuit 33.
    </p>
    <p num="49">
      In Step S3, the compensated analog signals are subjected to analog to digital conversion at the A/D converter 34 to provide multi-bit digital image data.
      <br/>
      FIG. 5 shows the input analog signals for the A/D converter 34, whereas FIG. 6 shows the output digital image data from the A/D converter 34.
      <br/>
      As shown in these figures, when the peak voltage P �V� of the analog image signals is lower than the high-level reference voltage RefH for the A/D converter 34, the peak level XX �H� of the output digital image data is also lower than the highest gradation level FF �H� set for the A/D converter 34.
      <br/>
      Thus, at this stage, background gray level correction is not performed for adjusting the peak voltage P �V� of the analog image signals to coincide with the highest gradation level FF �H�.
    </p>
    <p num="50">
      According to the illustrated embodiment, the A/D converter 34 is designed to convert each of the analog image signals (corresponding to each of the picture elements) into a 8-bit digital image signal.
      <br/>
      Further, the high-level reference voltage RefH is the power source voltage Vcc �V�, whereas the low-level reference voltage RefL is the ground level (namely, 0 �V�).
      <br/>
      Further, the notation "�H�" represents a hexadecimal number.
    </p>
    <p num="51">The output digital image data from the A/D converter 34 supplied through the gate array 7 for storing in the RAM 3 (Step S4).</p>
    <p num="52">
      Then, the CPU 1 determines whether or not the digital image data stored in the RAM 3 are those for the first line (Step S5).
      <br/>
      Such a determination step is performed because the background gray level of each page (image carrying paper) as a whole can be determined by checking the peak level of the digital image data for the first line.
      <br/>
      For this purpose, a flag "1" may be set at the time of starting the processing of the image signals for each page, and the flag is reset to "0" when the signal processing for the first line finishes.
    </p>
    <p num="53">
      If the digital image data stored in the RAM 3 are those for the first line of the page ("Yes" in Step S5), the peak level detection circuit 1b of the CPU 1 detects the peak value of the first line image data (Step S6).
      <br/>
      The detected peak value may be XX �H� in FIG. 6 for example.
      <br/>
      Such detection may be readily carried out by successively comparing the digital image data for the respective picture elements.
    </p>
    <p num="54">Then, the CPU 1 causes the detected peak value XX �H� to be stored in the RAM 3 (Step S7).</p>
    <p num="55">
      Then, the coefficient modifying circuit 1c of the CPU 1 prepares a modified  GAMMA -correction look-up table by calculation.
      <br/>
      For this purpose, the coefficient modifying circuit 1c reads out the standard  GAMMA -correction look-up table from the ROM 5 as well as the background gray level (the detected peak value XX �H�) from the RAM 3, and calculates the products of the input values of the standard  GAMMA -correction look-up table and XX�H�/FF�H�. Such calculation can be easily performed since FF �H� (namely, the resolution of the A/D converter 34) is stored in the ROM 5 in advance.
    </p>
    <p num="56">
      More specifically, a  GAMMA -correction look-up table is a table which provides relationship between the input values (namely, the pre- GAMMA -corrected image data) and the output values (namely, the post- GAMMA -corrected image data), and the ratio between each input value and a corresponding output value is represented by a respective  GAMMA -correction coefficient.
      <br/>
      Thus, replacing the input values of the standard  GAMMA -correction look-up table with the products of the input values of the standard  GAMMA -correction look-up table and XX�H�/FF�H� is equivalent to replacing standard  GAMMA -correction coefficients with the products of the standard  GAMMA -correction coefficients and XX�H�/FF�H�.
    </p>
    <p num="57">
      In FIG. 7, a broken line curve A corresponds to the standard  GAMMA -correction look-up table stored in the ROM 5, whereas a solid line curve B corresponds to the modified  GAMMA -correction look-up table prepared by multiplying the input values of the standard  GAMMA -correction look-up table with XX�H�/FF�H�. Further, as a result of such multiplication, the peak value XX �H� of the digital image data before modification is raised to FF �H� after modification, as shown in FIG. 8.
      <br/>
      Thus, by using the modified  GAMMA -correction look-up table, the digital image data can be processed not only for  GAMMA -correction but also for background gray level correction.
    </p>
    <p num="58">The modified  GAMMA -correction look-up table thus obtained is stored in the RAM 3 (Step S9).</p>
    <p num="59">Then, the CPU 1 determines whether the modification of the standard  GAMMA -correction look-up table is complete (Step S10).</p>
    <p num="60">
      If "Yes" in Step S10, the  GAMMA -correction circuit la of the CPU 1 performs  GAMMA -correction by referring the modified  GAMMA -correction look-up table (Step S11).
      <br/>
      Specifically, the  GAMMA -correction circuit la successively reads out the digital image data for each line of the page and compares them to the input values of the modified  GAMMA -correction look-up table for storing the corresponding output values of the modified  GAMMA -correction look-up table in the RAM 3.
    </p>
    <p num="61">Then, the CPU 1 determines whether the image processing of one whole page is complete (Step S12).</p>
    <p num="62">
      If "Yes" in Step S12, the above-described routine finishes.
      <br/>
      However, if there is any further page to be read, the same routine is simply repeated.
    </p>
    <p num="63">If "No" in Step S12, the image data for the next line are processed by returning to Step S1.</p>
    <p num="64">If the modification of the standard  GAMMA -correction look-up table is still complete ("No" in Step S10), the table modification continues (return to Step S8).</p>
    <p num="65">
      On the other hand, if the digital image data read out from the RAM 3 are not those for the first line of the page ("No" in Step S5), the image processing proceeds to Step S11 for performing  GAMMA -correction (accompanied by background gray level correction).
      <br/>
      Such skipping is acceptable because the background gray level of each page can be determined solely on the basis of the image data for the first line, so that the table modification is unnecessary for the second or any subsequent line.
    </p>
    <p num="66">
      According to the embodiment described above, background gray level correction is performed simultaneously with  GAMMA -correction.
      <br/>
      Thus, it is possible to create a clear-cut image or images even if the background of the image carrying paper is relatively dark.
    </p>
    <p num="67">
      In the above-described embodiment, modification of the standard  GAMMA -correction look-up table is performed for every page.
      <br/>
      However, in case where a series of pages is successively read, it is likely that all pages are identical or similar in background gray level.
      <br/>
      Therefore, in such a case, modification of the standard  GAMMA -correction look-up table may be performed only for the first page, and the same modified table may be utilized for any subsequent page of the same series.
    </p>
    <p num="68">Further, instead of storing the standard  GAMMA -correction look-up table, the ROM 5 may store a set of arithmetic formulas for calculating a standard set of  GAMMA -correction coefficients, and the coefficient modifying circuit 1c may be designed to modify the set of arithmetic formulas for calculating a modified set of  GAMMA -correction coefficients.</p>
    <p num="69">
      According to the illustrated embodiment, the A/D converter 33 converts the analog image data into the digital image data after the shading compensation circuit 33 performs shading compensation for the analog image data, so that the peak level of the converted digital data is regarded to represent the background gray level.
      <br/>
      However, the shading compensation may be performed after the A/D conversion, and the background gray level may be determined after the A/D conversion but before the shading compensation.
      <br/>
      In the latter case, the peak level of the converted digital image data before shading compensation does not necessarily coincide with the peak level of the image data after shading compensation, so that the degree of shading compensation need be stored in advance as digital data for use to determine the background gray level on the basis of the digital image data which are not processed for shading compensation.
    </p>
    <p num="70">
      In the illustrated embodiment, the standard  GAMMA -correction look-up table is stored in the ROM 5.
      <br/>
      However, the standard  GAMMA -correction table may be alternatively stored in the EEPROM 6.
    </p>
    <p num="71">Moreover, while the illustrated embodiment is applied to the facsimile machine, the present invention may also be applied to any other apparatus such as an image scanner or a digital photocopying machine which requires processing of images read from an image carrying paper or medium.</p>
    <p num="72">
      The present invention being thus described, it is obvious that the same may be varied in many ways.
      <br/>
      Such variations should not be regarded as a departure from the spirit and scope of the present invention, and all such modifications as would be obvious to those skilled in the art are intended to be included within the scope of the following claims.
    </p>
  </description>
  <claims format="original" lang="en" id="claim_en">
    <claim num="1">
      <claim-text>What is claimed is:</claim-text>
      <claim-text>1.</claim-text>
      <claim-text>An image reading apparatus comprising:</claim-text>
      <claim-text>reading means for reading images of an image carrying paper for output of corresponding analog image signals; an A/D converter for converting the analog image signals into multi-bit digital image data;  GAMMA -correction means for performing  GAMMA -correction of the digital image data; background gray level detection means for detecting a background gray level on the basis of the digital image data, the detected background gray level corresponding to a gray level of the image carrying paper;</claim-text>
      <claim-text>and coefficient modifying means for modifying a standard set of  GAMMA -correction coefficient data into a modified set of  GAMMA -correction coefficient data on the basis of the detected background gray level;</claim-text>
      <claim-text>and storing means for storing a standard  GAMMA -correction look-up table, the coefficient modifying means modifying the standard  GAMMA -correction look-up table into a modified  GAMMA -correction look-up table on the basis of a ratio between the detected background gray level and a digital reference signal for supplying to the  GAMMA -correction means; wherein the storing means also stores a coefficient modifying program used for modifying the standard  GAMMA -correction look-up table into the modified  GAMMA -correction look-up table.</claim-text>
    </claim>
    <claim num="2">
      <claim-text>2. The image reading apparatus according to claim 1, wherein the storing means comprises a ROM.</claim-text>
    </claim>
    <claim num="3">
      <claim-text>3. The image reading apparatus according to claim 1, further comprising a shading compensation circuit for performing shading compensation of the analog image signals before performing the  GAMMA -correction.</claim-text>
    </claim>
    <claim num="4">
      <claim-text>4. The image reading apparatus according to claim 3, wherein the background gray level detection means comprises a peak level detection circuit for detecting a peak level of the digital image data which is used for determining the background gray level of the analog image signals.</claim-text>
    </claim>
    <claim num="5">
      <claim-text>5. The image reading apparatus according to claim 4, further comprising storing means for storing a peak level detection program.</claim-text>
    </claim>
    <claim num="6">
      <claim-text>6. The image reading apparatus according to claim 5, wherein the storing means comprises a ROM.</claim-text>
    </claim>
    <claim num="7">
      <claim-text>7. The image reading apparatus according to claim 1, wherein the  GAMMA -correction means, the background gray level detection means and the coefficient modifying means are incorporated in a central processing unit of the image reading apparatus.</claim-text>
    </claim>
    <claim num="8">
      <claim-text>8. An information storing medium used for controlling an image reading apparatus which comprises reading means for reading images of an image carrying paper for output of corresponding analog image signals, an A/D converter for converting the analog image signals into multi-bit digital image data, and  GAMMA -correction means for performing  GAMMA -correction of the digital image data, the medium storing: a background gray level detection program for detecting a background gray level on the basis of the digital image data, the detected background gray level corresponding to a gray level of the image carrying paper;</claim-text>
      <claim-text>and a coefficient modifying program for modifying a standard  GAMMA -correction look-up table into a modified  GAMMA -correction look-up table on the basis of a ratio between the detected background gray level and a digital reference signal.</claim-text>
    </claim>
    <claim num="9">
      <claim-text>9. The information storing medium according to claim 8, wherein the background gray level detection program is in the form of a peak level detection program for detecting a peak level of the digital image data which is used for determining the background gray level of the analog image signals.</claim-text>
    </claim>
    <claim num="10">
      <claim-text>10. The information storing medium according to claim 8, wherein the medium comprises a ROM.</claim-text>
    </claim>
    <claim num="11">
      <claim-text>11. The image apparatus according to claim 1, wherein the detected background gray level corresponds to a peak level of the digital image data.</claim-text>
    </claim>
    <claim num="12">
      <claim-text>12. The image reading apparatus according to claim 1, wherein the digital reference signal is a maximum digital output.</claim-text>
    </claim>
    <claim num="13">
      <claim-text>13. The image reading apparatus according to claim 8, wherein the detected background gray level corresponds to a peak level of the digital image data.</claim-text>
    </claim>
    <claim num="14">
      <claim-text>14. The image reading apparatus according to claim 8, wherein the digital reference signal is a maximum digital output.</claim-text>
    </claim>
    <claim num="15">
      <claim-text>15. An image reading apparatus comprising: reading means for reading images of an image carrying paper for output of corresponding analog image signals; an A/D converter for converting the analog image signals into multi-bit digital image data;  GAMMA -correction means for performing  GAMMA -correction of the digital image data; background gray level detecting means for detecting a background gray level on the basis of the digital image data, the detected background gray level corresponding to a gray level of the image carrying paper; first storing means for storing a standard  GAMMA -correction look-up table; coefficient modifying means for modifying the standard  GAMMA -correction look-up table into a modified  GAMMA -correction look-up table on the basis of the detected background gray level;</claim-text>
      <claim-text>and second storing means for storing the modified  GAMMA -correction look-up table; wherein the  GAMMA -correction means performs the  GAMMA -correction of the digital image data based on the modified  GAMMA -correction look-up table stored in the second storing means.</claim-text>
    </claim>
    <claim num="16">
      <claim-text>16. The image reading apparatus according to claim 15, wherein the standard  GAMMA -correction look-up table is modified into the modified  GAMMA -correction look-up table on the basis of a ratio between the detected background gray level and a digital reference signal.</claim-text>
    </claim>
    <claim num="17">
      <claim-text>17. The image reading apparatus according to claim 16, wherein the detected background gray level corresponds to a peak level of the digital image data.</claim-text>
    </claim>
    <claim num="18">
      <claim-text>18. The image reading apparatus according to claim 16, wherein the digital reference signal is a maximum digital output.</claim-text>
    </claim>
  </claims>
</questel-patent-document>