<?xml version="1.0" encoding="UTF-8"?>
<questel-patent-document lang="en" date-produced="20180805" produced-by="Questel" schema-version="3.23" file="US06185716B2.xml">
  <bibliographic-data lang="en">
    <publication-reference publ-desc="Granted patent as second publication">
      <document-id>
        <country>US</country>
        <doc-number>06185716</doc-number>
        <kind>B2</kind>
        <date>20010206</date>
      </document-id>
      <document-id data-format="questel">
        <doc-number>US6185716</doc-number>
      </document-id>
    </publication-reference>
    <original-publication-kind>B2</original-publication-kind>
    <application-reference is-representative="YES" family-id="21777701" extended-family-id="42113857">
      <document-id>
        <country>US</country>
        <doc-number>09016550</doc-number>
        <kind>A</kind>
        <date>19980130</date>
      </document-id>
      <document-id data-format="questel">
        <doc-number>1998US-09016550</doc-number>
      </document-id>
      <document-id data-format="questel_Uid">
        <doc-number>43172251</doc-number>
      </document-id>
    </application-reference>
    <language-of-filing>en</language-of-filing>
    <language-of-publication>en</language-of-publication>
    <priority-claims>
      <priority-claim kind="national" sequence="1">
        <country>US</country>
        <doc-number>1655098</doc-number>
        <kind>A</kind>
        <date>19980130</date>
        <priority-active-indicator>Y</priority-active-indicator>
      </priority-claim>
      <priority-claim data-format="questel" sequence="1">
        <doc-number>1998US-09016550</doc-number>
      </priority-claim>
    </priority-claims>
    <dates-of-public-availability>
      <publication-of-grant-date>
        <date>20010206</date>
      </publication-of-grant-date>
    </dates-of-public-availability>
    <classifications-ipcr>
      <classification-ipcr sequence="1">
        <text>G11B  20/10        20060101A I20051008RMEP</text>
        <ipc-version-indicator>
          <date>20060101</date>
        </ipc-version-indicator>
        <classification-level>A</classification-level>
        <section>G</section>
        <class>11</class>
        <subclass>B</subclass>
        <main-group>20</main-group>
        <subgroup>10</subgroup>
        <classification-value>I</classification-value>
        <generating-office>
          <country>EP</country>
        </generating-office>
        <classification-status>R</classification-status>
        <classification-data-source>M</classification-data-source>
        <action-date>
          <date>20051008</date>
        </action-date>
      </classification-ipcr>
    </classifications-ipcr>
    <classification-national>
      <country>US</country>
      <main-classification>
        <text>714769000</text>
        <class>714</class>
        <subclass>769000</subclass>
      </main-classification>
      <further-classification sequence="1">
        <text>360065000</text>
        <class>360</class>
        <subclass>065000</subclass>
      </further-classification>
      <further-classification sequence="2">
        <text>G9B020010</text>
        <class>G9B</class>
        <subclass>020010</subclass>
      </further-classification>
    </classification-national>
    <classifications-ecla>
      <classification-ecla sequence="1">
        <text>G11B-020/10A</text>
        <section>G</section>
        <class>11</class>
        <subclass>B</subclass>
        <main-group>020</main-group>
        <subgroup>10A</subgroup>
      </classification-ecla>
    </classifications-ecla>
    <patent-classifications>
      <patent-classification sequence="1">
        <classification-scheme office="EP" scheme="CPC">
          <date>20130101</date>
        </classification-scheme>
        <classification-symbol>G11B-020/10009</classification-symbol>
        <section>G</section>
        <class>11</class>
        <subclass>B</subclass>
        <main-group>20</main-group>
        <subgroup>10009</subgroup>
        <symbol-position>F</symbol-position>
        <classification-value>I</classification-value>
        <classification-status>B</classification-status>
        <classification-data-source>H</classification-data-source>
        <action-date>
          <date>20130101</date>
        </action-date>
      </patent-classification>
    </patent-classifications>
    <number-of-claims>11</number-of-claims>
    <exemplary-claim>1</exemplary-claim>
    <figures>
      <number-of-drawing-sheets>8</number-of-drawing-sheets>
      <number-of-figures>9</number-of-figures>
      <image-key data-format="questel">US6185716</image-key>
    </figures>
    <invention-title format="original" lang="en" id="title_en">Dual detector read channel with semi-soft detection</invention-title>
    <references-cited>
      <citation srep-phase="examiner">
        <patcit num="1">
          <text>CRESPO PEDRO M, et al</text>
          <document-id>
            <country>US</country>
            <doc-number>5031194</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5031194</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="examiner">
        <patcit num="2">
          <text>MEIDAN REUVEN, et al</text>
          <document-id>
            <country>US</country>
            <doc-number>5193102</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5193102</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="examiner">
        <patcit num="3">
          <text>LIAO KE-QIANG, et al</text>
          <document-id>
            <country>US</country>
            <doc-number>5546430</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5546430</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="examiner">
        <patcit num="4">
          <text>KASSAB ROGER J, et al</text>
          <document-id>
            <country>US</country>
            <doc-number>5774285</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5774285</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="examiner">
        <patcit num="5">
          <text>BENEDETTO VALTER</text>
          <document-id>
            <country>US</country>
            <doc-number>5825832</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5825832</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="examiner">
        <patcit num="6">
          <text>SCARAMUZZO JOHN A, et al</text>
          <document-id>
            <country>US</country>
            <doc-number>5917670</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5917670</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="examiner">
        <patcit num="7">
          <text>BRICKNER BARRETT J, et al</text>
          <document-id>
            <country>US</country>
            <doc-number>5956195</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5956195</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="examiner">
        <patcit num="8">
          <text>ASGHAR SAFDAR M, et al</text>
          <document-id>
            <country>US</country>
            <doc-number>6009391</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US6009391</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="examiner">
        <patcit num="9">
          <text>REZAIIFAR RAMIN, et al</text>
          <document-id>
            <country>US</country>
            <doc-number>6011796</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US6011796</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="examiner">
        <patcit num="10">
          <text>ARIYAVISITAKUL SIRIKIAT LEK, et al</text>
          <document-id>
            <country>US</country>
            <doc-number>6012161</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US6012161</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="applicant">
        <patcit num="11">
          <text>FISHER KEVIN D, et al</text>
          <document-id>
            <country>US</country>
            <doc-number>5430661</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5430661</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="applicant">
        <patcit num="12">
          <text>KOREN NORMAN L</text>
          <document-id>
            <country>US</country>
            <doc-number>5550683</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5550683</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="applicant">
        <patcit num="13">
          <text>DUDLEY TRENT O, et al</text>
          <document-id>
            <country>US</country>
            <doc-number>5583706</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5583706</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="applicant">
        <patcit num="14">
          <text>AGAZZI OSCAR E, et al</text>
          <document-id>
            <country>US</country>
            <doc-number>5606464</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5606464</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="applicant">
        <patcit num="15">
          <text>ISHIDA YOSHITERU, et al</text>
          <document-id>
            <country>US</country>
            <doc-number>5625632</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5625632</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="applicant">
        <patcit num="16">
          <text>MINUHIN VADIM BORIS</text>
          <document-id>
            <country>US</country>
            <doc-number>5650954</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5650954</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="examiner">
        <nplcit num="1">
          <text>Oh, et al. (Blind Decision Feedback Equalizer Using Dual-Variance Gaussian Clustering Algorithm for Wireless Communications, IEEE, 1996).</text>
        </nplcit>
      </citation>
      <citation srep-phase="examiner">
        <nplcit num="2">
          <text>Bergmans, et al. (Dual Decision Feedback Equalizer, IEEE, 1997).</text>
        </nplcit>
      </citation>
      <citation srep-phase="examiner">
        <nplcit num="3">
          <text>Thielecke (A Soft-Decision State-Space Equalizer for FIR Channels, IEEE, 1997).</text>
        </nplcit>
      </citation>
      <citation srep-phase="examiner">
        <nplcit num="4">
          <text>Liu (Performanceof Adaptive Equalization and Soft-Decision Decoding Techniques over TDMA Digital Cellular Radio Channels, IEEE, 1992).</text>
        </nplcit>
      </citation>
      <citation srep-phase="applicant">
        <nplcit num="5">
          <text>Dahlman et al., Aug. 1988, Electronics Letters, "Performance Improvement in Decision Feedback Equalisers by Using "Soft Decision'", 24(17):1084-1085.</text>
        </nplcit>
      </citation>
      <citation srep-phase="applicant">
        <nplcit num="6">
          <text>Mita et al., "Automatic Equalizer for Digital Magnetic Recording Systems," IEEE Transactions on Magnetics, pp. 3672-3674, vol. Mag-23, No. 5 (Sep. 1987).</text>
        </nplcit>
      </citation>
      <citation srep-phase="applicant">
        <nplcit num="7">
          <text>Wood, "New Detector for 1,k Codes Equalized to Class II Partial Response," IEEE Transactions on Magnetics, pp. 4075-4077, vol. 25, No. 5 (Sep. 1989).</text>
        </nplcit>
      </citation>
      <citation srep-phase="applicant">
        <nplcit num="8">
          <text>Agazzi et al., "On the Use of Tentative Decisions to Cancel Intersymbol Interference and Nonlinear Distortion (with Application to Magnetic Recording Channels)," IEEE Transactions on Information Theory, pp. 394-408, vol 43, No. 2 (Mar. 1997).</text>
        </nplcit>
      </citation>
      <citation srep-phase="applicant">
        <nplcit num="9">
          <text>Bergmans et al., "Dual Decision Feedback Equalizer," IEEE Transactions on Communications, pp. 514-518, vol. 45, No. 5 (May 1997).</text>
        </nplcit>
      </citation>
    </references-cited>
    <parties>
      <applicants>
        <applicant data-format="original" app-type="applicant" sequence="1">
          <addressbook lang="en">
            <orgname>Maxtor Corporation</orgname>
            <address>
              <address-1>Longmont, CO, US</address-1>
              <city>Longmont</city>
              <state>CO</state>
              <country>US</country>
            </address>
          </addressbook>
          <nationality>
            <country>US</country>
          </nationality>
        </applicant>
        <applicant data-format="questel" app-type="applicant" sequence="2">
          <addressbook lang="en">
            <orgname>MAXTOR</orgname>
          </addressbook>
          <nationality>
            <country>US</country>
          </nationality>
        </applicant>
      </applicants>
      <inventors>
        <inventor data-format="original" sequence="1">
          <addressbook lang="en">
            <name>Riggle, C. Michael</name>
            <address>
              <address-1>Colorado Springs, CO, US</address-1>
              <city>Colorado Springs</city>
              <state>CO</state>
              <country>US</country>
            </address>
          </addressbook>
          <nationality>
            <country>US</country>
          </nationality>
        </inventor>
      </inventors>
      <agents>
        <agent sequence="1" rep-type="agent">
          <addressbook lang="en">
            <name>Ross P.C., Sheridan</name>
          </addressbook>
        </agent>
      </agents>
    </parties>
    <examiners>
      <primary-examiner>
        <name>De Cady, Albert</name>
      </primary-examiner>
    </examiners>
    <lgst-data>
      <lgst-status>EXPIRED</lgst-status>
    </lgst-data>
  </bibliographic-data>
  <abstract format="original" lang="en" id="abstr_en">
    <p id="P-EN-00001" num="00001">
      <br/>
      An apparatus for detecting data within a signal having both data and noise is disclosed herein.
      <br/>
      The apparatus includes means for receiving first samples of an input signal, a first detection unit and a second detection unit.
      <br/>
      The first detection unit processes the first data samples to create a first bit signal, a second bit signal and a probability related signal.
      <br/>
      The second detection unit includes first and second modification units and a selection unit.
      <br/>
      The first and second modification units separately modify the first data samples based on the first and second bit signals, respectively, to create first and second error signals, respectively.
      <br/>
      The selection unit selects one of the first and second bit signals based on the first and second error signals and a threshold signal.
    </p>
  </abstract>
  <description format="original" lang="en" id="desc_en">
    <heading>FIELD OF THE INVENTION</heading>
    <p num="1">The invention relates generally to the detection of data in noise and is particularly apt for use in digital data storage systems such as magnetic disk drive systems.</p>
    <heading>BACKGROUND OF THE INVENTION</heading>
    <p num="2">
      It is generally true that data needs to be detected in a noisy and/or distorted input signal.
      <br/>
      For example, in a communications system, data is transmitted from a source location to a destination location via a transmission medium.
      <br/>
      While propagating through the medium, the data signal picks up noise from the medium and other sources.
      <br/>
      When the signal is received at the destination location, it is necessary to extract the data from the noisy signal.
      <br/>
      It is desired that the extracted data be identical to the data transmitted from the source location, but often errors will exist in the extracted data.
      <br/>
      As can be appreciated, if the detected data is not a sufficiently accurate representation of the transmitted information, the data will be of little or no use to the party receiving the data.
    </p>
    <p num="3">
      An equally demanding application that requires data to be detected from a noisy input signal is data storage.
      <br/>
      For example, in a magnetic disk drive system, data is stored as a coded series (i.e., a binary series) of magnetic transitions, frequently referred to as pulses, recorded on the surface of a magnetic disk.
      <br/>
      When data is transferred to and from the disk, the transitions nominally exhibit a Lorentzian shape, which is generally to a degree distorted.
      <br/>
      Some distortion is deterministic due to geometry of the head/media system.
      <br/>
      But, some is variable due to proximity of other transitions, localized deformities in the media, and irregular grain structure of the media.
      <br/>
      In addition, noise is added to the data signal from head (transducer) resistance, cable parasitics, and electronics.
      <br/>
      Collectively, noise and variable distortion tends to obscure the data.
    </p>
    <p num="4">
      As with communication systems, it is very important that the detected data in a data storage system be an accurate representation of the data that was originally stored on the media.
      <br/>
      To compensate for the occurrence of errors in the read data, most data storage systems apply error correction coding to the data before it is stored on the media.
      <br/>
      Then, if errors are present in the read data, the system is virtually always capable of correcting the errors before the data is delivered to the user.
      <br/>
      However, ECC coding adds overhead to the system that decreases the overall amount of user data that can be stored on a particular media, and it adds to system cost, both in proportion to the amount of ECC that must be applied to decrease detected error rates to an acceptable level.
    </p>
    <p num="5">
      Therefore, it is advantageous to develop a system for detecting data in a noisy and/or distorted signal that reduces the detected error rate.
      <br/>
      Such a system would be capable of operation with lower levels of error correction coding and would thus allow an increased amount of user data to be stored on a given storage medium.
    </p>
    <heading>SUMMARY OF THE INVENTION</heading>
    <p num="6">
      The present invention relates to a detection system that is capable of detecting data in a noisy and/or distorted signal with higher than typical accuracy.
      <br/>
      That is, the system is capable of achieving data detection with a relatively low bit error rate for a given signal to noise ratio.
      <br/>
      Because noisier, more distorted signals can be tolerated for a given error rate, data can be more tightly packed on the disk surface.
    </p>
    <p num="7">
      The system of the present invention utilizes a dual detector approach to detect data in an input signal.
      <br/>
      That is, a first detector system performs an initial data detection on the input data signal and then a second detector system uses the output of the first detector system to reprocess the original input signal.
      <br/>
      The first detector system detects data in the input signal and creates both a primary bit string and a secondary bit string as a result.
      <br/>
      The primary bit string is the normal output signal of the first detector.
      <br/>
      The secondary bit string is similar to the primary bit string but has certain bits in the bit string (i.e., bits of low detection probability) changed by inversion.
      <br/>
      Subsequent bits in either bit string may also differ because of possible error propagation.
      <br/>
      The first detector system also outputs information related to the probability that the bits in the primary bit string have been properly detected.
    </p>
    <p num="8">
      The primary and secondary bit strings are delivered to first and second canceller units, respectively, within the second detector system.
      <br/>
      The two canceller units each also receive the original input data signal that was read from the media.
      <br/>
      The canceller units each modify the input data signal based upon a corresponding series of bits from the first detector system, such as by subtracting (alternatively, by adding) cancellation values from the data signal.
      <br/>
      In a preferred embodiment, the present invention uses a dual decision feedback equalizer (DFE) detector unit as the first detector and a dual canceller/multiplexer unit to perform the secondary detection.
    </p>
    <p num="9">
      The first detector system includes means for generating a flag signal whenever the magnitude of a modified data sample is less than a predetermined threshold level (i.e., between a positive and negative signal threshold which together create a quality threshold).
      <br/>
      As such, the flag signal identifies a data bit that has low detection probability.
      <br/>
      That is, it has higher probability of being in error than non-flagged bits.
      <br/>
      Note that, if a bit is truly in error, subsequent bits also exhibit higher error probability due to error propagation risk inherent in decision feedback detectors.
      <br/>
      The flag signal is used by the first detector system to determine whether to invert a corresponding bit in the secondary bit string.
      <br/>
      The flag signal is also delivered to the second detector system for enabling a possible alternative decision by the pair of canceller units.
      <br/>
      In addition to the flag signal, the first detector system creates a quality signal that is also related to bit detection probability of the questionable bit.
      <br/>
      The quality signal is delivered to the second detector system for determining a second threshold value which is used in combination with a margin signal (described below) in selecting the output of the second detector system.
    </p>
    <p num="10">
      As stated above, the two canceller units are operative for, among other things, modifying the original input data signal based upon a bit string received from the first detector system.
      <br/>
      In the preferred embodiment, this is done by subtracting a corresponding series of cancellation values from the data signal (or its functional equivalent).
      <br/>
      Each cancellation value subtracted from the data signal at a particular bit time is related to the output of the first detector system.
      <br/>
      That is, the cancellation value subtracted within the first canceller is chosen based upon the primary bit string and the cancellation value subtracted in the second canceller is chosen based upon the secondary bit string.
      <br/>
      In one embodiment, a pair of random access memories (RAMS) are used to store all of the possible cancellation values needed by the system.
      <br/>
      Each RAM is addressed using a series of bits extracted from the bit strings from the first detector system (i.e., the primary bit string in the first canceller and the secondary bit string in the second canceller).
    </p>
    <p num="11">
      When the low probability bit flag is raised, the canceller units each accumulate a squared error sum.
      <br/>
      Each error in the squared error sum is the difference between the actual modified sample input data and the expected modified sample values over a prescribed series of samples.
      <br/>
      When a squared error sum has been accumulated for the prescribed series of samples, a margin value for the dual canceller is calculated using the two error sums.
      <br/>
      In a preferred embodiment, the margin value is determined by finding the difference between the two error sums.
      <br/>
      The margin value is then compared to a second threshold value that is linearly related to the probability signal from the first detector for the original questionable bit.
      <br/>
      The comparison results in a select signal that is used to determine the output of the multiplexer and, hence, the second detector system.
    </p>
    <p num="12">
      The dual detector system of the present invention thus uses "semi-soft" detection to achieve a higher level of detection accuracy.
      <br/>
      Hard detection refers to a decision made by a detector that is automatically accepted by the system.
      <br/>
      Soft detection refers to the technique whereby two or more detector systems each make a tentative decision about a bit, or sequence of bits, and also generate a quality metric which gauges certainty of the tentative decision.
      <br/>
      The quality metrics are then compared to one another to make the final decision.
      <br/>
      Semi-soft detection, as used herein, refers to a system where hard decisions are made whenever a quality metric is above a particular threshold and soft decisions are made whenever the quality metric is below the threshold.
      <br/>
      In effect, a semi-soft detection system provides a second opinion whenever an original decision is questionable.
      <br/>
      Quality of the second opinion is then compared with quality of the original decision and a final decision is made which may or may not be the same as the original decision.
    </p>
    <heading>BRIEF DESCRIPTION OF THE DRAWINGS</heading>
    <p num="13">
      FIG. 1 is a block diagram of a magnetic disk drive system upon which the data detection scheme of the present invention can be implemented;
      <br/>
      FIG. 2 is a block diagram of a conventional DFE detector system used to detect data in a magnetic disk drive;
      <br/>
      FIG. 3 is a block diagram of the dual detector system approach of the present invention;
      <br/>
      FIG. 4 is a block diagram of a dual detector system in accordance with one embodiment of the present invention;
      <br/>
      FIG. 5A is a block diagram of the internal circuitry of the modified dual DFE detector system of FIG. 4;
      <br/>
      FIG. 5B is a diagrammatic representation of certain waveforms to illustrate the creation of primary and secondary bit strings;
      <br/>
      FIG. 6A is a block diagram of the internal circuitry of the two canceller units in accordance with one embodiment of the present invention;
      <br/>
      FIG. 6B is a block diagram of the internal circuitry of the two canceller units in accordance with another embodiment of the present invention; and,
      <br/>
      FIG. 7 is a diagrammatic representation of data samples before and after subtraction of a cancellation value.
    </p>
    <heading>DETAILED DESCRIPTION</heading>
    <p num="14">
      FIG. 1 illustrates an example of a magnetic disk drive system 100 that can implement the data detection scheme of the present invention.
      <br/>
      The disk drive system 100 is operative for performing data storage and retrieval functions for an external host computer 102.
      <br/>
      The disk drive system 100 includes: a disk 104, a transducer 106, an actuator assembly 108, a voice coil motor (VCM) 110, a read/write channel 112, an encoder/decoder (ENDEC) 114, an error correction coding (ECC) unit 116, a data buffer memory 118, an interface unit 120, a servo unit 122, and a disk controller/microprocessor 124.
      <br/>
      As described above, the disk 104 is a storage media used to store digital information in the form of magnetic polarity transitions (frequently referred to as pulses).
      <br/>
      The disk 104 is rotated at a substantially constant rate by a spin motor (not shown) that is speed-controlled by a closed-loop feedback system.
      <br/>
      As is well understood in the art, the system 100 can include a plurality of disks all mounted on a single spindle and each serviced by one or more separate transducers.
    </p>
    <p num="15">
      The transducer 106 is a device that transfers information from/to the disk 104 during read and write operations.
      <br/>
      The transducer 106 is positioned over the disk 104, typically, by a rotary actuator assembly 108 that pivots about an axis under the power of the VCM 110.
      <br/>
      During a write operation, a polarity-switchable write current is delivered to the transducer 106 from the read/write channel 112 to induce magnetic polarity transitions onto a desired track of the disk 104.
      <br/>
      During a read operation, the transducer 106 senses magnetic polarity transitions on a desired track of the disk 104 to create an analog read signal that is indicative of the data stored thereon.
      <br/>
      In a preferred embodiment of the present invention, the transducer 106 is a dual element head having a magnetoresistive read element and an inductive write element, although other functional structures may be equally acceptable.
    </p>
    <p num="16">
      The VCM 110 receives movement commands from the servo unit 122 for properly positioning the transducer 106 above a desired track of the disk 104 during read and write operations.
      <br/>
      The servo unit 122 is part of a feedback loop that uses servo information from the surface of the disk 104 to control the movement of the transducer 106 and the actuator assembly 108 in response to commands from the controller/microprocessor 124.
    </p>
    <p num="17">
      During a read operation, the channel 112 receives the analog read signal from the transducer 106 and processes the signal to create a digital read signal representative of the data stored on the disk 104.
      <br/>
      Therefore, if present, the detection circuitry of the present invention would be a part of the channel 112.
      <br/>
      The channel 112 may also include means for deriving timing information, such as a read clock, from the analog signal.
    </p>
    <p num="18">
      The ENDEC 114 is operative for: (1) encoding data being transferred from the host 102 to the disk 104, and (2) decoding data being transferred from the disk 104 to the host 102.
      <br/>
      Data being written to the disk 104 is encoded for a number of reasons, including those relating to timing and detection concerns.
      <br/>
      The ENDEC 114 can impart, for example, a run length limited (RLL) code on the data being written to the disk 104 to ensure that the frequency of transitions in the bit stream does not exceed or fall below predetermined limits.
      <br/>
      Such coding ensures that, among other things, enough transitions exist in the read data to maintain an accurate read clock.
      <br/>
      Other coding schemes may also be employed in the ENDEC 114.
    </p>
    <p num="19">
      The ECC unit 116 is operative for adding redundant information to the data from the host 102 before that data is encoded in the ENDEC 114 and written to the disk 104.
      <br/>
      This redundant information is used during subsequent read operations to permit discovery of error locations and values within the decoded read data.
      <br/>
      Errors in the read data detected by the read channel can result from any number of mechanisms, such as: (1) media noise due to media anomalies, (2) random noise from the transducer, cabling and electronics, (3) poor transducer placement reducing signal amplitude and/or increasing adjacent track noise during the read operation, (4) poorly written data due to media defects or poor transducer placement, and/or (5) foreign matter on the media or media damage.
      <br/>
      ECCs are generally capable of correcting up to a predetermined number of errors in a data block.
      <br/>
      If more than this number of errors exist, then the code will not be able to correct the errors but may still be able to identify that errors exist within the block.
      <br/>
      ECC functionality is generally implemented in a combination of hardware and software.
    </p>
    <p num="20">The data buffer memory 118 is used to temporarily store data for several purposes: (1) to permit data rates that are different between the disk drive and the host interface bus, (2) to allow time for the ECC system to correct data errors before data is sent to the host 102, (3) temporary parameter storage for the controller/microprocessor 124, and (4) for data caching.</p>
    <p num="21">
      The interface 120 is used to establish and maintain communication between the host 102 and the disk drive system 100.
      <br/>
      In this regard, all transfer of information into and out of the disk drive 100 takes place through the interface 120.
      <br/>
      The disk controller/microprocessor 124 is operative for controlling the operation and timing of the other elements of the system 100.
      <br/>
      In addition, the controller/microprocessor 124 may perform the functions of some of the elements of the system.
      <br/>
      For example, the controller/microprocessor 124 may perform the correction computation function of the ECC unit 116 if errors exceed the capability of hardware based units.
    </p>
    <p num="22">
      It should be appreciated that the above description of the disk drive system 100 represents a functional view of elements of a disk drive system, not a physical description.
      <br/>
      Many of the physical elements are today intermixed or distributed differently than the functional distribution.
      <br/>
      For example, certain of the servo functional elements are frequently physically intermixed with the read/write channel, and disk controller/microprocessor.
    </p>
    <p num="23">
      FIG. 2 is a block diagram illustrating a conventional decision feedback equalizer (DFE) detector system 10 that can be used to detect data in a magnetic disk drive.
      <br/>
      Not shown are the preceding parts of the read channel used to amplify, control the amplitude, limit the incoming bandwidth, extract the clock, sample the data at the clock rate, and perhaps convert sampled analog signals to sampled digital signals.
      <br/>
      The term "sampled data in" (as shown in the figures) is defined to be data which has been amplified, low-pass filtered, clock-extracted and, perhaps, digitized.
      <br/>
      The DFE detector 10 of FIG. 2, if located in the disk drive system 100 of FIG. 1, would be located in the channel 112.
      <br/>
      The detector system 10 includes: a forward finite impulse response (FIR) equalizer 12, a subtracter 14, a decision unit 16, and a feedback filter 18.
      <br/>
      If the FIR uses sampled analog signals in lieu of sampled digital signals (as is sometimes done), an A to D (analog to digital) converter needs to be interposed between the FIR and subtracter.
      <br/>
      Alternatively, a sampled analog feedback filter 18 and subtracter 14 may be used.
      <br/>
      The FIR equalizer 12 receives digital or analog data samples C, that are derived from the analog read signal.
      <br/>
      The forward equalizer 12 processes the data samples Ct according to a predetermined filter response function to create modified data samples Dt.
      <br/>
      The modified data samples Dt, are delivered to the subtracter 14 which further modifies the data samples by subtracting feedback values FBt (output of the feedback filter 18) from the data samples Dt to create modified data samples St.
      <br/>
      The data samples St are then fed to the decision unit 16 which applies a very simple detection algorithm to the modified data samples St to create detected data signals Bt.
      <br/>
      It should be appreciated that the subscripts used to identify the data signals in FIG. 2 (i.e., t) correspond to the relative sample times of the data.
    </p>
    <p num="24">
      In the DFE detector system 10, the forward FIR equalizer 12 and the feedback filter 18 are used to shape the read signal data pulses, represented by the input data samples Ct, into a form desired by the decision unit 16.
      <br/>
      In general, this involves conversion of a "pulse" in the input sampled data into a desired "step response" that is easily processed by the decision unit 16.
      <br/>
      The forward equalizer 12 shapes the forward end of the data pulses to the desired shape leaving an extended trailing edge of the pulse.
      <br/>
      In general, noise is also "colored" (spectrally altered) in the process and is usually increased as well.
      <br/>
      The feedback filter 18 operates on the trailing end of the extended data pulses, in a process known as "noiseless" equalization, since noiseless digitized data is used to create the feedback filter 18 output values rather than noisy input data samples.
      <br/>
      The feedback filter 18 uses the detected output data bits Bt-1 to Bt-jmax to create a filter output that adequately shapes the trailing end of the input pulses, jmax being an integer representing the maximum number of feedback coefficients.
      <br/>
      Note that a RAM (Random Access Memory) may be used in lieu of a linear FIR-like structure as the feedback filter 18.
      <br/>
      If so, bits Bt-1 to Bt-jmax are used as RAM address bits.
      <br/>
      By adequately shaping the input data pulses Ct before they reach the decision unit 16, a simplified form of decision unit 16 can be used, such as a simple slicer.
      <br/>
      In its simplest form, a slicer circuit determines whether an input signal is positive or negative.
    </p>
    <p num="25">
      The forward FIR equalizer 12 receives the input data samples Ct and processes the samples according to the following equation:
      <br/>
      Dt = SIGMA Ct-k Ek kmin &lt;= k &lt;= kmax
    </p>
    <p num="26">
      where k is an integer and Ek are the coefficients of forward FIR equalizer 12.
      <br/>
      At approximately the same time, the feedback filter 18 receives the detected output data bits from the decision unit 16 and, if a linear FIR-like filter, processes it according to the following equation:
      <br/>
      FBi = SIGMA Bt-j Fj 1 &lt;= j &lt;= jmax
    </p>
    <p num="27">
      where FBt is the output signal of the feedback filter 18, Fj are the linear feedback filter coefficients, and j is an integer.
      <br/>
      As described above, the output signal of the forward FIR equalizer 12 is input into the subtracter 14 which subtracts the output signal of the feedback filter 18 from it to create modified samples St (i.e., St =Dt -FBt).
      <br/>
      The decision unit 16 processes the modified data samples St according to a known detector function.
      <br/>
      The simple DFE detector function is:
      <br/>
      Bt =sign(St)
    </p>
    <p num="28">
      where sign( ) is an operator that determines whether the operand is positive or negative.
      <br/>
      If the data is digitized in 2's complement notation, the output is merely the inverted sign bit of the subtracter and is already converted from the natural (-1,+1) non-return to zero (NRZ) format to digital (0, 1) format.
      <br/>
      If no other detector follows the DFE, data is transferred to the ENDEC 114 for decoding.
    </p>
    <p num="29">
      In the past, DFE detector systems such as the one illustrated in FIG. 2 were generally capable of detecting data in noise with relatively low bit error rate.
      <br/>
      However, as data densities rise, the error rate achieved by such systems begins to increase with increased levels of noise and variable distortion encountered.
      <br/>
      For example, nonlinear intersymbol interference (ISI) can significantly reduce accuracy of the detector 10.
      <br/>
      In addition, error propagation is significantly increased.
      <br/>
      Error propagation is a characteristic of decision feedback detectors where existence of an error may induce additional subsequent errors because of improper feedback equalization (recall that previously detected bits are used to calculate feedback equalization values).
    </p>
    <p num="30">
      To compensate for both noise and variable distortion, the system of the present invention implements a dual detector system approach as illustrated in FIG. 3.
      <br/>
      The approach utilizes a first detector system 20, second detector system 22, and a delay unit 24 to provide more accurate detection than that provided by a single DFE detector.
      <br/>
      The first detector system 20, which in the preferred embodiment includes a pair of DFE detectors, processes the input data samples and produces one or more signals, including detected data signals, that are delivered to the second detector system 22 via path 26.
      <br/>
      The second detector system 22 then independently processes the input data samples, which are received on path 28, using several signals from the first detector system 20.
      <br/>
      The delay unit 24 is used to delay the input data samples by an appropriate amount of time to account for processing time in the second detector system 22.
    </p>
    <p num="31">
      FIG. 4 is a block diagram illustrating a detector system 30 in accordance with one embodiment of the present invention.
      <br/>
      The detector system 30 includes a first detector system 32, a delay unit 33 and a second detector system 34.
      <br/>
      The first detector system 32 includes a modified dual DFE detector unit 36 for performing initial detection on the input data samples (to be described in further detail in connection with FIG. 5A).
      <br/>
      The second detector system 34 includes: first and second canceller units 38, 40, a subtracter 42, a comparator 44, a threshold unit 46, a multiplexer 48, a controller 49, a first delay unit 50 and a second delay unit 51.
      <br/>
      As described above, and will be reviewed again below, the second detector system 34 receives various signals from the first detector system 32 and uses them to assist in processing the input data samples.
      <br/>
      Before describing the circuitry of the second detector system 34 in more detail, the configuration of the modified dual DFE detector unit 36 will be discussed.
    </p>
    <p num="32">
      FIG. 5A is a block diagram illustrating the internal circuitry of the modified dual DFE detector system 36 of FIG. 4.
      <br/>
      As illustrated, the modified dual DFE unit 36 includes a forward FIR equalizer 12, first and second subtracters 13, 14, first and second decision units 15, 16, and first and second feedback filters 17, 18 (the first DFE unit comprising forward FIR equalizer 12, first subtracter 13, first decision unit 15 and first feedback filter 17; and, the second DFE unit comprising forward FIR equalizer 12, second subtracter 14, second decision unit 16 and second feedback filter 18).
      <br/>
      Each of the DFE units operates in substantially the same fashion as their counterparts in the DFE detector 10 of FIG. 2, except that the source of the detected bits for feedback filter 18 is modified.
      <br/>
      In addition, the modified dual DFE detector system 36 includes: a comparator 52, a latch 54, an inverter 56 and a multiplexer 58.
      <br/>
      The first decision unit 15 produces a detected signal in a manner similar to that described in connection with FIG. 2 above.
      <br/>
      This detected signal is available at an output of the DFE unit 36 and is called the primary bit string.
      <br/>
      The inverter 56 is operative for receiving the primary bit string and for inverting the bits of the bit string to create an inverted (or complemented) bit string.
      <br/>
      That is, the inverter 56 changes "logical ones" in the primary bit string to "logical zeros" and vice versa.
      <br/>
      The multiplexer 58 is operative for creating a secondary bit string by allowing, for each bit time, the present bit of the primary bit string, the inverted bit string or detected signal of second decision unit 16 to pass to an output port.
      <br/>
      The multiplexer 58 executes the selection function under the control of control unit 57.
      <br/>
      The control unit 57 makes the decision based upon a low signal flag from the comparator 52 which is described in more detail immediately below.
    </p>
    <p num="33">
      The comparator 52 receives the input data samples, modified by both the forward FIR equalizer 12 and the first feedback filter 17, as an input and compares magnitudes of the samples to a first threshold value, threshold 1, to create a low signal flag.
      <br/>
      The first threshold value can be either a constant or a variable value.
      <br/>
      A variable value allows for optimization based upon head, media, recording zone, and/or off-track position and can also be used for on the fly optimization.
      <br/>
      If the magnitude of a particular sample is less than the first threshold, the comparator 52 outputs a "logical one".
      <br/>
      If the magnitude of the sample is greater than or equal to the first threshold, the comparator 52 outputs a "logical zero".
      <br/>
      The low signal flag, therefore, is indicative of the magnitude of the data sample presently being input into the first decision unit 15 and, as such, is related to the probability that the first decision unit 15 will make a correct decision using the data sample.
      <br/>
      The multiplexer 58 passes the present bit of the primary bit string when the low signal flag is "logical zero".
      <br/>
      At the time when the low signal flag becomes a "logical one", the multiplexer passes an inverted bit from the primary bit string.
      <br/>
      Subsequently, for a selectable period of time (number of bits), the multiplexer passes bits from the second decision unit 16.
      <br/>
      During this time, the comparator 52 is also prohibited from passing any more low signal flags.
      <br/>
      When the period of time has elapsed, control reverts back to the comparator 52 and the low signal flag.
      <br/>
      In this way, the secondary bit string includes an inverted data bit in each bit position having a low decision probability followed by a series of detected bits based upon feedback equalization computed using the inverted and subsequent bits.
      <br/>
      The secondary bit string, therefore, represents a second possibility for proper detection.
      <br/>
      The bits are passed to minimize the likelihood of error propagation in the secondary bit string for cases where the inverted bit happens to be the valid bit.
      <br/>
      Alternatively, if the inverted bit is not the valid bit (i.e., the original bit was valid), the primary bit string will not likely be corrupted by error propagation.
      <br/>
      One of the two bit strings will therefore remain uncorrupted unless one or more additional error bits happen to occur within the selectable period of time (series of bits).
      <br/>
      It is possible to optimize the selectable period of time such that a trade-off between likelihood of additional error bits and error propagation minimizes the overall error rate.
      <br/>
      This can be done by trial and error while measuring the error rate as a function of selectable period of time.
    </p>
    <p num="34">
      FIG. 5B illustrates the creation of the primary and secondary bit strings, without any influence from detected bits from the second decision unit 16.
      <br/>
      That is, it only treats the system up to and through the bit inversion process.
      <br/>
      Waveform 80 represents an analog read signal that may be received from a transducer.
      <br/>
      The vertical dotted lines 82 represent the sampling times of the analog signal.
      <br/>
      Waveform 84 represents the modified sample data after equalization that is input into the first decision unit 15 of the modified dual DFE detector system 36 shown in FIG. 5A. As shown in FIG. 5B, the third pulse 86 of the analog read signal 80 has an amplitude that is less than the amplitude of the other pulses in the signal.
      <br/>
      This reduced amplitude in the analog read signal results in a reduced amplitude 88 in the modified data samples 84 that are input into the first decision unit 15 of FIG. 5A. The first decision unit 15, which is a slicer unit in the preferred embodiment, detects the reduced amplitude 88 of the modified data samples as a positive pulse in the analog read signal and indicates such in the primary bit string.
      <br/>
      However, because the amplitude 88 of the modified samples 84 does not exceed the positive threshold level 90 shown in FIG. 5B, the pulse indicated in the primary bit string is deemed a low probability pulse and the bit is therefore inverted in the secondary bit string.
    </p>
    <p num="35">
      Referring again to FIG. 5A, the low signal flag is also used by latch 54 which then stores the modified data sample at the input of the first decision unit 15 for use by second detector system 34 when a low signal determination is made.
      <br/>
      The output signal stored by the latch 54 is called the quality signal because it indicates the quality of the corresponding decision of the first decision unit 15.
      <br/>
      That is, the quality signal is related to the probability, as seen by the modified dual DFE detector system 36, that the corresponding bit in the detected data signal has been correctly detected.
      <br/>
      It can be shown that the quality signal is essentially proportional to the log likelihood ratio (LLR) for the corresponding detected bit.
      <br/>
      The LLR is the natural logarithm of the ratio between probability that a bit is a "logical one" and the probability that a bit is a "logical zero", i.e. LLR=1n�P(Bt=1)/P(Bt=0)�. The LLR is a desirable parameter to use as a quality metric in the present dual detector approach, in part, because it is readily available in both DFE and canceller type detectors.
    </p>
    <p num="36">
      With reference to FIG. 4, the second detector system 34 receives the primary and secondary bit strings, the low signal flag, and the quality signal from the first detector system 32.
      <br/>
      The low signal flag is received by the controller 49 which places the second detector system 34 into a "soft" decision mode whenever the low signal flag is a "logical one".
      <br/>
      In the soft mode, the second detector system 34 performs soft detection, as described more fully below, by comparing quality metrics from both the first and second canceller and the quality signal from the first detector system 32 and making a secondary decision based upon the comparison results.
      <br/>
      When the low signal flag is a "logical zero", which will be most of the time, the second detector system 34 is placed in a "hard" mode by the controller 49 and the output of the primary bit string is automatically sent to the final data output.
    </p>
    <p num="37">
      The soft mode of operation of the second detector system 34 will now be discussed.
      <br/>
      The first and second cancellers 38, 40 receive the primary and secondary bit strings from the first detector 32, respectively, and the delayed sampled input data from the delay 33.
      <br/>
      Each canceller 38, 40 then modifies the sample input data according to its respective input bit string.
      <br/>
      Each canceller 38, 40, when enabled by the low signal flag, also outputs a squared error signal indicative of the cumulative error between its actual modified data samples and the expected modified sample values over a prescribed series of samples.
      <br/>
      The subtracter 42 finds the difference between the two squared error signals to create a margin signal indicative of the margin of the second detector system 34.
      <br/>
      Note that if the margin signal is positive, it indicates disagreement between the first detector system 32 and second detector system 34.
      <br/>
      The primary and secondary bit strings are then input to the multiplexer 48 via first and second delay units 50, 51, respectively.
      <br/>
      The multiplexer 48, under the control of the controller 49, determines, for a series of questionable bits, which of the two multiplexer inputs to pass to the final data output and to the ENDEC 114 for decoding.
      <br/>
      The series of questionable bits is associated with the series of samples over which the squared error was accumulated.
    </p>
    <p num="38">
      The comparator 44 creates the select signal by comparing the margin signal generated by the subtracter 42 to a second threshold value, threshold2.
      <br/>
      The second threshold value is calculated by the threshold unit 46 and is preferably based upon the quality signal received from the first detector system 32.
      <br/>
      In the preferred embodiment, the second threshold value is simply a fraction of the quality signal (which, as described above, is a linear function of the LLR).
      <br/>
      As shown in FIG. 4, the margin signal generated by the subtracter 42 is the cumulative squared error signal from the second canceller 40 subtracted from the cumulative squared error signal from the first canceller 38.
      <br/>
      As such, the margin signal indicates the quality of the output data signal of the second canceller 40 vis-a-vis the first canceller 38.
      <br/>
      When the margin signal is positive and large (i.e., greater than the second threshold), it is determined that the modified data of the second canceller 40 is sufficiently more accurate than the modified data of the first canceller to justify overriding the decision of the first detector system 32.
      <br/>
      The comparator 44 then delivers a select signal to the controller 49 which directs the multiplexer 48 to pass the series of bits (selectable length series) from the secondary bit string to be delivered to the final output.
      <br/>
      Otherwise, the controller 49 directs the multiplexer 48 to pass bits from the primary bit string.
      <br/>
      In this way, the accuracy of questionable bits detected by the first detector system 32 are double-checked in the second detector system 34 and amended if the second detector system 34 finds them in error with enough certainty to override the decision of the first detector system 32.
    </p>
    <p num="39">
      Because the second dual canceller detector system 34 provides an inherently more reliable answer than the DFE detector system 36 on questionable decisions, the second threshold is scaled down from the quality signal of the DFE.
      <br/>
      For optimal detection accuracy of the detector system 30, a proper ratio must be established between the quality signal of the first detector system 32 and the threshold value of the second detector system 34.
      <br/>
      The ratio is most efficiently determined by a trial and error approach that monitors error rate for a multitude of different ratio values.
    </p>
    <p num="40">
      FIG. 6A is a block diagram illustrating the internal circuitry of each of the two canceller units 38, 40 in accordance with one embodiment of the present invention.
      <br/>
      The canceller units 38, 40 each include: a first subtracter 60, a random access memory (RAM) 62, a RAM address shift register 63, a second subtracter 64, a converter unit 66, a squaring unit 68, and an accumulator unit 70.
      <br/>
      The RAM 62 stores the cancellation values that are used to modify the input data samples.
      <br/>
      The RAM 62 receives an address from the RAM address shift register 63 that contains a series of bits from the input bit string from the first detector system 32 (i.e., the primary bit string for the first canceller 38 and the secondary bit string for the second canceller 40) spanning bits on both sides of the sample currently being modified.
      <br/>
      The RAM address is used to retrieve from the RAM the most likely correct value required to modify the current sample.
      <br/>
      Hence, the cancellation value is based upon several previous and several subsequent bits related to the sample.
      <br/>
      Because the first and second bit strings are each used to address a RAM device, the first detector must output bits in the (0, 1) format (which it naturally does if inverted sign bit of the first detector's subtracter is used as its output).
      <br/>
      It should be appreciated that other methods of obtaining appropriate cancellation values, such as through use of a linear FIR function, can be used in accordance with the present invention.
      <br/>
      A RAM approach to cancellation is preferred, however, because it allows for nonlinear equalization, which may be important for non-linear disk drive recording systems.
    </p>
    <p num="41">
      The RAM values can be computed using any one of a number of different methods.
      <br/>
      In one method, the least mean squared (LMS) algorithm is used.
      <br/>
      The LMS algorithm computes the mean squared error between the desired modified canceller sample output and the actual modified canceller sample output, then gradually "tunes" the RAM contents until minimum mean squared error is achieved.
      <br/>
      In another possible method, direct calculation using a large set of sampled data is performed to compute RAM values.
      <br/>
      Non-linear equations, such as Volterra models, can also be used in lieu of real data in conjunction with either LMS or direct computation.
      <br/>
      The cancellation values in the RAM are usually specific to the head/media being used and therefore vary from head to head, media to media, and drive to drive.
      <br/>
      Separate cancellation values can also be provided on a zone by zone basis, if needed.
    </p>
    <p num="42">
      The first subtracter 60 subtracts the cancellation values retrieved from the RAM 62 from the associated input data samples to create modified data samples at an output.
      <br/>
      As described above, the subtraction of cancellation values is performed to create a desired step response in an output data signal for each pulse in the input samples.
    </p>
    <p num="43">
      FIG. 7 is a graph illustrating the data samples before and after subtraction of cancellation value in a typical case.
      <br/>
      The first waveform 72 represents the data samples input into the canceller 38, 40.
      <br/>
      The second waveform 74 represents the modified data samples after the cancellation values have been subtracted.
      <br/>
      The data samples are shown using small boxes on the waveforms 72, 74 and the vertical marks along the horizontal axis of the graph represent the sample times.
      <br/>
      As shown, the subtraction of cancellation values transforms the pulse of the input data, which represents a single magnetic transition sensed by the read head, into a step function having a non return to zero (NRZ) format.
    </p>
    <p num="44">
      Referring again to FIG. 6A, the converter 66 is operative for converting the format of the input bit string (i.e., either the primary or secondary bit string) from a (0,1) format to an NRZ format.
      <br/>
      The output of the converter 66, therefore, represents the expected modified sample values based upon the bit string from the first detector system 32.
      <br/>
      The second subtracter 64 receives the modified data samples from the first subtracter 60 and subtracts them from the expected sample values output by the converter 66 (i.e., -1 or +1).
      <br/>
      The output of the second subtracter 64, which represents the deviation, or error, of an actual present modified sample value from an expected present modified sample value, is then squared in the squaring unit 68.
      <br/>
      The squared values from the squaring unit 68 are then summed and accumulated in the accumulator 70 over a predetermined number of bit times to produce a squared error signal.
      <br/>
      For best performance, the predetermined number of bit times should cover the range of bits that differ between the primary and secondary bit strings, plus additional bits that affect the RAM address, because any one RAM address bit in error may affect the squared error, hence quality of the decision.
      <br/>
      As described above, the squared error out signal is used to generate the margin signal for the second detector system 34, which is indicative of the quality of the canceller decision.
    </p>
    <p num="45">
      Since only cumulative squared error signals are desired as an output of each canceller, an alternative architecture to that of FIG. 6A is shown in FIG. 6B. This architecture is functionally and arithmetically identical to that described in FIG. 6A, if values stored in the RAM 93 are modified accordingly.
      <br/>
      Instead of storing cancellation values, the sum of each cancellation value and the associated desired signal is stored at each RAM address.
      <br/>
      Doing so eliminates one subtracter (i.e., subtracter 64) and the converter 66.
      <br/>
      That is, if the output of the first subtracter in FIG. 6A is: St =Ct -Rt, where Ct is input sample data and Rt is the correction cancellation value at time t, and the output of the second subtracter is: S't =Tt -St =Tt -(Ct -Rt)=(Tt +Rt)-Ct, where S't is the error signal and Tt is the desired (target) signal level, both at time t, then Tt +Rt can be pre-added and stored in the RAM (shown as R't in FIG. 6B) in lieu of Rt, thus saving a subtracter and converter.
      <br/>
      The other functional elements in FIG. 6B, i.e., the squaring unit 96 and accumulator 98 are identical to units 68 and 70 in FIG. 6A, respectively.
      <br/>
      Because FIG. 6A may be more readily understandable, it was discussed first.
      <br/>
      However, the architecture in FIG. 6B is preferred.
    </p>
    <p num="46">
      FIG. 7 is used to more fully describe the cancellation process.
      <br/>
      It assumes a RAM with nine (9) address bits which implies that the RAM contains 29 =512 stored values.
      <br/>
      The RAM has certain cancellation values stored within it at each RAM address location.
      <br/>
      The cancellations values correspond, on a one to one basis, with each of the samples of the input data signal (shown as black boxes) of FIG. 7.
      <br/>
      Assuming that the input signal shown in FIG. 7 is a nominal isolated pulse signal, the cancellation value would be equal to the value required to be subtracted from the input signal to achieve the desired signal.
      <br/>
      For the leftmost sample shown in FIG. 7, the cancellation value would be 1.
      <br/>
      Viewing the input signal from left to right, the next sample would have a cancellation value of approximately 1.1, the following sample would have a cancellation value of approximately 1.6, and so on.
    </p>
    <p num="47">
      The RAM addresses where the above-mentioned cancellation values are stored have a center bit (in this case their fifth bit) which relates to the value of the desired signal corresponding with the bit of the input signal being cancelled (where a 0 bit corresponds to a desired signal value of -1 and a 1 bit corresponds to a desired signal value of 1).
      <br/>
      For example, the leftmost sample would have a RAM address which includes a 0 as its center bit, as would the second through fourth bit samples.
      <br/>
      Not until the fifth bit sample would a RAM address have a 1 as its center bit.
      <br/>
      Similarly, the sixth through ninth bit samples would include a RAM address having a 1 as their center bit.
    </p>
    <p num="48">
      The input signal shown in FIG. 7 has nine bit times and there are no preceding nor following pulses.
      <br/>
      Applying the above, the leftmost sample would have its canceller value located at RAM address 000000001.
      <br/>
      The next sample would have its canceller value located at RAM address 000000011.
      <br/>
      The sample corresponding to the center bit would have its canceller value located at RAM address 000011111.
      <br/>
      Finally, the rightmost bit sample shown in FIG. 7 would have its canceller value located at address 111111111.
    </p>
    <p num="49">Referring back to FIG. 4, the delay 33 merely offsets the expected sample value to account for the fact that bits both before and after the sample being modified are used by the RAM 62 to select the corresponding cancellation value.</p>
    <p num="50">
      Although the present invention has been described in conjunction with its preferred embodiment, it is to be understood that modifications and variations may be resorted to without departing from the spirit and scope of the invention as those skilled in the art readily understand.
      <br/>
      For example, in one possible modification, additional cancellers are added to the second detector to test additional possible bit strings and associated samples.
      <br/>
      This scenario also requires the generation of more than two bit strings by the first detector.
      <br/>
      In another possible modification, other types for first and second detectors are used in accordance with the present invention.
      <br/>
      The first detector, for example, can be any type of detector where errors of at least one bit string are mostly limited to single bits per error event.
      <br/>
      In a third possible modification, the inventive system can operate on analog data samples rather than digitized sampled data.
      <br/>
      Such modifications and variations are considered to be within the purview and scope of the invention and the appended claims.
    </p>
  </description>
  <claims format="original" lang="en" id="claim_en">
    <claim num="1">
      <claim-text>What is claimed is:</claim-text>
      <claim-text>1.</claim-text>
      <claim-text>An apparatus for detecting data within a signal having both data and noise, said apparatus for use in a data storage system, comprising:</claim-text>
      <claim-text>means for receiving first data samples of an input signal; a first detection unit for processing said first data samples to create a first bit signal, a second bit signal, and a probability related signal; first and second modification units for separately modifying said first data samples based on said first and second bit signals, respectively, to create first and second error signals, respectively;</claim-text>
      <claim-text>and a selection unit for selecting one of said first or second bit signals based on said first and second error signals and a threshold signal.</claim-text>
    </claim>
    <claim num="2">
      <claim-text>2. The apparatus of claim 1, further comprising: a multiplexer for processing said signal selected by said selection unit.</claim-text>
    </claim>
    <claim num="3">
      <claim-text>3. The apparatus of claim 1, wherein: said first and second modification units include first and second cancellers respectively, for subtracting cancellation values from said first data samples.</claim-text>
    </claim>
    <claim num="4">
      <claim-text>4. The apparatus of claim 3, wherein: said first and second cancellers include a random access memory (RAM) for storing said cancellation values.</claim-text>
    </claim>
    <claim num="5">
      <claim-text>5. The apparatus of claim 1, wherein: said first and second error signals are squared error sums that are accumulated over a predetermined number of bit times.</claim-text>
    </claim>
    <claim num="6">
      <claim-text>6. The apparatus of claim 1, wherein: said selection unit includes a subtracter for determining a difference between said first and second error signals.</claim-text>
    </claim>
    <claim num="7">
      <claim-text>7. The apparatus of claim 6, wherein: said selection unit includes a comparator for comparing said difference to said probability related signal.</claim-text>
    </claim>
    <claim num="8">
      <claim-text>8. The apparatus of claim 1, wherein: said first detection unit includes a pair of decision feedback equalizers.</claim-text>
    </claim>
    <claim num="9">
      <claim-text>9. The apparatus of claim 1, wherein: said first bit signal and said second bit signal represent two possible detected data strings for the first data samples.</claim-text>
    </claim>
    <claim num="10">
      <claim-text>10. The apparatus of claim 1, wherein: said threshold signal is calculated using said probability related signal.</claim-text>
    </claim>
    <claim num="11">
      <claim-text>11. The apparatus of claim 10, wherein: said probability related signal is approximately proportional to a log likelihood that bits of the first bit signal are accurate.</claim-text>
    </claim>
  </claims>
</questel-patent-document>