<?xml version="1.0" encoding="UTF-8"?>
<questel-patent-document lang="en" date-produced="20180805" produced-by="Questel" schema-version="3.23" file="US06185280B2.xml">
  <bibliographic-data lang="en">
    <publication-reference publ-desc="Granted patent as second publication">
      <document-id>
        <country>US</country>
        <doc-number>06185280</doc-number>
        <kind>B2</kind>
        <date>20010206</date>
      </document-id>
      <document-id data-format="questel">
        <doc-number>US6185280</doc-number>
      </document-id>
    </publication-reference>
    <original-publication-kind>B2</original-publication-kind>
    <application-reference is-representative="YES" family-id="21811164" extended-family-id="42113282">
      <document-id>
        <country>US</country>
        <doc-number>09022737</doc-number>
        <kind>A</kind>
        <date>19980212</date>
      </document-id>
      <document-id data-format="questel">
        <doc-number>1998US-09022737</doc-number>
      </document-id>
      <document-id data-format="questel_Uid">
        <doc-number>43171415</doc-number>
      </document-id>
    </application-reference>
    <language-of-filing>en</language-of-filing>
    <language-of-publication>en</language-of-publication>
    <priority-claims>
      <priority-claim kind="national" sequence="1">
        <country>US</country>
        <doc-number>2273798</doc-number>
        <kind>A</kind>
        <date>19980212</date>
        <priority-active-indicator>Y</priority-active-indicator>
      </priority-claim>
      <priority-claim data-format="questel" sequence="1">
        <doc-number>1998US-09022737</doc-number>
      </priority-claim>
    </priority-claims>
    <dates-of-public-availability>
      <publication-of-grant-date>
        <date>20010206</date>
      </publication-of-grant-date>
    </dates-of-public-availability>
    <classifications-ipcr>
      <classification-ipcr sequence="1">
        <text>H04M   3/00        20060101A I20051008RMEP</text>
        <ipc-version-indicator>
          <date>20060101</date>
        </ipc-version-indicator>
        <classification-level>A</classification-level>
        <section>H</section>
        <class>04</class>
        <subclass>M</subclass>
        <main-group>3</main-group>
        <subgroup>00</subgroup>
        <classification-value>I</classification-value>
        <generating-office>
          <country>EP</country>
        </generating-office>
        <classification-status>R</classification-status>
        <classification-data-source>M</classification-data-source>
        <action-date>
          <date>20051008</date>
        </action-date>
      </classification-ipcr>
      <classification-ipcr sequence="2">
        <text>H04M   3/30        20060101A I20051008RMEP</text>
        <ipc-version-indicator>
          <date>20060101</date>
        </ipc-version-indicator>
        <classification-level>A</classification-level>
        <section>H</section>
        <class>04</class>
        <subclass>M</subclass>
        <main-group>3</main-group>
        <subgroup>30</subgroup>
        <classification-value>I</classification-value>
        <generating-office>
          <country>EP</country>
        </generating-office>
        <classification-status>R</classification-status>
        <classification-data-source>M</classification-data-source>
        <action-date>
          <date>20051008</date>
        </action-date>
      </classification-ipcr>
      <classification-ipcr sequence="3">
        <text>H04M   7/00        20060101A I20051008RMEP</text>
        <ipc-version-indicator>
          <date>20060101</date>
        </ipc-version-indicator>
        <classification-level>A</classification-level>
        <section>H</section>
        <class>04</class>
        <subclass>M</subclass>
        <main-group>7</main-group>
        <subgroup>00</subgroup>
        <classification-value>I</classification-value>
        <generating-office>
          <country>EP</country>
        </generating-office>
        <classification-status>R</classification-status>
        <classification-data-source>M</classification-data-source>
        <action-date>
          <date>20051008</date>
        </action-date>
      </classification-ipcr>
    </classifications-ipcr>
    <classification-national>
      <country>US</country>
      <main-classification>
        <text>379003000</text>
        <class>379</class>
        <subclass>003000</subclass>
      </main-classification>
      <further-classification sequence="1">
        <text>324525000</text>
        <class>324</class>
        <subclass>525000</subclass>
      </further-classification>
      <further-classification sequence="2">
        <text>324527000</text>
        <class>324</class>
        <subclass>527000</subclass>
      </further-classification>
      <further-classification sequence="3">
        <text>379022080</text>
        <class>379</class>
        <subclass>022080</subclass>
      </further-classification>
      <further-classification sequence="4">
        <text>379026010</text>
        <class>379</class>
        <subclass>026010</subclass>
      </further-classification>
      <further-classification sequence="5">
        <text>379027030</text>
        <class>379</class>
        <subclass>027030</subclass>
      </further-classification>
    </classification-national>
    <classifications-ecla>
      <classification-ecla sequence="1">
        <text>H04M-003/00L</text>
        <section>H</section>
        <class>04</class>
        <subclass>M</subclass>
        <main-group>003</main-group>
        <subgroup>00L</subgroup>
      </classification-ecla>
      <classification-ecla sequence="2">
        <text>H04M-003/30</text>
        <section>H</section>
        <class>04</class>
        <subclass>M</subclass>
        <main-group>3</main-group>
        <subgroup>30</subgroup>
      </classification-ecla>
      <classification-ecla sequence="3">
        <text>H04M-007/00T</text>
        <section>H</section>
        <class>04</class>
        <subclass>M</subclass>
        <main-group>007</main-group>
        <subgroup>00T</subgroup>
      </classification-ecla>
    </classifications-ecla>
    <patent-classifications>
      <patent-classification sequence="1">
        <classification-scheme office="EP" scheme="CPC">
          <date>20130101</date>
        </classification-scheme>
        <classification-symbol>H04M-007/0096</classification-symbol>
        <section>H</section>
        <class>04</class>
        <subclass>M</subclass>
        <main-group>7</main-group>
        <subgroup>0096</subgroup>
        <symbol-position>F</symbol-position>
        <classification-value>I</classification-value>
        <classification-status>B</classification-status>
        <classification-data-source>H</classification-data-source>
        <action-date>
          <date>20130101</date>
        </action-date>
      </patent-classification>
      <patent-classification sequence="2">
        <classification-scheme office="EP" scheme="CPC">
          <date>20130101</date>
        </classification-scheme>
        <classification-symbol>H04M-003/005</classification-symbol>
        <section>H</section>
        <class>04</class>
        <subclass>M</subclass>
        <main-group>3</main-group>
        <subgroup>005</subgroup>
        <symbol-position>L</symbol-position>
        <classification-value>I</classification-value>
        <classification-status>B</classification-status>
        <classification-data-source>H</classification-data-source>
        <action-date>
          <date>20130101</date>
        </action-date>
      </patent-classification>
      <patent-classification sequence="3">
        <classification-scheme office="EP" scheme="CPC">
          <date>20130101</date>
        </classification-scheme>
        <classification-symbol>H04M-003/30</classification-symbol>
        <section>H</section>
        <class>04</class>
        <subclass>M</subclass>
        <main-group>3</main-group>
        <subgroup>30</subgroup>
        <symbol-position>L</symbol-position>
        <classification-value>I</classification-value>
        <classification-status>B</classification-status>
        <classification-data-source>H</classification-data-source>
        <action-date>
          <date>20130101</date>
        </action-date>
      </patent-classification>
      <patent-classification sequence="4">
        <classification-scheme office="EP" scheme="CPC">
          <date>20130101</date>
        </classification-scheme>
        <classification-symbol>H04M-003/305</classification-symbol>
        <section>H</section>
        <class>04</class>
        <subclass>M</subclass>
        <main-group>3</main-group>
        <subgroup>305</subgroup>
        <symbol-position>L</symbol-position>
        <classification-value>A</classification-value>
        <classification-status>B</classification-status>
        <classification-data-source>H</classification-data-source>
        <action-date>
          <date>20130101</date>
        </action-date>
      </patent-classification>
      <patent-classification sequence="5">
        <classification-scheme office="EP" scheme="CPC">
          <date>20130101</date>
        </classification-scheme>
        <classification-symbol>H04M-003/42314</classification-symbol>
        <section>H</section>
        <class>04</class>
        <subclass>M</subclass>
        <main-group>3</main-group>
        <subgroup>42314</subgroup>
        <symbol-position>L</symbol-position>
        <classification-value>A</classification-value>
        <classification-status>B</classification-status>
        <classification-data-source>H</classification-data-source>
        <action-date>
          <date>20130101</date>
        </action-date>
      </patent-classification>
      <patent-classification sequence="6">
        <classification-scheme office="EP" scheme="ICO"/>
        <classification-symbol>T04M-003/30P</classification-symbol>
      </patent-classification>
      <patent-classification sequence="7">
        <classification-scheme office="EP" scheme="ICO"/>
        <classification-symbol>T04M-003/42P</classification-symbol>
      </patent-classification>
    </patent-classifications>
    <number-of-claims>23</number-of-claims>
    <exemplary-claim>1</exemplary-claim>
    <figures>
      <number-of-drawing-sheets>1</number-of-drawing-sheets>
      <number-of-figures>3</number-of-figures>
      <image-key data-format="questel">US6185280</image-key>
    </figures>
    <invention-title format="original" lang="en" id="title_en">Line impedance matching using dynamically generated transfer functions</invention-title>
    <references-cited>
      <citation srep-phase="examiner">
        <patcit num="1">
          <text>MEEK QUENTIN J</text>
          <document-id>
            <country>US</country>
            <doc-number>5577097</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5577097</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="examiner">
        <patcit num="2">
          <text>FRANTZ ROBERT H, et al</text>
          <document-id>
            <country>US</country>
            <doc-number>5802169</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5802169</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="examiner">
        <patcit num="3">
          <text>TRUMP TOENU</text>
          <document-id>
            <country>US</country>
            <doc-number>5815568</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5815568</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="examiner">
        <patcit num="4">
          <text>ZHANG YUN</text>
          <document-id>
            <country>US</country>
            <doc-number>5881130</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5881130</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="examiner">
        <patcit num="5">
          <text>GREENBLATT RICHARD DAVID</text>
          <document-id>
            <country>US</country>
            <doc-number>5917853</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5917853</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="examiner">
        <patcit num="6">
          <text>NELSON GEORGE RODNEY, et al</text>
          <document-id>
            <country>US</country>
            <doc-number>6058162</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US6058162</doc-number>
          </document-id>
        </patcit>
      </citation>
    </references-cited>
    <parties>
      <applicants>
        <applicant data-format="original" app-type="applicant" sequence="1">
          <addressbook lang="en">
            <orgname>InterVoice Limited Partnership</orgname>
            <address>
              <address-1>Reno, NV, US</address-1>
              <city>Reno</city>
              <state>NV</state>
              <country>US</country>
            </address>
          </addressbook>
          <nationality>
            <country>US</country>
          </nationality>
        </applicant>
        <applicant data-format="questel" app-type="applicant" sequence="2">
          <addressbook lang="en">
            <orgname>INTERVOICE PARTNERSHIP</orgname>
          </addressbook>
          <nationality>
            <country>US</country>
          </nationality>
        </applicant>
      </applicants>
      <inventors>
        <inventor data-format="original" sequence="1">
          <addressbook lang="en">
            <name>Jarboe, Steve</name>
            <address>
              <address-1>Carrollton, TX, US</address-1>
              <city>Carrollton</city>
              <state>TX</state>
              <country>US</country>
            </address>
          </addressbook>
          <nationality>
            <country>US</country>
          </nationality>
        </inventor>
        <inventor data-format="original" sequence="2">
          <addressbook lang="en">
            <name>Lin, Zhihong</name>
            <address>
              <address-1>Dallas, TX, US</address-1>
              <city>Dallas</city>
              <state>TX</state>
              <country>US</country>
            </address>
          </addressbook>
          <nationality>
            <country>US</country>
          </nationality>
        </inventor>
      </inventors>
      <agents>
        <agent sequence="1" rep-type="agent">
          <addressbook lang="en">
            <orgname>Fulbright &amp; Jaworski L.L.P.</orgname>
          </addressbook>
        </agent>
      </agents>
    </parties>
    <examiners>
      <primary-examiner>
        <name>Kuntz, Curtis A.</name>
      </primary-examiner>
    </examiners>
    <lgst-data>
      <lgst-status>EXPIRED</lgst-status>
    </lgst-data>
  </bibliographic-data>
  <abstract format="original" lang="en" id="abstr_en">
    <p id="P-EN-00001" num="00001">
      <br/>
      A system and method for determining the impedance of a telephone transmission line are disclosed.
      <br/>
      A test signal is transmitted through a telephone switch to the telephone line and corresponding echo signals are monitored.
      <br/>
      The test and echo signals are correlated to derive an impulse response.
      <br/>
      A transfer function for the system is calculated from the impulse response.
      <br/>
      Then, a transfer function for the transmission line is derived using the system transfer function and the transfer function of the telephone switch.
      <br/>
      Finally, the transmission line impedance is calculated from the transmission line transfer function.
      <br/>
      Once the transmission line impedance is known, an impedance matching circuit for the telephone switch can be modified to match the transmission line and the switch.
    </p>
  </abstract>
  <description format="original" lang="en" id="desc_en">
    <heading>TECHNICAL FIELD OF THE INVENTION</heading>
    <p num="1">This invention deals generally with the transmission of signals through transmission lines and more specifically to the transition between two-wire and four-wire transmission lines.</p>
    <heading>BACKGROUND OF THE INVENTION</heading>
    <p num="2">
      In a typical switch in a telecommunications system there is an interface between a two-wire transmission line and a four-wire transmission line.
      <br/>
      The two-wire line provides a connection between the telephone company's central office and the telephone company's customers.
      <br/>
      The four-wire line is part of the customer's local phone system.
      <br/>
      One of the functions of the telephone switch is to connect the telephone company's lines and the customer's phone system.
      <br/>
      Among other considerations, this involves matching the impedance of the customer's switch to the impedance of the telephone company's line.
      <br/>
      There are chips available which can be programmed to provide a specific impedance between two-wire and four-wire transmission lines.
      <br/>
      If the impedance of the telephone company's two-wire line is known, then this type of chip can be used to connect the two-wire line to the four-wire line with minimum signal loss and echo.
    </p>
    <p num="3">
      A limitation in this capability is that the expected line impedance may not equal the actual line impedance.
      <br/>
      As a result, the two-wire line impedance for which the customer's telephone system and switch are designed will not be correct and when the customer's switch is connected to the telephone company's two-wire transmission line there will be an impedance mismatch.
      <br/>
      In some cases there will be an echo on the four-wire side due to a mismatch in the impedances of the two-wire and four-wire lines.
      <br/>
      The mismatched impedance will often attenuate the telephone signals due to the inefficient power transfer across the transmission line interface.
      <br/>
      Generally, echo signals will also be caused by the mismatched impedance.
    </p>
    <p num="4">
      This problem may arise if a system is designed for the impedance of a specific two-wire line but it is installed instead on, or moved to, a different two-wire line.
      <br/>
      In some situations the line impedance may be measured incorrectly or it may be difficult to accurately measure the line impedance.
    </p>
    <p num="5">
      When a programmable matching chip is used, selecting the wrong impedance can cause other problems in addition to signal attenuation or echo.
      <br/>
      If the wrong two-wire line impedance is used to generate the matching filter coefficients, that could make the transfer characteristics of the matching circuit significantly worse than they would be if a nominal impedance value was used to generate the filters.
      <br/>
      On the other hand, use of a nominal impedance value may produce too simple of a matching circuit, thereby significantly distorting the transmitted signals.
      <br/>
      In some cases, the signal performance can degrade to such an extent that switch hardware, such as a modem, will not work when the wrong impedance is selected.
    </p>
    <heading>SUMMARY OF THE INVENTION</heading>
    <p num="6">
      These and other problems of the prior art are solved by a system and method which takes advantage of the known characteristics of the telecommunications switch and the matching circuit to determine the actual impedance of a telephone line.
      <br/>
      The present invention allows a system to dynamically determine the line impedance during installation or operation.
      <br/>
      Once the two-wire line impedance is known, the system can then reconfigure the front end hybrid matching circuit to match the switch to the two-wire line impedance as precisely as possible in order to optimize the signal transfer between the two-wire and four-wire lines, thereby reducing signal loss and echo.
    </p>
    <p num="7">
      The present invention operates by transmitting a test signal, such as a white noise signal, over the two-wire telephone line and then recording the echo signal that is reflected from the two-wire line.
      <br/>
      In the preferred embodiment, the echo signal is synchronously correlated to the transmitted test signal in order to measure any phase delays in addition to the amplitude of the echo signal.
    </p>
    <p num="8">
      A transfer function is generated by first cross-correlating the test signal input and the echo signal to derive the impulse response for the system.
      <br/>
      The system impulse response is then Fourier-transformed to derive the transfer function of the system comprising the combination of the customer's telecommunications switch and the telephone company's two-wire line.
      <br/>
      The transfer function of the telephone switch can be measured using a network analyzer or some other test equipment or it can be calculated from the design specifications.
      <br/>
      Once the transfer functions of the system and the switch are known, then the transfer function of the two-wire line can be derived by solving the circuit equations for the system.
      <br/>
      The impedance of the telephone line can be derived from the two-wire line transfer function.
    </p>
    <p num="9">
      Once the telephone line impedance is determined by this method, the switch's hybrid matching circuit can be modified precisely match the telephone line impedance.
      <br/>
      In switches with a programmable matching chip, the circuit can be reprogrammed to match the switch to the actual two-wire impedance.
      <br/>
      Other matching circuits may need to be manually modified to achieve an impedance match to the telephone line.
    </p>
    <p num="10">
      A technical advantage of the invention is that many existing systems, such as a private branch exchanges (PBX) or voice response units (VRU), already use the programmable matching chip described herein.
      <br/>
      Therefore, those systems can be adapted to use the present invention.
      <br/>
      The existing systems would simply need to be modified to apply the method of the present invention to determine the exact line impedance.
      <br/>
      Once the line impedance is calculated, then the matching circuit can be programmed to match this impedance.
    </p>
    <p num="11">Another technical advantage of the invention is that no additional hardware is required to properly match this impedance because the matching chip which is already installed in a great number of these systems is programmable and may be adapted to employ the present invention.</p>
    <p num="12">
      A further technical advantage of the invention is that this algorithm can be used with any number of systems in order to determine the line impedance.
      <br/>
      Therefore, even in systems with difficult to adjust, hard-wired impedance matching networks, the present invention is useful for determining the line impedance and for detecting problems that may be corrected by hardware or software modifications.
    </p>
    <p num="13">
      The foregoing has outlined rather broadly the features and technical advantages of the present invention in order that the detailed description of the invention that follows may be better understood.
      <br/>
      Additional features and advantages of the invention will be described hereinafter.
      <br/>
      It should be appreciated by those skilled in the art that the conception and the specific embodiment disclosed may be readily utilized as a basis for modifying or designing other structures for carrying out the same purposes of the present invention.
      <br/>
      It should also be realized by those skilled in the art that such equivalent constructions do not depart from the spirit and scope of the invention as set forth in the appended claims.
    </p>
    <heading>BRIEF DESCRIPTION OF THE DRAWINGS</heading>
    <p num="14">
      For a more complete understanding of the present invention, and the advantages thereof, reference is now made to the following descriptions taken in conjunction with the accompanying drawings, in which:
      <br/>
      FIG. 1 shows a typical telephone system in which customers are connected through a central office;
      <br/>
      FIG. 2 illustrates a two-wire telephone line connected to a telephone switch embodying the present invention; and
      <br/>
      FIG. 3 is a method for determining line impedance using the present invention.
    </p>
    <heading>DESCRIPTION OF THE PREFERRED EMBODIMENTS</heading>
    <p num="15">
      FIG. 1 depicts telephone system 10 having customer switch 12.
      <br/>
      Switch 12 is connected to the telephone company's central office 11 via two-wire line 101.
      <br/>
      Switch 12 may be a PBX, VRU or other telephone system.
      <br/>
      Other telephone company customers 13a,b are connected to central office 11 via two-wire lines 102a,b.
      <br/>
      Switch 12 is comprised of two-wire to four-wire analog interface 14 and codec 15.
      <br/>
      Codec 15 converts telephone signals between the analog voice signals on two-wire line 101 and the digital samples that are used in the four wire portion of switch 12.
      <br/>
      Interface 14 and codec 15 are connected via lines 103a,b.
      <br/>
      Switch 12 is connected to one or more telephone units (not shown) at the customer's location.
      <br/>
      Digital signals are used in the customer's local system and they are converted to analog signals by codec 15 for transmission on line 101.
    </p>
    <p num="16">
      Switch 12 is designed to interface with a specific impedance that is expected on line 101.
      <br/>
      When the impedances of switch 12 and line 101 are properly matched, the signal loss and echo caused by the two-wire to four-wire interface are minimized.
      <br/>
      Typically, the exact impedance of line 101 is not known, so switch 12 will be designed using an estimated or nominal impedance value for line 101.
      <br/>
      In some cases, switch 12 may be designed using an impedance which was incorrectly measured on line 101.
      <br/>
      In either situation, signal loss and echoes will occur due to the impedance mismatch between switch 12 and line 101 when switch 12 is connected to the wrong line impedance.
    </p>
    <p num="17">
      In order to correct for impedance mismatches between switch 12 and line 101 and to improve signal transmission characteristics, the present invention measures the actual impedance of line 101 and then adjusts the impedance of the hybrid matching circuit at the front end of switch 12.
      <br/>
      FIG. 2 shows telephone system 20 in which switch 25 is connected to two-wire line 201 having impedance ZL 23.
      <br/>
      Impedance ZL 23 represents the impedance of line 201 itself plus any impedance caused by devices which are attached to line 201, such as the central office connection or other analog interface connections.
    </p>
    <p num="18">
      In the preferred embodiment, switch 25 is comprised of programmable codec 21 and digital signal processor (DSP) 22. Programmable codec 21 is a programmable coder-decoder which converts analog voice signals into digital samples.
      <br/>
      Codec 21 is part of analog line interface circuitry 24.
      <br/>
      Analog line interface circuitry 24 also comprises well known circuits (not shown) for ring detection and line isolation.
      <br/>
      Programmable codec 21 also provides the interface between two-wire line 201 and the four-wire line in switch 25.
      <br/>
      The effective impedance on the two-wire side of programmable codec 21 can be adjusted to match the expected impedance of line 201 and analog circuit 24.
      <br/>
      Codec 21 incorporates a programmable matching circuit that is designed to match a four-wire switch to the impedance of a two-wire transmission line.
    </p>
    <p num="19">
      In the preferred embodiment, an Advanced Micro Devices Am79C02/3(A) Dual Subscriber Line Audio-Processing Circuit (DSLAC (tm)  Device) is used for programmable codec 21.
      <br/>
      The DSLAC (tm)  Device is described in detail in Advanced Micro Devices Publication: -09875, Revision F, Amendment /0, issued June 1992, the disclosure of which is hereby incorporated by reference.
    </p>
    <p num="20">
      DSP 22 is capable of generating signals for transmission by programmable codec 21.
      <br/>
      DSP 22 can be an integral part of switch 25, as shown, or it may be an external component that is connected to switch 25.
      <br/>
      DSP 22 generates a test signal, such as white noise, and provides the test signal over line 202a to programmable codec 21 for transmission on line 201.
      <br/>
      DSP 22 also monitors the return signal and echoes from codec 21 and line 201 over lines 202b and 202c.
      <br/>
      DSP 22 or some other part of switch 25, such as a processor or some other hardware circuit (not shown), measures test signal and echo signal parameters and performs the calculations described herein.
      <br/>
      The measurements and calculations could also be performed by some other component instead of switch 25 if the echo was recorded digitally.
    </p>
    <p num="21">
      FIG. 3 is the algorithm used by switch 25 to determine the impedance of line 201.
      <br/>
      The algorithm provides the method by which programmable codec 21 can then be properly matched to line 201.
      <br/>
      In step 301, DSP 22 generates a white noise test signal and inputs the test signal to programmable codec 21 via line 202a.
      <br/>
      Programmable codec 21 then converts the digital test signal to an analog signal and transmits it over line 201.
      <br/>
      Programmable codec 21 can also provide the transmitted test signal back to DSP 22 over line 202b.
      <br/>
      This would serve as a reference signal and allow DSP 22 to monitor the test signal that is sent over line 201.
      <br/>
      However, this operation is not required since DSP 22 sent the test signal and, therefore, already knows the signal.
    </p>
    <p num="22">
      DSP also receives an echo signal from programmable codec 21 over line 202c.
      <br/>
      This echo signal is generated by the reflection of the test signal that has been transmitted by codec 21 over line 201.
    </p>
    <p num="23">
      In step 302 the transmitted test signal is cross-correlated with the echo signal to generate a time domain impulse response for system 20.
      <br/>
      A frequency domain transfer function for system 20, HSYS (.function.), is then generated from the time domain impulse response by performing a Fourier transform on the impulse response.
      <br/>
      The system transfer function, HSYS (.function.), that is generated in step 302 represents the transfer function of a circuit comprising programmable codec 21 coupled to line 201.
    </p>
    <p num="24">
      The transfer function of the echo due to line 201, HL (.function.), is derived in step 303 using the transfer function HSYS (.function.) generated in step 302 and the transfer function of programmable codec 21, HPC (.function.).
      <br/>
      HL (.function.) is the transfer function of line 201 in combination with analog interface 24.
      <br/>
      HSYS (.function.) is equivalent to �HPC (.function.) * HL (.function.)�. The transfer function of programmable codec 21, HPC (.function.), is either known from test measurements of switch 25 or it can be calculated from the design parameters of switch 25 and codec 21.
      <br/>
      By solving the above equation, the transfer function of line 201 can be represented as HL (.function.)=HSYS (.function.)/HPC (.function.).
      <br/>
      Since HSYS (.function.) and HPC (.function.) are either known or can be calculated, it is possible to derive the value of transfer function HL (.function.) for line 201.
    </p>
    <p num="25">
      Once the transfer function for line 201 is known, it can be used in step 304 to determine the line impedance ZL 23.
      <br/>
      This may be done by inverse transforming the transfer function for line 201.
      <br/>
      Impedance ZL 23, as calculated in step 304, is then used as a reference to modify the effective impedance of programmable codec 21 in step 305.
      <br/>
      As a result, the front end of switch 25 will be precisely matched to the impedance of line 201, thereby minimizing the signal loss caused by the line/switch mismatch.
    </p>
    <p num="26">
      Although the preferred embodiment has been described as using a white noise test signal generated by DSP 22, other test signals may also be used.
      <br/>
      A white noise signal would provide broad frequency coverage and would allow a more accurate system transfer function to be calculated.
      <br/>
      However, in the telecommunications field it may be acceptable to use a test signal that is weighted for a specific frequency range, such as the voice range.
      <br/>
      This would allow the switch and line to be matched in the frequency range in which voice echoes would be noticeable to a user.
      <br/>
      Echoes and signal loss outside the voice band may not effect the system if it is used only for speech.
      <br/>
      In other cases, some other frequency range may need to be closely matched to prevent signal loss and echo in that range.
    </p>
    <p num="27">
      Using a digital signal processor to generate the test signal has the advantage of allowing for repetition of the same test signal for multiple transfer function calculations.
      <br/>
      However, other sources of random, broad band noise may also be used.
      <br/>
      As long as a DSP or other signal processing device is able to cross-correlate the transmitted test signal and the test signal echo, the system can generate the transfer function for the switch/line system.
      <br/>
      As discussed above, once the system transfer function is measured, the line transfer function and impedance can be measured.
    </p>
    <p num="28">
      In the preferred embodiment, the DSLAC (tm)  device is used to provide matching between switch 25 and line 201.
      <br/>
      A model of the line interface for switch 25 can be developed using the characteristics of the DSLAC (tm)  and the characteristics of the other components of the switch.
      <br/>
      In order to simplify the line impedance calculation, some of the internal components of the DSLAC (tm)  device can be disabled or selected out of the circuit since they would not be necessary to the line impedance and transfer function calculation.
    </p>
    <p num="29">
      Additionally, the DSLAC (tm)  device provides the capability of electronically shorting the circuit and disabling feedback and feedforward filters.
      <br/>
      When system 20 has a short circuit and the feedback and feedforward filters are disabled, the test signal echo will be reflected back from the point of the short.
      <br/>
      The present invention can then be used to derive a transfer function H'SYS (.function.) for that portion of the system between DSP 22 and the short circuit point.
      <br/>
      The position of the short circuit can be chosen to isolate selected portions of the circuit.
      <br/>
      The circuit equations can then be solved in the same manner as discussed above using the shorted transfer function and the overall system transfer function.
      <br/>
      The transfer function H"L (.function.) for the portion of the line beyond the short circuit point can be determined from the equation: H"L (.function.)=HSYS (.function.)/H'SYS (.function.).
      <br/>
      By shorting two-wire line 201 at selected positions, transfer functions H'L (.function.) and H"L (.function.) can be determined for various portions of transmission line 201.
      <br/>
      From these transfer functions, impedances Z'L and Z"L can also be calculated for the selected portions of line 201.
    </p>
    <p num="30">Although the present invention and its advantages have been described in detail, it should be understood that various changes, substitutions and alterations can be made herein without departing from the spirit and scope of the invention as defined by the appended claims.</p>
  </description>
  <claims format="original" lang="en" id="claim_en">
    <claim num="1">
      <claim-text>What is claimed is:</claim-text>
      <claim-text>1.</claim-text>
      <claim-text>A method for measuring a transmission line transfer function comprising the steps of:</claim-text>
      <claim-text>transmitting a test signal through a line interface to a transmission line; monitoring an echo signal from said transmission line after said echo signal passes through said line interface, wherein said echo signal is related to said transmitted test signal; deriving the impulse response from said echo signal and said test signal; generating a system transfer function from said system impulse response; determining a line interface transfer function; calculating said transmission line echo transfer function using said system transfer function and said line interface transfer function.</claim-text>
    </claim>
    <claim num="2">
      <claim-text>2. The method of claim 1, further comprising the step of: determining a transmission line impedance from said transmission line echo transfer function.</claim-text>
    </claim>
    <claim num="3">
      <claim-text>3. The method of claim 2, further comprising the step of: adjusting an impedance of said line interface to match said transmission line impedance.</claim-text>
    </claim>
    <claim num="4">
      <claim-text>4. The method of claim 3 wherein said transmission line is a telephone line.</claim-text>
    </claim>
    <claim num="5">
      <claim-text>5. The method of claim 3 wherein said line interface is a two-wire to four-wire line interface in a telephone switch.</claim-text>
    </claim>
    <claim num="6">
      <claim-text>6. The method of claim 3 wherein said line interface is a programmable matching circuit.</claim-text>
    </claim>
    <claim num="7">
      <claim-text>7. The method of claim 3 wherein said transmission line is a telephone line and wherein said line interface is a programmable matching circuit.</claim-text>
    </claim>
    <claim num="8">
      <claim-text>8. The method of claim 1 wherein said test signal is generated by a digital signal processor.</claim-text>
    </claim>
    <claim num="9">
      <claim-text>9. The method of claim 1 wherein said test signal is generated by a computer.</claim-text>
    </claim>
    <claim num="10">
      <claim-text>10. The method of claim 1 wherein said test signal is generated by an embedded hardware circuit.</claim-text>
    </claim>
    <claim num="11">
      <claim-text>11. The method of claim 1 wherein said test signal is generated from a digital noise recording.</claim-text>
    </claim>
    <claim num="12">
      <claim-text>12. The method of claim 1 further comprising the steps of: creating a short circuit in said transmission line at a selected position; monitoring a second echo signal from said shorted transmission line after said second echo signal passes through said line interface; correlating said test signal and said second echo signal to generate a shorted system impulse response for a system comprising said line interface in combination with said shorted transmission line; generating a shorted system transfer function from said shorted system impulse response; calculating a shorted transmission line transfer function using said shorted system transfer function and said line interface transfer function, wherein said shorted transmission line is the a portion of said transmission line between said short circuit and said line interface.</claim-text>
    </claim>
    <claim num="13">
      <claim-text>13. The method of claim 12 further comprising the steps of: calculating a remaining line transmission function from said shorted line transmission function and said transmission line transfer function, wherein said remaining line is a portion of the transmission line not including said shorted transmission line.</claim-text>
    </claim>
    <claim num="14">
      <claim-text>14. A system for determining a transfer function for a transmission line comprising: means for generating a test signal; line interface means connecting said test signal generating means and said transmission line; means for transmitting said test signal through said interface means to said transmission line; means for monitoring an echo signal from said transmission line after said echo signal passes through said line interface means, wherein said echo signal corresponds to said transmitted test signal; means for correlating said test signal and said echo signal to generate a system impulse response; means for generating a system transfer function from said system impulse response; means for calculating a transmission line transfer function using said system transfer function and a line interface means transfer function.</claim-text>
    </claim>
    <claim num="15">
      <claim-text>15. The system of claim 14 further comprising: means for calculating a transmission line impedance from said transmission line transfer function.</claim-text>
    </claim>
    <claim num="16">
      <claim-text>16. The system of claim 15 wherein an impedance of said line interface means is modified to match said transmission line impedance.</claim-text>
    </claim>
    <claim num="17">
      <claim-text>17. The system of claim 16 wherein said transmission line is a telephone line.</claim-text>
    </claim>
    <claim num="18">
      <claim-text>18. The system of claim 16 wherein said line interface means is a two-wire to four-wire interface in a telephone system switch.</claim-text>
    </claim>
    <claim num="19">
      <claim-text>19. The system of claim 16 wherein said line interface means is a programmable matching circuit.</claim-text>
    </claim>
    <claim num="20">
      <claim-text>20. The system of claim 14 wherein said test signal generating means is a digital signal processor.</claim-text>
    </claim>
    <claim num="21">
      <claim-text>21. A system for determining the impedance of a telephone transmission line comprising: a switch connecting a local telephone system to a telephone transmission line, wherein said switch provides a conversion between analog signals on said telephone transmission line and digital signals on said local telephone system;</claim-text>
      <claim-text>and a digital signal processor for generating a test signal and for transmitting said test signal over said transmission line, wherein said digital signal processor monitors an echo signal corresponding to said transmitted test signal, and wherein said digital signal processor correlates said transmitted test signal and said echo signal to generate an impulse response; wherein a system transfer function is derived from said impulse response, said transfer function representing the frequency domain transfer function of said switch in combination with said transmission line;</claim-text>
      <claim-text>a transmission line transfer function is derived from said system transfer function and a transfer function of said switch;</claim-text>
      <claim-text>and a transmission line impedance is calculated from said transmission line transfer function.</claim-text>
    </claim>
    <claim num="22">
      <claim-text>22. The system of claim 21 further comprising: a programmable matching circuit, wherein said programmable matching circuit provides an impedance match between said switch and said transmission line.</claim-text>
    </claim>
    <claim num="23">
      <claim-text>23. The system of claim 22 wherein said programmable matching circuit is modified to match said calculated transmission line impedance.</claim-text>
    </claim>
  </claims>
</questel-patent-document>