<?xml version="1.0" encoding="UTF-8"?>
<questel-patent-document lang="en" date-produced="20180805" produced-by="Questel" schema-version="3.23" file="US06185711B2.xml">
  <bibliographic-data lang="en">
    <publication-reference publ-desc="Granted patent as second publication">
      <document-id>
        <country>US</country>
        <doc-number>06185711</doc-number>
        <kind>B2</kind>
        <date>20010206</date>
      </document-id>
      <document-id data-format="questel">
        <doc-number>US6185711</doc-number>
      </document-id>
    </publication-reference>
    <original-publication-kind>B2</original-publication-kind>
    <application-reference family-id="22758411" extended-family-id="42113841">
      <document-id>
        <country>US</country>
        <doc-number>09204557</doc-number>
        <kind>A</kind>
        <date>19981203</date>
      </document-id>
      <document-id data-format="questel">
        <doc-number>1998US-09204557</doc-number>
      </document-id>
      <document-id data-format="questel_Uid">
        <doc-number>43172228</doc-number>
      </document-id>
    </application-reference>
    <language-of-filing>en</language-of-filing>
    <language-of-publication>en</language-of-publication>
    <priority-claims>
      <priority-claim kind="national" sequence="1">
        <country>US</country>
        <doc-number>20455798</doc-number>
        <kind>A</kind>
        <date>19981203</date>
        <priority-active-indicator>Y</priority-active-indicator>
      </priority-claim>
      <priority-claim data-format="questel" sequence="1">
        <doc-number>1998US-09204557</doc-number>
      </priority-claim>
    </priority-claims>
    <dates-of-public-availability>
      <publication-of-grant-date>
        <date>20010206</date>
      </publication-of-grant-date>
    </dates-of-public-availability>
    <classifications-ipcr>
      <classification-ipcr sequence="1">
        <text>G01R  31/317       20060101A I20051008RMEP</text>
        <ipc-version-indicator>
          <date>20060101</date>
        </ipc-version-indicator>
        <classification-level>A</classification-level>
        <section>G</section>
        <class>01</class>
        <subclass>R</subclass>
        <main-group>31</main-group>
        <subgroup>317</subgroup>
        <classification-value>I</classification-value>
        <generating-office>
          <country>EP</country>
        </generating-office>
        <classification-status>R</classification-status>
        <classification-data-source>M</classification-data-source>
        <action-date>
          <date>20051008</date>
        </action-date>
      </classification-ipcr>
      <classification-ipcr sequence="2">
        <text>G01R  31/3185      20060101A I20051008RMEP</text>
        <ipc-version-indicator>
          <date>20060101</date>
        </ipc-version-indicator>
        <classification-level>A</classification-level>
        <section>G</section>
        <class>01</class>
        <subclass>R</subclass>
        <main-group>31</main-group>
        <subgroup>3185</subgroup>
        <classification-value>I</classification-value>
        <generating-office>
          <country>EP</country>
        </generating-office>
        <classification-status>R</classification-status>
        <classification-data-source>M</classification-data-source>
        <action-date>
          <date>20051008</date>
        </action-date>
      </classification-ipcr>
    </classifications-ipcr>
    <classification-national>
      <country>US</country>
      <main-classification>
        <text>714731000</text>
        <class>714</class>
        <subclass>731000</subclass>
      </main-classification>
      <further-classification sequence="1">
        <text>714707000</text>
        <class>714</class>
        <subclass>707000</subclass>
      </further-classification>
      <further-classification sequence="2">
        <text>714724000</text>
        <class>714</class>
        <subclass>724000</subclass>
      </further-classification>
    </classification-national>
    <classifications-ecla>
      <classification-ecla sequence="1">
        <text>G01R-031/317T</text>
        <section>G</section>
        <class>01</class>
        <subclass>R</subclass>
        <main-group>031</main-group>
        <subgroup>317T</subgroup>
      </classification-ecla>
      <classification-ecla sequence="2">
        <text>G01R-031/3185S4</text>
        <section>G</section>
        <class>01</class>
        <subclass>R</subclass>
        <main-group>031</main-group>
        <subgroup>3185S4</subgroup>
      </classification-ecla>
      <classification-ecla sequence="3">
        <text>G01R-031/3185S13</text>
        <section>G</section>
        <class>01</class>
        <subclass>R</subclass>
        <main-group>031</main-group>
        <subgroup>3185S13</subgroup>
      </classification-ecla>
    </classifications-ecla>
    <patent-classifications>
      <patent-classification sequence="1">
        <classification-scheme office="EP" scheme="CPC">
          <date>20130101</date>
        </classification-scheme>
        <classification-symbol>G01R-031/318594</classification-symbol>
        <section>G</section>
        <class>01</class>
        <subclass>R</subclass>
        <main-group>31</main-group>
        <subgroup>318594</subgroup>
        <symbol-position>F</symbol-position>
        <classification-value>I</classification-value>
        <classification-status>B</classification-status>
        <classification-data-source>H</classification-data-source>
        <action-date>
          <date>20130101</date>
        </action-date>
      </patent-classification>
      <patent-classification sequence="2">
        <classification-scheme office="EP" scheme="CPC">
          <date>20130101</date>
        </classification-scheme>
        <classification-symbol>G01R-031/31725</classification-symbol>
        <section>G</section>
        <class>01</class>
        <subclass>R</subclass>
        <main-group>31</main-group>
        <subgroup>31725</subgroup>
        <symbol-position>L</symbol-position>
        <classification-value>I</classification-value>
        <classification-status>B</classification-status>
        <classification-data-source>H</classification-data-source>
        <action-date>
          <date>20130101</date>
        </action-date>
      </patent-classification>
      <patent-classification sequence="3">
        <classification-scheme office="EP" scheme="CPC">
          <date>20130101</date>
        </classification-scheme>
        <classification-symbol>G01R-031/318552</classification-symbol>
        <section>G</section>
        <class>01</class>
        <subclass>R</subclass>
        <main-group>31</main-group>
        <subgroup>318552</subgroup>
        <symbol-position>L</symbol-position>
        <classification-value>I</classification-value>
        <classification-status>B</classification-status>
        <classification-data-source>H</classification-data-source>
        <action-date>
          <date>20130101</date>
        </action-date>
      </patent-classification>
    </patent-classifications>
    <number-of-claims>22</number-of-claims>
    <exemplary-claim>1</exemplary-claim>
    <figures>
      <number-of-drawing-sheets>7</number-of-drawing-sheets>
      <number-of-figures>7</number-of-figures>
      <image-key data-format="questel">US6185711</image-key>
    </figures>
    <invention-title format="original" lang="en" id="title_en">Methods and apparatus for synchronizing asynchronous test structures and eliminating clock skew considerations</invention-title>
    <references-cited>
      <citation srep-phase="examiner">
        <patcit num="1">
          <text>BOCK ROBERT, et al</text>
          <document-id>
            <country>US</country>
            <doc-number>5434804</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5434804</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="examiner">
        <patcit num="2">
          <text>OBARA TAKASHI</text>
          <document-id>
            <country>US</country>
            <doc-number>5444667</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5444667</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="examiner">
        <patcit num="3">
          <text>HOLLAND STEPHEN D, et al</text>
          <document-id>
            <country>US</country>
            <doc-number>5524098</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5524098</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="examiner">
        <patcit num="4">
          <text>HOLLAND STEPHEN D, et al</text>
          <document-id>
            <country>US</country>
            <doc-number>5617367</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5617367</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="examiner">
        <patcit num="5">
          <text>FUJITA MAMORU</text>
          <document-id>
            <country>US</country>
            <doc-number>5898331</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5898331</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="examiner">
        <patcit num="6">
          <text>NARAYANAN SRIDHAR, et al</text>
          <document-id>
            <country>US</country>
            <doc-number>5898702</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5898702</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="examiner">
        <patcit num="7">
          <text>ISA SATOSHI</text>
          <document-id>
            <country>US</country>
            <doc-number>6075749</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US6075749</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="applicant">
        <patcit num="8">
          <text>HENRY MATTHEW R</text>
          <document-id>
            <country>US</country>
            <doc-number>5381420</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5381420</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="applicant">
        <patcit num="9">
          <text>STOKES ROBERT L, et al</text>
          <document-id>
            <country>US</country>
            <doc-number>5717702</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5717702</doc-number>
          </document-id>
        </patcit>
      </citation>
    </references-cited>
    <parties>
      <applicants>
        <applicant data-format="original" app-type="applicant" sequence="1">
          <addressbook lang="en">
            <orgname>Sun Microsystems, Inc.</orgname>
            <address>
              <address-1>Palo Alto, CA, US</address-1>
              <city>Palo Alto</city>
              <state>CA</state>
              <country>US</country>
            </address>
          </addressbook>
          <nationality>
            <country>US</country>
          </nationality>
        </applicant>
        <applicant data-format="questel" app-type="applicant" sequence="2">
          <addressbook lang="en">
            <orgname>SUN MICROSYSTEMS</orgname>
          </addressbook>
          <nationality>
            <country>US</country>
          </nationality>
        </applicant>
      </applicants>
      <inventors>
        <inventor data-format="original" sequence="1">
          <addressbook lang="en">
            <name>Leung, Arthur T.</name>
            <address>
              <address-1>Sunnyvale, CA, US</address-1>
              <city>Sunnyvale</city>
              <state>CA</state>
              <country>US</country>
            </address>
          </addressbook>
          <nationality>
            <country>US</country>
          </nationality>
        </inventor>
        <inventor data-format="original" sequence="2">
          <addressbook lang="en">
            <name>Greenley, Dale</name>
            <address>
              <address-1>Los Gatos, CA, US</address-1>
              <city>Los Gatos</city>
              <state>CA</state>
              <country>US</country>
            </address>
          </addressbook>
          <nationality>
            <country>US</country>
          </nationality>
        </inventor>
      </inventors>
      <agents>
        <agent sequence="1" rep-type="agent">
          <addressbook lang="en">
            <orgname>Finnegan, Henderson, Farabow, Garrett &amp; Dunner, L.L.P.</orgname>
          </addressbook>
        </agent>
      </agents>
    </parties>
    <examiners>
      <primary-examiner>
        <name>Chung, Phung M.</name>
      </primary-examiner>
    </examiners>
    <lgst-data>
      <lgst-status>GRANTED</lgst-status>
    </lgst-data>
  </bibliographic-data>
  <abstract format="original" lang="en" id="abstr_en">
    <p id="P-EN-00001" num="00001">
      <br/>
      A synchronizing circuit receives an external signal and yields an output that is synchronized with the system clock and operates at the frequency of the external signal.
      <br/>
      The signal output from the synchronizing circuit is fed into the clock-enable input of the storage element, and the system clock signal is fed into the clock input of the storage element.
      <br/>
      Because the clock-enable signal triggers the storage element, the storage element is driven at the external signal frequency.
      <br/>
      Clock skew is eliminated because the system clock used for the clock input to the storage element is skew-controlled.
    </p>
  </abstract>
  <description format="original" lang="en" id="desc_en">
    <heading>BACKGROUND OF THE INVENTION</heading>
    <p num="1">
      A.
      <br/>
      Field of the Invention
    </p>
    <p num="2">This invention generally relates to circuit testing, and, more particularly, to methods and apparatus for synchronizing asynchronous test structures and eliminating clock skew considerations.</p>
    <p num="3">B. Description of the Related Art</p>
    <p num="4">
      Advances in technology, such as complex integrated circuits (ICs) that use surface mount technology, have made traditional in-circuit testing methods extremely difficult.
      <br/>
      One approach for testing complex ICs is by using the Joint Test Action Group (JTAG) standard, which was developed by an international group of electronic manufacturers.
      <br/>
      This standard has been adopted by the Institute of Electrical and Electronic Engineers (IEEE) as IEEE Standard 1149.1-1990, IEEE Standard Test Access Port and Boundary-Scan Architecture (the "IEEE standard"), the contents of which are hereby incorporated by reference.
    </p>
    <p num="5">
      The JTAG standard is frequently used for boundary scan testing, which allows testing based on an IC's inputs and outputs.
      <br/>
      The JTAG standard, however, may also be used to test the core logic of an IC.
      <br/>
      Typically, this is done by serially connecting the core logic's storage elements to form a scan path.
      <br/>
      Using a JTAG controller in conjunction with this scan path, one can input or output data contained in the storage elements in a fashion similar to that of a shift register.
      <br/>
      These procedures are frequently called scanning information into or out of the storage elements.
    </p>
    <p num="6">
      One problem with using the JTAG standard for testing core logic, however, is that the JTAG standard is invasive.
      <br/>
      Because data is entered or outputted serially from one storage element to another, the data originally contained in those storage elements is altered in the process.
    </p>
    <p num="7">
      One approach for overcoming this problem is to employ a series of secondary storage elements that duplicate, or take a "snapshot" of, the information in the core logic's primary storage elements.
      <br/>
      These secondary storage elements may then be connected together to form a separate, independently-addressable scan path (the secondary scan path).
      <br/>
      The information contained in the primary storage elements can then be scanned out via the secondary scan path without altering the primary storage elements.
      <br/>
      This secondary scan system allows an IC to remain operational while a snapshot of the core logic information is scanned out.
    </p>
    <p num="8">
      For this system to comply with the JTAG standard, the secondary storage elements in the secondary scan path must be driven based on an external clock signal, referred herein as TCK.
      <br/>
      This creates two significant problems.
      <br/>
      First, the core logic's primary storage elements are driven by a system clock that is not synchronized with the TCK and that typically operates at a much higher speed than does the TCK.
      <br/>
      If the two clock signals are not synchronized, the secondary scan system will not work and there is a chance that the IC may be damaged.
      <br/>
      Second, the TCK signal is not skew-controlled, which could result in races and metastability between the secondary storage elements.
      <br/>
      Although it may be possible to create a skew-controlled clock grid for the TCK signal, doing so would be difficult and expensive.
    </p>
    <p num="9">There exists, therefore, a need to synchronize an external clock signal (such as the TCK signal) used to drive secondary storage elements with the system clock signal used by an IC's primary storage elements, and to control skewing of the external clock signal.</p>
    <heading>SUMMARY OF THE INVENTION</heading>
    <p num="10">
      In accordance with the present invention, as embodied and broadly described herein, a method of driving a storage element based on unsynchronized external signals that are not skew-controlled, in an environment having a synchronized, skew-controlled system clock signal, comprises receiving an external clock-enable signal.
      <br/>
      This signal is synchronized to the system clock signal and transmitted to the clock-enable input of the storage element.
      <br/>
      Meanwhile, the system clock signal is received at a clock input of the storage element.
    </p>
    <p num="11">
      In accordance with the invention, an apparatus for driving an edge-triggered storage element based on unsynchronized external signals that are not skew-controlled, in an environment having a synchronized, skew-controlled system clock signal, comprises a synchronizing circuit and an edge-triggered storage element.
      <br/>
      The synchronizing circuit has a first input connected to an external clock-enable signal, a second input connected to the system clock signal, and an output.
      <br/>
      The edge-triggered storage element has a clock-enable input connected to the output of the synchronizing circuit, a clock input connected to the system clock signal, and an output.
    </p>
    <p num="12">
      In accordance with the invention, a system for driving an edge-triggered secondary storage element based on unsynchronized external signals that are not skew-controlled, in an environment having a synchronized, skew-controlled system clock signal comprises a primary storage element, an edge-triggered secondary storage element, and a synchronizing circuit.
      <br/>
      The primary storage element stores data and has an output.
      <br/>
      The edge-triggered secondary storage element has an input connected to the output of the primary storage element, a clock input connected to the system clock, and a clock-enable input.
      <br/>
      The synchronizing circuit has a first input connected to an external clock-enable signal, a second input connected to the system clock signal, and an output connected to the clock-enable input of the edge-triggered secondary storage element.
    </p>
    <p num="13">It is to be understood that both the foregoing general description and following detailed description are intended only to exemplify and explain the invention as claimed.</p>
    <heading>BRIEF DESCRIPTION OF THE DRAWINGS</heading>
    <p num="14">
      The accompanying drawings, which are incorporated in and constitute a part of this specification, illustrate embodiments of the invention and, together with the description, serve to explain the advantages and principles of the invention. In the drawings,
      <br/>
      FIG. 1 is a block diagram depicting a system consistent with the invention;
      <br/>
      FIG. 2 is a block diagram depicting secondary storage element 160 of the system shown in FIG. 1;
      <br/>
      FIG. 3 is a block diagram depicting a first implementation of synchronizing circuit 140 of the system shown in FIG. 1;
      <br/>
      FIG. 4 is a timing diagram depicting signals associated with synchronizing circuit 140 shown in FIG. 3;
      <br/>
      FIG. 5 is a block diagram depicting a second implementation of synchronizing circuit 140 of the system shown in FIG. 1;
      <br/>
      FIG. 6 is timing diagram depicting signals associated with synchronizing circuit 140 shown in FIG. 5; and
      <br/>
      FIG. 7 is a flow diagram of a method of synchronizing an external clock to a system clock and controlling skew associated with the external clock.
    </p>
    <heading>DETAILED DESCRIPTION</heading>
    <p num="15">
      The invention will now be described in reference to the accompanying drawings.
      <br/>
      The same reference numbers may be used throughout the drawings and the following description to refer to the same or like parts.
    </p>
    <p num="16">A. Overview</p>
    <p num="17">
      Methods and apparatus consistent with the present invention provide a way to drive a storage element at an external clock rate that is synchronized with the system clock and that does not suffer from clock skew problems.
      <br/>
      Clock skew problems are eliminated by using the skew-controlled system clock signal as the clock input of the secondary element.
      <br/>
      This obviates the need for a separate, skew-controlled TCK or JTAG signal.
      <br/>
      Furthermore, the secondary element is synchronized with the system clock signal and operates at the frequency of the TCK or JTAG signal.
    </p>
    <p num="18">
      More specifically, a synchronizing circuit receives an external signal and yields an output that is synchronized with the system clock and operates at the frequency of the external signal.
      <br/>
      The signal output from the synchronizing circuit is fed into the clock-enable input of the storage element, and the system clock signal is fed into the clock input of the storage element.
      <br/>
      Because the clock-enable signal triggers the storage element, the storage element is driven at the external signal frequency.
      <br/>
      Clock skew is eliminated because the system clock used for the clock input to the storage element is skew-controlled.
    </p>
    <p num="19">B. Architecture</p>
    <p num="20">
      FIG. 1 is a block diagram depicting a system consistent with the invention.
      <br/>
      System 100 comprises a primary scan path 110, a secondary scan path 150, and synchronizing circuits 140, 142, and 144.
      <br/>
      In one embodiment, primary scan path 110 comprises primary storage elements ("primary elements") 115, 120, and 125, and secondary scan path 150 comprises secondary storage elements ("secondary elements") 155, 160, and 165.
      <br/>
      System 100 is interfaced to a system clock 135 and a JTAG controller 130.
    </p>
    <p num="21">
      Primary elements 115, 120, and 125 store data used by the IC's core logic.
      <br/>
      In a preferred embodiment, primary elements 115, 120, and 125 comprise edge-triggered flip flops with a data input ("D") and a clock input ("CK"), such as D-type flip flops.
      <br/>
      Secondary elements 155, 160, and 165 store data either from one of the primary storage elements (e.g., they take a snapshot of the data contained in the primary storage elements) or from a preceding secondary element in the chain.
      <br/>
      In a preferred embodiment, secondary elements 155, 160, and 165 comprise edge-triggered flip flops with two data inputs ("P" and "S"), a Select input, a clock-enable (CE) input, and a clock input ("CK"), such as mux-2 D-type flip flops with clock enable.
      <br/>
      The secondary storage elements receive data from primary storage elements via the P inputs, receive data from preceding secondary element via the S inputs, and a Select input chooses one of the two.
    </p>
    <p num="22">
      JTAG controller 130 may be connected, via synchronizing circuit 140, to an S input of the first secondary element in secondary scan path 150 (namely, secondary element 155).
      <br/>
      The P inputs of secondary elements 155, 160, and 165 are connected to the data outputs of primary elements 115, 120, and 125, respectively.
      <br/>
      The S inputs of secondary elements 160 and 165 are connected to the data outputs of the preceding secondary elements in secondary scan path 150--namely, secondary elements 155 and 160, respectively.
      <br/>
      The data output of the last secondary element in secondary scan path 150 (secondary element 165) is connected to JTAG controller 130.
    </p>
    <p num="23">
      System clock 135 is connected to the clock input of primary elements 115, 120, and 125, and secondary elements 155, 160, and 165.
      <br/>
      System clock 135 and JTAG controller 130 are connected to inputs of synchronizing circuits 140, 142, and 144.
      <br/>
      An output from synchronizing circuit 142 is connected to the Select input of secondary elements 155, 160 and 165.
      <br/>
      An output from synchronizing circuit 144 is connected to the CE input of 155, 160 and 165.
      <br/>
      An output of synchronizing circuit 140 may also be connected to the S input of the first secondary element in secondary scan path 150, namely secondary element 155.
    </p>
    <p num="24">
      JTAG controller 130 is well defined in the JTAG standard and preferably issues commands to either the primary or secondary storage elements via synchronizing circuits 140, 142, and 144.
      <br/>
      In a preferred embodiment, synchronizing circuits 140, 142, and 144 contain similar structure and perform similar functions.
      <br/>
      These commands may include a Scan In signal, a Select signal, or a clock-enable signal, respectively.
      <br/>
      System clock 135 outputs a skew-controlled clock signal that is used by many components of the system, such as the logic elements of the core logic.
      <br/>
      Synchronizing circuits 140, 142, and 144 receive inputs from system clock 135 and JTAG controller 130, and provide outputs that are synchronized to system clock 135 and operates at the frequency of the signal from JTAG controller 130.
    </p>
    <p num="25">
      FIG. 2 is a block diagram depicting a detailed view of one implementation of secondary element 160.
      <br/>
      As explained above, in a preferred embodiment, secondary element 160 is an edge-triggered flip flop with clock enable, such as a mux-2 flop with clock enable.
      <br/>
      Secondary element 160 preferably contains a multiplexor 210, an AND gate 220, and a D-type flip-flop 230.
    </p>
    <p num="26">
      Multiplexor 210 has a first input, a second input, a Select input, and an output.
      <br/>
      Flip flop 230 has a D input connected to the output of multiplexor 210, a clock input, and an output.
      <br/>
      AND gate 220 has first and second inputs, and an output connected to the clock input of flip flop 230.
    </p>
    <p num="27">
      Multiplexor 210 may be used to select, as an input to flip flop 230, either data from a primary element (e.g., from primary element 115) or data from a preceding secondary element in secondary scan path 150 (e.g., from secondary element 155).
      <br/>
      This may be accomplished by connecting the first input of multiplexor 210 to primary element 115, connecting the second input of multiplexor 210 to secondary element 155, and connecting the Select input of multiplexor 210 to an output of synchronizing circuit 142.
    </p>
    <p num="28">AND gate 220 may be used to activate flip flop 230 whenever the value of both the clock-enable (CE) signal (from synchronizing circuit 144) and the system clock signal (from system clock 135) have a logic value of "1." This may be accomplished by connecting the first input of AND gate 220 to system clock 135 and connecting the second input of AND gate 220 to a clock-enable output from synchronizing circuit 144.</p>
    <p num="29">
      FIG. 3 is a block diagram showing a first implementation of synchronizing circuit 140, consistent with the invention.
      <br/>
      This implementation may also be used for synchronizing circuits 142 and 144.
      <br/>
      Synchronizing circuit 140 comprises AND gates 310 and 340, and two storage elements 320 and 330.
      <br/>
      In a preferred embodiment, AND gate 310 has a first input connected to a signal from JTAG controller 130, a second input connected to a TCK signal, and an output.
      <br/>
      The signal from JTAG controller 130 may be either a Scan In signal, a Select signal, or a clock-enable signal.
      <br/>
      The output of AND gate 310 is a logic value "1" when both of its inputs have a logic value "1", and a logic value "0" otherwise.
    </p>
    <p num="30">
      The output of AND gate 310 is connected to an input of storage element 320.
      <br/>
      In a preferred embodiment, storage element 320 is an edge-triggered flip flop (such as a D-type flip flop) and has a D input connected to an output of AND gate 310, a clock input connected to system clock 135, and an output.
      <br/>
      When a rising edge of a signal from system clock 135 occurs, storage element 320 stores the value that existed at its input immediately before the rising edge of the signal from system clock 135.
    </p>
    <p num="31">
      An output of storage element 320 is connected to an input of storage element 330.
      <br/>
      In a preferred embodiment, storage element 330 is an edge-triggered flip flop (such as a D-type flip flop) and has a D input connected to the output signal of storage element 320, a clock input connected to system clock 135, an output, and an inverted output.
      <br/>
      When a rising edge of a signal from system clock 135 occurs, storage element 330 stores the value that existed at its input immediately before the rising edge of the signal from system clock 135.
    </p>
    <p num="32">
      In a preferred embodiment, the output of storage element 320 and an inverted output of storage element 330 are connected to first and second inputs of AND gate 340.
      <br/>
      AND gate 340 has an output that has a logic value "1" when both of its inputs have a logic value "1", and a logic value "0" otherwise.
      <br/>
      The output of AND gate 340 is a signal that is synchronized with system clock 135 and has a frequency equal to the TCK frequency if the signal from JTAG controller 130 is held at a logic value "1".
    </p>
    <p num="33">
      FIG. 4 is timing diagram depicting signals associated with synchronizing circuits 142 and 144 implemented as shown in FIG. 3.
      <br/>
      SYS CLK represents the signal from system clock 135.
      <br/>
      TCK represents the external TCK signal required by the JTAG standard.
    </p>
    <p num="34">
      JTAG CE represents a signal sent from JTAG controller 130 and received at AND gate 310 of synchronizing circuit 144 to enable a secondary element.
      <br/>
      Because JTAG CE is formed using logic (not shown) that is driven by TCK (at the TCK rate), JTAG CE is synchronized with TCK, as shown for example at 410.
      <br/>
      SYNC CE represents the output of AND gate 340 (in synchronizing circuit 144) and is a clock-enable signal that is synchronized with SYS CLK, as shown for example at 420.
      <br/>
      In a preferred embodiment, as shown in FIG. 4, JTAG CE is held at a logic value of "1." This results in a SYNC CE signal that corresponds to a version of TCK that is synchronized with SYS CLK.
      <br/>
      As explained above in reference to FIG. 1, the SYNC CE signal is transmitted to the clock-enable (CE) input of a secondary element.
    </p>
    <p num="35">
      JTAG SELECT represents a signal sent from JTAG controller 130 and received at AND gate 310 of synchronizing circuit 142 to sample data from a preceding secondary element.
      <br/>
      Because JTAG SELECT is formed using logic (not shown) that is driven by TCK (at the TCK rate), JTAG SELECT is synchronized with TCK, as shown for example at 430.
      <br/>
      SYNC SELECT represents the output of AND gate 340 (in synchronizing circuit 142) and is synchronized with SYS CLK.
      <br/>
      As explained above in reference to FIG. 1, the SYNC SELECT signal is transmitted to the Select input of a secondary element.
    </p>
    <p num="36">
      FIG. 5 is a block diagram showing a second implementation of synchronizing circuit 140, consistent with the invention.
      <br/>
      This implementation may also be used for synchronizing circuits 142 and 144.
      <br/>
      In this implementation, synchronizing circuit 140 comprises two storage elements 520 and 530, and AND gate 540.
      <br/>
      In a preferred embodiment, storage element 520 is an edge-triggered flip flop (such as a D-type flip flop) and has a D input connected to a signal from JTAG controller 130, a clock input connected to system clock 135, and an output.
      <br/>
      The signal from JTAG controller may be either a Scan In signal, a Select signal, or a clock-enable signal.
      <br/>
      When a rising edge of a signal from system clock 135 occurs, storage element 520 stores the value that existed at its input immediately before the rising edge of the signal from system clock 135.
    </p>
    <p num="37">
      An output of storage element 520 is connected to an input of storage element 530.
      <br/>
      In a preferred embodiment, storage element 530 is an edge-triggered flip flop (such as a D-type flip flop) and has a D input connected to the output signal of storage element 520, a clock input connected to system clock 135, an output, and an inverted output.
      <br/>
      When arising edge of a signal from system clock 135 occurs, storage element 530 stores the value that existed at its input immediately before the rising edge of the signal from system clock 135.
    </p>
    <p num="38">
      In a preferred embodiment, the output of storage element 520 and an inverted output of storage element 530 are connected to first and second inputs of AND gate 540.
      <br/>
      AND gate 540 has an output that has a logic value "1" when both of its inputs have a logic value "1", and a logic value "0" otherwise.
      <br/>
      The output of AND gate 540 is a signal that is synchronized with system clock 135 and has a frequency equal to that of the signal from JTAG controller 130.
    </p>
    <p num="39">
      FIG. 6 is timing diagram depicting signals in reference to synchronizing circuits 142 and 144 implemented as shown in FIG. 5.
      <br/>
      The signals shown in FIG. 6 correspond to those shown in FIG. 4.
      <br/>
      As explained in reference to FIG. 4, the JTAG CE and JTAG SELECT signals are synchronized with TCK (as shown for example at 610 and 630, respectively).
      <br/>
      FIG. 6 also demonstrates that the outputs of synchronizing circuits 142 and 144 (shown in detail in FIG. 5) are, respectively, either a Select signal (SYNC SELECT) or a clock-enable signal (SYNC CE) that is synchronized with system clock 135 (as shown for example at 620 and 640, respectively) and that operates at the JTAG SELECT or JTAG CE frequency, respectively.
    </p>
    <p num="40">C. Architectural Operation</p>
    <p num="41">
      FIG. 7 is a flow diagram of a method for synchronizing an external clock to a system clock and controlling skew associated with the external clock, consistent with the invention, and is described in reference to system 100 shown in FIG. 1.
      <br/>
      The system clock signal, which is skew-controlled, is provided as the clock input to secondary elements 155, 160, and 165 (step 710).
    </p>
    <p num="42">
      System 100 receives a signal from JTAG controller 130 (step 720).
      <br/>
      This maybe, for example, a signal to scan in data to the first secondary element in the chain (i.e., a Scan In signal), a signal to sample data from a preceding secondary element (i.e., a Select signal), or a signal to enable a secondary element (i.e., a clock-enable signal).
    </p>
    <p num="43">
      System 100 synchronizes the signal from JTAG controller 130 with system clock 135 by using synchronizing circuits 140, 142, or 144, or a combination thereof (step 730).
      <br/>
      If the signal from JTAG controller 130 is a Scan In signal, system 100 synchronizes it with system clock 135 by using synchronizing circuit 140.
      <br/>
      If the signal from JTAG controller 130 is a Select signal, system 100 synchronizes it with system clock 135 by using synchronizing circuit 142.
      <br/>
      If the signal from JTAG controller 130 is a clock-enable signal, system 100 synchronizes it with system clock 135 by using synchronizing circuit 144.
      <br/>
      As explained above, synchronizing circuits 140, 142, and 144 may be implemented using, for example, the circuits shown in FIGS. 3 and 5.
    </p>
    <p num="44">
      The synchronized signal output from synchronizing circuit 140 is provided as an input to a secondary element, such as secondary element 155 (step 740).
      <br/>
      If the synchronized signal is based on a Scan In signal from JTAG controller 130, it is provided to the S input of secondary element 155.
      <br/>
      If the synchronized signal is based on a Select signal from JTAG controller 130, it is provided to the Select input of secondary element 155.
      <br/>
      If the synchronized signal is based on a clock-enable signal from JTAG controller 130, it is provided to the CE input of secondary element 155.
    </p>
    <p num="45">
      The process described in reference to FIG. 7 eliminates clock skew by using the skew-controlled system clock signal as the clock input of the secondary element.
      <br/>
      This obviates the need for a separate, skew-controlled TCK or JTAG signal.
      <br/>
      Furthermore, the process described synchronizes the secondary element with the system clock signal and operates at the frequency of the TCK or JTAG signal.
    </p>
    <p num="46">D. Conclusion</p>
    <p num="47">
      As described in detail above, methods and apparatus consistent with the invention provide a way to drive a storage element at an external clock rate that is synchronized with the system clock and that does not suffer from clock skew problems.
      <br/>
      The foregoing description of an implementation of the invention has been presented for purposes of illustration and description, and therefore is not exhaustive and does not limit the invention to the precise form disclosed.
      <br/>
      Modifications and variations are possible in light of the above teachings or may be acquired from practicing the invention.
      <br/>
      For example, the description above is based on the JTAG standard, but it may be used with other standards.
      <br/>
      Similarly, the description above shows two embodiments of synchronizing circuits that could be used, but other forms may be used.
      <br/>
      The scope of the invention is defined by the claims and their equivalents.
    </p>
  </description>
  <claims format="original" lang="en" id="claim_en">
    <claim num="1">
      <claim-text>What is claimed is:</claim-text>
      <claim-text>1.</claim-text>
      <claim-text>A method of driving a storage element based on unsynchronized external signals that are not skew-controlled, in an environment having a synchronized, skew-controlled system clock signal, comprising:</claim-text>
      <claim-text>receiving an external clock-enable signal; synchronizing the external clock-enable signal with the system clock signal to create a synchronized CE signal; transmitting the synchronized CE signal to a clock-enable input of the storage element;</claim-text>
      <claim-text>and receiving the system clock signal at a clock input of the storage element.</claim-text>
    </claim>
    <claim num="2">
      <claim-text>2. The method of claim 1, further comprising: receiving an external select signal; synchronizing the external select signal with the system clock signal to create a synchronized select signal;</claim-text>
      <claim-text>and transmitting the synchronized select signal to a select input of the storage element.</claim-text>
    </claim>
    <claim num="3">
      <claim-text>3. The method of claim 1, wherein the synchronizing step comprises the substeps of: performing a logical AND operation between the external CE signal and an external clock signal to create a first output; transmitting the first output to a data input of a first edge-triggered storage element; receiving the system clock signal at a clock input of the first edge-triggered storage element; generating a second output from the first edge-triggered storage element based on the first output and the system clock signal; transmitting the second output to a data input of a second edge-triggered storage element; receiving the system clock signal at a clock input of the second edge-triggered storage element; generating a third output from the second edge-triggered storage element based on the second output and the system clock signal;</claim-text>
      <claim-text>and performing a logical AND operation between the second and third outputs.</claim-text>
    </claim>
    <claim num="4">
      <claim-text>4. A method of driving an edge-triggered flip flop based on JTAG signals that are not skew-controlled, in an environment having a synchronized, skew-controlled system clock signal, comprising: receiving a JTAG clock-enable signal; synchronizing the JTAG CE signal with the system clock signal to create a JTAG CE signal that is synchronized to the system clock signal; transmitting the synchronized JTAG CE signal to a clock-enable input of the flip flop;</claim-text>
      <claim-text>and receiving the system clock signal at a clock input of the flip flop.</claim-text>
    </claim>
    <claim num="5">
      <claim-text>5. A method for using JTAG signals to access data noninvasively from an edge-triggered primary storage element that operates in an integrated circuit having a synchronized, skew-controlled system clock signal, comprising: receiving an output of the primary storage element as an input to a secondary storage element; receiving a JTAG CE signal; synchronizing the JTAG CE signal with the system clock signal to create a synchronized JTAG CE signal; transmitting the synchronized JTAG CE signal to a clock-enable input of the secondary storage element;</claim-text>
      <claim-text>and receiving the system clock signal at a clock input of the secondary storage element.</claim-text>
    </claim>
    <claim num="6">
      <claim-text>6. The method of claim 5, further comprising: receiving a JTAG select signal; synchronizing the JTAG select signal with the system clock to create a synchronized JTAG select signal;</claim-text>
      <claim-text>and receiving the synchronized JTAG select signal at a select input of the secondary storage element.</claim-text>
    </claim>
    <claim num="7">
      <claim-text>7. An apparatus for driving a storage element based on unsynchronized external signals that are not skew-controlled, in an environment having a synchronized, skew-controlled system clock signal, comprising: means for receiving an external clock-enable signal; means for synchronizing the external clock-enable signal with the system clock signal to create a synchronized CE signal; means for transmitting the synchronized CE signal to a clock-enable input of the storage element;</claim-text>
      <claim-text>and means for receiving the system clock signal at a clock input of the storage element.</claim-text>
    </claim>
    <claim num="8">
      <claim-text>8. The apparatus of claim 7, further comprising: means for receiving an external select signal; means for synchronizing the external select signal with the system clock signal to create a synchronized select signal;</claim-text>
      <claim-text>and means for transmitting the synchronized select signal to a select input of the storage element.</claim-text>
    </claim>
    <claim num="9">
      <claim-text>9. The apparatus of claim 7, wherein the means for synchronizing comprises: means for performing a logical AND operation between the external CE signal and an external clock signal to create a first output; means for transmitting the first output to a data input of a first edge-triggered storage element; means for receiving the system clock signal at a clock input of the first edge-triggered storage element; means for generating a second output from the first edge-triggered storage element based on the first output and the system clock signal; means for transmitting the second output to a data input of a second edge-triggered storage element; means for receiving the system clock signal at a clock input of the second edge-triggered storage element; means for generating a third output from the second edge-triggered storage element based on the second output and the system clock signal;</claim-text>
      <claim-text>and a means for performing a logical AND operation between the second and third outputs.</claim-text>
    </claim>
    <claim num="10">
      <claim-text>10. An apparatus for driving an edge-triggered flip flop based on JTAG signals that are not skew-controlled, in an environment having a synchronized, skew-controlled system clock signal, comprising: means for receiving a JTAG clock-enable signal; means for synchronizing the JTAG CE signal with the system clock signal to create a JTAG CE signal that is synchronized to the system clock signal; means for transmitting the synchronized JTAG CE signal to a clock-enable input of the flip flop;</claim-text>
      <claim-text>and means for receiving the system clock signal at a clock input of the flip flop.</claim-text>
    </claim>
    <claim num="11">
      <claim-text>11. An apparatus for using JTAG signals to access data noninvasively from an edge-triggered primary storage element that operates in an integrated circuit having a synchronized, skew-controlled system clock signal, comprising: means for receiving an output of the primary storage element as an input to a secondary storage element; means for receiving a JTAG CE signal; means for synchronizing the JTAG CE signal with the system clock signal to create a synchronized JTAG CE signal; means for transmitting the synchronized JTAG CE signal to a clock-enable input of the secondary storage element;</claim-text>
      <claim-text>and means for receiving the system clock signal at a clock input of the secondary storage element.</claim-text>
    </claim>
    <claim num="12">
      <claim-text>12. The apparatus of claim 11, further comprising: means for receiving a JTAG select signal; means for synchronizing the JTAG select signal with the system clock to create a synchronized JTAG select signal;</claim-text>
      <claim-text>and means for receiving the synchronized JTAG select signal at a select input of the secondary storage element.</claim-text>
    </claim>
    <claim num="13">
      <claim-text>13. An apparatus for driving an edge-triggered storage element based on unsynchronized external signals that are not skew-controlled, in an environment having a synchronized, skew-controlled system clock signal, comprising: a first synchronizing circuit having a first input connected to an external clock-enable signal, a second input connected to the system clock signal, and an output;</claim-text>
      <claim-text>and an edge-triggered storage element having a clock-enable input connected to the output of the first synchronizing circuit, a clock input connected to the system clock signal, and an output.</claim-text>
    </claim>
    <claim num="14">
      <claim-text>14. The apparatus of claim 13, further comprising a second synchronizing circuit having a first input connected to an external select signal, a second input connected to the system clock signal, and an output connected to a select input of the edge-triggered storage element.</claim-text>
    </claim>
    <claim num="15">
      <claim-text>15. The apparatus of claim 13, wherein the storage element comprises: a logic AND element having a first input connected to the output of the first synchronizing circuit, a second input connected to the system clock signal, and an output;</claim-text>
      <claim-text>and a flip flop having a clock input connected to an output of the logic AND element.</claim-text>
    </claim>
    <claim num="16">
      <claim-text>16. The apparatus of claim 15, wherein the storage element further comprises a multiplexor having a first input connected to an output of a primary storage element, a second input connected to an output of a second secondary storage element, and a select input connected to the output of the synchronizing circuit.</claim-text>
    </claim>
    <claim num="17">
      <claim-text>17. The apparatus of claim 13, wherein the external signals comprise JTAG signals.</claim-text>
    </claim>
    <claim num="18">
      <claim-text>18. The apparatus of claim 13, wherein the storage element further comprises a mux-2 D-type flip flop with clock enable.</claim-text>
    </claim>
    <claim num="19">
      <claim-text>19. The apparatus of claim 13, wherein the synchronizing circuit comprises: a first logic AND element having a first input connected to the external CE signal, a second input connected to an external clock signal, and an output; a first storage element having a clock input connected to the system clock signal, a data input connected to the output of the first logic AND element, and an output; a second storage element having a clock input connected to the system clock signal, a data input connected to the output of the first storage element, an output, and an inverted output;</claim-text>
      <claim-text>and a logic AND element having a first input connected to the output of the first storage element, a second input connected to the inverted output of the second storage element, and an output.</claim-text>
    </claim>
    <claim num="20">
      <claim-text>20. The apparatus of claim 13, wherein the synchronizing circuit comprises: a first storage element having a clock input connected to the system clock signal, a data input connected to the external signal, and an output; a second storage element having a clock input connected to the system clock signal, a data input connected to the output of the first storage element, an output, and an inverted output;</claim-text>
      <claim-text>and a logic AND element having a first input connected to the output of the first storage element, a second input connected to the inverted output of the second storage element, and an output.</claim-text>
    </claim>
    <claim num="21">
      <claim-text>21. An apparatus for using unsynchronized external signals that are not skew-controlled to drive a storage element operating in an environment having a synchronized, skew-controlled system clock signal, comprising: a synchronizing circuit having a first input connected to an external clock-enable signal, a second input connected to the system clock signal, and an output; a logic AND element having a first input connected to the output of the synchronizing circuit, a second input connected to the system clock signal, and an output;</claim-text>
      <claim-text>and a storage element having a clock input connected to the output of the logic AND element.</claim-text>
    </claim>
    <claim num="22">
      <claim-text>22. A system for driving an edge-triggered secondary storage element based on unsynchronized external signals that are not skew-controlled, in an environment having a synchronized, skew-controlled system clock signal, comprising: a primary storage element that stores data and has an output; an edge-triggered secondary storage element having an input connected to the output of the primary storage element, a clock input connected to the system clock, and a clock-enable input;</claim-text>
      <claim-text>and a synchronizing circuit having a first input connected to an external clock-enable signal, a second input connected to the system clock signal, and an output connected to the clock-enable input of the edge-triggered secondary storage element.</claim-text>
    </claim>
  </claims>
</questel-patent-document>