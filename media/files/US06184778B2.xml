<?xml version="1.0" encoding="UTF-8"?>
<questel-patent-document lang="en" date-produced="20180805" produced-by="Questel" schema-version="3.23" file="US06184778B2.xml">
  <bibliographic-data lang="en">
    <publication-reference publ-desc="Granted patent as second publication">
      <document-id>
        <country>US</country>
        <doc-number>06184778</doc-number>
        <kind>B2</kind>
        <date>20010206</date>
      </document-id>
      <document-id data-format="questel">
        <doc-number>US6184778</doc-number>
      </document-id>
    </publication-reference>
    <original-publication-kind>B2</original-publication-kind>
    <application-reference is-representative="YES" family-id="17884843" extended-family-id="74165117">
      <document-id>
        <country>US</country>
        <doc-number>09101618</doc-number>
        <kind>A</kind>
        <date>19980713</date>
      </document-id>
      <document-id data-format="questel">
        <doc-number>1997US-09101618</doc-number>
      </document-id>
      <document-id data-format="questel_Uid">
        <doc-number>75397159</doc-number>
      </document-id>
    </application-reference>
    <language-of-filing>en</language-of-filing>
    <language-of-publication>en</language-of-publication>
    <priority-claims>
      <priority-claim kind="national" sequence="1">
        <country>JP</country>
        <doc-number>30044196</doc-number>
        <kind>A</kind>
        <date>19961112</date>
        <priority-active-indicator>Y</priority-active-indicator>
      </priority-claim>
      <priority-claim data-format="questel" sequence="1">
        <doc-number>1996JP-0300441</doc-number>
      </priority-claim>
      <priority-claim kind="international" sequence="2">
        <country>WO</country>
        <doc-number>JP9704121</doc-number>
        <kind>A</kind>
        <date>19971112</date>
        <priority-linkage-type>W</priority-linkage-type>
        <priority-active-indicator>N</priority-active-indicator>
      </priority-claim>
      <priority-claim data-format="questel" sequence="2">
        <doc-number>1997WO-JP04121</doc-number>
      </priority-claim>
    </priority-claims>
    <dates-of-public-availability>
      <publication-of-grant-date>
        <date>20010206</date>
      </publication-of-grant-date>
    </dates-of-public-availability>
    <classifications-ipcr>
      <classification-ipcr sequence="1">
        <text>H04L  12/42        20060101A I20051008RMEP</text>
        <ipc-version-indicator>
          <date>20060101</date>
        </ipc-version-indicator>
        <classification-level>A</classification-level>
        <section>H</section>
        <class>04</class>
        <subclass>L</subclass>
        <main-group>12</main-group>
        <subgroup>42</subgroup>
        <classification-value>I</classification-value>
        <generating-office>
          <country>EP</country>
        </generating-office>
        <classification-status>R</classification-status>
        <classification-data-source>M</classification-data-source>
        <action-date>
          <date>20051008</date>
        </action-date>
      </classification-ipcr>
      <classification-ipcr sequence="2">
        <text>H04L  12/437       20060101A I20051008RMEP</text>
        <ipc-version-indicator>
          <date>20060101</date>
        </ipc-version-indicator>
        <classification-level>A</classification-level>
        <section>H</section>
        <class>04</class>
        <subclass>L</subclass>
        <main-group>12</main-group>
        <subgroup>437</subgroup>
        <classification-value>I</classification-value>
        <generating-office>
          <country>EP</country>
        </generating-office>
        <classification-status>R</classification-status>
        <classification-data-source>M</classification-data-source>
        <action-date>
          <date>20051008</date>
        </action-date>
      </classification-ipcr>
    </classifications-ipcr>
    <classification-national>
      <country>US</country>
      <main-classification>
        <text>340286020</text>
        <class>340</class>
        <subclass>286020</subclass>
      </main-classification>
      <further-classification sequence="1">
        <text>370403000</text>
        <class>370</class>
        <subclass>403000</subclass>
      </further-classification>
      <further-classification sequence="2">
        <text>370410000</text>
        <class>370</class>
        <subclass>410000</subclass>
      </further-classification>
      <further-classification sequence="3">
        <text>370439000</text>
        <class>370</class>
        <subclass>439000</subclass>
      </further-classification>
      <further-classification sequence="4">
        <text>709224000</text>
        <class>709</class>
        <subclass>224000</subclass>
      </further-classification>
      <further-classification sequence="5">
        <text>709250000</text>
        <class>709</class>
        <subclass>250000</subclass>
      </further-classification>
    </classification-national>
    <classifications-ecla>
      <classification-ecla sequence="1">
        <text>H04L-012/42</text>
        <section>H</section>
        <class>04</class>
        <subclass>L</subclass>
        <main-group>12</main-group>
        <subgroup>42</subgroup>
      </classification-ecla>
      <classification-ecla sequence="2">
        <text>H04L-012/437</text>
        <section>H</section>
        <class>04</class>
        <subclass>L</subclass>
        <main-group>12</main-group>
        <subgroup>437</subgroup>
      </classification-ecla>
    </classifications-ecla>
    <patent-classifications>
      <patent-classification sequence="1">
        <classification-scheme office="EP" scheme="CPC">
          <date>20130101</date>
        </classification-scheme>
        <classification-symbol>H04L-012/437</classification-symbol>
        <section>H</section>
        <class>04</class>
        <subclass>L</subclass>
        <main-group>12</main-group>
        <subgroup>437</subgroup>
        <symbol-position>F</symbol-position>
        <classification-value>I</classification-value>
        <classification-status>B</classification-status>
        <classification-data-source>H</classification-data-source>
        <action-date>
          <date>20130101</date>
        </action-date>
      </patent-classification>
      <patent-classification sequence="2">
        <classification-scheme office="EP" scheme="CPC">
          <date>20130101</date>
        </classification-scheme>
        <classification-symbol>H04L-012/42</classification-symbol>
        <section>H</section>
        <class>04</class>
        <subclass>L</subclass>
        <main-group>12</main-group>
        <subgroup>42</subgroup>
        <symbol-position>L</symbol-position>
        <classification-value>I</classification-value>
        <classification-status>B</classification-status>
        <classification-data-source>H</classification-data-source>
        <action-date>
          <date>20130101</date>
        </action-date>
      </patent-classification>
    </patent-classifications>
    <number-of-claims>14</number-of-claims>
    <exemplary-claim>1</exemplary-claim>
    <figures>
      <number-of-drawing-sheets>11</number-of-drawing-sheets>
      <number-of-figures>11</number-of-figures>
      <image-key data-format="questel">US6184778</image-key>
    </figures>
    <invention-title format="original" lang="en" id="title_en">Communication network system and rebuilding method thereof</invention-title>
    <references-cited>
      <citation srep-phase="examiner">
        <patcit num="1">
          <text>MILLER PAUL E, et al</text>
          <document-id>
            <country>US</country>
            <doc-number>5195090</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5195090</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="examiner">
        <patcit num="2">
          <text>TAKADA OSAMU, et al</text>
          <document-id>
            <country>US</country>
            <doc-number>5220562</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5220562</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="examiner">
        <patcit num="3">
          <text>THOMPSON JOHN S, et al</text>
          <document-id>
            <country>US</country>
            <doc-number>5305308</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5305308</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="examiner">
        <patcit num="4">
          <text>SHOBATAKE YASURO</text>
          <document-id>
            <country>US</country>
            <doc-number>5506847</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5506847</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="examiner">
        <patcit num="5">
          <text>RAATIKAINEN K PERTTI T, et al</text>
          <document-id>
            <country>US</country>
            <doc-number>5886992</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5886992</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="applicant">
        <patcit num="6">
          <text>FUJITSU LTD</text>
          <document-id>
            <country>JP</country>
            <doc-number>S62214747</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>JP62214747</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="applicant">
        <patcit num="7">
          <text>NIPPON TELEGRAPH &amp; TELEPHONE, et al</text>
          <document-id>
            <country>JP</country>
            <doc-number>H01105637</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>JP01105637</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="applicant">
        <patcit num="8">
          <text>NEC CORP, et al</text>
          <document-id>
            <country>JP</country>
            <doc-number>H01195737</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>JP01195737</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="applicant">
        <patcit num="9">
          <text>NIPPON TELEGRAPH &amp; TELEPHONE</text>
          <document-id>
            <country>JP</country>
            <doc-number>H0372743</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>JP03072743</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="applicant">
        <patcit num="10">
          <text>NEC CORP</text>
          <document-id>
            <country>JP</country>
            <doc-number>H03179845</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>JP03179845</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="applicant">
        <patcit num="11">
          <text>HITACHI COMMUNICATION SYSTEM</text>
          <document-id>
            <country>JP</country>
            <doc-number>H03228446</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>JP03228446</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="applicant">
        <patcit num="12">
          <text>NEC CORP</text>
          <document-id>
            <country>JP</country>
            <doc-number>H03231535</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>JP03231535</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="applicant">
        <patcit num="13">
          <text>MITSUBISHI ELECTRIC CORP</text>
          <document-id>
            <country>JP</country>
            <doc-number>H05227183</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>JP05227183</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="applicant">
        <patcit num="14">
          <text>TOSHIBA CORP, et al</text>
          <document-id>
            <country>JP</country>
            <doc-number>H05308369</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>JP05308369</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="applicant">
        <patcit num="15">
          <text>TOSHIBA CORP</text>
          <document-id>
            <country>JP</country>
            <doc-number>H0787113</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>JP07087113</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="applicant">
        <patcit num="16">
          <text>MATSUSHITA ELECTRIC IND CO LTD</text>
          <document-id>
            <country>JP</country>
            <doc-number>H07107107</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>JP07107107</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="applicant">
        <patcit num="17">
          <text>MATSUSHITA ELECTRIC IND CO LTD</text>
          <document-id>
            <country>JP</country>
            <doc-number>H088943</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>JP08008943</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="applicant">
        <patcit num="18">
          <document-id>
            <country>JP</country>
            <doc-number>H08508146</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>JP08508146</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="applicant">
        <patcit num="19">
          <text>HITACHI LTD, et al</text>
          <document-id>
            <country>JP</country>
            <doc-number>H09149061</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>JP09149061</doc-number>
          </document-id>
        </patcit>
      </citation>
    </references-cited>
    <parties>
      <applicants>
        <applicant data-format="original" app-type="applicant" sequence="1">
          <addressbook lang="en">
            <orgname>Kabushiki Kaisha Toshiba</orgname>
            <address>
              <address-1>Kawasaki, JP</address-1>
              <city>Kawasaki</city>
              <country>JP</country>
            </address>
          </addressbook>
          <nationality>
            <country>JP</country>
          </nationality>
        </applicant>
        <applicant data-format="questel" app-type="applicant" sequence="2">
          <addressbook lang="en">
            <orgname>TOSHIBA</orgname>
          </addressbook>
          <nationality>
            <country>JP</country>
          </nationality>
        </applicant>
      </applicants>
      <inventors>
        <inventor data-format="original" sequence="1">
          <addressbook lang="en">
            <name>Tsuji, Kiyotaka</name>
            <address>
              <address-1>Tokyo, JP</address-1>
              <city>Tokyo</city>
              <country>JP</country>
            </address>
          </addressbook>
          <nationality>
            <country>JP</country>
          </nationality>
        </inventor>
      </inventors>
      <agents>
        <agent sequence="1" rep-type="agent">
          <addressbook lang="en">
            <orgname>Finnegan, Henderson, Farabow, Garrett &amp; Dunner, L.L.P.</orgname>
          </addressbook>
        </agent>
      </agents>
    </parties>
    <examiners>
      <primary-examiner>
        <name>Lefkowitz, Edward</name>
      </primary-examiner>
    </examiners>
    <pct-or-regional-filing-data>
      <document-id>
        <country>WO</country>
        <doc-number>JP9704121</doc-number>
        <date>19971112</date>
      </document-id>
      <document-id data-format="questel">
        <doc-number>1997WO-JP04121</doc-number>
      </document-id>
    </pct-or-regional-filing-data>
    <pct-or-regional-publishing-data>
      <document-id>
        <country>WO</country>
        <doc-number>9821854</doc-number>
        <kind>A1</kind>
        <date>19980522</date>
      </document-id>
      <document-id data-format="questel">
        <doc-number>WO9821854</doc-number>
      </document-id>
    </pct-or-regional-publishing-data>
    <lgst-data>
      <lgst-status>LAPSED</lgst-status>
    </lgst-data>
  </bibliographic-data>
  <abstract format="original" lang="en" id="abstr_en">
    <p id="P-EN-00001" num="00001">
      <br/>
      A communications network system capable of reducing the time from the occurrence of a trouble to the rebuilding of the system and a rebuilding method thereof.
      <br/>
      In a communications network system which comprises a plurality of node devices (10-1 to 10-4) distributed at a plurality of positions and transmission lines (1a, 1b) for connecting the plurality of node devices, one of the plurality of node devices is set as a master station (10-1) to operate the system, when the master station has a trouble, the individual node device makes an inquiry to the other node devices, and a node device which has confirmed that no other node device has a higher priority than itself becomes a substitute master station to take the place of the troubled master station to continue the operation of the system.
    </p>
  </abstract>
  <description format="original" lang="en" id="desc_en">
    <heading>TECHNICAL FIELD</heading>
    <p num="1">The invention relates to a communications network system configured by a wide area network or a local area network (LAN) and a rebuilding method thereof, and more particularly to a communications network system which is configured so that the time from the occurrence of trouble in the system to the rebuilding of the system can be greatly reduced, and a rebuilding method thereof.</p>
    <heading>BACKGROUND ART</heading>
    <p num="2">Such a type of communications network system conventionally known is based on an STM (synchronous transfer mode).</p>
    <p num="3">
      FIG. 10 is a block diagram showing a conventional communications network based on STM (synchronous transfer mode).
      <br/>
      The communications network system of FIG. 10 has four node devices 1-1 to 1-4 connected through optical transmission lines 1a, 1b and the node device 1-1 determined as a master station.
    </p>
    <p num="4">The node device 1-1 as the master station is connected to an operation management device 2-1 which collects information on operation conditions of the node devices 1-1 to 1-4 and the optical transmission lines 1a, 1b and displays the collected results on, for example, a screen.</p>
    <p num="5">The node device 1-1 as the master station in the configuration shown in FIG. 10 is shown in detail in the block diagram of FIG. 11.</p>
    <p num="6">In FIG. 11, the node device 1-1 as the master station comprises an optical transmission line interface 3 connected to the optical transmission lines 1a, 1b, a frame generation part 4 which generates a transmission frame and circulates it through the respective node devices, a frame termination part 5 which examines a transmission frame having come back through the respective node devices, a control part 6 which is connected to the operation management device 2-1 to control comprehensively the entire operation of the node device 1-1, and an interface part 7 connected to an external interface.</p>
    <p num="7">
      In the above-described communications network system based on STM (synchronous transfer mode), the respective node devices 1-1 to 1-4 must synchronize at intervals of, for example, 125  MU S; then as shown in FIG. 11, the node device 1-1 as the master station needs the frame generation part 4 to generate a transmission frame at intervals of 125  MU S and circulate it through the respective node devices.
      <br/>
      Besides, the node device 1-1 as the master station needs the frame termination part 5 in order to examine the transmission frame having come back through the respective node devices and to transmit it again at intervals of 125  MU S.
    </p>
    <p num="8">
      To improve reliability of the system, it is necessary to have a substitute master station, for example, the node device 1-3 shown in FIG. 10, which can take the place of the node device 1-1 as the master station in case that the node device 1-1 as the master station has a trouble.
      <br/>
      And, the node device 1-3 to be a substitute master station also needs to have the frame generation part and the frame termination part.
      <br/>
      In this case, the node device 1-3 to be the substitute master station is connected to an operation management device 2-2 same as the operation management device 2-1.
    </p>
    <p num="9">In the configurations shown in FIG. 10 and FIG. 11, if there were a trouble in the optical transmission lines 1a, 1b or the optical transmission line interfaces of the respective node devices 1-1 to 1-4, it is detected by a neighboring node device, and information on the trouble is put on the transmission frame, which is circulating through the respective node devices, to inform the node device 1-3 to be the substitute master station of the trouble.</p>
    <p num="10">The node device 1-3 to be the substitute master station having received the information on the trouble puts information for instructing to change the transmission lines or to loop back on the transmission frame circulating through the respective node devices, and the respective node devices having received the information perform processing according to the information.</p>
    <p num="11">Thus, if a conventional communications network system based on STM (synchronous transfer mode) had a trouble, the node device 1-3 to be a new master station operates to reconfigure the network having the trouble, but there is a disadvantage that it takes a long time from the occurrence of a trouble to the rebuilding of the system.</p>
    <p num="12">
      And, if the node device 1-3 to be the master station had a trouble, it cannot generate a transmission frame or mark its own number in the transmission frame whenever the transmission frame is generated.
      <br/>
      In such a case, a plurality of other substitute master stations detect the situation, mark their own numbers in the transmission frame to generate respective transmission frames, and circulate such transmission frames.
      <br/>
      Upon receiving such transmission frames, the other substitute master stations, if their own numbers (priority) are larger than those of the other substitute master stations, abandon the received transmission frames but if smaller than them, pass on them as they are.
      <br/>
      And, when the substitute master station receives the returned transmission frame having its own number marked, this substitute master station becomes a new master station.
    </p>
    <p num="13">
      As described above, the conventional communications network system based on STM (synchronous transfer mode) circulates the transmission frames to decide a master station.
      <br/>
      Therefore, it takes a long time to decide a new master station after the occurrence of a trouble in the master station, resulting in a drawback of taking a long time to reconfigure the system.
    </p>
    <heading>SUMMARY OF THE INVENTION</heading>
    <p num="14">Under the circumstances, it is an object of the invention to provide a communications network system which can be rebuilt in a short time in case of a trouble.</p>
    <p num="15">To achieve the aforementioned object, the invention relates to a communications network system including a plurality of node devices distributed at a plurality of positions and transmission lines for connecting the plurality of node devices, one of the plurality of node devices being set as a master station to operate the system, wherein each node device comprises:</p>
    <p num="16">
      inquiring means for making an inquiry in an asynchronous transmission mode among the respective node devices when the master station has a trouble;
      <br/>
      confirming means for confirming that there is no node device having a higher priority than its own node device based on an inquired result by the inquiring means; and
      <br/>
      master station setting means for setting whether its own node device becomes a substitute master station in place of the troubled master station based on a confirmation result by the confirming means.
    </p>
    <p num="17">The communications network system may further comprise loopback means for looping back the transmission lines at node devices next to the troubled master station.</p>
    <p num="18">The inquiring means may comprise cell transmission/receipt means for transmitting/receiving data in the form of cells to make the inquiry.</p>
    <p num="19">
      The communications network system may be configured so that the inquiring means makes an inquiry to a node device having a higher priority by one level than itself; and
      <br/>
      the confirming means confirms that when there is no node device having a higher priority than itself and an inquiry is made by a node device having a lower priority than itself, there is no node device having a higher priority than itself.
    </p>
    <p num="20">
      And, the communications network system may be configured so that the inquiring means makes an inquiry to a node device having the highest priority in the system excluding the master station when the priority of itself is not highest in the system excluding the master station, and
      <br/>
      the confirming means confirms that there is no node device having a higher priority than itself after receiving inquiries from all of the node devices.
    </p>
    <p num="21">
      The invention also relates to a communications network system, which comprises a plurality of node devices distributed at a plurality of positions and transmission lines for connecting the plurality of node devices, one of the plurality of node devices being set as a master station to operate the system, wherein each node device comprises:
      <br/>
      judging means for judging, when the master station has a trouble, whether itself is a node device adjacent to the troubled master station; and
      <br/>
      master station setting means, when the judging means has judged that the own node device is adjacent to the troubled master station, for judging whether it has a higher priority than other node device which is also next to the troubled master station and when it has a higher priority than the other node device, setting itself as the master station.
    </p>
    <p num="22">The communications network system may further comprise loopback means for looping back the transmission lines at node devices next to the troubled master station.</p>
    <p num="23">
      And, the invention relates to a method for rebuilding a communications network system including a plurality of node devices distributed at a plurality of positions and transmission lines for connecting the plurality of node devices, one of the plurality of node devices being set as a master station to operate the system, wherein the method comprises the steps of:
      <br/>
      making an inquiry in an asynchronous transmission mode among the node devices when the master station has a trouble;
      <br/>
      confirming that there is no node device having a higher priority than itself based on the inquired result; and
      <br/>
      determining a substitute master station which operates the system instead of the troubled master station based on the confirmed result.
    </p>
    <p num="24">The method of rebuilding a communications network system may be configured so that when the master station has a trouble, the node devices next to the troubled master station perform loopback of the transmission lines.</p>
    <p num="25">And, the method of rebuilding a communications network system may be configured to make the inquiry among the node devices by transmitting/receiving data in the form of cells.</p>
    <p num="26">
      The method of rebuilding a communications network system may be configured, so that the individual node device makes an inquiry to a node device having a higher priority by one level than itself; and
      <br/>
      each node device sets itself as a master station when there is no node device having a higher priority than itself and an inquiry is made by a node device having a lower priority than itself.
    </p>
    <p num="27">The method for rebuilding a communications network system may be configured so that the priority of the individual node devices and the node device having the highest priority in the system are set in advance;</p>
    <p num="28">the inquiry is made to the node device having the highest priority in the system excluding the master station when own node device does not have the highest priority in the system excluding the master station; and</p>
    <p num="29">the node device having the highest priority in the system excluding the master station determines itself as a new master station after receiving inquiries from all node devices.</p>
    <p num="30">
      Also, the invention relates to a method for rebuilding a communications network system including a plurality of node devices distributed at a plurality of positions and transmission lines for connecting the plurality of node devices, one of the plurality of node devices being set as a master station to operate the system, wherein:
      <br/>
      the individual node device judges, when the master station has a trouble, whether itself is next to the troubled master station; and
      <br/>
      when the judging means has judged that it is adjacent to the troubled master station, it is judged whether itself has a higher priority than other node device which is also next to the troubled master station and, if it is higher than the other node device, it is set as the master station.
    </p>
    <p num="31">The method for rebuilding a communications network system may be configured so that when the master station has a trouble, the node devices next to the troubled master station perform loopback of the transmission lines.</p>
    <p num="32">
      Since the invention does not use a frame to circulate periodically, a frame generation part and a frame termination part which were required in an STM network are eliminated.
      <br/>
      And, since the respective node devices which have detected the trouble of the master station can make an inquiry for deciding a new master station at the same time, the system can be rebuilt in a short time.
    </p>
    <heading>BRIEF DESCRIPTION OF THE DRAWINGS</heading>
    <p num="33">
      FIG. 1 is a block diagram showing an embodiment of the communications network system according to the invention;
      <br/>
      FIG. 2 is a block diagram showing a detailed configuration of the node device shown in FIG. 1;
      <br/>
      FIG. 3 is a block diagram showing a detailed configuration of an optical transmission line interface shown in FIG. 2;
      <br/>
      FIG. 4 is a diagram showing that the system is configured as shown in FIG. 1 is rebuilt when a master station had a trouble;
      <br/>
      FIG. 5 is a diagram showing that the system configured as shown in FIG. 1 is rebuilt when both optical transmission lines connected to a master station had a trouble such as breakage;
      <br/>
      FIG. 6 is a flowchart showing an embodiment of processing performed by each node device to decide a new master station in order to reconfigure the system;
      <br/>
      FIG. 7 is a flowchart showing another embodiment of processing performed by each node device to decide a new master station in order to reconfigure the system;
      <br/>
      FIG. 8 is a flowchart showing still another embodiment of processing performed by each mode device to decide a new master station device in order to reconfigure the system;
      <br/>
      FIG. 9 is a block diagram showing the structure of a center device which may be disposed in a central monitoring office or the like among the node devices shown in FIG. 1;
      <br/>
      FIG. 10 is a block diagram showing a conventional communications network system based on STM (synchronous transfer mode); and
      <br/>
      FIG. 11 is a block diagram showing a detailed structure of a node device determined as a master station in the configuration shown in FIG. 10.
    </p>
    <heading>BEST MODE FOR CARRYING OUT THE INVENTION</heading>
    <p num="34">A communications network system according to the invention will be described in detail with reference to the accompanying drawings.</p>
    <p num="35">FIG. 1 is a block diagram showing an embodiment of the communications network system according to the invention.</p>
    <p num="36">The communications network system shown in FIG. 1 consists of four node devices 10-1 to 10-4 connected through optical transmission lines 1a, 1b using ATM (asynchronous transfer mode).</p>
    <p num="37">In this communications network system, the node device 10-1 among the four node devices 10-1 to 10-4 is determined as a master station, and the node device 10-1 to be the master station is connected to an operation management device 20-1 which collects information on operation conditions of the node devices 10-1 to 10-4 and the transmission lines 1a, 1b and displays the collected results on, for example, a screen.</p>
    <p num="38">
      The respective node devices 10-1 to 10-4 in the system configured as described above have a transmission/reception means for transmitting/receiving data in the form of cells in an asynchronous transfer mode.
      <br/>
      Thus, connection to ATM communications equipment being developed quickly these years is facilitated, and various types of media such as voice, image and data which are in the merits of the ATM can be processed at the same time.
    </p>
    <p num="39">
      FIG. 2 shows a detailed structure of the node device 10-1 shown in FIG. 1.
      <br/>
      In FIG. 2, the optical transmission lines 1a, 1b are connected to an optical transmission line interface 11 of the node device 10-1.
      <br/>
      The operation management device 20-1 or other external interfaces, for example, a monitoring camera, a display and the like are connected to an interface 13.
      <br/>
      And, a control 12 controls comprehensively the entire operation of the node device 10-1.
      <br/>
      The other node devices 10-2 to 10-4 are also configured in the same way as the node device 10-1.
    </p>
    <p num="40">
      This communications network system performs point-to-point communications among the node devices 10-1 through 10-4.
      <br/>
      Therefore, the node devices 10-1 to 10-4 do not require a frame generation part for generating a transmission frame to circulate in the network or a frame termination part for examining the transmission frame having come back after circulating.
    </p>
    <p num="41">
      FIG. 3 is a block diagram showing a detailed structure of the optical transmission line interface 11 shown in FIG. 2.
      <br/>
      The optical transmission line interface 11 shown in FIG. 3 comprises opto-electrical conversion parts 5a, 5b, optical signal loss detection parts 8a, 8b for detecting that an optical signal is lost when the optical transmission lines 1a, 1b are disconnected, out-of-cell-synchronization detection parts 9a, 9b for detecting whether the out-of-cell-synchronization has occurred upon receiving it, and electric-optical conversion parts 6a, 6b.
    </p>
    <p num="42">FIG. 4 shows a state that the system is rebuilt when the node device 10-1 as the master station had a trouble.</p>
    <p num="43">
      In FIG. 4, it is assumed that the node device 10-1 as the master station has priority number 1, the node devices 10-2, 10-3, 10-4 have priority numbers 2, 3, 4 respectively.
      <br/>
      A higher priority is given when the priority number is smaller.
    </p>
    <p num="44">If the node device 10-1 as the master station had a trouble, the respective node devices 10-1 to 10-3 judge that the node device 10-1 as the master station has a trouble because they cannot receive a monitoring cell from the node device 10-1 as the master station, and based on the predetermined priority numbers, make an inquiry to the node device having a higher priority than they have.</p>
    <p num="45">
      For example, the node device 10-3 having the priority number 3 makes an inquiry to the node device 10-2 having the priority number 2, and the node device 10-4 having the priority number 4 makes an inquiry to the node device 10-3 having the priority number 3.
      <br/>
      And, the inquired node devices send a response to the inquiring node devices.
    </p>
    <p num="46">
      But, the node device 10-2 having the priority number 2 does not make an inquiry because the node device 10-1 as the master station having the priority number 1 has the trouble.
      <br/>
      And, the node device 10-2 having the priority number 2 now has the highest priority because of the trouble in the node device 10-1 having the priority number 1 and upon receiving an inquiry from the node device 10-3 having the priority number 3, becomes a new master station.
    </p>
    <p num="47">However, the node device 10-3 having the priority number 3, which is inquired by the node device 10-2 having the priority number 2, recognizes that there is another node device having a higher priority number and does not become a master station.</p>
    <p num="48">Similarly, the node device 10-4 having the priority number 4 receives an inquiry from the node device 10-3 having the priority number 3 but recognizes that there is another node device having a higher priority and does not become a new master station.</p>
    <p num="49">In other words, since the node device 10-2 having the priority number 2 does not have a node device to make an inquiry to because the node device 10-1 having the priority number 1 has the trouble, it becomes a master station when it receives an inquiry from and responds to the node device 10-3 having a lower priority.</p>
    <p num="50">Together with the operation as described above, the node devices 10-2, 10-4 which are next to the node device 10-1 as the master station detect the out-of-cell-synchronization by the out-of-cell-synchronization detection part 9a or 9b of the transmission line interface 11 and conduct loopback because they receive an indefinite signal due to the trouble in the node device 10-1 as the master station .</p>
    <p num="51">Thus, since an inquiry is made from the node devices having a lower priority by one level to the node devices having a higher priority by one level at the same time, the system can be rebuilt in a short time after the occurrence of the trouble.</p>
    <p num="52">And, by connecting an operation management device 20-2 to the node device as the new master station, e.g., the node device 10-2, the operation management device 20-2 falls in operation.</p>
    <p num="53">FIG. 5 shows a state that the system is rebuilt if both the optical transmission lines 1a, 1b connected to the node device 10-1 as the master station had a trouble such as breakage.</p>
    <p num="54">
      In this case, the node device 10-1 as the master station connected to the troubled optical transmission lines 1a, 1b recognizes that the transmission lines have a trouble because it cannot receive an optical signal.
      <br/>
      Thus, it is isolated.
    </p>
    <p num="55">And, since the node devices 10-2, 10-4 connected to the troubled optical transmission lines 1a, 1b cannot receive an optical signal, they detect that an optical signal is cut by means of the optical signal loss detection part 8a or 8b of the optical transmission line interface 11 and make loopback.</p>
    <p num="56">At the same time, the respective node devices 10-1 to 10-4 decide a new master station in a short time by the same process as described above and reconfigure the system.</p>
    <p num="57">FIG. 6 shows a flowchart of deciding a new master station by the individual node device to reconfigure the system.</p>
    <p num="58">
      The individual node device, if it cannot receive a monitoring cell from the node device as the master station, detects the situation as a trouble (step 100).
      <br/>
      And the individual node device examines if there is a node device having a priority higher than itself on the basis of a predetermined priority (step 101).
    </p>
    <p num="59">When it is judged that there is a node device having a higher priority than itself (YES in step 101), an inquiry is made to the node device having a higher priority by one level than itself (step 102).</p>
    <p num="60">Then, it is checked if a response is made to the inquiry (step 103), and when there is a response, it does not become a master station and continues to operate as a slave station (step 104).</p>
    <p num="61">
      And, when it is judged in step 3 that there is no response (NO in step 103), it is checked whether there is another anode device having a priority further higher by one level than itself (step 105).
      <br/>
      If there is a node device having a priority further higher by one level than itself (YES in step 105), the process returns back to step 103.
      <br/>
      But, if there is not a node device having a priority further higher by one level than itself (NO in step 105), it becomes a master station (step 106).
    </p>
    <p num="62">
      When it is judged in step 101 that there is no node device having a higher priority than itself (No in step 101), it is checked whether an inquiry is made by a node device having a lower priority than itself (step 107).
      <br/>
      And when there is no inquiry made by a node device having a lower priority (NO step 107), the process returns back to step 101, but when there is an inquiry made by a node having a lower priority (YES in step 107), it becomes a new master station (step 106).
    </p>
    <p num="63">The process of deciding the master station as shown in FIG. 6 is configured so that a node device having a highest priority among others which can respond excluding the troubled master station is decided as a new master station, but either of the two node devices next to and having detected the troubled master station may become independently a master station based on the predetermined priority.</p>
    <p num="64">In the above-described configuration, the individual node device has the following setting information.</p>
    <p num="65">
      1) Priority number PO of the individual node device
      <br/>
      2) Priority number PL of the node device connected to the left of the individual node device
      <br/>
      3) Priority number PR of the node device connected to the right of the individual node device
      <br/>
      4) Priority number PP of the master station
      <br/>
      5) Priority number PPL of the node device connected to the left of the master station
      <br/>
      6) Priority number PPR of the node device connected to the right of the master station
    </p>
    <p num="66">
      For example, when the node device 10-1 as the master station has a trouble as shown in FIG. 4, the node device 10-2 connected to the right of the node device 10-1 as the master station has the following setting information.
      <br/>
      1) PO=2
      <br/>
      2) PL=1
      <br/>
      3) PR=3
      <br/>
      4) PP=1
      <br/>
      5) PPL=4
      <br/>
      6) PPR=2
    </p>
    <p num="67">
      And, the node device 10-4 connected to the left of the node device 10-1 as the master station has the following setting information.
      <br/>
      1) PO=4
      <br/>
      2) PL=3
      <br/>
      3) PR=1
      <br/>
      4) PP=1
      <br/>
      5) PPL=4
      <br/>
      6) PPR=2
    </p>
    <p num="68">In this configuration, when either of the two node devices 10-2, 10-4 which are next to and have detected the troubled master station node device 10-1 has the above-described settings, the node device 10-2 becomes independently a master station based on the predetermined priority.</p>
    <p num="69">FIG. 7 shows a flowchart of deciding a new master station among the node devices to reconfigure the system configured as described above.</p>
    <p num="70">
      When there is a situation that a node device cannot receive a monitoring cell from the node device as the master station, the node device detects the situation as a trouble (step 110).
      <br/>
      And, based on the predetermined setting information described above, one of the node devices next to the troubled master station detected checks whether its priority is lower than that of the other neighboring node device (step 111).
      <br/>
      Specifically, when the two node devices 10-2, 10-4 next to the node device 10-1 as the master station have the above setting, it is checked which of them has a smaller PO.
    </p>
    <p num="71">When it is judged that it has a priority lower than that of the other neighboring node device (YES in step 111), it does not become a master station but continues to operate as a slave (step 112).</p>
    <p num="72">And, when it is judged in step 111 that it has a priority higher than that of the other neighboring node device (NO in step 111), it becomes a master station (step 113).</p>
    <p num="73">It may also be configured that the individual node device having detected the trouble of the master station makes an inquiry to the node device having the highest priority excluding the master station, and the node device having the highest priority excluding the master station becomes a master station upon receiving an inquiry from all the other node devices excluding the master station and itself.</p>
    <p num="74">
      In such a configuration, the individual node device has the following setting information.
      <br/>
      1) Priority number of its own
      <br/>
      2) Priority number having the highest priority in the system
    </p>
    <p num="75">FIG. 8 shows a flowchart of deciding a new master station among the respective node devices to reconfigure the system having the above-described configuration.</p>
    <p num="76">
      The individual node device, if it cannot receive a monitoring cell from the node device as the master station, judge that there is a trouble (step 120).
      <br/>
      And based on the predetermined setting information described above, the individual node device checks whether its priority is highest in the system excluding the master station (step 121).
    </p>
    <p num="77">When it is judged that it does not have the highest priority in the system (NO in step 122), it makes an inquiry to the node device having the highest priority in the system excluding the master station (step 122) and continues to operate as a slave (Step 123).</p>
    <p num="78">And, when it is judged in step 121 that it has the highest priority in the system (YES in step 122), it waits for an inquiry from the other node devices (step 124) and when there are inquiries from all the node devices (YES in step 125), it becomes a master station (step 126).</p>
    <p num="79">FIG. 9 shows the configuration of a center device 100 which may be disposed in a central monitoring room or the like among the node devices 10-1 to 10-4 shown in FIG. 1.</p>
    <p num="80">
      In FIG. 9, the center device 100 has a redundant structure and includes controls 12a, 12b as a control part.
      <br/>
      The control 12a is normally used to perform life monitoring and copying of information with the control 12b.
      <br/>
      when the control 12a has a trouble, the control 12b recognizes that there was a trouble in the life monitoring of the control 12a, and the control 12b operates.
    </p>
    <heading>INDUSTRIAL APPLICABILITY</heading>
    <p num="81">
      The invention can be applied to a wide area network or a local area network (LAN).
      <br/>
      According to the invention, a transmission frame is not used to circulate through an individual node, then a master station does not need a frame generation part and a frame termination part.
      <br/>
      If the master station has a trouble, node devices having detected the trouble check simultaneously that no other node device has a priority higher than they have, and a new master station is decided.
      <br/>
      Therefore, time from the occurrence of a trouble to the decision of a new master station and the rebuilding of the system is made shorter as compared with a conventional system.
      <br/>
      Thus, a trouble recovery time required to be short in communications such as pictorial communications can be made short, and a duration of distorted images is made short.
    </p>
  </description>
  <claims format="original" lang="en" id="claim_en">
    <claim num="1">
      <claim-text>What is claimed is:</claim-text>
      <claim-text>1.</claim-text>
      <claim-text>A communications network system including a plurality of node devices distributed at a plurality of positions and transmission lines for connecting the plurality of no node devices in a ring-shaped configuration, one of the plurality of node devices being set as a master station to operate the system, wherein each node device comprises:</claim-text>
      <claim-text>detection means for detecting a trouble by determining that a monitor signal from the master station was not received; inquiring means for making an inquiry in an asynchronous transmission mode among the respective node devices when the detection means detects that the trouble has occurred with the master station; confirming means for confirming that there is no node device having a higher priority than itself based on an inquired result by the inquiring means;</claim-text>
      <claim-text>and master station setting means for setting the node device, if the confirming means confirmed that there is no node device having a higher priority than itself, as a substitute master station in place of the troubled master station.</claim-text>
    </claim>
    <claim num="2">
      <claim-text>2. The communications network system according to claim 1, further comprising loopback means for looping back the transmission lines at node devices next to the troubled master station when the detection means has detected that the trouble has occurred with the master station.</claim-text>
    </claim>
    <claim num="3">
      <claim-text>3. The communications network system according to claim 1, wherein the inquiring means comprises cell transmission/reception means which performs the inquiry by transmitting/receiving data in the form of cells.</claim-text>
    </claim>
    <claim num="4">
      <claim-text>4. The communications network system according to claim 1, wherein: the inquiring means makes an inquiry to a node device having a higher priority by one level than itself;</claim-text>
      <claim-text>and the confirming means confirms that, when there is no node device having a higher priority than itself and an inquiry is made by a node device having a lower priority than itself, there is no node device having a higher priority than itself.</claim-text>
    </claim>
    <claim num="5">
      <claim-text>5. The communications network system according to claim 1, wherein: the inquiring means makes an inquiry to a node device having a highest priority in the system excluding the master station when the priority of its own node device is not highest in the system excluding the master station, and the confirming means confirms that there is no node device having a higher priority than its own node device when receiving inquiries from all of the node devices.</claim-text>
    </claim>
    <claim num="6">
      <claim-text>6. A communications network system including a plurality of node devices distributed at a plurality of positions and transmission lines for connecting the plurality of node devices in a ring-shaped configuration, one of the plurality of node devices being set as a master station to operate the system, wherein each node device comprises: detection means for detecting a trouble by determining that a monitor signal from the master station was not received; judging means for judging when the detection means has detected that the trouble has occurred in the master station, whether its own node device is adjacent to the troubled master station;</claim-text>
      <claim-text>and master station setting means, when the judging means has judged that the own node device is adjacent to the troubled master station, for judging whether the own node device has a higher priority than other node device which is also next to the troubled master station and setting the node device which was judged to have the high priority as a substitute master station in place of the troubled master station.</claim-text>
    </claim>
    <claim num="7">
      <claim-text>7. The communications network system according to claim 6, further comprising loopback means for looping back the transmission lines at the node devices next to the troubled master station when the detection means detects that the trouble has occurred with the master station.</claim-text>
    </claim>
    <claim num="8">
      <claim-text>8. A method for rebuilding a communications network system in which a plurality of node devices distributed at a plurality of positions are connected in a ring-shaped configuration by transmission lines, one of the plurality of node devices being set as a master station to operate the system, and wherein the system is rebuilt when a trouble occurs with the master station, the method comprising the steps of: making an inquiry in an asynchronous transmission mode among the node devices when the trouble has occurred with the master station;</claim-text>
      <claim-text>and determining one of the plurality of node devices, which has no node devices with a higher priority than itself, as a substitute master station which operates the system instead of the troubled master station.</claim-text>
    </claim>
    <claim num="9">
      <claim-text>9. The method of rebuilding a communications network system according to claim 8, further comprising the step of looping back the transmission lines at node devices next to the troubled master station, when the trouble has occurred in the master station.</claim-text>
    </claim>
    <claim num="10">
      <claim-text>10. The method of rebuilding a communications network system according to claim 8, wherein the inquiry among the node devices is made by transmitting/receiving data in the form of cells.</claim-text>
    </claim>
    <claim num="11">
      <claim-text>11. The method of rebuilding a communications network system according to claim 8, wherein: each node device makes the inquiry to a node device having a higher priority by one level than itself;</claim-text>
      <claim-text>and each node device sets itself as a master station when there is no node device having a higher priority than itself and an inquiry is made by a node device having a lower priority than itself.</claim-text>
    </claim>
    <claim num="12">
      <claim-text>12. The method for rebuilding a communications network system according to claim 8, wherein: the priority of the individual node devices and the node device having the highest priority in the system are set in advance; the inquiry is made to the node device having the highest priority in the system excluding the master station when the own node device does not have the highest priority in the system excluding the master station;</claim-text>
      <claim-text>and the node device having the highest priority in the system excluding the master station sets itself as a master station when receiving inquiries from all of the node devices.</claim-text>
    </claim>
    <claim num="13">
      <claim-text>13. A method for rebuilding a communications network system in which a plurality of node devices distributed at a plurality of positions are connected in a ring-shaped configuration by transmission lines, one of the plurality of node devices being set as a master station to operate the system, and wherein the system is rebuilt when a trouble has occurred in the master station, the method comprising the steps of: at least one of the plurality of node devices judging, when the trouble has occurred with the master station, whether, it is next to the troubled master station; when judged that the node device is adjacent to the troubled master station, judging whether the node device has a higher priority than other node device which is also next to the troubled master station;</claim-text>
      <claim-text>and setting the node device, which was judged to have a higher priority than the other node device next to the troubled master station, as a substitute master station in place of the troubled master station.</claim-text>
    </claim>
    <claim num="14">
      <claim-text>14. The method for rebuilding a communications network system according to claim 13, further comprising the step of looping back the transmission lines at the node devices next to the troubled master station when the trouble has occurred with the master station.</claim-text>
    </claim>
  </claims>
</questel-patent-document>