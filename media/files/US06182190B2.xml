<?xml version="1.0" encoding="UTF-8"?>
<questel-patent-document lang="en" date-produced="20180805" produced-by="Questel" schema-version="3.23" file="US06182190B2.xml">
  <bibliographic-data lang="en">
    <publication-reference publ-desc="Granted patent as second publication">
      <document-id>
        <country>US</country>
        <doc-number>06182190</doc-number>
        <kind>B2</kind>
        <date>20010130</date>
      </document-id>
      <document-id data-format="questel">
        <doc-number>US6182190</doc-number>
      </document-id>
    </publication-reference>
    <original-publication-kind>B2</original-publication-kind>
    <application-reference family-id="15843645" extended-family-id="13443174">
      <document-id>
        <country>US</country>
        <doc-number>09204192</doc-number>
        <kind>A</kind>
        <date>19981204</date>
      </document-id>
      <document-id data-format="questel">
        <doc-number>1998US-09204192</doc-number>
      </document-id>
      <document-id data-format="questel_Uid">
        <doc-number>13728572</doc-number>
      </document-id>
    </application-reference>
    <language-of-filing>en</language-of-filing>
    <language-of-publication>en</language-of-publication>
    <priority-claims>
      <priority-claim kind="national" sequence="1">
        <country>JP</country>
        <doc-number>16711198</doc-number>
        <kind>A</kind>
        <date>19980615</date>
        <priority-active-indicator>Y</priority-active-indicator>
      </priority-claim>
      <priority-claim data-format="questel" sequence="1">
        <doc-number>1998JP-0167111</doc-number>
      </priority-claim>
    </priority-claims>
    <dates-of-public-availability>
      <publication-of-grant-date>
        <date>20010130</date>
      </publication-of-grant-date>
    </dates-of-public-availability>
    <classifications-ipcr>
      <classification-ipcr sequence="1">
        <text>G11C  16/06        20060101AFI20060310RMJP</text>
        <ipc-version-indicator>
          <date>20060101</date>
        </ipc-version-indicator>
        <classification-level>A</classification-level>
        <section>G</section>
        <class>11</class>
        <subclass>C</subclass>
        <main-group>16</main-group>
        <subgroup>06</subgroup>
        <symbol-position>F</symbol-position>
        <classification-value>I</classification-value>
        <generating-office>
          <country>JP</country>
        </generating-office>
        <classification-status>R</classification-status>
        <classification-data-source>M</classification-data-source>
        <action-date>
          <date>20060310</date>
        </action-date>
      </classification-ipcr>
      <classification-ipcr sequence="2">
        <text>G06F   9/445       20060101A I20051008RMEP</text>
        <ipc-version-indicator>
          <date>20060101</date>
        </ipc-version-indicator>
        <classification-level>A</classification-level>
        <section>G</section>
        <class>06</class>
        <subclass>F</subclass>
        <main-group>9</main-group>
        <subgroup>445</subgroup>
        <classification-value>I</classification-value>
        <generating-office>
          <country>EP</country>
        </generating-office>
        <classification-status>R</classification-status>
        <classification-data-source>M</classification-data-source>
        <action-date>
          <date>20051008</date>
        </action-date>
      </classification-ipcr>
      <classification-ipcr sequence="3">
        <text>G06F  15/78        20060101ALI20060310RMJP</text>
        <ipc-version-indicator>
          <date>20060101</date>
        </ipc-version-indicator>
        <classification-level>A</classification-level>
        <section>G</section>
        <class>06</class>
        <subclass>F</subclass>
        <main-group>15</main-group>
        <subgroup>78</subgroup>
        <symbol-position>L</symbol-position>
        <classification-value>I</classification-value>
        <generating-office>
          <country>JP</country>
        </generating-office>
        <classification-status>R</classification-status>
        <classification-data-source>M</classification-data-source>
        <action-date>
          <date>20060310</date>
        </action-date>
      </classification-ipcr>
    </classifications-ipcr>
    <classification-national>
      <country>US</country>
      <main-classification>
        <text>711103000</text>
        <class>711</class>
        <subclass>103000</subclass>
      </main-classification>
      <further-classification sequence="1">
        <text>365185240</text>
        <class>365</class>
        <subclass>185240</subclass>
      </further-classification>
      <further-classification sequence="2">
        <text>365185330</text>
        <class>365</class>
        <subclass>185330</subclass>
      </further-classification>
    </classification-national>
    <classifications-ecla>
      <classification-ecla sequence="1">
        <text>G06F-008/665</text>
        <section>G</section>
        <class>06</class>
        <subclass>F</subclass>
        <main-group>8</main-group>
        <subgroup>665</subgroup>
      </classification-ecla>
    </classifications-ecla>
    <patent-classifications>
      <patent-classification sequence="1">
        <classification-scheme office="EP" scheme="CPC">
          <date>20180201</date>
        </classification-scheme>
        <classification-symbol>G06F-008/654</classification-symbol>
        <section>G</section>
        <class>06</class>
        <subclass>F</subclass>
        <main-group>8</main-group>
        <subgroup>654</subgroup>
        <symbol-position>F</symbol-position>
        <classification-value>I</classification-value>
        <classification-status>B</classification-status>
        <classification-data-source>H</classification-data-source>
        <action-date>
          <date>20180203</date>
        </action-date>
      </patent-classification>
    </patent-classifications>
    <number-of-claims>4</number-of-claims>
    <exemplary-claim>1</exemplary-claim>
    <figures>
      <number-of-drawing-sheets>6</number-of-drawing-sheets>
      <number-of-figures>6</number-of-figures>
      <image-key data-format="questel">US6182190</image-key>
    </figures>
    <invention-title format="original" lang="en" id="title_en">Automobile controller</invention-title>
    <references-cited>
      <citation srep-phase="examiner">
        <patcit num="1">
          <text>MATSUBARA KIYOSHI, et al</text>
          <document-id>
            <country>US</country>
            <doc-number>5581503</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5581503</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="examiner">
        <patcit num="2">
          <text>MATSUBARA KIYOSHI, et al</text>
          <document-id>
            <country>US</country>
            <doc-number>5687345</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5687345</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="examiner">
        <patcit num="3">
          <text>MATSUBARA KIYOSHI, et al</text>
          <document-id>
            <country>US</country>
            <doc-number>5844843</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5844843</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="applicant">
        <patcit num="4">
          <text>NIPPON ELECTRIC IC MICROCOMPUT, et al</text>
          <document-id>
            <country>JP</country>
            <doc-number>H08203288</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>JP08203288</doc-number>
          </document-id>
        </patcit>
      </citation>
    </references-cited>
    <parties>
      <applicants>
        <applicant data-format="original" app-type="applicant" sequence="1">
          <addressbook lang="en">
            <orgname>Mitsubishi Denki Kabushiki Kaisha</orgname>
            <address>
              <address-1>Tokyo, JP</address-1>
              <city>Tokyo</city>
              <country>JP</country>
            </address>
          </addressbook>
          <nationality>
            <country>JP</country>
          </nationality>
        </applicant>
        <applicant data-format="questel" app-type="applicant" sequence="2">
          <addressbook lang="en">
            <orgname>MITSUBISHI ELECTRIC</orgname>
          </addressbook>
          <nationality>
            <country>JP</country>
          </nationality>
        </applicant>
      </applicants>
      <inventors>
        <inventor data-format="original" sequence="1">
          <addressbook lang="en">
            <name>Nakamoto, Katsuya</name>
            <address>
              <address-1>Tokyo, JP</address-1>
              <city>Tokyo</city>
              <country>JP</country>
            </address>
          </addressbook>
          <nationality>
            <country>JP</country>
          </nationality>
        </inventor>
      </inventors>
      <agents>
        <agent sequence="1" rep-type="agent">
          <addressbook lang="en">
            <orgname>Sughrue, Mion, Zinn, Macpeak &amp; Seas, PLLC</orgname>
          </addressbook>
        </agent>
      </agents>
    </parties>
    <examiners>
      <primary-examiner>
        <name>Yoo, Do Hyun</name>
      </primary-examiner>
    </examiners>
    <lgst-data>
      <lgst-status>GRANTED</lgst-status>
    </lgst-data>
  </bibliographic-data>
  <abstract format="original" lang="en" id="abstr_en">
    <p id="P-EN-00001" num="00001">
      <br/>
      To make it possible to rewrite a control program and decrease man-hours for change of the control program without removing a microcomputer or ROM when an automobile controller must change the control program due to any reason.The following are used: a microcomputer 3 for accessing an electrically erasable nonvolatile memory 3-1 storing a control program, an external unit 2 storing a rewriting program 2-1 and a rewriting voltage source 2-2 for generating a rewriting voltage in accordance with the rewriting program 2-1, and a logic circuit 7A for generating a signal for setting the mode-setting related terminal of the microcomputer 3 to the rewriting mode in accordance with a writing voltage 1b generated by the external unit 2.
    </p>
  </abstract>
  <description format="original" lang="en" id="desc_en">
    <heading>BACKGROUND OF THE INVENTION</heading>
    <p num="1">
      1.
      <br/>
      Field of the Invention
    </p>
    <p num="2">The present invention relates to an automobile controller for engine control or transmission control for arithmetic-processing a controlled variable in accordance with a control program, particularly to a microcomputer-mounted automobile controller making a memory storing a control program erasable while the memory is set to the controller.</p>
    <p num="3">2. Description of Related Art</p>
    <p num="4">
      An automobile controller is exposed to severe conditions such as temperature change and vibration.
      <br/>
      Particularly, for engine control, a socket cannot be used to set a microcomputer storing a control program or a ROM (Read Only Memory) because of improving the vibration resistance.
      <br/>
      Therefore, a program is written in a ROM (Read Only Memory) by an exclusive unit before a controller is assembled and directly soldered to a substrate.
    </p>
    <heading>BRIEF SUMMARY OF THE INVENTION</heading>
    <p num="5">Object of the Invention</p>
    <p num="6">
      In the case of a conventional controller, a microcomputer or ROM must be directly soldered to a substrate because of the above reason.
      <br/>
      In this case, the following problem occurs.
    </p>
    <p num="7">
      In the case of an engine controller, control programs must be changed sometimes due to mismatch of control data due to the difference between engines under mass production.
      <br/>
      In this case, the prior art requires temporarily removing a microcomputer or ROM from a substrate to rewrite a control program and thereafter, soldering the microcomputer or ROM to the substrate again.
      <br/>
      Therefore, there are problems that a lot of man-hours are required and the reliability of a soldered portion is deteriorated.
    </p>
    <p num="8">
      Moreover, when a device storing a control program cannot be erased or rewritten, it is necessary to disuse the device removed from a substrate and replace the device with a new one.
      <br/>
      Therefore, there is a problem that the cost increases.
    </p>
    <p num="9">To solve these problems, the official gazette of Japanese Patent Laid-Open No. 8-203288 discloses a controller using an EEPROM (Electrically Erasable Programmable Read Only Memory) which is one of electrically erasable nonvolatile memories and built in a microcomputer to replace the contents of the nonvolatile memory with a new program while the memory is set to a printed circuit board.</p>
    <p num="10">FIG. 6 is a block diagram of the invention disclosed in the official gazette of Japanese Patent Laid-Open No. 8-203288. To set a microcomputer (1-2) to the rewriting mode, it is necessary to supply a VPP power supply (1-12) serving as a rewriting power supply and a plurality of interface terminals (1-5) serving as mode-setting related terminals to a user board (1-1) serving as a controller from a writing jig (1-8) serving as an external unit.</p>
    <p num="11">
      Moreover, the block diagram exclusively requires a power supply output terminal (1-18) for protecting a microcomputer.
      <br/>
      Therefore, a harness and many connector terminals for connecting the user board (1-1) with the writing jig (1-8) are required.
      <br/>
      Thus, problems occur that a harness is complicated, the number of connector terminals increases, and a board increases in size and weight.
    </p>
    <p num="12">Therefore, to apply an EEPROM to an automobile controller, because the EEPROM is used for a plurality of controllers (for engine control, transmission control, and brake control), a harness is further complicated, fuel consumption and exhaust gas are increased due to increase in weight, the cost is increased, and the automobile controller cannot be mounted on an automobile due to restriction of space in the worst case.</p>
    <p num="13">The present invention is made to solve the above problems and its object is to provide an automobile controller capable of setting a microcomputer to the rewriting mode by supplying only a rewriting power supply.</p>
    <p num="14">Summary of the Invention</p>
    <p num="15">The automobile controller of the invention of claim 1 comprises a microcomputer for performing control processing by accessing an electrically erasable nonvolatile memory storing a control program and rewriting-signal generation means for generating a signal for setting the mode-setting related terminal of the microcomputer to the rewriting mode in accordance with a rewriting program of a built-in nonvolatile memory.</p>
    <p num="16">In the case of the automobile controller of the invention of claim 2, rewriting-signal generation means comprises an external unit storing a rewriting program and a rewriting voltage source for generating a rewriting voltage in accordance with the rewriting program and a logic circuit for generating a signal for setting the mode-setting related terminal of a microcomputer to the rewriting mode in accordance with the rewriting voltage generated by the external unit.</p>
    <p num="17">In the case of the automobile controller of the invention of claim 3, the input circuit of a rewriting voltage source is provided with voltage confirmation means for confirming the power supply voltage of a microcomputer with an external unit.</p>
    <p num="18">In the case of the automobile controller of the invention of claim 4, rewriting-signal generation means comprises an external unit storing a rewriting program and a rewrite-enable signal source for generating a rewrite-enable logic level signal in accordance with the rewriting program and a logic circuit for generating a signal for setting the mode-setting related terminal of a microcomputer to the rewriting mode in accordance with the rewrite-enable logic level signal generated by the external unit.</p>
    <p num="19">In the case of the automobile controller of the invention of claim 5, a nonvolatile memory is provided for the outside of a microcomputer through bus connection and the nonvolatile memory is rewritten by setting the microcomputer to the rewriting mode.</p>
    <heading>BRIEF DESCRIPTION OF THE DRAWINGS</heading>
    <p num="20">
      FIG. 1 is an embodiment 1 of the present invention showing an automobile controller and an external unit;
      <br/>
      FIG. 2 is a timing chart showing the circuit operation timing in FIG. 1;
      <br/>
      FIG. 3 is a block diagram showing an embodiment 4 of the present invention;
      <br/>
      FIG. 4 is a block diagram showing an embodiment 5 of the present invention;
      <br/>
      FIG. 5 is a block diagram showing an embodiment 6 of the present invention; and
      <br/>
      FIG. 6 is a conventional controller extracted from FIG. 1 in Japanese Patent Laid-Open No. 8-203288.
    </p>
    <heading>DETAILED DESCRIPTION OF THE PREFERRED EMBODIMENTS</heading>
    <p num="21">Embodiment 1</p>
    <p num="22">
      The automobile controller of embodiment 1 of the present invention is described below by referring to the accompanying drawings.
      <br/>
      FIG. 1 is a block diagram of the automobile controller of this embodiment.
      <br/>
      In FIG. 1, symbol 1A denotes a controller and 2 denotes an external unit storing a rewriting program 2-1 and a rewriting voltage source 2-2.
    </p>
    <p num="23">Symbol 3 denotes a microcomputer which stores an erasable nonvolatile memory 3-1 and a control program for performing various types of arithmetic processing is stored in the nonvolatile memory 3-1.</p>
    <p num="24">
      Symbol 4 denotes an I/O for capturing various types of input information and performing various types of output control.
      <br/>
      Symbol 5 denotes a constant voltage source for generating a control power-supply voltage VCC3a of approx. 5 V for operating the microcomputer 3 and the I/O 4 from a battery power supply 6 to be supplied through a power supply input switch SW1.
    </p>
    <p num="25">Moreover, the constant voltage source 5 generates a reset signal 5b for controlling the microcomputer 3 and the reset signal 5b has a power-on reset control function for keeping the microcomputer 3 at a reset state for a predetermined time when the VCC3a is input and a watchdog reset control function for regularly generating a reset signal when a watchdog pulse signal 5a output from the microcomputer 3 is not detected at a proper interval.</p>
    <p num="26">
      Symbol 7A denotes a logic circuit which generates a setting voltage for a reset terminal 3b, MODE1 terminal 3d, MODE2 terminal 3e, and VPP terminal 3c serving as mode-setting related terminals of the microcomputer 3 in accordance with a rewriting power supply 1b supplied from the rewriting voltage source 2-2 and the reset signal 5b supplied from the constant voltage source 5.
      <br/>
      A logic structure is constituted so that the rewriting mode is set when a rewriting power supply of approx. 12 V is applied to the rewriting power supply 1b and the reading mode is set when no voltage is applied to the rewriting power supply 1b.
    </p>
    <p num="27">A power-supply stabilizer 7-4 removes noises from the rewriting power supply 1b output from the rewriting voltage source 2-2 to smooth the power supply 1b and supplies a rewriting voltage VPP (12 V) to the microcomputer 3.</p>
    <p num="28">Moreover, after the microcomputer 3 is set to the writing mode, erasing, rewriting, and collating instructions and data are transferred through serial communication lines 1c and 1d.</p>
    <p num="29">
      In the case of the above structure, a crank angle signal 4a for measuring an engine speed and an intake air quantity signal 4b for measuring an air quantity taken into an engine are input to the I/O 4.
      <br/>
      The microcomputer 3 computes the amount of fuel to be injected into the engine in accordance with these input signals and outputs the controlled variable according to the arithmetic operation result as a fuel injection quantity signal 4c through the I/O 4.
      <br/>
      The fuel injection control is described above which is a typical control of engine control.
      <br/>
      However, it is also possible to apply the fuel injection control to other automobile controller for transmission control.
    </p>
    <p num="30">
      Then, the program rewriting operation of this embodiment is described below by referring to FIGS. 2 and 1.
      <br/>
      FIG. 2 is a timing chart for input/output of signals applied to each terminal for rewriting the nonvolatile memory 3-1 shown in FIG. 1.
    </p>
    <p num="31">FIG. 2 shows the following three typical operation states: the period between time t1 and time t4 shows the normal operation state in the reading mode after power supply input, the period between time t5 and time t9 shows the rewriting mode state under a state of applying the rewriting voltage source 1b, and the period between time t10 and time t13 shows the return state to the normal state after stopping applying the rewriting voltage source.</p>
    <p num="32">First, the normal operation state (between time t1 and time t4) is described.</p>
    <p num="33">
      An external power supply 1a is supplied when a user turns on SW1 at the time t1 and the VCC3a of approx. 5 V is supplied to the entire controller 1 from the constant voltage source 5 at the time t2.
      <br/>
      At the time t2, a logic circuit 7 constructs a logic for setting the nonvolatile memory 3-1 to the reading mode.
      <br/>
      In this case, each voltage is applied to each terminal through a buffer 7-1, inverter 7-8, and transistors 7-9 and 7-11 so that the MODE1 terminal 3d shows 5 V, MODE2 terminal 3e shows 5 V, and VPP terminal 3c shows 0 V. However, the reset terminal 3b is set to 0 V which is a reset voltage through an OR circuit 7-3 and an AND circuit 7-6 due to the power-on reset control by the constant voltage source 5.
      <br/>
      Therefore, the microcomputer 3 keeps a reset state.
    </p>
    <p num="34">
      The microcomputer 3 captures the states of the MODE1 terminal 3d, MODE2 terminal 3e, and VPP terminal 3c at a reset cancel edge and determines the operation mode.
      <br/>
      Therefore, the reset output 5b rises to 5 V (high) and the nonvolatile memory 3-1 is set to the reading mode when power-on reset is canceled at the time t3.
      <br/>
      At the time t4, the controller 1A performs arithmetic operations in accordance with a control program and becomes the normal operation state for outputting a controlled variable.
    </p>
    <p num="35">Moreover, because the control program normally operates at the time t4, the microcomputer 3 outputs the watchdog pulse signal 5a every predetermined interval and a constant voltage source circuit 5 monitors whether the watchdog pulse signal 5a is output at a proper interval.</p>
    <p num="36">Then, the writing mode state (between time t5 and time t9) is described below.</p>
    <p num="37">
      When a user turns on SW2 in order to rewrite the contents of the nonvolatile memory 3-1 at the time t5, a writing power supply 1b of approx. 12 V is supplied to the logic circuit 7.
      <br/>
      In this case, when VCC3a is set to 0 V and the writing power supply 1b is supplied, the microcomputer 3 may be broken down.
      <br/>
      Therefore, by using means 7-1 for confirming the voltage of VCC, it is possible to confirm whether VCC3a is present before applying the writing power supply 1b by the external unit 2 and inhibit the writing power supply 1b from being applied when VCC3a is 0 V.
    </p>
    <p num="38">At the time t6, the voltage of each terminal is set by the logic circuit 7 so that the MODE1 terminal 3d shows 0 V, MODE2 terminal 3e shows 12 V, and VPP terminal 3c shows 12 V as a logic for setting the nonvolatile memory 3-1 to the rewriting mode and moreover, a reset signal (0 V) is input to the reset terminal 3b for a predetermined time by a one-shot circuit 7-2A, a reset cancel signal (5 V) is input to the reset terminal 3b at the time t7 (edge to be reset-canceled), and the microcomputer 3 is set to the rewriting mode.</p>
    <p num="39">At the time t8, erasing and writing instructions and rewriting data for rewriting the nonvolatile memory 3-1 are transmitted from the external unit 2 through a serial communication line 1c and a writing completion signal, error signal, and collation data are returned to the external unit 2 from the microcomputer 3 through a serial communication line 1d, and execution and completion of writing are confirmed.</p>
    <p num="40">
      Moreover, the microcomputer 3 is set to the rewriting mode between time t6 and time t8.
      <br/>
      In this case, because the control program stored in the nonvolatile memory 3-1 is not executed.
      <br/>
      Therefore, the watchdog signal 5a stops and a periodic reset signal 5b is output from the constant voltage source 5.
      <br/>
      However, because the reset signal 5b is masked by the OR circuit 7-3 in the logic circuit 7, the microcomputer 3 is not reset and therefore, it is possible to maintain the rewriting mode.
    </p>
    <p num="41">
      Finally, the return state to the normal state (between time t9 and time t13) is described below.
      <br/>
      The external unit 2 confirms the normal end of rewriting through serial communication and then, stops supplying the writing power supply 1b at the time t9.
      <br/>
      Thereby, the voltage to be supplied to the MODE1 terminal 3d, MODE2 terminal 3e, and VPP terminal 3c is set to a voltage in the reading mode by the logic circuit 7 similarly to the case of the time t2.
      <br/>
      However, because there is no reset edge, the microcomputer 3 maintains the rewriting mode at the time t10 and therefore, a new control program written in the nonvolatile memory 3-1 cannot be executed.
    </p>
    <p num="42">
      However, because masking of the reset signal 5b is canceled by the OR circuit 7-3 at the time t9, the microcomputer 3 is reset-canceled at the time t11 by the periodic reset signal 5b continuously generated since the time t5 and changed to the reading mode to start control in accordance with the new control program written in the nonvolatile memory 3-1 at the time t12.
      <br/>
      A user confirms whether the nonvolatile memory 3-1 is normally rewritten and the normal operation is started and thereafter, turns off SW2 to complete the rewriting operation.
    </p>
    <p num="43">Embodiment 2</p>
    <p num="44">
      In the case of the embodiment 1, the power supply stabilizer 7-4 removes noises from the rewriting voltage source 1b of approx. 12 V to smooth the power supply 1b.
      <br/>
      However, a case is estimated in which it is difficult to set the rewriting voltage source to the specified power supply voltage of the microcomputer 3 due to a voltage drop by a harness or ground potential difference between the controller 1A and the external unit 2.
      <br/>
      In this case, it is also possible to set the rewriting voltage source 1b to approx. 16 V to regulate it to approx. 12 V within the specified value of the microcomputer 3 by the power supply stabilizer 7-4.
    </p>
    <p num="45">Thereby, it is possible to realize stable rewriting independently of the difference between vehicles or the state under rewriting.</p>
    <p num="46">Embodiment 3</p>
    <p num="47">In the case of the embodiment 2, the rewriting voltage source 1b is set to approx. 16 V. In the case of this embodiment, however, it is possible to set the rewriting voltage source 1b to approx. 5 V and boost the power supply 1b to approx. 12 V within the specified value of the microcomputer 3 by the power supply stabilizer 7-4.</p>
    <p num="48">Embodiment 4</p>
    <p num="49">
      FIG. 3 is a block diagram of the automobile controller of the embodiment 4 of the present invention.
      <br/>
      In FIG. 3, a symbol same as that in FIG. 1 denotes the same or a corresponding portion.
    </p>
    <p num="50">
      In FIG. 3, symbol 1B denotes the controller of this embodiment.
      <br/>
      The controller 1B of this embodiment is constituted so as not to have the watchdog pulse 5a.
      <br/>
      Therefore, it is impossible to return to the normal state through periodic resetting at the time t10 in the timing chart shown in FIG. 2.
      <br/>
      However, it is possible to perform self-return to the reading mode after rewriting is completed by providing a function for generating a reset signal (0 V) for a predetermined time at the reset terminal 3b in accordance with the change of the rewriting voltage source 1b (time t5 and time t9) for a one-shot circuit 7-2B.
    </p>
    <p num="51">Embodiment 5</p>
    <p num="52">
      FIG. 4 is a block diagram of the automobile controller of the embodiment 5 of the present invention.
      <br/>
      In FIG. 4, a symbol same as that in FIG. 1 denotes the same or a corresponding portion.
      <br/>
      In FIG. 4, symbol 1C denotes the controller of this embodiment.
    </p>
    <p num="53">The controller 1C of this embodiment does not require a rewriting voltage VPP3c of approx. 12 V and it is characterized by using the microcomputer 3 which can be set to the rewriting mode only with VCC3a of approx. 5 V.</p>
    <p num="54">The controller 1C of this embodiment is provided with a logic circuit 7C for generating a mode-setting related signal of the microcomputer 3 from a logic-level rewrite-enable signal 1e to be supplied from the external unit 2A storing the rewrite-enable signal source 2-3.</p>
    <p num="55">
      Therefore, the set value of the MODE1 terminal 3d and that of the MODE2 terminal 3e in the timing chart shown in FIG. 2 are different from each other and the voltage of each terminal is set so that the MODE1 terminal 3d shows 0 V and the MODE2 terminal 3e shows 5 V under the rewriting mode.
      <br/>
      Moreover, the voltage of each terminal is set so that the MODE1 terminal 3d shows 5 V and the MODE2 terminal 3e shows 0 V under the normal mode.
      <br/>
      Thereby, even when a microcomputer requiring no rewriting voltage source is used, it is possible to perform rewriting similarly to the case of the embodiment 1 and moreover, it is possible to simplify the logic circuit 7C because the power supply stabilizer 7-4 is unnecessary.
    </p>
    <p num="56">Embodiment 6</p>
    <p num="57">
      FIG. 5 is a block diagram of the automobile controller of the embodiment 6 of the present invention.
      <br/>
      In FIG. 5, a symbol same as that in FIG. 1 denotes the same or a corresponding portion.
      <br/>
      In FIG. 5, symbol 1D denotes the controller of this embodiment.
    </p>
    <p num="58">The controller 1D of this embodiment is characterized in that a nonvolatile memory 3-2 storing a control program is not built in the microcomputer 3 but it is set outside of the microcomputer 3 and connected by a bus 3f.</p>
    <p num="59">In this case, the microcomputer 3 and the nonvolatile memory 3-2 are connected each other by the bus 3f (address bus, data bus, control terminal, and clock terminal) and the external nonvolatile memory 3-2 is set to the writing mode by VPP3c sent from the logic circuit 7D and a bus signal sent from the microcomputer 3.</p>
    <p num="60">
      This embodiment has the same structure as the embodiment 1 except that the nonvolatile memory 3-1 is not built in the microcomputer 3 and its rewriting operation is the same as the operation shown by the timing chart in FIG. 2.
      <br/>
      Thereby, when the capacity of the nonvolatile memory 3-1 built in the microcomputer 3 is insufficient, it is possible to add the nonvolatile memory 3-2 to the outside of the microcomputer 3 and thereby, this embodiment can be applied to every controller.
    </p>
  </description>
  <claims format="original" lang="en" id="claim_en">
    <claim num="1">
      <claim-text>What is claimed is:</claim-text>
      <claim-text>1.</claim-text>
      <claim-text>An automobile controller comprising:</claim-text>
      <claim-text>a microcomputer for performing control processing by accessing electrically erasable nonvolatile memory storing a control program;</claim-text>
      <claim-text>and rewriting-signal generator for generating a signal for setting mode-setting related terminal of said microcomputer to a rewriting mode in accordance with a rewriting program stored in a built-in nonvolatile memory, wherein the rewriting-signal generator further comprises:</claim-text>
      <claim-text>- external unit storing the rewriting program; - a rewriting voltage source for generating the rewriting voltage in accordance with the rewriting program;</claim-text>
      <claim-text>and - a logic circuit for generating a signal for setting the mode-setting related terminal of the microcomputer to the rewriting mode in accordance with the rewriting voltage generated by the external unit.</claim-text>
    </claim>
    <claim num="2">
      <claim-text>2. The automobile controller according to claim 1, wherein an input circuit of the rewriting voltage source is provided with voltage confirmation means for confirming power supply voltage of the microcomputer with the external unit.</claim-text>
    </claim>
    <claim num="3">
      <claim-text>3. An automobile controller comprising: a microcomputer for performing control processing by accessing electrically erasable nonvolatile memory storing a control program;</claim-text>
      <claim-text>and rewriting-signal generator for generating a signal for setting mode-setting related terminal of said microcomputer to a rewriting mode in accordance with a rewriting program of a built-in nonvolatile memory, wherein the rewriting-signal further comprises: - an external unit storing the rewriting program; - a rewrite-enable signal source for generating a rewrite-enable logic level signal in accordance with the rewriting program;</claim-text>
      <claim-text>and - a logic circuit for generating a signal for setting the mode-setting related terminal of the microcomputer to the rewriting mode in accordance with the rewrite-enable logic level signal generated by the external unit.</claim-text>
    </claim>
    <claim num="4">
      <claim-text>4. An automobile controller comprising: a microcomputer for performing control processing by accessing electrically erasable nonvolatile memory storing a control program: and rewriting-signal generator for generating a signal for setting mode-setting related terminal of said microcomputer to a rewriting mode in accordance with a rewriting program of a built-in nonvolatile memory, wherein a nonvolatile memory is provided outside of the microcomputer and said nonvolatile memory is rewritten by setting said microcomputer to the rewriting mode, wherein said nonvolatile memory and said microcomputer are connected using a bus connection.</claim-text>
    </claim>
  </claims>
</questel-patent-document>