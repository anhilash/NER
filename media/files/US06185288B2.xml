<?xml version="1.0" encoding="UTF-8"?>
<questel-patent-document lang="en" date-produced="20180805" produced-by="Questel" schema-version="3.23" file="US06185288B2.xml">
  <bibliographic-data lang="en">
    <publication-reference publ-desc="Granted patent as second publication">
      <document-id>
        <country>US</country>
        <doc-number>06185288</doc-number>
        <kind>B2</kind>
        <date>20010206</date>
      </document-id>
      <document-id data-format="questel">
        <doc-number>US6185288</doc-number>
      </document-id>
    </publication-reference>
    <original-publication-kind>B2</original-publication-kind>
    <application-reference family-id="25538718" extended-family-id="3886213">
      <document-id>
        <country>US</country>
        <doc-number>08992765</doc-number>
        <kind>A</kind>
        <date>19971218</date>
      </document-id>
      <document-id data-format="questel">
        <doc-number>1997US-08992765</doc-number>
      </document-id>
      <document-id data-format="questel_Uid">
        <doc-number>4018822</doc-number>
      </document-id>
    </application-reference>
    <language-of-filing>en</language-of-filing>
    <language-of-publication>en</language-of-publication>
    <priority-claims>
      <priority-claim kind="national" sequence="1">
        <country>US</country>
        <doc-number>99276597</doc-number>
        <kind>A</kind>
        <date>19971218</date>
        <priority-active-indicator>Y</priority-active-indicator>
      </priority-claim>
      <priority-claim data-format="questel" sequence="1">
        <doc-number>1997US-08992765</doc-number>
      </priority-claim>
    </priority-claims>
    <dates-of-public-availability>
      <publication-of-grant-date>
        <date>20010206</date>
      </publication-of-grant-date>
    </dates-of-public-availability>
    <classifications-ipcr>
      <classification-ipcr sequence="1">
        <text>H04M   7/00        20060101A I20051008RMEP</text>
        <ipc-version-indicator>
          <date>20060101</date>
        </ipc-version-indicator>
        <classification-level>A</classification-level>
        <section>H</section>
        <class>04</class>
        <subclass>M</subclass>
        <main-group>7</main-group>
        <subgroup>00</subgroup>
        <classification-value>I</classification-value>
        <generating-office>
          <country>EP</country>
        </generating-office>
        <classification-status>R</classification-status>
        <classification-data-source>M</classification-data-source>
        <action-date>
          <date>20051008</date>
        </action-date>
      </classification-ipcr>
      <classification-ipcr sequence="2">
        <text>H04L  12/58        20060101A N20060722RMEP</text>
        <ipc-version-indicator>
          <date>20060101</date>
        </ipc-version-indicator>
        <classification-level>A</classification-level>
        <section>H</section>
        <class>04</class>
        <subclass>L</subclass>
        <main-group>12</main-group>
        <subgroup>58</subgroup>
        <classification-value>N</classification-value>
        <generating-office>
          <country>EP</country>
        </generating-office>
        <classification-status>R</classification-status>
        <classification-data-source>M</classification-data-source>
        <action-date>
          <date>20060722</date>
        </action-date>
      </classification-ipcr>
      <classification-ipcr sequence="3">
        <text>H04L  29/06        20060101A I20051008RMEP</text>
        <ipc-version-indicator>
          <date>20060101</date>
        </ipc-version-indicator>
        <classification-level>A</classification-level>
        <section>H</section>
        <class>04</class>
        <subclass>L</subclass>
        <main-group>29</main-group>
        <subgroup>06</subgroup>
        <classification-value>I</classification-value>
        <generating-office>
          <country>EP</country>
        </generating-office>
        <classification-status>R</classification-status>
        <classification-data-source>M</classification-data-source>
        <action-date>
          <date>20051008</date>
        </action-date>
      </classification-ipcr>
      <classification-ipcr sequence="4">
        <text>H04M   3/42        20060101A N20051008RMEP</text>
        <ipc-version-indicator>
          <date>20060101</date>
        </ipc-version-indicator>
        <classification-level>A</classification-level>
        <section>H</section>
        <class>04</class>
        <subclass>M</subclass>
        <main-group>3</main-group>
        <subgroup>42</subgroup>
        <classification-value>N</classification-value>
        <generating-office>
          <country>EP</country>
        </generating-office>
        <classification-status>R</classification-status>
        <classification-data-source>M</classification-data-source>
        <action-date>
          <date>20051008</date>
        </action-date>
      </classification-ipcr>
      <classification-ipcr sequence="5">
        <text>H04M   3/53        20060101A N20051008RMEP</text>
        <ipc-version-indicator>
          <date>20060101</date>
        </ipc-version-indicator>
        <classification-level>A</classification-level>
        <section>H</section>
        <class>04</class>
        <subclass>M</subclass>
        <main-group>3</main-group>
        <subgroup>53</subgroup>
        <classification-value>N</classification-value>
        <generating-office>
          <country>EP</country>
        </generating-office>
        <classification-status>R</classification-status>
        <classification-data-source>M</classification-data-source>
        <action-date>
          <date>20051008</date>
        </action-date>
      </classification-ipcr>
      <classification-ipcr sequence="6">
        <text>H04M   3/54        20060101A N20051008RMEP</text>
        <ipc-version-indicator>
          <date>20060101</date>
        </ipc-version-indicator>
        <classification-level>A</classification-level>
        <section>H</section>
        <class>04</class>
        <subclass>M</subclass>
        <main-group>3</main-group>
        <subgroup>54</subgroup>
        <classification-value>N</classification-value>
        <generating-office>
          <country>EP</country>
        </generating-office>
        <classification-status>R</classification-status>
        <classification-data-source>M</classification-data-source>
        <action-date>
          <date>20051008</date>
        </action-date>
      </classification-ipcr>
      <classification-ipcr sequence="7">
        <text>H04Q   3/72        20060101A N20051008RMEP</text>
        <ipc-version-indicator>
          <date>20060101</date>
        </ipc-version-indicator>
        <classification-level>A</classification-level>
        <section>H</section>
        <class>04</class>
        <subclass>Q</subclass>
        <main-group>3</main-group>
        <subgroup>72</subgroup>
        <classification-value>N</classification-value>
        <generating-office>
          <country>EP</country>
        </generating-office>
        <classification-status>R</classification-status>
        <classification-data-source>M</classification-data-source>
        <action-date>
          <date>20051008</date>
        </action-date>
      </classification-ipcr>
    </classifications-ipcr>
    <classification-national>
      <country>US</country>
      <main-classification>
        <text>379219000</text>
        <class>379</class>
        <subclass>219000</subclass>
      </main-classification>
      <further-classification sequence="1">
        <text>370352000</text>
        <class>370</class>
        <subclass>352000</subclass>
      </further-classification>
      <further-classification sequence="2">
        <text>709206000</text>
        <class>709</class>
        <subclass>206000</subclass>
      </further-classification>
    </classification-national>
    <patent-classifications>
      <patent-classification sequence="1">
        <classification-scheme office="EP" scheme="CPC">
          <date>20130101</date>
        </classification-scheme>
        <classification-symbol>H04L-065/1009</classification-symbol>
        <section>H</section>
        <class>04</class>
        <subclass>L</subclass>
        <main-group>65</main-group>
        <subgroup>1009</subgroup>
        <symbol-position>F</symbol-position>
        <classification-value>I</classification-value>
        <classification-status>B</classification-status>
        <classification-data-source>H</classification-data-source>
        <action-date>
          <date>20131019</date>
        </action-date>
      </patent-classification>
      <patent-classification sequence="2">
        <classification-scheme office="EP" scheme="CPC">
          <date>20130101</date>
        </classification-scheme>
        <classification-symbol>H04L-029/06</classification-symbol>
        <section>H</section>
        <class>04</class>
        <subclass>L</subclass>
        <main-group>29</main-group>
        <subgroup>06</subgroup>
        <symbol-position>L</symbol-position>
        <classification-value>I</classification-value>
        <classification-status>B</classification-status>
        <classification-data-source>H</classification-data-source>
        <action-date>
          <date>20131005</date>
        </action-date>
      </patent-classification>
      <patent-classification sequence="3">
        <classification-scheme office="EP" scheme="CPC">
          <date>20130101</date>
        </classification-scheme>
        <classification-symbol>H04L-029/06027</classification-symbol>
        <section>H</section>
        <class>04</class>
        <subclass>L</subclass>
        <main-group>29</main-group>
        <subgroup>06027</subgroup>
        <symbol-position>L</symbol-position>
        <classification-value>A</classification-value>
        <classification-status>B</classification-status>
        <classification-data-source>H</classification-data-source>
        <action-date>
          <date>20131005</date>
        </action-date>
      </patent-classification>
      <patent-classification sequence="4">
        <classification-scheme office="EP" scheme="CPC">
          <date>20130101</date>
        </classification-scheme>
        <classification-symbol>H04L-051/00</classification-symbol>
        <section>H</section>
        <class>04</class>
        <subclass>L</subclass>
        <main-group>51</main-group>
        <subgroup>00</subgroup>
        <symbol-position>L</symbol-position>
        <classification-value>A</classification-value>
        <classification-status>B</classification-status>
        <classification-data-source>H</classification-data-source>
        <action-date>
          <date>20170502</date>
        </action-date>
      </patent-classification>
      <patent-classification sequence="5">
        <classification-scheme office="EP" scheme="CPC">
          <date>20130101</date>
        </classification-scheme>
        <classification-symbol>H04L-065/1043</classification-symbol>
        <section>H</section>
        <class>04</class>
        <subclass>L</subclass>
        <main-group>65</main-group>
        <subgroup>1043</subgroup>
        <symbol-position>L</symbol-position>
        <classification-value>I</classification-value>
        <classification-status>B</classification-status>
        <classification-data-source>H</classification-data-source>
        <action-date>
          <date>20131019</date>
        </action-date>
      </patent-classification>
      <patent-classification sequence="6">
        <classification-scheme office="EP" scheme="CPC">
          <date>20130101</date>
        </classification-scheme>
        <classification-symbol>H04L-065/1069</classification-symbol>
        <section>H</section>
        <class>04</class>
        <subclass>L</subclass>
        <main-group>65</main-group>
        <subgroup>1069</subgroup>
        <symbol-position>L</symbol-position>
        <classification-value>I</classification-value>
        <classification-status>B</classification-status>
        <classification-data-source>H</classification-data-source>
        <action-date>
          <date>20130926</date>
        </action-date>
      </patent-classification>
      <patent-classification sequence="7">
        <classification-scheme office="EP" scheme="CPC">
          <date>20130101</date>
        </classification-scheme>
        <classification-symbol>H04M-003/42</classification-symbol>
        <section>H</section>
        <class>04</class>
        <subclass>M</subclass>
        <main-group>3</main-group>
        <subgroup>42</subgroup>
        <symbol-position>L</symbol-position>
        <classification-value>A</classification-value>
        <classification-status>B</classification-status>
        <classification-data-source>H</classification-data-source>
        <action-date>
          <date>20131005</date>
        </action-date>
      </patent-classification>
      <patent-classification sequence="8">
        <classification-scheme office="EP" scheme="CPC">
          <date>20130101</date>
        </classification-scheme>
        <classification-symbol>H04M-003/5307</classification-symbol>
        <section>H</section>
        <class>04</class>
        <subclass>M</subclass>
        <main-group>3</main-group>
        <subgroup>5307</subgroup>
        <symbol-position>L</symbol-position>
        <classification-value>A</classification-value>
        <classification-status>B</classification-status>
        <classification-data-source>H</classification-data-source>
        <action-date>
          <date>20131005</date>
        </action-date>
      </patent-classification>
      <patent-classification sequence="9">
        <classification-scheme office="EP" scheme="CPC">
          <date>20130101</date>
        </classification-scheme>
        <classification-symbol>H04M-003/54</classification-symbol>
        <section>H</section>
        <class>04</class>
        <subclass>M</subclass>
        <main-group>3</main-group>
        <subgroup>54</subgroup>
        <symbol-position>L</symbol-position>
        <classification-value>A</classification-value>
        <classification-status>B</classification-status>
        <classification-data-source>H</classification-data-source>
        <action-date>
          <date>20131005</date>
        </action-date>
      </patent-classification>
      <patent-classification sequence="10">
        <classification-scheme office="EP" scheme="CPC">
          <date>20130101</date>
        </classification-scheme>
        <classification-symbol>H04M-007/128</classification-symbol>
        <section>H</section>
        <class>04</class>
        <subclass>M</subclass>
        <main-group>7</main-group>
        <subgroup>128</subgroup>
        <symbol-position>L</symbol-position>
        <classification-value>I</classification-value>
        <classification-status>B</classification-status>
        <classification-data-source>H</classification-data-source>
        <action-date>
          <date>20131005</date>
        </action-date>
      </patent-classification>
      <patent-classification sequence="11">
        <classification-scheme office="EP" scheme="CPC">
          <date>20130101</date>
        </classification-scheme>
        <classification-symbol>H04Q-003/72</classification-symbol>
        <section>H</section>
        <class>04</class>
        <subclass>Q</subclass>
        <main-group>3</main-group>
        <subgroup>72</subgroup>
        <symbol-position>L</symbol-position>
        <classification-value>A</classification-value>
        <classification-status>B</classification-status>
        <classification-data-source>H</classification-data-source>
        <action-date>
          <date>20131005</date>
        </action-date>
      </patent-classification>
    </patent-classifications>
    <number-of-claims>34</number-of-claims>
    <exemplary-claim>1</exemplary-claim>
    <figures>
      <number-of-drawing-sheets>16</number-of-drawing-sheets>
      <number-of-figures>16</number-of-figures>
      <image-key data-format="questel">US6185288</image-key>
    </figures>
    <invention-title format="original" lang="en" id="title_en">Multimedia call signalling system and method</invention-title>
    <references-cited>
      <citation srep-phase="examiner">
        <patcit num="1">
          <text>BAUDOIN CLAUDE R</text>
          <document-id>
            <country>US</country>
            <doc-number>5406557</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5406557</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="examiner">
        <patcit num="2">
          <text>BELL ROBERT T, et al</text>
          <document-id>
            <country>US</country>
            <doc-number>5594732</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5594732</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="examiner">
        <patcit num="3">
          <text>GORDON ALASTAIR T</text>
          <document-id>
            <country>US</country>
            <doc-number>5608786</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5608786</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="examiner">
        <patcit num="4">
          <text>TANG HIEN, et al</text>
          <document-id>
            <country>US</country>
            <doc-number>5630060</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5630060</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="examiner">
        <patcit num="5">
          <text>EVERETT DAVID ALAN, et al</text>
          <document-id>
            <country>US</country>
            <doc-number>5640446</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5640446</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="examiner">
        <patcit num="6">
          <text>BELL ROBERT T, et al</text>
          <document-id>
            <country>US</country>
            <doc-number>5659542</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5659542</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="examiner">
        <patcit num="7">
          <text>RETO LUIS, et al</text>
          <document-id>
            <country>US</country>
            <doc-number>5825857</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5825857</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="examiner">
        <patcit num="8">
          <text>LINDQUIST JAN, et al</text>
          <document-id>
            <country>US</country>
            <doc-number>5852660</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5852660</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="examiner">
        <patcit num="9">
          <text>LEVAC RONALD A, et al</text>
          <document-id>
            <country>US</country>
            <doc-number>5872926</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5872926</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="examiner">
        <patcit num="10">
          <text>CSAPO JOHN S</text>
          <document-id>
            <country>US</country>
            <doc-number>5910946</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5910946</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="examiner">
        <patcit num="11">
          <text>ALLISON SR JEFFERY E, et al</text>
          <document-id>
            <country>US</country>
            <doc-number>5917900</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5917900</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="examiner">
        <patcit num="12">
          <text>IWATA ATSUSHI</text>
          <document-id>
            <country>US</country>
            <doc-number>5933425</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5933425</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="examiner">
        <patcit num="13">
          <text>COURVOISIER DENIS</text>
          <document-id>
            <country>US</country>
            <doc-number>5943412</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5943412</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="examiner">
        <patcit num="14">
          <text>MORDOWITZ TAMAR, et al</text>
          <document-id>
            <country>US</country>
            <doc-number>6011794</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US6011794</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="applicant">
        <patcit num="15">
          <text>COHEN ROBERTA S, et al</text>
          <document-id>
            <country>US</country>
            <doc-number>4837798</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US4837798</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="applicant">
        <patcit num="16">
          <text>BALES BRUCE M, et al</text>
          <document-id>
            <country>US</country>
            <doc-number>5416834</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5416834</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="examiner">
        <nplcit num="1">
          <text>John Enck, Managing Multivendor Networks, Mar. 20, 1997, Que, Macmillan Computer Publishing, ISBN 0789711796, Chapter 1.</text>
        </nplcit>
      </citation>
    </references-cited>
    <parties>
      <applicants>
        <applicant data-format="original" app-type="applicant" sequence="1">
          <addressbook lang="en">
            <orgname>Nortel Networks Limited</orgname>
            <address>
              <address-1>Montreal, CA</address-1>
              <city>Montreal</city>
              <country>CA</country>
            </address>
          </addressbook>
          <nationality>
            <country>CA</country>
          </nationality>
        </applicant>
        <applicant data-format="questel" app-type="applicant" sequence="2">
          <addressbook lang="en">
            <orgname>NORTEL NETWORKS</orgname>
          </addressbook>
          <nationality>
            <country>CA</country>
          </nationality>
        </applicant>
      </applicants>
      <inventors>
        <inventor data-format="original" sequence="1">
          <addressbook lang="en">
            <name>Wong, Chi-Keung</name>
            <address>
              <address-1>Nepean, CA</address-1>
              <city>Nepean</city>
              <country>CA</country>
            </address>
          </addressbook>
          <nationality>
            <country>CA</country>
          </nationality>
        </inventor>
      </inventors>
    </parties>
    <examiners>
      <primary-examiner>
        <name>Zele, Krista</name>
      </primary-examiner>
    </examiners>
    <lgst-data>
      <lgst-status>EXPIRED</lgst-status>
    </lgst-data>
  </bibliographic-data>
  <abstract format="original" lang="en" id="abstr_en">
    <p id="P-EN-00001" num="00001">
      <br/>
      A system and method for performing call signalling for multimedia call setups.
      <br/>
      A user equipped with calling terminals of various types may initiate a call from any of these terminals, and the call is intercepted and handled by the system.
      <br/>
      A calling agent looks up an E-mail address for the called party, and sends a setup request E-mail to a called agent associated with the called party.
      <br/>
      The called agent determines the current terminal that the callee is using, and together with the calling agent a call medium and other parameters are established.
      <br/>
      Then a connection is made between a calling terminal and the current terminal.
      <br/>
      This provides a generic signalling system for a callee using a wireline terminal, wireless terminal, or H.323 terminal to be connected to a called terminal also being any one of these or other types.
    </p>
  </abstract>
  <description format="original" lang="en" id="desc_en">
    <heading>FIELD OF THE INVENTION</heading>
    <p num="1">The invention relates to a system and method for multimedia call signalling.</p>
    <heading>BACKGROUND OF THE INVENTION</heading>
    <p num="2">There are many known call setup methods for use in setting up calls within the PSTN (public switched telephone network) though new methods are still evolving.</p>
    <p num="3">
      Data telephony, over a data network such as the Internet for example, will likely soon start to carry a significant amount of multimedia traffic, and has its own call setup methods for establishing calls over the relevant data network.
      <br/>
      Various different data networks exist including the Internet, wireline networks, cellular networks, and PCS (personal communications systems) networks for example.
      <br/>
      In addition, calls other than voice calls of course are establishable over such data networks.
      <br/>
      These include FAX calls, video calls, T.120 conference calls etc.
    </p>
    <p num="4">
      When a user wants to make a regular phone call, the user's phone informs a switch via a sequence of electrical signals, or a message.
      <br/>
      Software in the switch will engage a process to find out where the called phone is located by performing an address translation.
      <br/>
      The address translation will return the information related to which trunk and which protocol should be used to signal a remote CO (captive office) which will ring the called phone.
    </p>
    <p num="5">
      In the case of an H.323 terminal, a call setup request is sent in a message to a component called the gatekeeper to perform address translation.
      <br/>
      The address passed to the gatekeeper can be a symbolic name or an Internet address.
      <br/>
      In the current H.323 implementation, the gatekeeper will use the H.245 and H.225 protocols to complete the call.
    </p>
    <p num="6">
      It would be desirable to be able to place calls of various types from a PSTN based terminal for example for connection to a data network based terminal, and call setup methods must be established for this.
      <br/>
      Existing solutions have focused on a few particular instances of the problem such as Internet to PSTN voice calls.
    </p>
    <p num="7">These existing solutions provide a single solution for one or two media, but do not provide an approach to solving the problem in a general fashion.</p>
    <p num="8">One of the technical challenges in solving this problem is the complexity and diversity of the types of call processing equipment, call transmission media and protocols involved all of which are based on various technologies.</p>
    <heading>SUMMARY OF THE INVENTION</heading>
    <p num="9">It is an object of the invention to obviate or mitigate one or more of the above identified disadvantages.</p>
    <p num="10">According to a first broad aspect, the invention provides a multimedia call signalling method comprising the steps of: a calling terminal initiating a call with a call setup request including a user identifier; a calling agent receiving the call setup request and looking up an E-mail address corresponding with the user identifier; the calling agent sending a call setup E-mail with said E-mail address to a called agent; the called agent looking up a current terminal identifier which identifies a current terminal associated with the user identifier on the basis of the call setup E-mail message; and the called agent and the calling agent coordinating a call setup between the calling terminal and the current terminal.</p>
    <p num="11">According to a second broad aspect, the invention provides a multimedia call signalling end system comprising a calling agent for connection to a network for coordinating the establishment of a connection between a calling terminal served by the calling agent and another terminal, the calling agent comprising: a) means for receiving a call setup request from the calling terminal including a user identifier; b) means for looking up an E-mail address corresponding with the user identifier; c) means for generating a call setup E-mail with said E-mail address and mailing it to said address; and d) first means for coordinating the establishment of an outgoing connection between the calling terminal and the another terminal.</p>
    <p num="12">
      A first element empowering this invention is based on an encapsulation principle.
      <br/>
      Because different telephony and communication networks use different signalling protocols, to make the signalling protocol independent the call setup requests are encapsulated in a common format.
      <br/>
      This invention devises a scheme to encapsulate an outgoing call request with all associated attributes preferably using the MIME (Multipurpose Internet Mail Extension) principle from Internet Engineering Task Force (IETF).
    </p>
    <p num="13">
      A second element empowering this invention is the use of an E-mail address or an electronic address for the user.
      <br/>
      Once used, this conceals the discrepancies or deficiencies of the terminals to be connected and broadens the choice of the medium which can be used for the connection.
    </p>
    <p num="14">
      A third preferred element empowering this invention is the use of MIME application typing so that an electronic message server can associate any required processing with various components in the message.
      <br/>
      As a result, this invention provides a generic mechanism to support multi-media multi-channel and multi-device communication call setup.
    </p>
    <p num="15">
      The broad application domain of the signalling protocol allows it to be applied to PSTN, Internet and cable networks and to other network types as it becomes appropriate.
      <br/>
      It also enables the establishment of multi-media phone calls that support multiple terminals and connections.
    </p>
    <p num="16">Advantageously, the system provided by some embodiments of the invention is applicable to existing telephony equipment without the need for any change to customer equipment.</p>
    <heading>BRIEF DESCRIPTION OF THE DRAWINGS</heading>
    <p num="17">
      Preferred embodiments of the invention will now be described with reference to the attached drawings in which:
      <br/>
      FIG. 1 is a logical block diagram of a terminal as it would be viewed by a multimedia call signalling system according to an embodiment of the invention;
      <br/>
      FIG. 2 is an abstract model of a multimedia call signalling system according to an embodiment of the invention;
      <br/>
      FIG. 3 is an example call setup walkthrough;
      <br/>
      FIG. 4 is an abstract model of the system of FIG. 2 including a remote configuration;
      <br/>
      FIGS. 5a-5d are state diagrams for a Calling Agent, calling process, Called Agent and called process; and
      <br/>
      FIGS. 6-12 are signal flow diagrams for further examples of call setup functions and telephony services.
    </p>
    <heading>DETAILED DESCRIPTION OF THE PREFERRED EMBODIMENTS</heading>
    <p num="18">
      FIG. 1 is a logical block diagram which includes basically all the user interface and functional blocks that might be accessible to a particular user.
      <br/>
      It is intended to be a somewhat comprehensive view of all the ways a user might be capable of communicating.
      <br/>
      In reality, a particular user would typically have access only to a subset of the functionality illustrated in FIG. 1.
      <br/>
      The user equipment is generally indicated by 5, and the network is generally indicated by 7.
      <br/>
      The user equipment 5 includes various user interface components generally indicated by 10 such as a camera/scanner 11, display 12, keypad 14, buttons and indicators 16, media player 18, and media recorder 20.
      <br/>
      These are each connected to one or more service applications generally indicated by 22 which include a video service 24, a fax service 26, a web service 28, and a voice service 30.
      <br/>
      Each of the service applications 22 has access to the user interface components 10 as required.
      <br/>
      The voice service 30 is also interfaced with a voice-activated services service application 32.
    </p>
    <p num="19">
      Each of the service applications 22 is interfaced to the network 7 through a respective medium protocol generally indicated by 38.
      <br/>
      The network 7 may include a number of different network types, such as a PSTN (public switched telephone network) 34, a cable network 35, and the Internet 36.
      <br/>
      The medium protocols 38 include video 40, fax 42, T.120 conferencing 44, H.323 46, wireless/wireline telephony 47, HTTP (hyper-text transport protocol) 48, and IMAP (Internet Mail Access Protocol) 52.
      <br/>
      The interfaces between the network 7 and the terminal 5 are generally indicated by 53 and include a transport layer protocol 54 and a physical layer protocol 55.
      <br/>
      The transport layer protocol 54 provides an application independent transport mechanism.
      <br/>
      FIG. 1 has been simplified to collapse the ISO's Session Layer, Network Layer, Transport Layer and Link Layer to just the Transport Layer.
      <br/>
      While FIG. 1 is intended to be more or less comprehensive regarding what capabilities a user's equipment might possess, it is to be understood that a user may indeed have additional equipment for interfacing with the PSTN, cable, the Internet, or some other network, and this equipment may be used in the context of the invention as well.
      <br/>
      The equipment of FIG. 1 may reside on a number of different terminals such as a video terminal, a fax machine, a WWW connected computer, a wireline terminal, wireless terminal, or an H.323 terminal.
      <br/>
      Furthermore, the view of FIG. 1 is a logical one, so actual components would likely be physically connected differently.
    </p>
    <p num="20">
      An abstract view of a multimedia call signalling system (MCSS) according to an embodiment of the invention is shown in FIG. 2.
      <br/>
      Whenever any connection is to be made there will always be a caller having a calling terminal and a callee having a called terminal.
      <br/>
      In FIG. 2, the caller's user equipment (5 in FIG. 1) is generally indicated by 100 and includes various types of terminal including a wireline terminal 102, a wireless terminal 104, and an H.323 terminal 106.
      <br/>
      The communications network is again generally indicated by 7.
      <br/>
      The network 7 includes an outgoing MCSS end system 80 and an incoming MCSS end system 82.
      <br/>
      The outgoing MCSS end system 80 is the portion of the MCSS involved with handling an outgoing call, and this cooperates with the incoming MCSS end system 82 which is the portion of the MCSS which handles an incoming call request.
      <br/>
      In the example of FIG. 2, there are two MCSS end systems 80,82, the outgoing MCSS end system handling outgoing call requests, and the incoming MCSS end system handling incoming call requests received from the first MCSS end system.
      <br/>
      A completely equipped MCSS end system would be equipped to handle both incoming call requests from other end systems and outgoing call requests to other end systems, and thus to fulfil the roles of both an outgoing MCSS end system and an incoming MCSS end system.
      <br/>
      A connection which is established by such an MCSS end system while acting upon an outgoing call request may be referred to as an outgoing connection, and a connection which is established by such an MCSS end system while acting on an incoming call request may be referred to as an incoming connection.
      <br/>
      In this abstract view, this network includes various subnetworks required to provide communications links to the caller's terminals.
      <br/>
      These are identified further below.
      <br/>
      Each of the caller's terminals 102,104,106 are connected the relevant portion of the network through a respective terminal network interface 108,110,112.
      <br/>
      The H.323 terminal 106 may be connected to the network 7 through a dial-up link using Point to Point Protocol (PPP) via a modem, directly connected to the network over Ethernet, connected through IP over ATM or IP over cable modem.
      <br/>
      The terminal network interface 108 for the wireline terminal 102 will be a twisted pair connecting the terminal to a captive office or a public branch exchange (PBX).
      <br/>
      For the wireless terminal 104, the terminal network interface 110 will be the wireless link which connects the wireless terminal to a ground station.
    </p>
    <p num="21">
      The MCSS is implemented in large part by a class of entities which will be referred to herein as Call Setup Agents.
      <br/>
      There are three types of Call Setup agents which are used, and these will be referred to as Calling Agents, Called Agents, and Call Agents.
      <br/>
      An outgoing call is handled by a Calling Agent 114, and an incoming call is handled by a Called Agent 116.
      <br/>
      Each MCSS end system 80,82 has a respective Call Agent 115,117 which acts as an interface to the MCSS from telephone company OA&amp;M systems 123,125 and from users through respective user interfaces 119,121.
      <br/>
      Each of these agents are described in detail below.
      <br/>
      For the purpose of this example, it is assumed that the Calling Agent 114 spawns a Calling Process 187 to handle each outgoing call and that the Called Agent 116 spawns a Called Process 189 to handle each incoming call.
    </p>
    <p num="22">The terminal network interfaces 108,110,112 for calling terminals 102,104,106 are connected to the Calling Agent 114 through respective local network interfaces 109,111,113 and a calling presentation driver 120.</p>
    <p num="23">The presentation driver 120 is responsible for exchanging data between the Calling Agent 114 and an appropriate one of the local network interfaces 109,111,113 (and subsequently with the appropriate terminal).</p>
    <p num="24">
      Each of the local network interfaces 109,111,113 may be considered a CIP (call intercept point), or a point where call signalling is intercepted and diverted from its conventional flow and converted to signals according to the MCSS provided by this embodiment of the invention.
      <br/>
      The local network interfaces have physical layer protocols which provide the physical interfaces to the network.
      <br/>
      Some examples include Ethernet, Point to Point Protocol, SLIP protocol, ATM, Frame Relay, analog signalling for POTS, ISDN Basic Rate Interface physical layer, TV Cable, and CDMA for Wireless Networks.
    </p>
    <p num="25">
      The calling presentation driver 120 has access to a terminal profile database 122 which contains information on the user's terminals 102,104,106 and to a user profile database 124 which contains information on the user per se.
      <br/>
      The terminal profile for a selected one of terminals 102,104,106 is consulted by the presentation driver 120 to decide what type of conversion is required if any, in passing data to and from the selected one of the subscriber terminals 102,104,106.
    </p>
    <p num="26">
      The callee's user equipment (5 in FIG. 1) is generally indicated by 130 and is basically identical to the caller's user equipment 100.
      <br/>
      Again there are three terminals 132,134,136 connected through respective terminal network interfaces 138,140,142, to the incoming MCSS end system 82 through a respective local network interface 139,141,143, a called presentation driver 146 and the previously identified Called Agent 116.
    </p>
    <p num="27">
      The called presentation driver 146 for the Called Agent 116 has access to a terminal profile database 148 which contains information on the called user's terminals, and has access to a user profile database 150.
      <br/>
      The terminal profile database 148 will be consulted for a terminal profile for a selected one of terminals 132,134,136 to decide what type of conversion if any is required in passing data to and from the selected terminal during call setup.
    </p>
    <p num="28">
      The presentation drivers 120,146 are also responsible for the presentation and routing of the call to the callee's current terminal which may be on a different calling medium that the calling terminal.
      <br/>
      This is a function of signalling the callee's current terminal using the appropriate local network interface depending on the current terminal of the user.
      <br/>
      The choice of terminal is not made by the presentation driver.
      <br/>
      Rather, it is made by the Called Agent 116.
      <br/>
      The presentation drivers 120,146, must execute any required signalling conversions from one calling medium to another.
    </p>
    <p num="29">
      The presentation drivers use the terminal profile to decide what kind of conversion is needed.
      <br/>
      When a call is established, there are one or more connections (call streams).
      <br/>
      Each stream carries one type of data, for example voice, video, graphic, or data.
      <br/>
      The presentation drivers will convert data and route it to the appropriate local network interface.
      <br/>
      For example, a POTS-to-POTS call will always route through a line card.
      <br/>
      For video signals from a video-on-demand call, the data will be routed to a co-axial cable.
      <br/>
      As discussed below, during call setup negotiation, a medium for use in establishing a connection is determined.
      <br/>
      The medium will require a particular transmission protocol which may differ from that expected or generated by either or both of the calling terminal and the user's current terminal.
      <br/>
      The calling presentation driver 120 must perform a receive type conversion on signals received over the connection from the transmission protocol to the calling terminal's native signalling protocol if these protocols differ, and must similarly perform a transmit type conversion on signals to be transmitted over the connection from the calling terminal's native signalling protocol to the transmission protocol if these protocols differ.
      <br/>
      Similarly, the called presentation driver 146 must perform a receive type conversion on signals received over the connection from the transmission protocol to the callee's current terminal's native signalling protocol if these protocols differ, and must perform a transmit type conversion on signals to be transmitted over the connection from the current terminal's native signalling protocol to the transmission protocol if these protocols differ.
    </p>
    <p num="30">
      The presentation driver may, for example, perform codec conversion to convert between different codecs used by two different terminals.
      <br/>
      For example, one end of the call may be a POTS terminal, the codec used is 64 KPCM (64 Kilobit Pulse Code Modulation) in order to drive a PSTN line card while the other end may be an H.323 terminal that uses a G.723.1 codec.
      <br/>
      In this case the presentation driver has to convert the G.723.1 codec to the 64 KPCM voice data format to deliver any voice attachment associated with the call setup.
    </p>
    <p num="31">
      When graphic data is exchanged, the terminal may not be able to support a certain format of graphics and so the calling/Called Agent will instruct the respective presentation driver to convert to the appropriate format.
      <br/>
      A fax signal is a form of graphic format.
      <br/>
      The fax machine is a terminal which may not support a specific type of encoding.
      <br/>
      The presentation driver may have to convert it to an encoding method acceptable go the fax machine.
    </p>
    <p num="32">In some case, a JPEG picture may be sent to a fax machine, and in this case the presentation driver may be configured to convert the data to a format accepted by the fax machine.</p>
    <p num="33">
      Video has many different formats.
      <br/>
      Most of the time a terminal would have various different software capable of handle various video formats.
      <br/>
      In some situations the terminal will not accept certain video formats.
      <br/>
      Video conversion is needed when no capable software is available.
      <br/>
      For example a terminal might only be able to play MPEG 1 (Motion Picture Expert Group standard) video in a situation where only MPEG 4 video is sent.
      <br/>
      Rather than reject the call, if the customer has subscribed to the conversion feature, the presentation driver can perform the conversion from MPEG 4 to MPEG 1.
    </p>
    <p num="34">
      Video conversion is also needed when no compatible hardware is available.
      <br/>
      For example, when an MPEG video is requested to be send out to a TV via cable, the data signal is not compatible.
      <br/>
      The presentation driver may be configured to convert from the MPEG video to the cable signal.
    </p>
    <p num="35">
      A third video conversion scenario involves rate adaptation.
      <br/>
      If the link in 28.8K baud, and the encoded data rate for a video stream broadcast is 56K baud, the presentation driver will convert the signal format suitable for 56K data rate is 28.8 data rate.
      <br/>
      Sometimes this conversion may require a format change, e.g. from MPEG to VxTreme.
    </p>
    <p num="36">
      Text may have to be converted from one encoding scheme to another.
      <br/>
      For example, ASCII (American Standard Code for Information Inter-exchange) text may be converted to ISO Unicode and vice versa.
      <br/>
      For a terminal, which has no display, the text data can be converted to speech.
    </p>
    <p num="37">
      Referring again to FIG. 2, each of the Calling Agent 114 and Called Agent 116 are connected to a PSTN carrier network 170 forming part of network 7 through a respective telephony signalling component 172,174.
      <br/>
      Similarly, they are each connected to a PSN (packet switching network) carrier network 178 forming part of network 7 through a respective electronic messaging interface 180,182 (or E-mail server) and through a respective Internet telephony signalling components 181,183.
      <br/>
      The electronic messaging interfaces 180,182 are preferably mail servers and will be referred to as such in what follows, and more preferably are MIME E-mail servers.
      <br/>
      The PSTN carrier network 170 and the PSN carrier network 178 may be connected to each other through a bridge 184.
      <br/>
      The PSN carrier network 178 is any traditional Data Network and, for example might be ATM, Internet or Frame Relay.
    </p>
    <p num="38">
      The mail servers 180,182 are used to send E-mail from the Calling Agent 114 to the Called Agent 116.
      <br/>
      They also assume the responsibility of delivering reply mail from the Called Agent 116 to the Calling Agent 114.
      <br/>
      These servers preferably have the functionality of conventional mail servers in addition to some extra processing functions for realizing the MCSS.
      <br/>
      When the Calling/Called Agent 114,116 starts up, it will register with the respective mail server 180,182.
      <br/>
      When one of the mail servers 180,182 receives an E-mail, it will strip the header and pass the contents to the Calling Agent 116 or Called Agent 114.
    </p>
    <p num="39">The mail servers 114,116 preferably take advantage of a conventional mail server's features which include:</p>
    <p num="40">
      1.
      <br/>
      Address resolution;
      <br/>
      2.
      <br/>
      Universal support around different networks;
      <br/>
      3.
      <br/>
      Store and forward technology that can provide a reasonably safe delivery transport layer;
      <br/>
      4.
      <br/>
      Message storage server which manages the messages;
      <br/>
      5.
      <br/>
      Provides notification service from the network; and
      <br/>
      6.
      <br/>
      Wide support to access the contents.
    </p>
    <p num="41">
      Preferably the mail servers 180,182 use the MIME (Multipurpose Internet Mail Extension) format, and this will be assumed in what follows.
      <br/>
      It is to be understood that while MIME encoding is the most convenient presently known mechanism for formatting the information to be included in the various electronic messages, other encoding and formatting techniques may be used, as appropriate.
      <br/>
      It is further to be understood that the mail servers 180,182 can be replaced by any reliable electronic message transport mechanism which provides the same or similar function.
      <br/>
      For example, each mail account could be replaced by a URL (universal resource locator) in which case the electronic messages would be delivered to the Called Agent on a web server of the designated URL embedded in a web page.
      <br/>
      As another example, a direct TCP/IP connection could be used to transfer the message between the Calling Agent and the Called Agent.
      <br/>
      In this case, the electronic address of the Calling Agent would be a combination of a TCP/IP address and a service port number of the TCP/IP connection.
    </p>
    <p num="42">
      The PSTN signalling components 172,174 handle the PSTN telephony protocols such as ISDN Primary Rate, ISDN basic rate or Common Channel Signalling Number 7.
      <br/>
      Other per trunk signalling is also supported by these components.
      <br/>
      Their main function is to complete a PSTN call connection at the last phase of a call setup.
      <br/>
      The PSTN signalling components 172,174 are different from the PSTN local network interfaces 109,111.
      <br/>
      The PSTN local network interfaces 109,111 intercept calls from the wireline, wireless terminals 102,104 and pass them to the presentation driver 120, whereas the telephony signalling components 172,174 are involved with the actual connection of a call after it has been intercepted, and a decision has been made to connect it over the PSTN carrier network 170.
    </p>
    <p num="43">
      The Internet signalling components 181,183 handle Internet call connection at the last phase of a call setup.
      <br/>
      These are usually H.323 Gatekeepers.
      <br/>
      This Gatekeeper is different from the Call Interception Point Gatekeeper which exists in the local network interface 113 for the H.323 terminal 106.
      <br/>
      The Gatekeeper in the local network interface 113 intercepts call requests from the H.323 terminal and passes them to the Presentation driver 120, whereas the Gatekeeper in the Internet signalling components 181,183 are involved with the actual connection of a call after it has been intercepted and a decision has been made to connect it over the PSN carrier network 178.
    </p>
    <p num="44">
      The bridge 184 links the PSTN 170 and PSN 178 together.
      <br/>
      It is usually called the Voice over IP Gateway.
      <br/>
      This gateway provides three major functions:
      <br/>
      1.
      <br/>
      Signalling conversion--During the call setup phase, the call setup signalling protocol from one type of network is converted to another.
      <br/>
      2. Directory services--The directory system for the PSTN and PSN does not have to be the same.
      <br/>
      If the PSN is ATM or X.25 it can be using the E.164 numbering scheme, and there is still the requirement to do a conversion between the letter, region and captive office.
      <br/>
      3. Voice transcoding--The codec for the Wireline is 64 KPCM, the coded for Wireless can be a different type of CELPS (code excited linear prediction) and the Internet can be G.721 or G.723. In order to relay the voice signal between the PSN and PSTN, the codec has to be changed form one format to another.
    </p>
    <p num="45">
      Each of the Calling Agent 114 and the Called Agent 116 are also connected to a respective address database 186,188 containing a translation between user identifiers and corresponding E-mail addresses as described in detail below.
      <br/>
      While shown as two logical entities, the address databases 186,188 may consist of one or more actual databases.
      <br/>
      Furthermore, the E-mail addresses may be replaced by any electronic address used by an appropriate message deliver transport mechanism.
    </p>
    <p num="46">
      The Calling Agent 114 and the Called Agent 116 are software entities each associated with (logically connected to) mail servers 180,182.
      <br/>
      They are activated to process the E-mail messages when these are received by the associated mail server.
      <br/>
      The mechanism which the mail servers use to trigger the activation of the Calling and Called Agents 114,116 is an application class identified in the application class tag forming part of the E-mail message body in MIME format defined by this embodiment of the invention.
    </p>
    <p num="47">
      The Calling Agent 114 is the entity which handles outgoing calls.
      <br/>
      The main functions of the Calling Agent 114 is to:
      <br/>
      1. perform an E-mail address resolution from the called number or Internet address (fully resolved address or alias) requested by the caller;
      <br/>
      2. create a unique reference identification for each outgoing call;
      <br/>
      3. construct an E-mail to be sent to the Called Agent 116;
      <br/>
      4. process the negotiation of call setup parameters; and
      <br/>
      5. participate in the initiation of the establishment of the real call connection after the callee terminal address and the call medium is received and settled through the negotiation process.
    </p>
    <p num="48">
      It should be noted that through the address resolution using the information from the address database 186, the call can be setup on behalf of other devices rather than for the terminal from which the user initiated the request.
      <br/>
      This type of request would be constructed through an appropriate user interface 119.
      <br/>
      For example, a user can use the system to set up a call between the cable company and his/her cable reception box for a movie on demand.
      <br/>
      The Calling Agent 114 will recognize the type of call, movie on demand and engage in a dialog to prompt for more information on what movie is requested.
      <br/>
      The Calling Agent 114 will include the information in a mail message as part of a call data parameter using a CALL_DATA option and will send the message to the cable company's Called Agent.
      <br/>
      When the cable company's Called Agent 116 receives the request, it can reply with an acceptance mail and initiate the downloading of the movie either through multicast or by injecting the video to the cable co-axial circuit connected to the user.
    </p>
    <p num="49">
      Every customer will have a Calling Agent 114 to perform the outgoing call function.
      <br/>
      The actual implementation can be done by a process, a thread or a single process action on data structures which represent the Calling Agent 114.
      <br/>
      Because the Calling Agent 114 is not necessarily active 100% of the time, and may be event driven, it is more complicated to implement the Calling Agent other than by using the separate process or thread technique.
    </p>
    <p num="50">
      FIG. 5a is a state diagram for the Calling Agent 114.
      <br/>
      Each user has one Calling Agent 114 to handle the outgoing call.
      <br/>
      Once it is started, it may create clones of itself to handle multiple calls from one or different terminals from the same user.
      <br/>
      In this example, it is assumed that the Calling Agent 114 spawns a Calling Process 187 to handle each call.
      <br/>
      The state transitions for the Calling Agent 114 are defined in the following table:
    </p>
    <p num="51">
      --
      <br/>
      --      State          Transition Condition        New State
      <br/>
      --      Start          Succeed on initialization and Idle
      <br/>
      --                     register with the Signalling
      <br/>
      --                     Components using the user's
      <br/>
      --                     account
      <br/>
      --      Idle           When a call request is received Spawn
      <br/>
      --      Spawn          Successfully spawn a calling Idle
      <br/>
      --                     process to process the call
      <br/>
      --      Spawn          Failed to spawn a calling process Spawn
      <br/>
      --                                                 Failed
      <br/>
      --      Spawn Failed   Send reject request to the user Idle
      <br/>
      --      Idle           Received Reply              Update
      <br/>
      --      Update         Relayed the information to the Idle
      <br/>
      --                     Calling Process
    </p>
    <p num="52">State descriptions:</p>
    <p num="53">
      --
      <br/>
      --      State            Description
      <br/>
      --      Idle             Initial state
      <br/>
      --      Spawn            Spawn a Calling Process
      <br/>
      --      Spawn Failed     Recover after the spawn failed
      <br/>
      --      Update           Relayed the call related information to the
      <br/>
      --                       Calling Process
    </p>
    <p num="54">
      The Calling Process 187 is an execution thread or a process to handle the outgoing call.
      <br/>
      Its main design objective is to allow multiple calls to be performed simultaneously so as to handle multiple call streams from one or multiple terminals.
      <br/>
      If multiple calls are initiated from the same terminal at the same time, only one Calling Process is used because the processing is still sequential.
      <br/>
      However in the actual detailed implementation, each call from the same terminal in a multiple call request can be handled by one of multiple threads or by sub-processes of the Calling Process to simplify the processing.
      <br/>
      Each thread or sub-process is associated with the Calling Process using the call reference specified in each call specification in the mail message.
      <br/>
      The Calling Process does not interface with the mail servers directly.
      <br/>
      Rather, it constructs the MIME message and requests the Calling Agent to initiate the delivery of the message.
      <br/>
      Using this design allows the Calling Process to be independent of the message deliver transport mechanism.
      <br/>
      The states and transitions of the Calling Process are illustrated in FIG. 5b.
    </p>
    <p num="55">The state transitions for the Calling Process are defined in the following table:</p>
    <p num="56">
      --
      <br/>
      --      Initial State  Transition Condition      New State
      <br/>
      --      Start          Upon receiving the call   Address
      <br/>
      --                     request from the Calling Agent Resolution
      <br/>
      --      Address        Successfully maps the     Call Init
      <br/>
      --      Resolution     Directory Number or IP
      <br/>
      --                     address/alias to an E-mail
      <br/>
      --                     address
      <br/>
      --      Address        Failed to map the Directory Reject
      <br/>
      --      Resolution     Number or IP to an E-mail Request
      <br/>
      --                     address
      <br/>
      --      Call Init      Successfully construct the Confirm
      <br/>
      --                     MIME message and send the E- Pending
      <br/>
      --                     mail
      <br/>
      --      Call Init      Failed to construct the MIME Reject
      <br/>
      --                     or failed to send the E-mail Request
      <br/>
      --      Confirm        Receives a call progress reply Call
      <br/>
      --      Pending                                  Progress
      <br/>
      --      Call Progress  Inform the user on call   Confirm
      <br/>
      --                     progress                  Pending
      <br/>
      --      Confirm        Receive negotiation reply Negotiation
      <br/>
      --      Pending
      <br/>
      --      Negotiation    Send negotiation reply    Confirm
      <br/>
      --                                               Pending
      <br/>
      --      Negotiation    Failed to send the reply  Reject
      <br/>
      --                                               Request
      <br/>
      --      Confirm        Receive call accept reply Initiate
      <br/>
      --      Pending                                  Connect
      <br/>
      --      Confirm        Receive disconnect reply  Reject
      <br/>
      --      Pending                                  Request
      <br/>
      --      Initiate       Initiate the call connection Call
      <br/>
      --      Connect        with success              Complete
      <br/>
      --      Call Complete  Inform the Calling Agent on Start
      <br/>
      --                     the completion status
      <br/>
      --      Initiate       Failed to establish the call Reject
      <br/>
      --      Connect        using PSTN signalling or  Request
      <br/>
      --                     Internet signalling
      <br/>
      --      All States     Receive disconnect reply  Start
      <br/>
      --      Confirm        Receive connect abort request Abort
      <br/>
      --      Pending        from the Calling Agent
      <br/>
      --      Initiate       Receive connect abort request Abort
      <br/>
      --      Connect        from the Calling Agent
      <br/>
      --      Abort          Send disconnect request to Start
      <br/>
      --                     Called Agent
      <br/>
      --      Reject         Inform user that the call Start
      <br/>
      --      Request        request is rejected and clean
      <br/>
      --                     up
    </p>
    <p num="57">
      The Called Agent 116 processes the incoming call request in the mail message.
      <br/>
      It is activated by the associated mail server 182 when an E-mail is received.
      <br/>
      The application class tag in the E-mail is selected so as to be associated with the Called Agent software.
      <br/>
      In conventional mail systems when the mail server receives an E-mail, a user is notified.
      <br/>
      In this case however it is the Called Agent 116 which is informed.
      <br/>
      The Called Agent 116 may be implemented as mail client software.
      <br/>
      Every customer will have a Called Agent 116 waiting for any incoming call.
      <br/>
      Once the mail server 182 receives the incoming mail for the Called Agent 116, the Called Agent is notified and the E-mail is passed to the Called Agent which will extract the call information.
    </p>
    <p num="58">
      The implementation of the Called Agent 116 should support call parallelism.
      <br/>
      In a PSTN world, users usually need to setup one call from one to another.
      <br/>
      But with multi-media, multiple calls may be needed to support audio, video, text messaging, fax transfer or file transfer from one user to another users simultaneously.
      <br/>
      Therefore, parallelism is vital to the success of a multi-media telephony system.
      <br/>
      The implementation of the Called Agent 116 will be parallel to the above described implementation of the Calling Agent 114.
      <br/>
      It spawns a Called Process 189 to process the call request.
      <br/>
      This will simplify the design of the Called Agent 116.
    </p>
    <p num="59">
      The functions of the Called Agent 116 extracting the call setup request information from received mail messages, spawning a Called Process 189 to execute the call setup request, and extract the call setup reply information and pass this to the Called Process.
      <br/>
      A state diagram for a Called Agent 116 is shown in FIG. 5c. The state transitions for the Called Agent 116 are defined in the following table:
    </p>
    <p num="60">
      --
      <br/>
      --      State     Transition Condition           New State
      <br/>
      --      Start     Complete Initialization        Idle
      <br/>
      --      Idle      Call request received          Spawn
      <br/>
      --      Spawn     Created a Called Process successfully Idle
      <br/>
      --      Spawn     Failed to create a Called Process Spawn Fail
      <br/>
      --      Spawn     Reported error                 Idle
      <br/>
      --      Fail
      <br/>
      --      Idle      Received Reply                 Update
      <br/>
      --      Update    Inform Called Process          Idle
    </p>
    <p num="61">
      A Called Process 189 is an execution thread or a process which will serve the call setup.
      <br/>
      It does not interface with the mail server.
      <br/>
      Rather it gets information from the Called Agent.
      <br/>
      Therefore, the Called Process can work with other mechanisms which deliver the call setup request and call reply messages in MIME format.
    </p>
    <p num="62">
      The Called Process uses the User Profile Database 188 to find the current terminal which the callee is working on.
      <br/>
      If the current terminal can terminate the call, the Called Process can construct a reply mail message to accept the call.
    </p>
    <p num="63">It can also use information in the User Profile to perform call filtering, for example, to reject calls from a particular user or to only accept calls from a list of explicitly specified people.</p>
    <p num="64">A state diagram for a Called Process is shown in FIG. 5d. The state transitions for a Called Process are defined in the following table:</p>
    <p num="65">
      --
      <br/>
      --      State         Transition Condition        New State
      <br/>
      --      Start         Received the call setup request Activated
      <br/>
      --      Activated     User profile requires call hand Call
      <br/>
      --                    over to Call Management     Management
      <br/>
      --      Activated     User profile requires call hand Personal
      <br/>
      --                    over to Personal Agent      Agent
      <br/>
      --      Call          Call is accepted but requires Accept
      <br/>
      --      Management    negotiation
      <br/>
      --      Call          All information is received, Present
      <br/>
      --      Management    Call can be presented to the
      <br/>
      --                    user.
      <br/>
      --      Call          Call is rejected.           Reject
      <br/>
      --      Management
      <br/>
      --      Call          Call is completed and no more Complete
      <br/>
      --      Management    call setup is needed
      <br/>
      --      Personal      Call is accepted            Accept
      <br/>
      --      Agent
      <br/>
      --      Personal      All information is received.
      <br/>
      Present
      <br/>
      --      Agent         Call can be presented to the
      <br/>
      --                    user
      <br/>
      --      Personal      Call is rejected.           Reject
      <br/>
      --      Agent
      <br/>
      --      Personal      Call is completed and no more Complete
      <br/>
      --      Agent         call setup needed
      <br/>
      --      Activated     Call is accepted            Accept
      <br/>
      --      Activated     All information is received.
      <br/>
      Present
      <br/>
      --                    Call can be presented to the
      <br/>
      --                    user
      <br/>
      --      Activated     Call is rejected            Reject
      <br/>
      --      Activated     Call is complete and no more Complete
      <br/>
      --                    call setup is needed
      <br/>
      --      Accept        Require parameter negotiation Negotiate
      <br/>
      --      Negotiate     Receive a negotiate reply   Negotiate
      <br/>
      --      Negotiate     Parameter match             Present
      <br/>
      --      Present       Successfully offered to the Alert
      <br/>
      --                    terminal
      <br/>
      --      Present       Failed to offer the call    Reject
      <br/>
      --      Alert         Send Alert call progress reply Complete
      <br/>
      --                    to Calling Agent
      <br/>
      --      Alert         Connection timed out and call Forward
      <br/>
      --                    forward option is available
      <br/>
      --      Forward       Send Forward call progress reply Exit
      <br/>
      --                    and forward the mail message
      <br/>
      --      Reject        Send Reject call progress reply Exit
      <br/>
      --                    to Calling Agent
      <br/>
      --      Disconnect    Send clean up message       Exit
      <br/>
      --      Complete      Send Disconnect reply to Calling Exit
      <br/>
      --                    Agent
      <br/>
      --      All States    Upon receiving a Disconnect from Exit
    </p>
    <p num="66">
      --                    the Caller
      <br/>
      --      All States    Upon received an abort request Abort
      <br/>
      --      Abort         Send Disconnect to Caller   Exit
    </p>
    <p num="67">The states in the Called Process state transition diagram of FIG. 5d are described in the following table:</p>
    <p num="68">
      --
      <br/>
      --      State          Description
      <br/>
      --      Start          Initial state of the process
      <br/>
      --      Active         The beginning state of handling the call
      <br/>
      --      Call           When the call is handed off to the Call
      <br/>
      --      Management     Management System, the Called Process
      <br/>
      --                     remains in this state until the call is
      <br/>
      --                     returned from the Call Management System
      <br/>
      --      Personal       When the call is handed off to the Personal
      <br/>
      --      Agent          Agent System, the Called Process remains in
      <br/>
      --                     this state until the call is returned from
      <br/>
      --                     the Personal Agent System
      <br/>
      --      Accept         The call can be processed to either be
      <br/>
      --                     presented to the caller or for negotiation
      <br/>
      --      Negotiate      The call enters the parameter negotiation
      <br/>
      --                     process
      <br/>
      --      Present        The call is presented to the caller's
      <br/>
      --                     terminal
      <br/>
      --      Alert          The terminal is ringing and the Called
      <br/>
      --                     Process has informed the Called Agent that
      <br/>
      --                     the caller's terminal is ringing
      <br/>
      --      Forward        The call is forwarded to another Called
      <br/>
      --                     Agent
      <br/>
      --      Reject         The call is rejected due to various reasons
      <br/>
      --      Disconnect     The call will not be connected.
      <br/>
      The Calling
      <br/>
      --                     Agent will be instructed to disconnect the
      <br/>
      --                     call
      <br/>
      --      Complete       The call has been established
      <br/>
      --      Abort          The call has to be abruptly terminated
    </p>
    <p num="69">In the description which follows, the distinction between the Calling Agent and the Calling Processes which it spawns is largely ignored for the sake of simplicity, and a similar simplification is made for the Called Agent and the Called Processes.</p>
    <p num="70">
      The Call Agents 115,117 are the entities which handles interactions and interfaces with the address database, terminal profile and user profile.
      <br/>
      They also handles the management of the Calling Agent and the Called Agent.
      <br/>
      User or Telephony OA&amp;M systems interact with the Call Agent to maintain the profiles.
      <br/>
      The following are the functions of the Call Agent:
      <br/>
      1.
      <br/>
      Interface with the Telephony company's Operation, Administration, Maintenance and Provisioning system (OAM&amp;P) to configure and maintain the user profile and terminal profile;
      <br/>
      2.
      <br/>
      Collect calling detail records (CDR), operation measurements (OM) and logs from the Calling Agent and Called Agent;
      <br/>
      3.
      <br/>
      Provide the CDR, OM and logs to the Telephone company's OA&amp;M system;
      <br/>
      4.
      <br/>
      Accept change of terminal request from the user and update the user profile;
      <br/>
      5.
      <br/>
      Responsible for the startup and restart of the user's Calling Agent and Called Agent; and
      <br/>
      6.
      <br/>
      Access the mail account for the user to retrieve call information.
      <br/>
      If the user would like to review how many call have been received today, the number of call setup request E-mails can be retrieved and presented to the user.
      <br/>
      These E-mail records are like caller ID records on a Caller ID Display device.
    </p>
    <heading>ADDRESS DATABASE</heading>
    <p num="71">
      A major principle used by this invention is address translation which may be implemented as a form of directory look-up.
      <br/>
      This invention introduces new procedures into the address translation process used by the CO and the Gatekeeper and rather than using the native signalling protocol to complete the phone call, an additional layer of signalling protocol is introduced to allow the far end to handle the call indifferently for a wireline, wireless, and Internet phone.
      <br/>
      This new protocol does not replace the conventional telephony protocol but adds an additional layer to provide proper coupling between different telephone networks.
      <br/>
      More particularly, call setup signalling is performed through E-mail communication between the Calling Agent 114 and the Called Agent 116.
      <br/>
      Once the type and medium for the call have been established, the conventional telephony signalling components 172,174 and/or in the Internet signalling components 181,183 are used to complete the connection.
    </p>
    <p num="72">
      For a given user, there will be one or more user identifiers.
      <br/>
      Each user has a one or more separate user identifiers for each type of network identifier for which the user has terminals.
      <br/>
      For example, if the user has a wireline terminal and a wireless terminal, both of these terminals will have an E.164 type network identifier, and can together be represented by a single user identifier which also in E.164 format.
      <br/>
      If the user has an H.323 terminal, then the user would have a user identifier which is an H.323 Internet address.
      <br/>
      The purpose of the user identifier is to provide keys into the address database 186 which contains a mapping from user identifiers to MCSS Called Agent E-mail addresses.
      <br/>
      For each user of the MCSS provided by this embodiment of the invention, there will be a single unique designated Called Agent having a unique E-mail address.
      <br/>
      Thus, for a user having a E.164 user identifier and an H.323 Internet address user identifier, the address database 186 will contain a translation from the E.164 user identifier to the Called Agent E-mail address, and a translation from the H.323 Internet address user identifier to the Called Agent E-mail address.
      <br/>
      It is not necessary that the user identifiers correspond with actual addresses of the user's terminals.
      <br/>
      The requirement for a different user identifier for each network type stems from the fact that a call setup request from an H.323 terminal must include an H.323 address, and similarly, a call setup from an E.164 based terminal must include an E.164 terminal address.
    </p>
    <p num="73">
      In addition to this translation information, for each user identifier there will be an identification of the types of call media supported by the associated terminals.
      <br/>
      It may also include a quality of service capability of the terminals.
      <br/>
      If a call setup request is received demanding a quality beyond the capability of the destination terminals, this can be identified.
      <br/>
      There may also be a pointer to a system or application which is to process the call setup request for the particular terminals.
      <br/>
      When a call is to be connected through to one of the terminals, the application is activated.
    </p>
    <p num="74">This address database may be implemented using LDAP (lightweight directory access protocol) or X.500 directory services for example, depending upon the design of the network.</p>
    <heading>TERMINAL PROFILE</heading>
    <p num="75">
      The terminal profile database 122 contains a terminal profile for each terminal owned by a user and which has been registered with the MCSS.
      <br/>
      When a terminal is being used which is not one of a user's registered terminals there will be no terminal profile for that terminal.
      <br/>
      In this case, a canned terminal profile can be generated dynamically based on any information available.
      <br/>
      Each terminal profile has a reference which can be a string or a number, but which is preferably selectable by the user.
      <br/>
      Preferably, aliases may be used which allow users to identify their terminals using names they have personally selected.
    </p>
    <p num="76">
      The terminal profile for a given terminal includes the following information:
      <br/>
      Network identifier--the terminal identifier of the terminal within its native network.
      <br/>
      For an H.323 using a dial-up service, the terminal identifier is an IP address which is updated by the Gatekeeper after the customer has registered (i.e. signed on);
      <br/>
      Terminal Type--Terminal type describes the type of terminal.
      <br/>
      It can be a wireline, wireless or H.323 terminal for example;
      <br/>
      Terminal Capability--This is a list of capabilities which the terminal can perform;
      <br/>
      Subscribed Services--This is a list of subscribed services associated with this terminal.
      <br/>
      This permits a user to subscribe to different services on different terminals, and thus to differentiate the cost of ownership of each terminal.
    </p>
    <heading>USER PROFILE</heading>
    <p num="77">
      The user profile database 124 contains a user profile for each user.
      <br/>
      The user profile contains the vital data of the user including the user's current terminal.
      <br/>
      More specifically, it preferably includes the following for each user:
      <br/>
      Legal and Billing Information--This contains the name, and the address for the user's account;
      <br/>
      Mail Account--This is the name of the mail account associated with the user.
      <br/>
      This account is used to send and receive E-mail for call setup or call termination, and is not visible to the user.
      <br/>
      This account has a unique name designed by the provider of the MCSS;
      <br/>
      User Account--This is an identifier of the user's account which the user uses to identify himself/herself to the system as a form of authentication when using the MCSS from a terminal which is not a registered terminal.
      <br/>
      It is preferably an alphanumeric and non-case sensitive string so that the name can be entered using a telephone keypad;
      <br/>
      User Password--This is used together with the User Account to access the system to change the user profile or setup a call from a terminal.
      <br/>
      The password is preferably alphanumeric such that it can be entered through a telephone keypad.
      <br/>
      For advanced systems, the password may be entered through speech recognition technology;
      <br/>
      Private key--This key is needed for non-secured access such as Internet access to permit deciphering a password from a terminal which has encryption capability.
      <br/>
      The terminal will encrypt the password using a public key.
      <br/>
      The private key is not available to the user for security reasons.
      <br/>
      The private key is assigned by the signalling system provider;
      <br/>
      Subscribed Services--This describes non-terminal related services to which the user has subscribed.
      <br/>
      This entry contains information on what services are subscribed to on every terminal using the MCSS.
      <br/>
      Examples are a personal agent service which permits call filtering or screening, and unified messaging which provides access to a mail server;
      <br/>
      Current Terminal--This points to the current terminal associated with the user.
      <br/>
      The current terminal is only allowed to be one of the predefined set of terminals for which terminal profiles exist or can be created dynamically;
      <br/>
      Current Call Management--This points to a current call management description.
      <br/>
      Call management features are offered by the existing telephone company such as a list of terminal numbers which can be activated by name dialling, customized announcements for specific calling IDs, offering calling information to the user with the option to reject the call, answer with a recorded message, or return a busy signal;
      <br/>
      Quality of Service--This determines the grade of service subscribed to by the user.
      <br/>
      The user can request automatic PSTN to Voice Over IP gateway for long distance using a specific codec, for example.
      <br/>
      Some codecs require less bandwidth which can be more adaptive to Internet delay.
      <br/>
      The quality of service may also be used to determine how a terminal call is to be routed.
      <br/>
      For example, when a call is originated from the PSTN for connection to H.32:3, this option can be used to determine whether a near end gateway or a far end gateway is used.
      <br/>
      Near end gateway will be cheaper but subject to Internet delay.
      <br/>
      For end gateway will be higher quality but may result in the requirement of paying distance charges.
      <br/>
      Alternatively, a call may be setup over an ATM network in a private data network rather than over the global Internet;
      <br/>
      Personal agent service--This points to any implementation of a personal agent to which the user has subscribed or has access.
      <br/>
      When a call setup request is received, the request can involve the personal agent implementation to perform advanced functions such as filtering;
      <br/>
      Call Forward Address--This stores a call forward address.
      <br/>
      This may be a terminal address of a terminal not belonging to the user to which the presentation driver may deliver a call, or a new E-mail address of another Called Agent.
    </p>
    <heading>CALL SETUP REQUEST</heading>
    <p num="78">
      The first step in setting up any call is a call origination from a calling terminal.
      <br/>
      This will result in a call setup request in the protocol of the native network of the particular calling terminal.
      <br/>
      This may be a conventional call setup request which is the same whether or not the MCSS provided by this embodiment of the invention is used.
      <br/>
      The call setup request is intercepted at the call intercept point, this being the local network interface for the particular calling terminal.
      <br/>
      The setup request is then passed through the relevant local network interface and the calling presentation driver 120 to the Calling Agent 114.
      <br/>
      The setup request includes a called user identifier for the called party.
      <br/>
      Alternatively, the call setup request may be generated trough the user interface 119 which permits a more generalized call setup request to be made.
    </p>
    <p num="79">As described below, the called user identifier is translated by the Called Agent 116 to a terminal identifier for whichever of the user's terminals is the active or presently selected.</p>
    <p num="80">E-mail MESSAGE STRUCTURE AND CONTENTS</p>
    <p num="81">
      Call setup and call reply E-mail messages are used to perform call setup signalling according to this embodiment of the invention.
      <br/>
      A call setup message is generated once by the Calling Agent to activate call setup activities.
      <br/>
      Thereafter, call reply messages are used for the remaining lifetime of the call setup and may be generated by both the Calling Agent and the Called Agent.
      <br/>
      Each component of a message is referred to as a parameter, and a parameter may itself contain parameters.
      <br/>
      In the following, the contents of the messages are described hierarchically.
      <br/>
      Messaging is preferably done using the RFC 1341, 1342, 1522 and 1531 MIME (Multipurpose Internet Mail Extensions) format.
      <br/>
      The following message formats are defined using BNF's (Backus Naur Forms) but this may not necessarily be the case.
    </p>
    <p num="82">MIME Signalling Message BNF</p>
    <p num="83">
      This is the generic form of any message being used for the MCSS, and applies for both call setup and call reply messages:
      <br/>
      &lt;mime-signalling&gt;::=&lt;call-setup&gt;.vertline.&lt;call-reply&gt;
    </p>
    <p num="84">In the above, the symbol ".vertline." means that one of the two components it separates is included in the message, i.e. either the &lt;call-setup&gt; component or the &lt;call-reply&gt; component.</p>
    <p num="85">CALL SETUP E-mail MESSAGE</p>
    <p num="86">
      In response to a call setup request, the Calling Agent 114 constructs a call setup E-mail message addressed to the E-mail address associated with the called user identifier.
      <br/>
      This involves filling in the &lt;call-setup&gt; field of the above described generic call signalling E-mail message as follows:
      <br/>
      &lt;call-setup&gt;::=&lt;mime-header&gt;&lt;callinfo&gt;&lt;callinfo&gt;*&lt;mime-data&gt;*
      <br/>
      &lt;mime-header&gt;::="MIME-Version:1.0" CRLF
      <br/>
      &lt;callinfo&gt;::=&lt;callinfo-header&gt;&lt;callinfo-body&gt;&lt;options&gt;*
    </p>
    <p num="87">
      - &lt;attachment&gt;*&lt;callinfo-end&gt;
      <br/>
      &lt;callinfo-header&gt;::="application/x-call";&lt;boundary-specification&gt;
      <br/>
      &lt;callinfo-body&gt;::=&lt;caller&gt;CRLF&lt;called&gt;CRLF &lt;call-medium&gt;CRLF
      <br/>
      - &lt;call-ref&gt;CRLF&lt;call-action&gt;CRLF&lt;quality&gt;
      <br/>
      &lt;caller&gt;::="CALLER" SP"("&lt;address&gt;�","&lt;name&gt;�")"
      <br/>
      &lt;called&gt;::="CALLEE" SP"("&lt;address&gt;�","&lt;name&gt;�")"
      <br/>
      &lt;medium&gt;::"MEDIUM" SP ("VOICE".vertline."DATA".vertline."VIDEO".vertline."FAX")
      <br/>
      &lt;reference&gt;::="REFERENCE" SP&lt;reference value&gt;
      <br/>
      &lt;quality&gt;::="QUALITY" SP&lt;quality-list&gt;
      <br/>
      &lt;options&gt;::="OPTION" SP(option-list)
      <br/>
      &lt;attachments&gt;::=&lt;mime data&gt;
      <br/>
      &lt;callinfo-end&gt;::="--"&lt;boundary tag&gt;
      <br/>
      &lt;address&gt;::=&lt;e. 164&gt;.vertline.&lt;ip&gt;&lt;tcp&gt;.vertline.&lt;udp&gt;.vertline.&lt;rtp&gt;.vertline.&lt;url&gt;.vertline. . . .
      <br/>
      &lt;e.164&gt;::="(""E164"","&lt;ITU E.164 phone number specification&gt;")"
      <br/>
      &lt;ip&gt;::="("IP""","&lt;Internet IP address"&gt;"
      <br/>
      &lt;tcp&gt;:=="TCP"","&lt;Internet IP address&gt;":"&lt;number&gt;
      <br/>
      &lt;udp&gt;:=="UDP"","&lt;Internet IP address&gt;":"&lt;number&gt;
      <br/>
      &lt;rtp&gt;:=="RTP"","&lt;Internet IP address&gt;":"&lt;number&gt;
      <br/>
      &lt;url&gt;:=="URL"","&lt;URL address&gt;
      <br/>
      &lt;medium&gt;::="VOICE".vertline."DATA".vertline."VIDEO".vertline."FAX"
      <br/>
      &lt;quality-list&gt;::="("&lt;quality-value&gt;&lt;quality-value&gt;*")"
      <br/>
      &lt;quality-value&gt;::=&lt;grade&gt;.vertline.&lt;delay&gt;.vertline.&lt;codec-list&gt;
      <br/>
      &lt;grade&gt;:: ="(""GRADE"","("TOLLQUALITY".vertline."NEARTOLL".vertline."ACCEPTABLE")")"
      <br/>
      &lt;delay&gt;::="(""DELAY"","&lt;milliseconds&gt;")"
      <br/>
      &lt;codec-list&gt;::="(""CODEC"","&lt;codec&gt;(","&lt;codec&gt;)*")"
      <br/>
      &lt;codec&gt;::="H.723.1".vertline."H.729".vertline."64 KPCM".vertline."32 KPCM".vertline. . . .
      <br/>
      &lt;option-list&gt;::="("&lt;option-value&gt;(","&lt;option-value&gt;)*")"
      <br/>
      &lt;option-value&gt;::=
      <br/>
      "CHARGEBACK".vertline."CALLBACK".vertline."RINGBACK_WHEN_NOT_BUSY".vertline. . . .
      <br/>
      &lt;call_data_list&gt;:=&lt;call_data_value(SP&lt;call_data_value&gt;.vertline.NULL)
      <br/>
      &lt;call_data_value&gt;:="("&lt;key&gt;","&lt;call_data_value&gt;")"
      <br/>
      &lt;key&gt;:=any data encoded in a data format acceptable by the MIME specification
      <br/>
      &lt;value&gt;:=any value encoded in a format acceptable by the MIME specification
      <br/>
      SP::=(&lt;space&gt;.vertline.&lt;verticaltab&gt;.vertline.&lt;horizontal tab&gt;.vertline.&lt;line feed&gt;.vertline.
    </p>
    <p num="88">
      CRLF:=(&lt;carriage return&gt;&lt;line feed&gt;)(&lt;carriage return&gt;&lt;line feed&gt;)*
      <br/>
      &lt;space&gt;::=space character
      <br/>
      &lt;vertical tab&gt;::=vertical tab character
      <br/>
      &lt;horizontal tab&gt;::=horizontal tab character
      <br/>
      &lt;line feed&gt;::=line feed character
      <br/>
      &lt;carriage return&gt;::=carriage return character
      <br/>
      &lt;name&gt;::=any MIME acceptable string or data
    </p>
    <p num="89">CALL REPLY E-mail MESSAGE</p>
    <p num="90">
      In response to a call setup message, the Called Agent 116 constructs a call reply E-mail message addressed to the E-mail address associated with the Calling Agent 114.
      <br/>
      In addition, any further communication for the life of the call setup is done through call reply messages from the Calling Agent 114 to the Called Agent 116 or vice versa.
    </p>
    <p num="91">
      The reply E-mail content is also encoded in MIME.
      <br/>
      This involves filling in the &lt;call-reply&gt; field of the above described generic call signalling E-mail message as follows:
      <br/>
      &lt;call-reply::=&lt;mime-header&gt;&lt;reply-body&gt;
      <br/>
      &lt;reply-body&gt;::=&lt;reply-tag&gt;","&lt;boundary-specification&gt;CRLF
      <br/>
      - &lt;reply&gt;&lt;boundary-tag&gt;
      <br/>
      &lt;reply-tag&gt;::="Content-type:application/x-call-reply"
      <br/>
      &lt;reply&gt;::=&lt;progress-indicator&gt;.vertline.&lt;connection&gt;.vertline.&lt;negotiation&gt;
      <br/>
      &lt;progress-indicator&gt;::=:CALL_OFFER_STATUS"SP&lt;non-accept-call-state&gt;
      <br/>
      &lt;connection&gt;::="CALL_OFFER_STATUS"SP"ACCEPT"CRLF
      <br/>
      - &lt;reference&gt;CRLF&lt;progress&gt;CRLF
      <br/>
      - (&lt;medium&gt;CRLF)
      <br/>
      - (&lt;caller&gt;CRLF&lt;callee&gt;CRLF)
      <br/>
      - (&lt;quality&gt;CRLF)*(&lt;option&gt;CRLF)*
      <br/>
      - (&lt;attachment&gt;CRLF)*
      <br/>
      &lt;non-accept-call-state&gt;:: ="RINGING".vertline."FORWARDED".vertline."COMPLETE"
      <br/>
      - "(""DISCONNECTED",&lt;reason&gt;")".vertline.
      <br/>
      - "(""REJECTED",&lt;reason&gt;")"
      <br/>
      &lt;negotiation&gt;::="NEGOTIATION"CRLF&lt;callinfo&gt;
    </p>
    <p num="92">
      The reply is also used as a mechanism to provide call progress.
      <br/>
      It is also used as a call accepting notification.
      <br/>
      If the Calling Agent wants to terminate the call before the actual call setup is completed, it can also use the reply message to instruct the Called Agent to terminate the call using the &lt;non-accept-call-state&gt; of "DISCONNECTED" with a reason in the &lt;reason&gt; field.
    </p>
    <p num="93">
      The actual contents of the reason field can be implementation dependent.
      <br/>
      It may for example be digitized voice (so that the audio clip can be played to the caller) or a text message to inform the caller why the call is rejected.
      <br/>
      However, MIME allows any data type to be encoded to improve the information density of the communication.
    </p>
    <p num="94">Explanation of the Fields of Call Setup E-mail Messages</p>
    <p num="95">
      The following provides detailed information for all the components in the call setup mail messages.
      <br/>
      The syntax defined here follows the MIME design methodology.
      <br/>
      The data format specified here is designed for extensibility to handle new parameters and keywords.
    </p>
    <p num="96">&lt;mime-header&gt;</p>
    <p num="97">This is required by the MIME specification to indicate the beginning of the contents of the message;</p>
    <p num="98">&lt;boundary-specification&gt;</p>
    <p num="99">
      The boundary specification is used to delimit parts in a MIME.
      <br/>
      It specifies a unique string which is used to separate one group of data from another.
      <br/>
      The value of the boundary is defined without the "--" (two minus sign character) in the specification, and at the boundary it is prefixed with two minus characters "--".
      <br/>
      For example, boundary=eot would define the string "eot" as a boundary.
      <br/>
      The boundary would then appear as "--eot".
    </p>
    <p num="100">Content-type="application/x-call"</p>
    <p num="101">
      This string is a mechanism to identify the E-mail message as one which is to be processed by the MCSS, and to thereby distinguish it from an E-mail message serving some other purpose.
      <br/>
      This mechanism is defined in RFC 1341.
      <br/>
      The keyword "application" indicates the following data is the input to an application.
      <br/>
      The string following the "/" is the class of application.
      <br/>
      It is used as a key to map to an application using a ".mime" profile.
      <br/>
      The prefix of "x-" is used for any application which is not registered with the Internet Assigned Number Authority (IANA).
      <br/>
      If the MCSS provided by the invention is granted a designation for this class of application, the "x-call" could then be changed to something like "telephony/call".
    </p>
    <p num="102">
      The information is grouped by a boundary using a boundary specification as discussed above.
      <br/>
      The information for the call and characteristics are included in the &lt;call info-body&gt; subsection of &lt;call-info&gt; in the MIME.
    </p>
    <p num="103">
      There may be multiple call &lt;call-info&gt; information units in the MIME message each dealing with a respective connection which needs to be established.
      <br/>
      The result of this is the creation of multiple calls in a single request between two or multiple terminals.
      <br/>
      It is assumed that the multiple calls are connected from a first series of one or more terminals associated with the calling party to a second series of one or more terminals associated with the called party.
      <br/>
      For example, a caller with an ISDN terminal may request two different outgoing connections to a singled or multiple called terminals.
      <br/>
      Such a multiple call request may be generated through the user interface 199, or directly from the calling terminals if the network interfaces are modified to receive such requests.
    </p>
    <p num="104">&lt;caller&gt;</p>
    <p num="105">
      This is the component containing the caller information.
      <br/>
      The information is either an ITU E.164 address (esn number) or an Internet address which can be in dot numeric form (e.g. 47.34.5.121) or symbolic form (e.g.ck.pcn.nortel.com).
      <br/>
      The &lt;name&gt; option of the caller is a feature which supports the Caller ID function.
      <br/>
      In PSTN networks, this name can be extracted from directories.
      <br/>
      In the IP world, this would be a name of the originator's choice.
    </p>
    <p num="106">&lt;called&gt;</p>
    <p num="107">
      This is the component for callee information.
      <br/>
      The information is either an ITU E.164 address (esn number) or an Internet address which can be in dot numeric form (e.g. 47.34.5.121) or symbolic form (e.g. ck.pcn.nortel.com).
      <br/>
      The address in the &lt;called&gt; field may also be specified by name.
      <br/>
      This is the equivalent of symbolic dialling.
      <br/>
      The function of the called directory number in this signalling protocol is only to permit E-mail address resolution for the called party.
    </p>
    <p num="108">&lt;reference&gt;</p>
    <p num="109">
      In order to identify every call setup request, a unique reference identifier is given to the call setup request.
      <br/>
      When the Called Agent replies, the reference is used to associate the reply with the request.
    </p>
    <p num="110">&lt;medium&gt;</p>
    <p num="111">
      This tag is used to specify the preferred call medium information.
      <br/>
      The medium of the call that can be established depends on the support of the underlying network(s).
      <br/>
      The basic types are voice call (like the telephone services offered by Bell) data call (e.g. TCP/IP call for data communication) video call (video image communication) or fax (for facsimile transmission).
      <br/>
      The call medium is qualified using a keyword.
      <br/>
      A few keywords are listed here and include VOICE, DATA, VIDEO and FAX.
      <br/>
      More keywords may be added for additional call media.
    </p>
    <p num="112">&lt;quality&gt;</p>
    <p num="113">
      Quality is the parameter to express what will be the quality of service.
      <br/>
      It can be as simple as strings of tokens which are bilaterally agreed upon or key-value pairs in strings, e.g. (FRAME_PER_SECOND,10) or a range of values (MODEM_SPEED,300,2400,9600,28800).
      <br/>
      This parameter is especially important to the H.323 terminals.
      <br/>
      There is option negotiation built into the H.323 protocol family but it is an optional feature.
      <br/>
      The negotiation cannot always take place.
      <br/>
      Therefore, this parameter provides another alternative to perform the negotiation.
      <br/>
      If negotiation is required, the negotiation is done by sending a call request E-mail, such as described in this section, and the reply E-mail such as described in the next section back and forth using the same &lt;reference&gt; until both sides are satisfied.
    </p>
    <p num="114">&lt;option&gt;</p>
    <p num="115">
      The option parameter is used to specify call options.
      <br/>
      Some of the options can be REVERSE_CHARGE, or EXECUTIVE_BARGE_IN, JOIN, or other telephony features.
    </p>
    <p num="116">&lt;call_data_list&gt;</p>
    <p num="117">
      This parameter provides any &lt;call-data-value&gt; arguments associated with the call setup.
      <br/>
      When the Called Agent processes the call, the values of these arguments are used to setup the call as required.
      <br/>
      The following are some examples:
      <br/>
      1.
      <br/>
      The &lt;call-data-value&gt; parameter can be a distinctive ringing pattern for a voice call to be played on the remote terminal;
      <br/>
      2.
      <br/>
      In a call for movie on demand, the arguments may be the sound quality, the movie title, the language of the title, the viewing format etc.
    </p>
    <p num="118">&lt;attachment&gt;</p>
    <p num="119">
      Attachment is any MIME compliant contents.
      <br/>
      It can be fax, video, audio or text as defined in RFC 1521.
      <br/>
      The purpose of the attachment component is to enrich the contents of the call request E-mail so that as much information as possible can be carried in a single short message.
      <br/>
      In an outgoing call, additional caller information can be added to the call, e.g. a signature file of the E-mail.
      <br/>
      If it is text, it can be played out on a H.323 terminal as a call announcement rather than ringing.
      <br/>
      If it is a graphic, it can be displayed on graphic enabled terminals, e.g. PC or NC based H.323, rather than the default call alert user interface.
      <br/>
      To a great extent, because the attachment will be stored at the E-mail server associated with the Called Agent, the user can retrieve the information by any Unified Messaging System such as Exchange from Microsoft or Netscape Communicator from Netscape Communications.
    </p>
    <p num="120">
      One or more attachments may be included in the call setup message.
      <br/>
      There is really no limitation on the type of the attachment.
      <br/>
      Not all attachments may necessarily be processed by all implementations of the Called Agent.
    </p>
    <p num="121">&lt;address&gt;</p>
    <p num="122">
      The address can be the type presented but can also be extended.
      <br/>
      It can be any E.164 address, Internet protocol address, Internet protocol service address etc.
    </p>
    <p num="123">Explanation of the Fields of Reply E-mail Messages</p>
    <p num="124">
      Many of the fields in the reply message are the same as in the setup message, and as such, these will not be redefined here.
      <br/>
      The following fields are specific to the reply message:
    </p>
    <p num="125">&lt;reply tag&gt;</p>
    <p num="126">
      This field contains the application class specification "application/x-call-reply".
      <br/>
      As in the class specification for the setup message, if the IANA grants a new content type for telephony, this could be changed to content-type:telephony/call-reply.
    </p>
    <p num="127">&lt;progress-indicator&gt;</p>
    <p num="128">
      This set of parameters provides information on the progress of the call as in telephony.
      <br/>
      It helps to inform the caller about the current progress.
    </p>
    <p num="129">&lt;connection&gt;</p>
    <p num="130">This parameter indicates the acceptance of the call, and is a request to setup the call.</p>
    <p num="131">&lt;non-accept-call-state&gt;</p>
    <p num="132">
      This is an indicator of the current status of a call which has not yet been accepted and which may be rejected.
      <br/>
      The state may be RINGING if the callee's terminal is ringing, FORWARDED if the call is forwarded to another Called Agent, REJECT if the call is rejected by the callee, or DISCONNECT if the Called or Calling Agent request the termination of this call setup request.
    </p>
    <p num="133">&lt;negotiation&gt;</p>
    <p num="134">
      This parameter informs the Calling Agent or the Called Agent to change some of the setup parameters values.
      <br/>
      It may be the address of the caller, the address of a callee, or the quality of the call for example.
    </p>
    <p num="135">The following table contains an example of the contents of a call setup E-mail message:</p>
    <p num="136">
      --
      <br/>
      -- Line                             Description
      <br/>
      -- MIME-Version: 1.0                MIME header
      <br/>
      -- Content-type: application/       application class
      <br/>
      -- x-call; boundary=eot
      <br/>
      -- CALLER (E164M6137638533,         Caller PSTN user identifier
      <br/>
      -- "CK Wong")           for CK Wong
      <br/>
      -- CALLEE (E164, 6132322486)        Callee PSTN terminal number
      <br/>
      -- MEDIUM VOICE                     request setup a voice call
      <br/>
      -- REFERENCE 0034332344             call reference is the string
      <br/>
      --                                  "0034332344"
      <br/>
      -- QUALITY                          sound quality is toll grade
      <br/>
      -- ((GRADE,TOLLGRADE),              with no delay, e.g. 64KPCM
      <br/>
      -- (DELAY, 0))
      <br/>
      -- OPTION                           a treatment is requested to
      <br/>
      -- ("RINGBACK_WHEN_NOT_BUSY") inform the caller if the
      <br/>
      --                                  callee is busy now
      <br/>
      -- Content-type: text;              This call has an attachment
      <br/>
      -- boundary=eom              which can be used as call ID
      <br/>
      --                                  information.
      <br/>
      The message
      <br/>
      --                                  may be displayed on an ADSI
      <br/>
      --                                  terminal for the purpose of
      <br/>
      --                                  visual call waiting, the
      <br/>
      --                                  information can be displayed
      <br/>
      --                                  as part of a call alert on
      <br/>
      --                                  an H.323 terminal, or the
      <br/>
      --                                  information can be used as
      <br/>
      --                                  an announcement of arrival
      <br/>
      --                                  for a conference call
      <br/>
      -- This is a call from              The message
      <br/>
      -- C.K.Wong
      <br/>
      -- --eom                            End of attachment boundary
      <br/>
      -- --eot                            End of the message boundary
    </p>
    <p num="137">The above example E-mail message is from a caller having telephone number 6136738533 to a callee having PSTN user identifier 6132322486 (which may or may not also be the callee's PSTN telephone number), with VOICE as the preferred medium, 0034332344 as the setup request reference, grade--tollgrade and delay=0 as quality specifications, the single option RINGBACK_WHEN_NOT_BUSY, and a text attachment containing the text "This is a call from C. K. Wong".</p>
    <p num="138">The following is an example of a call reply message:</p>
    <p num="139">
      --
      <br/>
      -- Line                         Description
      <br/>
      -- MIME-Version: 1.0            MIME header
      <br/>
      -- Content-type: application/   application class
      <br/>
      -- x-call-reply; boundary=eot
      <br/>
      -- CALL_OFFER_STATUS ACCEPT     The call is accepted
      <br/>
      -- REFERENCE 0034332344         To inform the Calling Agent that
      <br/>
      --                              this call is for the call which
      <br/>
      --                              has the reference "0034332344"
      <br/>
      -- MEDIUM VOICE                 The Called Agent agreed to setup
      <br/>
      --                              a voice call
      <br/>
      -- CALLER (E164, 6137638533)    The caller's directory number is
      <br/>
      --                              not changed
      <br/>
      -- CALLEE (IP,47.34.5.121)      The callee will connect the
      <br/>
      --                              terminal on an H.323 terminal.
      <br/>
      --                              Its IP address is "47.34.5.121".
      <br/>
      -- QUALITY ((CODEC. G.729,      The codec can be G.729 or G.711.
      <br/>
      -- G.711), (DELAY,15))          The terminal can handle a
      <br/>
      --                              maximum network delay of 15
      <br/>
      --                              milliseconds for any voice
      <br/>
      --                              packet
      <br/>
      -- --eot                        End of the message boundary
    </p>
    <heading>OUTGOING CALL INTERCEPTION</heading>
    <p num="140">Outgoing Calls are intercepted in various manners depending upon the nature of the outgoing call.</p>
    <p num="141">Outgoing Call Interception: Wireline Terminal Call</p>
    <p num="142">
      When a wireline terminal 102 makes an outgoing call, the call is initially handled by the CO of the telco this being the local network interface 109 for a wireline terminal.
      <br/>
      The CO will do an address translation to find out how to deliver the call.
      <br/>
      For the MCSS, the address translation will result in the call being directed to the Calling Agent.
      <br/>
      The call request is forwarded from the relevant local network interface 109 to the Calling Agent 114 via a message through a communications link between the local network interface and the presentation driver 120 such as TCP/IP channel established on demand or earlier.
    </p>
    <p num="143">
      The caller's information is collected either from the dialling tone or pulse, or from an IDSN call setup message.
      <br/>
      If this is a normal fax call, it cannot be identified as such until later.
      <br/>
      However, if the call is done by a two stage dialling procedure, which includes a first number for the fax delivery and a second number for the final destination, the type of the call can be identified by the time Calling Agent is informed.
    </p>
    <p num="144">
      In some cases, the call setup can be forwarded to the Calling Agent via a remote SCP query.
      <br/>
      It is not necessary to always be done from the local CO.
      <br/>
      The address translation can be handled via an SCP (signal control point) database.
      <br/>
      Most of the time now, it is handled by the SCP query.
      <br/>
      The SCP can reply with where the call is to be routed and with what treatment.
      <br/>
      This is illustrated in FIG. 4.
      <br/>
      In this example, a user makes an outgoing call from a terminal 300 which is initially handled by a CO 302.
    </p>
    <p num="145">
      The local Captive Office sends a query to an SCP 304 to find out where is the called address.
      <br/>
      The result from the query indicates that the called address is at another Captive Office.
      <br/>
      The call setup request is routed to a System Signalling -7 (SS7) network 306.
      <br/>
      The SS7 network delivers the call setup request to a Local Network Interface 308 of the outgoing MCSS end system 80.
      <br/>
      The request is received by the Local Network Interface 308 of the outgoing MCSS end system 80 and passed on to the presentation driver 120.
      <br/>
      The presentation driver 120 extracts the information in the CCS7 call setup message and passes the call setup request to the Calling Agent 114.
    </p>
    <p num="146">Outgoing call Interception: Wireless Terminal Call</p>
    <p num="147">
      A Celco uses a similar mechanism to the mechanism used by the above-described telco to intercept an outgoing call from a wireless terminal 104.
      <br/>
      The call setup request is sent to the Calling Agent.
    </p>
    <p num="148">Outgoing Call Interception for an Internet Call</p>
    <p num="149">When an H.323 terminal 106 makes an outgoing call, the outgoing call is intercepted by the local network interface 113 which in this case is a Gatekeeper.</p>
    <p num="150">
      Preferably, the Calling Agent will be the Gatekeeper for all the outgoing calls.
      <br/>
      This minimizes overhead and duplication.
      <br/>
      Alternatively a separate Gatekeeper may be used.
      <br/>
      One attribute required for an H.323 terminal is its IP address.
      <br/>
      If the Calling Agent does not handle the Registration and Administration Service for the dial-up line, the Gatekeeper performing Registration and Administration Services has to update the Calling Agent on the IP address.
    </p>
    <p num="151">
      The callee information is in an H.245 call setup request.
      <br/>
      The information can be extracted and forwarded to the Calling Agent.
    </p>
    <p num="152">In a specific implementation, the Calling Agent can be extended to support the H.323 call setup.</p>
    <heading>CALLED AGENT MESSAGE PROCESSING</heading>
    <p num="153">
      The Called Agent, upon receipt of a call setup E-mail message together with the Calling Agent is responsible for coordinating the setting up of a connection between the calling terminal and one of the callee's terminals.
      <br/>
      In some cases, the Called Agent may respond with a call reply message.
      <br/>
      After the appropriate medium has been identified through negotiation if necessary, the relevant native signalling components are used to setup the connection, these including the telephony, signalling components 181,183 and the Internet signalling components.
    </p>
    <p num="154">How to Connect a Call from a PSTN Terminal to PSTN Terminal</p>
    <p num="155">For the purpose of this example, it is assumed that a connection from a wireline terminal 102 to a wireline terminal 136 is to be made.</p>
    <p num="156">
      Once the E-mail is received by the mail agent of the called party, the Called Agent (which is an application associated with the mail server) will process the E-mail.
      <br/>
      The association of the Called Agent program is done by the application tag in the MIME.
      <br/>
      The Called Agent will extract the called terminal identifier.
      <br/>
      There are two treatments that can be applied:
    </p>
    <p num="157">
      1.
      <br/>
      The Called Agent will interact with the telephony signalling components 172,174 to establish a voice channel from the captive office associated with the mail server to the captive office where the caller's call was intercepted.
      <br/>
      The channel is established using the caller's phone number in the E-mail.
      <br/>
      This ensures a voice channel is available.
      <br/>
      Then the Called Agent will use the local CO facility (in the local network interface 143 for the wireline terminal 136) to present the call to the callee based on the information associated with the callee's current location record maintained in the User Profile database.
      <br/>
      When the callee picks up the phone, the voice channel between the caller and callee is bridged.
      <br/>
      The setup process finishes after a reply message with CALL_OFFER_STATUS COMPLETE is sent to the caller.
    </p>
    <p num="158">
      2. The Called Agent will inform the Calling Agent regarding the current location of the callee in a reply mail.
      <br/>
      The &lt;reference&gt; in the E-mail is used to relate the reply to the call.
      <br/>
      Then the Calling Agent can establish a call to the callee's current true location using the existing conventional telephone protocol with the telephony signalling components 172,174.
      <br/>
      Either party can finish the call setup by sending a reply message with CALL_OFFER_STATUS COMPLETE to the other party.
    </p>
    <p num="159">How to connect a call from an H.323 terminal to a PSTN terminal</p>
    <p num="160">
      When the calling terminal is a PSTN terminal and the called terminal is an H.323 terminal, the call cannot go through directly.
      <br/>
      When the user's H.323 terminal 106 originates an outgoing call, it sends the request to the local network interface 113 which is the H.323 Gatekeeper.
      <br/>
      The Gatekeeper has the responsibility of performing the address lookup (because the address can be symbolic or alias names) which requires the address to be resolved into number dot notation (e.g.bmerib71.nortel.com is translated to 47.34.5121).
      <br/>
      This function is similar to the address translation in the PSTN Captive Office.
    </p>
    <p num="161">
      1. The dot notation address of the callee is used as a key to query the callee's information in the address database 186.
      <br/>
      This database maintains the mapping between the Internet address to the E-mail address of the callee's Called Agent.
    </p>
    <p num="162">2. The caller and callee address information, call medium, and other parameters are used to construct the E-mail for the call setup request.</p>
    <p num="163">
      3. The E-mail is sent to the callee's Called Agent.
      <br/>
      The Called Agent will respond with an E-mail including the callee's terminal identifier which will be an PSTN E.164 address.
      <br/>
      The Calling Agent makes a decision of whether the call is to be connected through the PSTN 170 or the PSN 178 or both based on billing and quality considerations.
      <br/>
      Once it is established that the calling terminal is an H.323 terminal and the called terminal is a PSTN terminal, there are existing procedures for using the PSTN telephony signalling components 172,174, the internet signalling components 181,183, the PSTN 170, bridge 184 and PSN 178 to make a connection.
    </p>
    <p num="164">How to present a call from PSTN terminal to an H.323 terminal</p>
    <p num="165">
      When the callee is an H.323 terminal, again the call cannot go through directly.
      <br/>
      The Called Agent will construct a reply to inform the Calling Agent that the destination is actually an Internet address.
      <br/>
      The Calling Agent will route the call through either the PSTN or PSN depending upon billing and quality considerations.
      <br/>
      Once it is established that the calling terminal is a PSTN terminal and the called terminal is an H.323 terminal, there are existing procedures for using the PSTN telephony signalling components 172,174, the internet signalling components 181,183, the PSTN 170, bridge 184 and PSN 178 to make a connection.
    </p>
    <p num="166">
      In the two scenarios involving an H.323 terminal and a PSTN terminal, the quality option can be used to define the quality of service on an Internet phone call.
      <br/>
      Some of the options can be:
      <br/>
      1. codec--because an H.323 terminal can decode a small number of compressed voice data, the type of codec must be explicitly stated;
      <br/>
      2. link-speed--some H.323 terminals are linked by modem.
      <br/>
      Therefore, the communication link cannot exceed certain bandwidth.
      <br/>
      3. video-data format--since H.323 can also support ITU standard T.120 (video conference), it may be necessary to specify parameters such as compression method and the data rate.
    </p>
    <p num="167">How to connect an H.323 terminal to an H.323 terminal</p>
    <p num="168">
      When connecting two H.323 terminals, the reply mail will contain Internet addresses for the caller and the callee.
      <br/>
      The Internet signalling components 181,183 can use the information together with the quality and option information to establish the call.
    </p>
    <p num="169">
      It should be noted that after a TCP/IP connection is established by the H.323 terminal for communication, the &lt;grade&gt; component in the E-mail can be used to specify the quality of service using the RSVP (resource reservation protocol) protocol.
      <br/>
      One of the problems with the RSVP protocol is that is it is receiver originated.
      <br/>
      Without the &lt;grade&gt; information, the callee where data is received can request the highest quality while the caller has to pay for the service.
      <br/>
      With the &lt;grade&gt; information, which can be a user feature to reduce the grade of service, the caller will not be overcharged.
    </p>
    <heading>CALL SETUP WALKTHROUGH</heading>
    <p num="170">A call setup walkthrough will now be described in detail with reference to FIG. 3.</p>
    <p num="171">
      To begin, a user will originate a call from some calling terminal 200 (this being a particular one of the user's available terminals 102,104,106 shown in FIG. 2) resulting in a call setup request being generated.
      <br/>
      The call setup request which contains the callee's user identifier is passed through the terminal network interface (not shown) and the local network interface where it will be intercepted, converted to a generic form by the presentation driver (not shown), and passed to the Calling Agent.
      <br/>
      In POTS, the call is intercepted by the captive office.
      <br/>
      In GSM/PCS, the call is intercepted by the ground station or the cellstation.
      <br/>
      In an Internet call, the call is intercepted by an Internet gatekeeper.
    </p>
    <p num="172">
      Next, the Calling Agent 114 examines the called user identifer contained in the setup request and looks up a corresponding destination E-mail address in the address database (not shown).
      <br/>
      The Calling Agent will then generate an outgoing E-mail message to the address as described above.
      <br/>
      The E-mail message is then delivered by the calling end mail server 180 to the called end mail server 182 over the Internet.
      <br/>
      This E-mail should always be sent using the highest priority.
      <br/>
      The mail servers 180,182 should observe this priority and deliver the message as quickly as possible.
      <br/>
      Furthermore, messages received by the called end mail server 182 need to be processed quickly, almost in real time, and to be passed quickly to the Called Agent 116.
    </p>
    <p num="173">
      As soon as the mail is delivered to the Called Agent 116, the Called Agent will examine the contents of the E-mail message.
      <br/>
      The call originator's information will be extracted from the message.
      <br/>
      The Called Agent will identify the current terminal associated with the called party by looking up the relevant record in the user profile.
      <br/>
      There may be a negotiation stage (not shown in FIG. 3) during which call parameters are negotiated and settled.
      <br/>
      The Called Agent will then present the call to the current terminal using the native call setup.
      <br/>
      If the user is now associated with a cell phone, the call is delivered to the celco.
      <br/>
      If the user is now associated with the PSTN, the call is delivered to the telco.
      <br/>
      If the user is now associated with an H.323 terminal, the Called Agent will use H.323 to establish the call.
      <br/>
      The Called Agent will determine whether the preferred medium identified in the message matches that of the current terminal type.
      <br/>
      If it does not match, then a conversion is attempted.
      <br/>
      If no such conversion is possible, the call will be rejected with an appropriate reason.
      <br/>
      The rejection may be returned via a mail message with video, text, voice message and other multi-media data.
      <br/>
      The Called Agent may also choose to present the attachments to the destination terminal as part of the call presentation which, for example, may display graphics, video clips, audio clips, or alternative ringing.
      <br/>
      The Called Agent may also be configured to perform a personal agent function which for example may display incoming calls and respond to screened calls accordingly.
    </p>
    <p num="174">Supplementary Services</p>
    <p num="175">
      Preferably, conventional telephony services can be implemented or supported by this signalling system.
      <br/>
      The architecture of the network using this protocol is fundamentally indifferent from the existing implemented telephony network.
      <br/>
      Many of the services can be preserved.
      <br/>
      However, some of the call setup and billing support can be implemented differently.
      <br/>
      The following sections outline how to implement these using the capability offered by this invention.
    </p>
    <p num="176">CLASS Service</p>
    <p num="177">
      CLASS is Common Local Area Signalling Service.
      <br/>
      It provides a number of services ranging from display message to different ringing tone.
      <br/>
      These capabilities are readily available using the attachment components in the MIME message as described previously.
      <br/>
      The advantage of the signalling protocol is that video and graphics can also be added.
    </p>
    <p num="178">Caller ID</p>
    <p num="179">
      Caller ID refers to the caller's directory number (or the caller's IP address) and a character string corresponding to the name.
      <br/>
      The calling directory number is part of the call setup in PSTN.
      <br/>
      The character string relies on the local white page database.
      <br/>
      The current existing protocol cannot include the character string in the call setup signalling and as such Caller ID does not include the name in long distance calls.
      <br/>
      However, the invention provides the opportunity to include this information which makes the Caller ID name service extendable across long distance areas.
    </p>
    <p num="180">Call Forward</p>
    <p num="181">
      Call forward means the user of a particular directory number would like to receive future incoming calls at a different location.
      <br/>
      This can be easily done by changing the current terminal associated with the user.
    </p>
    <p num="182">Simple Call Management</p>
    <p num="183">
      The Agent based architecture provides an additional business opportunity for the telephone networks which may not otherwise be easily extended to support multi-media.
      <br/>
      The following describes three typical call scenarios which provide new capability for users.
      <br/>
      Collectively, all these scenarios can be treated the same way.
    </p>
    <p num="184">Destination Busy</p>
    <p num="185">
      When the destination is busy, the typical treatment is to let the caller decide to retry later.
      <br/>
      Addition opportunity and implementation may be made available to charge the user on a per usage basis to ring back.
      <br/>
      This can be an option specified by the caller in the user profile.
    </p>
    <p num="186">Call Not Answered</p>
    <p num="187">When the callee is not around the terminal, the call can be offered, but no body is going to answer it.</p>
    <p num="188">Call Rejection</p>
    <p num="189">
      Because of the attachment, a callee will know who is calling.
      <br/>
      The call can be rejected from an H.323 terminal or an ADSI terminal with a visual call waiting feature.
    </p>
    <p num="190">Treatment</p>
    <p num="191">When one of the above scenarios happens, the user can be presented with the following options:</p>
    <p num="192">
      1. leave a voice message for the callee in which case the message will be digitized by the Calling Agent.
      <br/>
      The digitized message will be sent and attached to a call setup reply message as an attachment.
    </p>
    <p num="193">
      2. send a fax to the caller which can be retrieved by the callee later.
      <br/>
      The fax will be stored by the Calling Agent and sent to the Called Agent which will attach the fax to a call setup reply message as an attachment.
    </p>
    <p num="194">Unified Messaging Support (UMS)</p>
    <p num="195">
      This invention allows the telephony services to evolve around a UMS.
      <br/>
      Users can use the UMS to get the caller id record, voice message, fax message or event text message.
    </p>
    <p num="196">Call Transfer</p>
    <p num="197">
      If the call transfer is within the same network, existing telephony protocols (except Internet terminal) have a well defined procedure to handle the transfer.
      <br/>
      These are replicated here.
    </p>
    <p num="198">
      This invention does not provide a new support to transfer calls between different networks or media.
      <br/>
      However, because the Calling Agent and Called Agent can be extended to monitor the life cycle of a call, it can provide support and coordinate the transfer calls between different networks and media using the following procedures.
    </p>
    <p num="199">Transfer Between Different Network Types</p>
    <p num="200">
      1.
      <br/>
      The user will signal the Agent (Calling or Called Agent) to perform the call transfer either through in-band (flash and dial) or out-of-band signalling from another terminal.
    </p>
    <p num="201">2. The Agent will request the local network interface to disconnect the voice channel connected to terminal.</p>
    <p num="202">3. The Agent will command the interface to the telephony network.</p>
    <p num="203">4. Another call is established to the new destination under the control of the Agent through a gateway.</p>
    <p num="204">5. After the new call to the new destination is established, the voice channel from the network is routed to the new destination.</p>
    <p num="205">Transfer Between Different Media Types</p>
    <p num="206">
      1.
      <br/>
      The user will signal the Agent (Calling or Called Agent) to perform the call transfer either through in-band (flash and dial) or out-of-band signalling from another terminal.
    </p>
    <p num="207">2. The Agent will request the local network interface to disconnect the voice channel connected to terminal.</p>
    <p num="208">3. The Agent will command the interface to the telephony network to suspend the call.</p>
    <p num="209">
      4. Another call is established to the new destination under the control of the Agent through a gateway.
      <br/>
      This gateway will be responsible for the conversion of the medium type, e.g. codec.
    </p>
    <p num="210">5. After the new call to new destination is established, the voice channel from the network is routed to the new destination.</p>
    <p num="211">Detailed Description of Call Transfer Interface</p>
    <p num="212">From PSTN Network</p>
    <p num="213">
      The first step in switching to another terminal is to suspend the current call and signal the switch for the transfer.
      <br/>
      The following scenarios describe the common procedure used to suspend the current call and signal the switch for the transferring.
    </p>
    <p num="214">1. From an analog terminal, user will flash and perform a call forward operation.</p>
    <p num="215">2. From a digital set, e.g. ISDN, the terminal will send a supplemental service message to request the terminal to be forwarded.</p>
    <p num="216">
      Once the call is suspended, the user can signal a request to be connected to the Call Agent which can handle the call transfer.
      <br/>
      One way to request to be connected to the Call Agent is to use the "*nn" convention.
      <br/>
      For example, the code "*11" can be assigned for this function.
    </p>
    <p num="217">
      After the call is suspended, the user can press "*11" and log on to the Calling Agent with appropriate identification and authentication.
      <br/>
      From the data where the input is coming from, the Calling Agent can identify the suspended call.
      <br/>
      Then the user can instruct how the call will be forwarded.
      <br/>
      There are two treatments to his request.
    </p>
    <p num="218">
      1. The feature can limit the transfer among the terminals subscribed by the user.
      <br/>
      It does not allow the user forward to any other terminal.
      <br/>
      However, if the user wants to forward to any other terminal, there may be an existing call forward supplementary feature to support it.
    </p>
    <p num="219">
      2. The call forward can be to the terminals for which the user subscribed to the service and any other terminals.
      <br/>
      In this case, the interaction can be designed to prompt the user to determine which kind of transfer will be required.
      <br/>
      For the subscribed terminal, the user can select from a list presented by the Calling Agent.
      <br/>
      For any other terminal, the user enters the destination directory number.
      <br/>
      The Calling Agent will use the existing supplementary services to perform the call transfer.
      <br/>
      There are two treatments to support this service.
      <br/>
      In the first, the customer must subscribe to the supplementary service before it can use this feature, and in the second, the telco/celco can charge the user on per usage basis.
    </p>
    <p num="220">If the destination is a PSTN directory number (DN), the switch can use existing software to perform the call forwarding.</p>
    <p num="221">If the destination is an H.323 terminal, the call is routed through Voice Over IP Gateway.</p>
    <p num="222">From H.323 Terminal</p>
    <p num="223">If the destination is another H.323 terminal, it can use the supplementary services to be defined for the H.323 to perform the call transfer.</p>
    <p num="224">If the destination is a PSTN terminal, the call can be routed to an Internet Terminal Gateway.</p>
    <p num="225">Alternate Access to the Calling Agent</p>
    <p num="226">
      When a customer is away from the set of registered terminals, he can access the Calling Agent using different vehicles.
      <br/>
      This section describes several possible implementations.
    </p>
    <p num="227">
      All these procedures incur the authentication of the user.
      <br/>
      The charge can be made to the user's account rather that the owner of the terminal.
    </p>
    <p num="228">Access from POTS or Equivalent</p>
    <p num="229">The following procedure can be used from a terminal which has a telephony key pad and no other display device such as a POTS terminal.</p>
    <p num="230">
      1. Dialing a special designated terminal number which will connect the voice channel to a IVR (interactive voice response) system which is a front end of the Calling Agent.
      <br/>
      This IVR system will collect the information and forward the information to the Calling Agent.
    </p>
    <p num="231">2. Log on using the user's account name and password.</p>
    <p num="232">3. The IVR system prompts the user for the destination terminal number.</p>
    <p num="233">4. If there is no called address handler go to step 7.</p>
    <p num="234">5. If called address has a handler, the handler will be activated and connects to the voice channel.</p>
    <p num="235">6. When the called address's handler has finished, go to step 7.</p>
    <p num="236">7. Calling Agent constructs the MIME message and uses MCSS to establish the call.</p>
    <p num="237">Access from ADSI Terminal or Equivalent</p>
    <p num="238">The following procedure can be used to establish a call from an ADSI (analog display services interface) terminal which has a display and programmable buttons.</p>
    <p num="239">1. Dial a special number on an ADSI server which has support for MCSS.</p>
    <p num="240">2. The user performs the log on using the user's account name and password.</p>
    <p num="241">
      3. The ADSI server will download an ADSI script to prompt the user with additional destination information such as:
      <br/>
      callee address
      <br/>
      medium (e.g. voice or fax)
      <br/>
      quality (using PSTN long distance or through Internet Gateway)
    </p>
    <p num="242">
      4.
      <br/>
      If there is a callee address handler, an ADSI script can be downloaded to the terminal to acquire more information.
    </p>
    <p num="243">5. When the data input is completed, the Calling Agent receives all the information and proceeds with the call setup.</p>
    <p num="244">Access from an H.323 Terminal with Web Browser Support</p>
    <p num="245">The following procedure can be used to establish a call from an H.323 Terminal with Web Browser support.</p>
    <p num="246">1. Access a Universal Resource Locator of the Calling Agent</p>
    <p num="247">
      2.
      <br/>
      Perform log on using the user name and password with encryption enabled and a public key used.
    </p>
    <p num="248">3. The Calling Agent's Web interface will download a form to acquire the callee address information.</p>
    <p num="249">4. If there is a callee address handler, the callee address handler will send another form to collect more data.</p>
    <p num="250">
      5. After all information is collected, the Called Agent performs an Internet terminal call setup on behalf of the caller.
      <br/>
      The call will be a callback type which means the destination call originate the H.323 call.
    </p>
    <p num="251">Create Attachment for the Call</p>
    <p num="252">
      The call setup E-mail has the capability to include fax, video clip and voice clip.
      <br/>
      The following description outlines how these contents can be created and included in the MIME message.
    </p>
    <p num="253">Attach Voice Clip to a PSTN Call</p>
    <p num="254">The following procedure can be used to create a call with a voice clip included.</p>
    <p num="255">1. User calls a special number to connect to the Calling Agent.</p>
    <p num="256">2. The user will use the password to authenticate his/her identity.</p>
    <p num="257">3. The user records a voice clip.</p>
    <p num="258">4. The user instructs the Calling Agent to call a destination.</p>
    <p num="259">Attach Fax to a PSTN Call</p>
    <p num="260">The following procedure can be used to attach a faxed document to a PSTN call.</p>
    <p num="261">1. User calls a special number to connect to the Calling Agent.</p>
    <p num="262">2. The user informs the Calling Agent to prepare a call with a Fax attachment.</p>
    <p num="263">3. The Calling Agent gives a terminal number and password to the user.</p>
    <p num="264">
      4. The terminal number is a fax reception server.
      <br/>
      The password allows an association of the fax uploaded and the current call request.
    </p>
    <p num="265">5. The user dials the terminal number to prepare the fax.</p>
    <p num="266">6. The fax server will ask the user to enter the password.</p>
    <p num="267">7. If accepted, the fax protocol for transmission is carried out.</p>
    <p num="268">8. Once the fax transmission is complete, the Calling Agent can construct the MIME message to establish the call or just deliver the Fax.</p>
    <p num="269">
      In an alternative to this procedure a user can access the fax server, with proper authentication using password, and fax the document.
      <br/>
      The fax server will provide a fax identification which can be used to instruct the Calling Agent to extract the fax from the fax server to construct the MIME message.
      <br/>
      With this technique only one terminal call is active at a given time so the user can have a single line for fax and voice call.
    </p>
    <p num="270">
      Similar functions can be executed on a PC which connects to the Calling Agent via a dial up line or Ethernet.
      <br/>
      In this case, the file can be sent to an FTP (file transfer protocol) server rather than a Fax server.
    </p>
    <p num="271">Access to MIME Messages Through UMS</p>
    <p num="272">
      The call setup messages are delivered as MIME message.
      <br/>
      They can be stored on a Unified Messaging Systems' (USM) message server such as Microsoft's Exchange, Sun's Solstice or Lucent's Intuity.
      <br/>
      The interface to these message will provide access to various components constituting the call setup message.
    </p>
    <p num="273">Caller Information</p>
    <p num="274">
      The caller's call setup requests are stored as E-mails or messages on the Unified Messaging System.
      <br/>
      These E-mail are the equivalent of the caller identification records on a Caller ID device.
    </p>
    <p num="275">Attachment</p>
    <p num="276">The UMS interface can retrieve and present the attachment (such as the text message, voice message, fax or even video) to the user.</p>
    <p num="277">Signal Flow Examples</p>
    <p num="278">Various signal flow examples will now be described with reference to FIGS. 6-12. In these figures, the numbered arrows represent message flows.</p>
    <p num="279">
      FIG. 6 shows the message flow for a basic voice call.
      <br/>
      In step 1, the Calling Agent constructs the call setup request message and sends it to the mail server to be sent to the Called Agent.
      <br/>
      In step 2, the mail server sends the E-mail to the PSN network.
      <br/>
      In step 3, the E-mail arrives at the Called Agent's mail server.
      <br/>
      In step 4, the Mail Server notifies the mail client which is the Called Agent of the arrival of the E-mail.
      <br/>
      In step 5, the Called Agent issues a command (using the mail protocol) to retrieve the E-mail.
      <br/>
      In step 6, the E-mail is delivered to the Called Agent.
      <br/>
      In step 7, the Called Agent constructs a reply and sends this to the mail server.
      <br/>
      In step 8, the mail server sends the E-mail to the PSN.
      <br/>
      In step 9, the E-mail arrives at the Calling Agent's mail server.
      <br/>
      In step 10, the mail server sends a notification to the Calling Agent.
      <br/>
      In step 11, the Calling Agent requests the mail server to deliver the E-mail.
      <br/>
      In step 12, the mail server delivers the E-mail to the Calling Agent and the Calling Agent uses the information in the reply message to establish the call.
    </p>
    <p num="280">
      FIG. 7 shows the message flow for a voice call with no answer.
      <br/>
      In step 1, the Calling Agent constructs the call setup request message and sends it to the mail server to be sent to the Called Agent.
      <br/>
      In step 2, the mail server sends the E-mail to the PSN network.
      <br/>
      In step 3, the E-mail arrives at the Called Agent's mail server.
      <br/>
      In step 4, the Mail server notifies the mail client which is the Called Agent of the arrival of the E-mail.
      <br/>
      In step 5, the Called Agent presents the call to the terminal through the presentation driver.
      <br/>
      In step 6, the user creates an attachment.
      <br/>
      The attachment can be voice message, fax, or graphics.
      <br/>
      The Calling Agent creates a reply message and passes it to the mail server.
      <br/>
      In step 7, the mail server sends the E-mail.
      <br/>
      In step 8, the mail is delivered to the Called Agent mail server.
      <br/>
      In step 9, the mail server sends a message arrival notification to the Called Agent will store the reply message with attachment to be retrieved by the user later.
    </p>
    <p num="281">
      FIG. 8 shows call forwarding to another MCSS user.
      <br/>
      In step 1, the Calling Agent constructs the call setup request message and sends it to the mail server to be sent to the Called Agent.
      <br/>
      In step 2, the mail server sends the E-mail to the PSN network.
      <br/>
      In step 3, the E-mail arrives at the Called Agent's mail server.
      <br/>
      In step 4, the mail server notifies the mail client which is the Called Agent 1 of the arrival of the E-mail.
      <br/>
      In step 5, the Called Agent 1 requests the mail server to deliver the E-mail.
      <br/>
      In step 6, by examining the user profile, the Called Agent 1 finds out that the call is to be forwarded to another user handled by Called Agent 2.
      <br/>
      In step 7, the Called Agent 1 instructs the mail server to forward the E-mail to the Called Agent 2.
      <br/>
      In step 8, the mail server delivers a message arrival notification to Called Agent 2.
      <br/>
      In step 9, the Called Agent 2 requests the mail server to deliver the mail.
      <br/>
      In step 10, the call setup request message is sent to the Called Agent 2.
      <br/>
      The Called Agent 2 can either initiate negotiation or accept the call.
    </p>
    <p num="282">
      FIG. 9 shows the voice message service/personal agent service.
      <br/>
      In step 1, the Calling Agent constructs the call setup request message and sends it to the mail server to be sent to the Called Agent.
      <br/>
      In step 2, the mail server sends the E-mail to the PSN network.
      <br/>
      In step 3, the E-mail arrives at the Called Agent's mail server.
      <br/>
      In step 4, the mail server notifies the mail client which is the Called Agent of the arrival of the E-mail.
      <br/>
      In step 5, after consulting the user profile, the Called Agent constructs a reply message which will connect the call to a voice message service server or a personal agent service server.
      <br/>
      The redirection in done by specifying the called address of where the call can be completed by the Calling Party.
      <br/>
      The reply message is passed to the mail server.
      <br/>
      In step 6, the mail server sends this to the network.
      <br/>
      In step 7, the reply mail is delivered to the mail server.
      <br/>
      In step 8, the mail server sends a message arrival notification to the Calling Agent.
      <br/>
      In step 9, the Calling Agent requests the mail server to deliver the message.
      <br/>
      In step 10, the mail server delivers the reply message to the Calling Agent.
      <br/>
      The Called Agent examines the contents of the reply and determines the call is accepted, and instructs the signalling components to complete the call without answering.
      <br/>
      The call is actually delivered to a voice message service or personal agent service.
    </p>
    <p num="283">
      FIG. 10 shows the "follow me" scenario.
      <br/>
      The user is now at a terminal which is not controlled by the Called Agent for the user.
      <br/>
      He/She first connects to the Call Agent of the user.
      <br/>
      He/She instructs the Call Agent to change the user profile to deliver calls to a specific terminal by giving its address.
      <br/>
      The Call Agent for the user collects the information and updates the user profile to be used by the Called Agent.
      <br/>
      In step 1, the Calling Agent constructs the call setup request message and sends it to the mail server to be sent to the Called Agent.
      <br/>
      In step 2, the mail server sends the E-mail to the PSN network.
      <br/>
      In step 3, the E-mail arrives at the Called Agent's mail server.
      <br/>
      In step 4, the Mail Server notifies the mail client which is the Called Agent of the arrival of the E-mail.
      <br/>
      In step 5, the Called Agent requests the mail server to deliver the E-mail.
      <br/>
      In step 6, by examining the user profile, the Called Agent finds our that the call is forwarded to Terminal A. In step 7, the Called Agent constructs a reply message which accepts the call with Terminal A's address as the Callee Address.
      <br/>
      The message is passed to the mail server.
      <br/>
      In step 8, the mail server send the mail to the PSN.
      <br/>
      In step 9, the PSN delivers the mail server.
      <br/>
      In step 10 the mail server sends a message arrival notification to the Calling Agent.
      <br/>
      In step 11, the Calling Agent requests the mail server to deliver the message.
      <br/>
      In step 12, the mail server delivers the E-mail to the Calling Agent.
      <br/>
      The Calling Agent extracts the message and finds out it is an accept reply message.
      <br/>
      It instructs the telephony signalling components to complete the call using the address in the reply message.
    </p>
    <p num="284">
      FIG. 11, shows a multi-media message with attachment.
      <br/>
      The user connects to the Call Agent to provide the contents of a multi-media message.
      <br/>
      The user can record a voice message.
      <br/>
      He/She can fax the document to the Call Agent.
      <br/>
      He/She can upload an electronic file using File Transfer Protocol to the Call Agent.
      <br/>
      The Call Agent provides an identity to every artifact stored.
      <br/>
      The user connects to Calling Agent and instruct the Calling Agent to establish an outgoing call using the artifacts stored at the Call Agent.
      <br/>
      The Calling Agent asks the Call Agent to provide the artifacts using the id provided by the user.
      <br/>
      The Call Agent sends the electronic copy of the artifact to the Calling Agent.
      <br/>
      In step 1, the Calling Agent constructs the call setup request message with all the artifacts as attachments and sends it to the mail server to be sent to the Called Agent.
      <br/>
      In step 2, the mail server sends the E-mail to the PSN network.
      <br/>
      In step 3, the E-mail arrives at the Called Agent's mail server.
      <br/>
      In step 4, the Mail Server notifies the mail client which is the Called Agent of the arrival of the E-mail.
      <br/>
      In step 5, the Called Agent issues a command (using the mail protocol) to retrieve the E-mail.
      <br/>
      In step 6, the E-mail is delivered to the Called Agent.
      <br/>
      In step 7, the Called Agent extracts the attachments and presents them to the terminal selectively according to the terminal capability described in the terminal profile.
      <br/>
      Later it constructs a reply and sends this to the mail server.
      <br/>
      In step 8, the mail server sends the E-mail to the PSN.
      <br/>
      In step 9, the E-mail arrives at the Calling Agent's mail server.
      <br/>
      In step 10, the mail server sends a notification to the Calling Agent.
      <br/>
      In step 11, the Calling Agent requests the mail server to deliver the E-mail.
      <br/>
      In step 12, the mail server delivers the E-mail to the Calling Agent.
      <br/>
      The Calling Agent extracts the contents in the reply message to terminate the call with information in the reply or initiate negotiation or initiate a call setup using the signalling components.
    </p>
    <p num="285">
      FIG. 12 shows a multiple multi-media call setup.
      <br/>
      The user connects to the Calling Agent and requests a multiple-call setup request.
      <br/>
      The Calling Agent redirects the user's call to an IVR system to collect the multiple call setup request.
      <br/>
      When the data collection is complete, the IVR system passes the multiple call setup request the Calling Agent.
      <br/>
      In step 1, the Calling Agent constructs the call setup request message with multiple call requests.
      <br/>
      In step 2, the mail server sends the E-mail to the PSN network.
      <br/>
      In step 3, the E-mail arrives at the Called Agent's mail server.
      <br/>
      In step 4, the Mail Server notifies the mail client which is the Called Agent of the arrival of the E-mail.
      <br/>
      In step 5, the Called Agent issues a command (using the mail protocol) to retrieve the E-mail.
      <br/>
      In step 6, the E-mail is delivered to the Called Agent.
      <br/>
      In step 7, the Called Agent extracts the call requests from the message and constructs a reply to accept all the calls.
      <br/>
      In step 8, the mail server sends the E-mail to the PSN.
      <br/>
      In step 9, the E-mail arrives at the Calling Agent's mail server.
      <br/>
      In step 10, the mail server sends a notification to the Calling Agent.
      <br/>
      In step 11, the Calling Agent requests the mail server to deliver the E-mail.
      <br/>
      In step 12 the mail server delivers the E-mail to the Calling Agent.
      <br/>
      The Calling Agent sets up calls using the address information in the message.
    </p>
    <p num="286">An attachment may be presented to the terminal without completing the call if the called party chooses this option.</p>
    <p num="287">
      Numerous modifications and variations of the present invention are possible in light of the above teachings.
      <br/>
      It is therefore to be understood that within the scope of the appended claims, the invention may be practised otherwise than as specifically described herein.
    </p>
    <p num="288">
      In the illustrated embodiments, the Called Agent and the Calling Agent are network components.
      <br/>
      Alternatively, these can be migrated to terminals.
      <br/>
      This can be realized by a network-wide distributed implementation of these components.
    </p>
  </description>
  <claims format="original" lang="en" id="claim_en">
    <claim num="1">
      <claim-text>I claim:</claim-text>
      <claim-text>1. A multimedia call signalling method comprising the steps of:</claim-text>
      <claim-text>a) a calling agent receiving from a calling terminal of a first user served by the calling agent a call setup request containing a called user identifier and looking up an electronic network address associated with the called user identifier; b) the calling agent sending a call setup electronic message with said electronic network address to a called agent; c) the called agent maintaining a user profile database comprising for each of a plurality of users served by the called agent a respective plurality of terminal identifiers of terminals of the user, each plurality of terminal identifiers identifying terminals of at least two different protocol types; d) the called agent associating with each of the plurality of users served by the called agent a selection of a current terminal at which the user expects calls to be directed; e) the called agent receiving the call setup electronic message and associating the call setup message with a particular user of said plurality of users served by the called agent, and the called agent looking up the current terminal associated with the particular user;</claim-text>
      <claim-text>and f) the called agent and the calling agent coordinating a call setup between a calling terminal and the current terminal associated with the particular user thereby resulting in a connection between the calling terminal and the current terminal.</claim-text>
    </claim>
    <claim num="2">
      <claim-text>2. A method according to claim 1 wherein said call setup request is originated from said calling terminal.</claim-text>
    </claim>
    <claim num="3">
      <claim-text>3. A method according to claim 1 wherein said call setup request is originated from a user interface.</claim-text>
    </claim>
    <claim num="4">
      <claim-text>4. A method according to claim 1 wherein said call setup request contains requests for multiple connections between the calling terminal and the current terminal associated with the particular user.</claim-text>
    </claim>
    <claim num="5">
      <claim-text>5. A method according to claim 1 wherein said call setup electronic message is associated with the particular user on the basis of a field included in the call setup electronic message.</claim-text>
    </claim>
    <claim num="6">
      <claim-text>6. A method according to claim 1 wherein the field is the called user identifier.</claim-text>
    </claim>
    <claim num="7">
      <claim-text>7. A method according to claim 1 wherein the call is setup over one of a plurality of network media.</claim-text>
    </claim>
    <claim num="8">
      <claim-text>8. A method according to claim 1 wherein the call is connected through either a PSTN network or a PSN network.</claim-text>
    </claim>
    <claim num="9">
      <claim-text>9. A method according to claim 1 further comprising the step of: the calling agent and the called agent communicating with each other through reply electronic messages to negotiate parameters for the call to be setup.</claim-text>
    </claim>
    <claim num="10">
      <claim-text>10. A method according to claim 1 further comprising the step of the calling terminal including one or more attachments in the call setup request which are subsequently included by the calling agent in the call setup electronic message and which are presented on the current terminal.</claim-text>
    </claim>
    <claim num="11">
      <claim-text>11. A method according to claim 1 further comprising the step of a called presentation layer connected between the called agent and the current terminal performing a receive type conversion on signals received through the connection from the calling terminal from a transmission format used over the connection to a current terminal format required by the current terminal and performing a transmit type conversion on signals to be sent through the connection by the current terminal format to the transmission format.</claim-text>
    </claim>
    <claim num="12">
      <claim-text>12. A method according to claim 11 further comprising the step of a called presentation layer performing a type conversion on the attachments to convert them to a type which is processable by the called terminal.</claim-text>
    </claim>
    <claim num="13">
      <claim-text>13. A method according to claim 1 wherein the step of coordinating the call setup comprises the steps of: determining one or more networks which are to be used for the call;</claim-text>
      <claim-text>and using native network signalling components associated with said networks to setup the call and make said connection.</claim-text>
    </claim>
    <claim num="14">
      <claim-text>14. A method according to claim 1 wherein said called user identifier can be any one of the plurality of terminal identifiers of the user served by the called agent.</claim-text>
    </claim>
    <claim num="15">
      <claim-text>15. A method according to claim 14 wherein the electronic network address is an electronic mail address which identifies the particular user and the called agent, wherein the called agent associates the call setup request with the particular user on the basis of the electronic mail address.</claim-text>
    </claim>
    <claim num="16">
      <claim-text>16. A method according to claim 14 further comprising: the calling agent including the called user identifier in the call setup electronic message.</claim-text>
    </claim>
    <claim num="17">
      <claim-text>17. A method according to claim 16 wherein the called agent associating the call setup request with a particular user served by the called agent is done on the basis of the called user identifier included in the call setup electronic message.</claim-text>
    </claim>
    <claim num="18">
      <claim-text>18. A method according to claim 1 further comprising the called agent receiving for each of the users served by the called agent a selection of which of said plurality of terminal identifiers of terminals of the user served by the called agent is to be the current terminal for that user.</claim-text>
    </claim>
    <claim num="19">
      <claim-text>19. A method according to claim 1 wherein receiving a call setup request from the calling terminal comprises receiving the call setup request from any one of a plurality of terminals of the first user served by the calling agent, the plurality of terminals including terminals of at least two different types.</claim-text>
    </claim>
    <claim num="20">
      <claim-text>20. A method according to claim 19 further comprising the step of a calling presentation layer connected between the calling agent and the calling terminal performing a transmit type conversion on signals received from the calling terminal to a transmission format used over the connection and performing a receive type conversion on signals received over the connection from the transmit format used over the connection to the calling terminal format.</claim-text>
    </claim>
    <claim num="21">
      <claim-text>21. A multimedia call signalling end system comprising: a) means for coordinating the establishment of an outgoing connection between a calling terminal which is any one of a plurality of calling terminals of at least two different protocol types of a first user served by the multimedia call signalling end system and a current terminal of a second user having a plurality of terminals served by another multimedia call signalling end system; b) means for maintaining an electronic network address in association with all of the second user's plurality of terminals, the electronic network address belonging to the another multimedia called signalling end system designated to process any calls to the second user; c) means for receiving a call setup request from the calling terminal including a particular terminal identifier of any of said second user's plurality of terminals; d) means for looking up an electronic network address corresponding with the terminal identifier; e) means for generating a call setup electronic message with said electronic network address and sending it to said electronic network address;</claim-text>
      <claim-text>and f) means for receiving a reply message to said call setup electronic message, the reply message specifying the current terminal of the second user to which calls initially specifying any of said second user's plurality of terminals are to be directed.</claim-text>
    </claim>
    <claim num="22">
      <claim-text>22. A system according to claim 21 wherein said means for receiving a call setup request receives the request from the calling terminal.</claim-text>
    </claim>
    <claim num="23">
      <claim-text>23. A system according to claim 21 further comprising a user interface for receiving the call setup request.</claim-text>
    </claim>
    <claim num="24">
      <claim-text>24. A system according to claim 21 further comprising a terminal profile database containing a terminal profile for each of a user's terminals which are served by the system including a terminal type for each terminal, wherein the calling terminal is one of the terminals.</claim-text>
    </claim>
    <claim num="25">
      <claim-text>25. A system according to claim 24 wherein a canned terminal profile is used when the calling terminal is not included in said terminal profile database.</claim-text>
    </claim>
    <claim num="26">
      <claim-text>26. A system according to claim 24 further comprising a user profile database containing an identification of which of said user's terminals a user is currently using.</claim-text>
    </claim>
    <claim num="27">
      <claim-text>27. A system according to claim 21 wherein said means for maintaining comprises an address translation database containing a mapping from each terminal identifier to said electronic network address.</claim-text>
    </claim>
    <claim num="28">
      <claim-text>28. A system according to claim 21 wherein said outgoing connection is established over a packet switched network or a public switched telephone network depending upon billing and quality considerations, in cooperation with signalling components with the selected network.</claim-text>
    </claim>
    <claim num="29">
      <claim-text>29. A system according to claim 21 further comprising local network interfaces to each of the first user's calling terminals for supporting calling terminals of various protocol types including cellular terminals, wireline terminals, and H.323 terminals.</claim-text>
    </claim>
    <claim num="30">
      <claim-text>30. A system according to claim 21 further comprising: means for performing a receive type conversion on signals received through the outgoing connection from the current terminal from the transmission format used over the outgoing connection to a calling terminal format required by the calling terminal if the calling terminal format is different from the transmission format, and for performing a transmit type conversion on signals to be sent through the outgoing connection from the calling terminal format to the transmission format if the calling terminal format is different from the transmission format.</claim-text>
    </claim>
    <claim num="31">
      <claim-text>31. A system according to claim 21 further comprising means for handling incoming call setup electronic messages comprising: a) means for maintaining for each of a plurality of users served by the system a selection from a plurality of the users terminals of a current terminal to which calls are to be directed; b) means for receiving an incoming call setup electronic message, the incoming call setup electronic message including a user identifier; c) means for looking up a current terminal identifier which identifies a current terminal associated with the user identifier and responding to the incoming call setup message with a reply message specifying the current terminal;</claim-text>
      <claim-text>and d) means for coordinating the establishment of an incoming connection between the current terminal and another terminal which originated the incoming call setup.</claim-text>
    </claim>
    <claim num="32">
      <claim-text>32. A system according to claim 31 adapted to be connected to a network comprising a packet switching network (PSN) and a public switched telephone network (PSTN), and wherein said means for coordinating the establishment of an outgoing connection participates in the selection of either the PSN or the PSTN for the outgoing connection, and then cooperates with a native signalling component for the selected network to make the outgoing connection, and wherein said means for coordinating the establishment of an incoming connection participates in the selection of either the PSN or the PSTN for the incoming connection and then cooperates with a native signalling component for the selected network to make the incoming connection.</claim-text>
    </claim>
    <claim num="33">
      <claim-text>33. A system according to claim 31 wherein said means for coordinating the establishment of an outgoing and incoming connection respectively participate in a determination of a transmission format each said connection, the system further comprising: means for performing a receive type conversion on signals received through the incoming connection from a transmission format used over the incoming connection to a current terminal format required by the current terminal if the current terminal format is different from the transmission format, and for performing a transmit type conversion on signals to be sent through the incoming connection from the current terminal format to the transmission format if the current terminal format is different from the transmission format;</claim-text>
      <claim-text>and means for performing a receive type conversion on signals received through the outgoing connection from a transmission format used over the outgoing connection to a calling terminal format required by the calling terminal if the calling terminal format is different from the transmission format, and for performing a transmit type conversion on signals to be sent through the outgoing connection from the calling terminal format to the transmission format if the calling terminal format is different from the transmission format.</claim-text>
    </claim>
    <claim num="34">
      <claim-text>34. A system according to claim 21 further comprising an interface to a Unified Messaging System or personal agent service.</claim-text>
    </claim>
  </claims>
</questel-patent-document>