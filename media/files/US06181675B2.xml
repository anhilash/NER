<?xml version="1.0" encoding="UTF-8"?>
<questel-patent-document lang="en" date-produced="20180805" produced-by="Questel" schema-version="3.23" file="US06181675B2.xml">
  <bibliographic-data lang="en">
    <publication-reference publ-desc="Granted patent as second publication">
      <document-id>
        <country>US</country>
        <doc-number>06181675</doc-number>
        <kind>B2</kind>
        <date>20010130</date>
      </document-id>
      <document-id data-format="questel">
        <doc-number>US6181675</doc-number>
      </document-id>
    </publication-reference>
    <original-publication-kind>B2</original-publication-kind>
    <application-reference is-representative="YES" family-id="16116359" extended-family-id="20881018">
      <document-id>
        <country>US</country>
        <doc-number>09110200</doc-number>
        <kind>A</kind>
        <date>19980706</date>
      </document-id>
      <document-id data-format="questel">
        <doc-number>1998US-09110200</doc-number>
      </document-id>
      <document-id data-format="questel_Uid">
        <doc-number>21414482</doc-number>
      </document-id>
    </application-reference>
    <language-of-filing>en</language-of-filing>
    <language-of-publication>en</language-of-publication>
    <priority-claims>
      <priority-claim kind="national" sequence="1">
        <country>JP</country>
        <doc-number>18232697</doc-number>
        <kind>A</kind>
        <date>19970708</date>
        <priority-active-indicator>Y</priority-active-indicator>
      </priority-claim>
      <priority-claim data-format="questel" sequence="1">
        <doc-number>1997JP-0182326</doc-number>
      </priority-claim>
    </priority-claims>
    <dates-of-public-availability>
      <publication-of-grant-date>
        <date>20010130</date>
      </publication-of-grant-date>
    </dates-of-public-availability>
    <classifications-ipcr>
      <classification-ipcr sequence="1">
        <text>H04Q   3/00        20060101AFI20051220RMJP</text>
        <ipc-version-indicator>
          <date>20060101</date>
        </ipc-version-indicator>
        <classification-level>A</classification-level>
        <section>H</section>
        <class>04</class>
        <subclass>Q</subclass>
        <main-group>3</main-group>
        <subgroup>00</subgroup>
        <symbol-position>F</symbol-position>
        <classification-value>I</classification-value>
        <generating-office>
          <country>JP</country>
        </generating-office>
        <classification-status>R</classification-status>
        <classification-data-source>M</classification-data-source>
        <action-date>
          <date>20051220</date>
        </action-date>
      </classification-ipcr>
      <classification-ipcr sequence="2">
        <text>H04L  12/70        20130101ALI20150401RHJP</text>
        <ipc-version-indicator>
          <date>20130101</date>
        </ipc-version-indicator>
        <classification-level>A</classification-level>
        <section>H</section>
        <class>04</class>
        <subclass>L</subclass>
        <main-group>12</main-group>
        <subgroup>70</subgroup>
        <symbol-position>L</symbol-position>
        <classification-value>I</classification-value>
        <generating-office>
          <country>JP</country>
        </generating-office>
        <classification-status>R</classification-status>
        <classification-data-source>H</classification-data-source>
        <action-date>
          <date>20150401</date>
        </action-date>
      </classification-ipcr>
      <classification-ipcr sequence="3">
        <text>H04L  12/951       20130101ALI20150401RHJP</text>
        <ipc-version-indicator>
          <date>20130101</date>
        </ipc-version-indicator>
        <classification-level>A</classification-level>
        <section>H</section>
        <class>04</class>
        <subclass>L</subclass>
        <main-group>12</main-group>
        <subgroup>951</subgroup>
        <symbol-position>L</symbol-position>
        <classification-value>I</classification-value>
        <generating-office>
          <country>JP</country>
        </generating-office>
        <classification-status>R</classification-status>
        <classification-data-source>H</classification-data-source>
        <action-date>
          <date>20150401</date>
        </action-date>
      </classification-ipcr>
      <classification-ipcr sequence="4">
        <text>H04L  12/955       20130101ALI20150401RHJP</text>
        <ipc-version-indicator>
          <date>20130101</date>
        </ipc-version-indicator>
        <classification-level>A</classification-level>
        <section>H</section>
        <class>04</class>
        <subclass>L</subclass>
        <main-group>12</main-group>
        <subgroup>955</subgroup>
        <symbol-position>L</symbol-position>
        <classification-value>I</classification-value>
        <generating-office>
          <country>JP</country>
        </generating-office>
        <classification-status>R</classification-status>
        <classification-data-source>H</classification-data-source>
        <action-date>
          <date>20150401</date>
        </action-date>
      </classification-ipcr>
      <classification-ipcr sequence="5">
        <text>H04Q  11/04        20060101A I20051008RMEP</text>
        <ipc-version-indicator>
          <date>20060101</date>
        </ipc-version-indicator>
        <classification-level>A</classification-level>
        <section>H</section>
        <class>04</class>
        <subclass>Q</subclass>
        <main-group>11</main-group>
        <subgroup>04</subgroup>
        <classification-value>I</classification-value>
        <generating-office>
          <country>EP</country>
        </generating-office>
        <classification-status>R</classification-status>
        <classification-data-source>M</classification-data-source>
        <action-date>
          <date>20051008</date>
        </action-date>
      </classification-ipcr>
    </classifications-ipcr>
    <classification-national>
      <country>US</country>
      <main-classification>
        <text>370218000</text>
        <class>370</class>
        <subclass>218000</subclass>
      </main-classification>
      <further-classification sequence="1">
        <text>370231000</text>
        <class>370</class>
        <subclass>231000</subclass>
      </further-classification>
      <further-classification sequence="2">
        <text>370235000</text>
        <class>370</class>
        <subclass>235000</subclass>
      </further-classification>
      <further-classification sequence="3">
        <text>370236200</text>
        <class>370</class>
        <subclass>236200</subclass>
      </further-classification>
      <further-classification sequence="4">
        <text>370394000</text>
        <class>370</class>
        <subclass>394000</subclass>
      </further-classification>
      <further-classification sequence="5">
        <text>370465000</text>
        <class>370</class>
        <subclass>465000</subclass>
      </further-classification>
      <further-classification sequence="6">
        <text>370506000</text>
        <class>370</class>
        <subclass>506000</subclass>
      </further-classification>
    </classification-national>
    <classifications-ecla>
      <classification-ecla sequence="1">
        <text>H04Q-011/04S2</text>
        <section>H</section>
        <class>04</class>
        <subclass>Q</subclass>
        <main-group>011</main-group>
        <subgroup>04S2</subgroup>
      </classification-ecla>
    </classifications-ecla>
    <patent-classifications>
      <patent-classification sequence="1">
        <classification-scheme office="EP" scheme="CPC">
          <date>20130101</date>
        </classification-scheme>
        <classification-symbol>H04Q-011/0478</classification-symbol>
        <section>H</section>
        <class>04</class>
        <subclass>Q</subclass>
        <main-group>11</main-group>
        <subgroup>0478</subgroup>
        <symbol-position>F</symbol-position>
        <classification-value>I</classification-value>
        <classification-status>B</classification-status>
        <classification-data-source>H</classification-data-source>
        <action-date>
          <date>20130101</date>
        </action-date>
      </patent-classification>
      <patent-classification sequence="2">
        <classification-scheme office="EP" scheme="CPC">
          <date>20130101</date>
        </classification-scheme>
        <classification-symbol>H04J-2203/0046</classification-symbol>
        <section>H</section>
        <class>04</class>
        <subclass>J</subclass>
        <main-group>2203</main-group>
        <subgroup>0046</subgroup>
        <symbol-position>L</symbol-position>
        <classification-value>A</classification-value>
        <classification-status>B</classification-status>
        <classification-data-source>H</classification-data-source>
        <action-date>
          <date>20130101</date>
        </action-date>
      </patent-classification>
      <patent-classification sequence="3">
        <classification-scheme office="EP" scheme="CPC">
          <date>20130101</date>
        </classification-scheme>
        <classification-symbol>H04L-2012/5618</classification-symbol>
        <section>H</section>
        <class>04</class>
        <subclass>L</subclass>
        <main-group>2012</main-group>
        <subgroup>5618</subgroup>
        <symbol-position>L</symbol-position>
        <classification-value>A</classification-value>
        <classification-status>B</classification-status>
        <classification-data-source>H</classification-data-source>
        <action-date>
          <date>20130101</date>
        </action-date>
      </patent-classification>
      <patent-classification sequence="4">
        <classification-scheme office="EP" scheme="CPC">
          <date>20130101</date>
        </classification-scheme>
        <classification-symbol>H04L-2012/5627</classification-symbol>
        <section>H</section>
        <class>04</class>
        <subclass>L</subclass>
        <main-group>2012</main-group>
        <subgroup>5627</subgroup>
        <symbol-position>L</symbol-position>
        <classification-value>A</classification-value>
        <classification-status>B</classification-status>
        <classification-data-source>H</classification-data-source>
        <action-date>
          <date>20130101</date>
        </action-date>
      </patent-classification>
      <patent-classification sequence="5">
        <classification-scheme office="EP" scheme="ICO"/>
        <classification-symbol>T04J-203/00C7</classification-symbol>
      </patent-classification>
      <patent-classification sequence="6">
        <classification-scheme office="EP" scheme="ICO"/>
        <classification-symbol>T04L-012/56A7E</classification-symbol>
      </patent-classification>
      <patent-classification sequence="7">
        <classification-scheme office="EP" scheme="ICO"/>
        <classification-symbol>T04L-012/56A12C</classification-symbol>
      </patent-classification>
    </patent-classifications>
    <number-of-claims>2</number-of-claims>
    <exemplary-claim>2</exemplary-claim>
    <figures>
      <number-of-drawing-sheets>4</number-of-drawing-sheets>
      <number-of-figures>4</number-of-figures>
      <image-key data-format="questel">US6181675</image-key>
    </figures>
    <invention-title format="original" lang="en" id="title_en">Uninterrupted switching between active and backup systems in ATM communication apparatus</invention-title>
    <references-cited>
      <citation srep-phase="examiner">
        <patcit num="1">
          <text>SUZUKI TOSHIO</text>
          <document-id>
            <country>US</country>
            <doc-number>5222108</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5222108</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="examiner">
        <patcit num="2">
          <text>KUBO AKIHIKO, et al</text>
          <document-id>
            <country>US</country>
            <doc-number>5636215</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5636215</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="examiner">
        <patcit num="3">
          <text>MIYAMOTO AKIHIRO</text>
          <document-id>
            <country>US</country>
            <doc-number>5715249</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5715249</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="examiner">
        <patcit num="4">
          <text>FUJIMAKI SHIGEO, et al</text>
          <document-id>
            <country>US</country>
            <doc-number>5799003</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5799003</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="examiner">
        <patcit num="5">
          <text>ABDELHAMID HISHAM SAMI, et al</text>
          <document-id>
            <country>US</country>
            <doc-number>6023467</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US6023467</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="examiner">
        <patcit num="6">
          <text>YAMASHITA HIROAKI</text>
          <document-id>
            <country>US</country>
            <doc-number>6097739</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US6097739</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="applicant">
        <patcit num="7">
          <text>NEC CORP</text>
          <document-id>
            <country>JP</country>
            <doc-number>H0486043</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>JP04086043</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="applicant">
        <patcit num="8">
          <text>NIPPON TELEGRAPH &amp; TELEPHONE</text>
          <document-id>
            <country>JP</country>
            <doc-number>H0498944</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>JP04098944</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="applicant">
        <patcit num="9">
          <text>HITACHI LTD</text>
          <document-id>
            <country>JP</country>
            <doc-number>H0498941</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>JP04098941</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="applicant">
        <patcit num="10">
          <text>HITACHI LTD</text>
          <document-id>
            <country>JP</country>
            <doc-number>H0498917</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>JP04098917</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="applicant">
        <patcit num="11">
          <text>MITSUBISHI ELECTRIC CORP</text>
          <document-id>
            <country>JP</country>
            <doc-number>H06311176</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>JP06311176</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="applicant">
        <patcit num="12">
          <text>NEC CORP, et al</text>
          <document-id>
            <country>JP</country>
            <doc-number>H0774755</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>JP07074755</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="applicant">
        <patcit num="13">
          <text>NEC CORP, et al</text>
          <document-id>
            <country>JP</country>
            <doc-number>H0774756</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>JP07074756</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="applicant">
        <patcit num="14">
          <text>NEC CORP</text>
          <document-id>
            <country>JP</country>
            <doc-number>H08107416</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>JP08107416</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="applicant">
        <patcit num="15">
          <text>FUJITSU LTD</text>
          <document-id>
            <country>JP</country>
            <doc-number>H08256159</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>JP08256159</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="applicant">
        <patcit num="16">
          <text>MITSUBISHI ELECTRIC CORP</text>
          <document-id>
            <country>JP</country>
            <doc-number>H09247162</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>JP09247162</doc-number>
          </document-id>
        </patcit>
      </citation>
    </references-cited>
    <parties>
      <applicants>
        <applicant data-format="original" app-type="applicant" sequence="1">
          <addressbook lang="en">
            <orgname>NEC Corporation</orgname>
            <address>
              <address-1>Tokyo, JP</address-1>
              <city>Tokyo</city>
              <country>JP</country>
            </address>
          </addressbook>
          <nationality>
            <country>JP</country>
          </nationality>
        </applicant>
        <applicant data-format="questel" app-type="applicant" sequence="2">
          <addressbook lang="en">
            <orgname>NEC</orgname>
          </addressbook>
          <nationality>
            <country>JP</country>
          </nationality>
        </applicant>
      </applicants>
      <inventors>
        <inventor data-format="original" sequence="1">
          <addressbook lang="en">
            <name>Miyamoto, Akihiro</name>
            <address>
              <address-1>Tokyo, JP</address-1>
              <city>Tokyo</city>
              <country>JP</country>
            </address>
          </addressbook>
          <nationality>
            <country>JP</country>
          </nationality>
        </inventor>
      </inventors>
      <agents>
        <agent sequence="1" rep-type="agent">
          <addressbook lang="en">
            <orgname>Young &amp; Thompson</orgname>
          </addressbook>
        </agent>
      </agents>
    </parties>
    <examiners>
      <primary-examiner>
        <name>Hsu, Alpus H.</name>
      </primary-examiner>
    </examiners>
    <lgst-data>
      <lgst-status>LAPSED</lgst-status>
    </lgst-data>
  </bibliographic-data>
  <abstract format="original" lang="en" id="abstr_en">
    <p id="P-EN-00001" num="00001">
      <br/>
      A reception device in the ATM communication apparatus has a format conversion buffer, an underflow detecting circuit, and an in-device empty cell insertion control circuit in each of the active and backup systems.
      <br/>
      The format conversion buffer effects a format conversion on a transmission path from a format in which an ATM cell is inserted in only the payload of an SDH frame to a format in which an ATM cell is inserted in both the overhead and payload of an SDH frame, thereby to absorb the difference between transmission path lengths of the active and backup systems.
      <br/>
      The underflow detecting circuit detects an underflow of the format conversion buffer and outputs a detected underflow signal.
      <br/>
      The in-device empty cell insertion control circuit outputs an in-device empty cell insertion instruction signal in response to a detected underflow signal from the underflow detecting circuit in one of the active and backup systems.
      <br/>
      An in-device empty cell insertion circuit inserts an in-device empty cell into an output signal from the format conversion buffer in response to an in-device empty cell insertion instruction signal.
      <br/>
      For switching between the active and backup systems, an in-device empty cell is inserted to prevent cells from being shifted out of phase between the active and backup systems.
    </p>
  </abstract>
  <description format="original" lang="en" id="desc_en">
    <heading>BACKGROUND OF THE INVENTION</heading>
    <p num="1">
      1.
      <br/>
      Field of the Invention
    </p>
    <p num="2">The present invention relates to an ATM (Asynchronous Transfer Mode) communication apparatus, and more particularly to a device for effecting uninterrupted switching between active and backup systems on a reception side of an ATM communication apparatus.</p>
    <p num="3">2. Description of the Related Art</p>
    <p num="4">
      For uninterrupted switching on a transmission path between active and backup systems (also referred to as "system 0" and "system 1") of an ATM communication apparatus, ATM cells of input data from the transmission path are kept in phase with each other at all times between the active and backup systems on a reception side of the ATM communication apparatus.
      <br/>
      For performing such a function, it is necessary to hold ATM cells to be transmitted in the same sequence between the system 0 and the system 1 on a transmission side of the ATM communication apparatus.
    </p>
    <p num="5">To meet such a requirement, heretofore, the transmission side of the ATM communication apparatus has a circuit for sending a reset signal from the active system to the backup system when a format conversion buffer underflows to simultaneously initializing buffer operation, a circuit for indicating the leading position of an ATM cell with respect to the overhead of an SDH (Synchronous Digital Hierarchy) frame from the active system to the backup system for each frame, and holding ATM cells in phase with each other, and a circuit for indicating the phase of an OAM (Operation And Maintenance) cell from the active system to the backup system and vice versa, and inserting a transmission path empty cell into one of the active and backup systems when an OAM cell is present in only the other system.</p>
    <p num="6">FIG. 1 of the accompanying drawings shows a reception device in a conventional ATM communication apparatus.</p>
    <p num="7">As shown in FIG. 1, the reception device comprises a system 0, a system 1, and switching circuits 9, 18.</p>
    <p num="8">The system 0 comprises a write control circuit 2, a read control circuit 3, a buffer underflow detecting circuit 4, a format conversion buffer 5, an in-device empty cell insertion circuit 7, and an in-device empty cell insertion control circuit 8.</p>
    <p num="9">The system 1 similarly comprises a write control circuit 11, a read control circuit 12, a buffer underflow detecting circuit 13, a format conversion buffer 14, an in-device empty cell insertion circuit 16, and an in-device empty cell insertion control circuit 17.</p>
    <p num="10">The format conversion buffers 5, 14 effect a format conversion on the transmission path from a format in which an ATM cell is inserted in only the payload of an SDH frame to a format in which an ATM cell is inserted in both the overhead and payload of an SDH frame, thereby to absorb the difference between transmission path lengths of the systems 0, 1.</p>
    <p num="11">The write control circuits 2, 11 control the writing of cells S2, S13 on the transmission path into the format conversion buffers 5, 14, respectively.</p>
    <p num="12">The read control circuits 3, 12 control the reading of the format conversion buffers 5, 14, respectively.</p>
    <p num="13">
      The buffer underflow detecting circuits 4, 13 monitor the amount of buffering of the format conversion buffers 5, 14, respectively, with control signals S4, S5 from the write and read control circuits 2, 3 and control signals S15, S16 from the write and read control circuits 11, 12.
      <br/>
      When an underflow is detected, the buffer underflow detecting circuits 4, 13 transmit detected underflow signals S6, S17 to the in-device empty cell insertion control circuits 8, 17 in the respective systems.
    </p>
    <p num="14">When the in-device empty cell insertion control circuit 8 receives the detected underflow signal S6, the in-device empty cell insertion control circuit 8 outputs an in-device empty cell insertion instruction signal S9 to the read control circuit 3 and the in-device empty cell insertion circuit 7.</p>
    <p num="15">When the in-device empty cell insertion control circuit 17 receives the detected underflow signal S17, the in-device empty cell insertion control circuit 17 outputs an in-device empty cell insertion instruction signal S20 to the read control circuit 12 and the in-device empty cell insertion circuit 16.</p>
    <p num="16">When the read control circuits 3, 12 receive the in-device empty cell insertion instruction signals S9, S20, respectively, the read control circuits 3, 12 do not read effective cells from the format conversion buffers 5, 14, respectively.</p>
    <p num="17">FIG. 2 of the accompanying drawings shows a transmission device in a conventional ATM communication apparatus, and FIG. 3 of the accompanying drawings shows a construction of a SDH frame.</p>
    <p num="18">
      The system 0 comprises a format conversion buffer 21A, a cell pulse generator 22A, a cell position byte number measuring circuit 23A, and a cell pulse generation controller 24A.
      <br/>
      The system 1 similarly comprises a format conversion buffer 21B, a cell pulse generator 22B, a cell position byte number measuring circuit 23B, and a cell pulse generation controller 24B.
    </p>
    <p num="19">These circuits are employed for the purpose of completely synchronizing the operation of circuits around format conversion buffers between the system 0 and the system 1 on the transmission side to insert transmission path empty cells into effective cells at the same position.</p>
    <p num="20">
      The cell position byte number measuring circuit 23A measures from a SPOH (overhead) signal and a cell pulse how many bytes (values a, b in FIG. 3) an ATM cell is spaced apart from positions corresponding to SOH, POH in an SDH frame, and transmits the measured number of cell position bytes to the cell pulse generation controller 24B in the system 0.
      <br/>
      The cell pulse generation controller 24B calculates the next number (value b) of cell position bytes from the number (value a) of cell position bytes measured by the cell position byte number measuring circuit 23A and the SPOH indicating signal, and controls the cell pulse generator 22B so that it generates a cell pulse at a position indicated by the value b. On the other hand, the cell pulse generation controller 24A determines a cell pulse position, independent of the system 0.
    </p>
    <p num="21">
      Therefore, the number of cell position bytes in the system 0 is equalized with the number of cell position bytes in the system 0.
      <br/>
      In this manner, the operation to insert transmission path empty cells is completely synchronized between the systems, thus holding ATM cells to be transmitted in the same sequence.
    </p>
    <p num="22">The in-device empty cell insertion circuits 7, 16 insert in-device empty cells into output signals S7, S18 from the format conversion buffers 5, 14 in response to the in-device empty cell insertion instruction signals S9, S20, respectively.</p>
    <p num="23">
      In the above system for effecting uninterrupted switching on the transmission path between the system 0 and the system 1 of an ATM communication apparatus, the reception side of the ATM communication apparatus is required to monitor the phase of ATM cells in the system 0 and the system 1 of input data from the transmission path, count phase differences of the ATM cells, and equalize the phase differences of the ATM cells with the format conversion buffers for absorbing the difference between the transmission path lengths of the systems 0, 1 for thereby keeping the ATM cells in the systems 0, 1 in phase with each other at all times.
      <br/>
      If the detection of underflows in the format conversion buffers differs between the systems 0, 1, then an in-device empty cell is inserted into only one of the systems 0, 1, causing a cell phase shift which makes it impossible to effect uninterrupted switching on the transmission path between the system 0 and the system 1.
    </p>
    <p num="24">
      A signal on the transmission path may be an OAM cell in only one of the systems 0, 1.
      <br/>
      When an OAM cell is received by only one of the systems 0, 1, a cell phase shift is caused, also making it impossible to effect uninterrupted switching on the transmission path between the system 0 and the system 1.
    </p>
    <p num="25">
      For achieving uninterrupted switching on the transmission path between the system 0 and the system 1 on the reception side of the ATM communication apparatus, it is necessary to hold ATM cells to be transmitted in the same sequence between the system 0 and the system 1 on the transmission side of the ATM communication apparatus.
      <br/>
      To meet such a requirement, heretofore, the transmission side of the ATM communication apparatus needs to have a circuit for sending a reset signal from the active system to the backup system when a format conversion buffer underflows to simultaneously initializing buffer operation, a circuit for indicating the leading position of an ATM cell with respect to the overhead of an SDH frame from the active system to the backup system for each frame, and holding ATM cells in phase with each other, and a circuit for indicating the phase of an OAM cell from the active system to the backup system and vice versa, and inserting a transmission path empty cell into one of the active and backup systems when an OAM cell is present in only the other system.
      <br/>
      Therefore, the ATM communication apparatus is relatively large in circuit scale.
    </p>
    <heading>SUMMARY OF THE INVENTION</heading>
    <p num="26">It is therefore an object of the present invention to provide a reception device in an ATM communication apparatus for avoiding a cell phase shift caused when the detection of underflows in format conversion buffers differs between systems 0, 1, and also when an OAM cell is received by only one of the systems 0, 1, for thereby achieving uninterrupted switching on the transmission path between the system 0 and the system 1.</p>
    <p num="27">Another object of the present invention is to provide a reception device in an ATM communication apparatus, which has reduced a circuit scale for various circuits around format conversion buffers on a transmission side of the ATM communication apparatus.</p>
    <p num="28">
      According to an aspect of the present invention, a reception device in an ATM communication apparatus monitors the phase of ATM cells in active and backup systems with respect to input data from a transmission path, counts the number of cell phase differences between the active and backup systems, and brings the ATM cells into phase with each other for uninterrupted switching between the active and backup systems.
      <br/>
      The reception device has a format conversion buffer, an underflow detecting circuit, an in-device empty cell insertion control circuit, an in-device empty cell insertion circuit, and a switching circuit in each of the active and backup systems.
    </p>
    <p num="29">
      The format conversion buffer effects a format conversion on a transmission path from a format in which an ATM cell is inserted in only the payload of an SDH frame to a format in which an ATM cell is inserted in both the overhead and payload of an SDH frame, thereby to absorb the difference between transmission path lengths of the active system and the backup system.
      <br/>
      The underflow detecting circuit detects an underflow of the format conversion buffer and outputting a detected underflow signal.
    </p>
    <p num="30">
      The in-device empty cell insertion control circuit outputs an in-device empty cell insertion instruction signal in response to a detected underflow signal from the underflow detecting circuit in its own system which is one of the active system and the backup system or a detected underflow signal from the underflow detecting circuit in the other system.
      <br/>
      The in-device empty cell insertion circuit inserts an in-device empty cell into an output signal from the format conversion buffer based on an in-device empty cell insertion instruction signal from the in-device empty cell insertion control circuit in its own system.
      <br/>
      The switching circuit switches between the active and backup systems.
    </p>
    <p num="31">An in-device empty cell insertion instruction signal is transmitted from the active system to the backup system or from the backup system to the active system for inserting an in-device empty cell to insert an in-device empty cell for switching between the active and backup systems while preventing cells from being shifted out of phase with each other after they have been brought into phase with each other between the active and backup systems.</p>
    <p num="32">According to another aspect of the present invention, a reception device in an ATM communication apparatus has a format conversion buffer, an underflow detecting circuit, an in-device empty cell insertion control circuit, an in-device empty cell insertion circuit, a switching circuit, a transmission path empty cell determining circuit, and an OAM cell determining circuit in each of the active and backup systems.</p>
    <p num="33">
      The transmission path empty cell determining circuit determines whether there is a transmission path empty cell or not on a write side of the format conversion buffer, and discards cells without writing the cells when a transmission path empty cell is detected.
      <br/>
      The OAM cell determining circuit determines whether there is an OAM cell or not on a read side of the format conversion buffer, and outputs a detected OAM cell signal when an OAM cell is detected.
    </p>
    <p num="34">A detected OAM signal is transmitted from the active system to the backup system or from the backup system to the active system, and when an OAM cell is present in only one of the active and backup systems, an in-device empty cell is inserted into the other system for switching between the active and backup systems while preventing cells from being shifted out of phase with each other after they have been brought into phase with each other between the active and backup systems.</p>
    <p num="35">It is possible to reduce the circuit scale of various circuits around the format conversion buffer which have heretofore been required on a transmission side of the ATM communication apparatus for holding ATM cells to be transmitted in the same sequence in the active and backup systems.</p>
    <p num="36">When a transmission path empty cell is detected, cells are discarded, and a detected OAM signal is transmitted from the active system to the backup system or from the backup system to the active system, and when an OAM cell is present in only one of the active and backup systems, an in-device empty cell is inserted into the other system for holding ATM cells to be transmitted in the same sequence in the active and backup systems on the transmission side of the ATM communication apparatus.</p>
    <p num="37">
      On a reception side of the ATM communication apparatus, when an underflow is detected in a format conversion buffer, an in-device empty cell is inserted on a read side of the format conversion buffer.
      <br/>
      If an in-device empty cell is inserted into only its own system, then a cell phase shift occurs between the active and backup systems.
      <br/>
      To avoid this, a detected underflow signal is also transmitted to the in-device empty cell insertion control circuit of the other system, so that in-device empty cells are inserted simultaneously into both the systems for achieving uninterrupted switching between the active and backup systems while preventing cells from being shifted out of phase with each other between the active and backup systems.
      <br/>
      The in-device empty cell insertion control circuit inserts an in-device empty cell into a corresponding position even when a detected OAM signal is received from the other system, so that when an OAM cell is received in only one of the systems, cells are prevented from being shifted out of phase with each other between the active and backup systems, and uninterrupted switching is achieved between the active and backup systems.
      <br/>
      It is also determined whether there is a transmission path empty cell or not, and when an OAM cell is detected, information representing a detected OAM cell is transmitted to the in-device empty cell insertion control circuit in the other system.
    </p>
    <p num="38">The above and other objects, features and advantages of the present invention will become apparent from the following description with reference to the accompanying drawings which illustrate an example of the present invention.</p>
    <heading>BRIEF DESCRIPTION OF THE DRAWINGS</heading>
    <p num="39">
      FIG. 1 is a block diagram of a reception device in a conventional ATM communication apparatus;
      <br/>
      FIG. 2 is a block diagram of a transmission device in a conventional ATM communication apparatus;
      <br/>
      FIG. 3 is a view showing the construction of a SDH frame; and
      <br/>
      FIG. 4 is a block diagram of a reception device in an ATM communication apparatus according to the present invention.
    </p>
    <heading>DESCRIPTION OF THE PREFERRED EMBODIMENT</heading>
    <p num="40">As shown in FIG. 4, a reception device in an ATM communication apparatus according to the present invention comprises a system 0, a system 1, and switching circuits 9, 18.</p>
    <p num="41">The system 0 comprises a transmission path empty cell determining circuit 1, a write control circuit 2, a read control circuit 3, a buffer underflow detecting circuit 4, a format conversion buffer 5, an OAM cell determining circuit 6, an in-device empty cell insertion circuit 7, and an in-device empty cell insertion control circuit 8.</p>
    <p num="42">The system 1 similarly comprises a transmission path empty cell determining circuit 10, a write control circuit 11, a read control circuit 12, a buffer underflow detecting circuit 13, a format conversion buffer 14, an OAM cell determining circuit 15, an in-device empty cell insertion circuit 16, and an in-device empty cell insertion control circuit 17.</p>
    <p num="43">The format conversion buffers 5, 14 effect a format conversion on the transmission path from a format in which an ATM cell is inserted in only the payload of an SDH frame to a format in which an ATM cell is inserted in both the overhead and payload of an SDH frame, thereby to absorb the difference between transmission path lengths of the systems 0, 1.</p>
    <p num="44">
      The buffer underflow detecting circuits 4, 13 monitor the amount of buffering of the format conversion buffers 5, 14, respectively, with control signals S4, S5 from the write and read control circuits 2, 3 and control signals S15, S16 from the write and read control circuits 11, 12.
      <br/>
      When an underflow is detected, the buffer underflow detecting circuits 4, 13 transmit detected underflow signals S6, S15 to the in-device empty cell insertion control circuits 8, 17 in the respective systems.
    </p>
    <p num="45">
      The transmission path empty cell determining circuits 1, 10 determine whether there is an empty cell on the transmission path or not at a write side of the format conversion buffers 5, 14.
      <br/>
      If the transmission path empty cell determining circuits 1, 10 detect an empty cell on the transmission path, then the transmission path empty cell determining circuits 1, 10 output detected transmission path empty cell signals S3, S14.
    </p>
    <p num="46">
      The write control circuits 2, 11 control the writing of cells S2, S13 on the transmission path into the format conversion buffers 5, 14, respectively.
      <br/>
      However, the write control circuits 2, 11 do not write cells S2, S13 if the transmission path empty cell determining circuits 1, 10 output detected transmission path empty cell signals S3, S14.
    </p>
    <p num="47">
      The OAM cell determining circuits 6, 15 determine whether there is an OAM cell or not at a read side of the format conversion buffers 5, 14, based on output signals S7, S18 from the format conversion buffers 5, 14.
      <br/>
      When an OAM cell is detected, the OAM cell determining circuits 6, 15 transmit detected OAM cell signals S8, S19 to the in-device empty cell insertion control circuits 17, 8, respectively, in the other systems.
    </p>
    <p num="48">When the in-device empty cell insertion control circuit 8 receives either one of the detected underflow signal S6 from its own system, the detected underflow signal S17 from the other system, and the detected OAM cell signal S19 from the other system, the in-device empty cell insertion control circuit 8 outputs an in-device empty cell insertion instruction signal S9 to the read control circuit 3 and the in-device empty cell insertion circuit 7.</p>
    <p num="49">When the in-device empty cell insertion control circuit 17 receives either one of the detected underflow signal S17 from its own system, the detected underflow signal S6 from the other system, and the detected OAM cell signal S8 from the other system, the in-device empty cell insertion control circuit 17 outputs an in-device empty cell insertion instruction signal S20 to the read control circuit 12 and the in-device empty cell insertion circuit 16.</p>
    <p num="50">
      The read control circuits 3, 12 control the reading of the format conversion buffers 5, 14, respectively.
      <br/>
      When the read control circuits 3, 12 receive the in-device empty cell insertion instruction signals S9, S20, respectively, the read control circuits 3, 12 do not read effective cells from the format conversion buffers 5, 14, respectively.
    </p>
    <p num="51">The in-device empty cell insertion circuits 7, 16 insert in-device empty cells into output signals S7, S18 from the format conversion buffers 5, 14 in response to the in-device empty cell insertion instruction signals S9, S20, respectively.</p>
    <p num="52">The switching circuits 9, 18 switch between output signals S10, S12 from the systems 0, 1 to effect switching between the active and backup systems.</p>
    <p num="53">Operation of the reception device in the ATM communication apparatus according to the present invention will be described below.</p>
    <p num="54">The ATM communication apparatus shown in FIG. 2 is based on the assumption that cells have already been in phase with each other between the systems 0, 1 and switching between the systems 0, 1 is uninterrupted whenever such switching may be carried out.</p>
    <p num="55">
      The transmission path empty cell determining circuits 1, 10 determine whether there is an empty cell or not in input data S1, S12.
      <br/>
      If an empty cell is detected, then the transmission path empty cell determining circuits 1, 10 output detected transmission path empty cell signals S3, S14 to the write control circuits 2, 11.
      <br/>
      In response to the detected transmission path empty cell signals S3, S14, the write control circuits 2, 11 discard cells S2, S12 without writing them into the format conversion buffers 5, 14.
      <br/>
      As a result, if ATM cells to be transmitted are not in the same sequence between the system 0 and the system 1 on the transmission side of the ATM communication apparatus, then an empty cell is prevented from existing in received data in only one of the systems 0, 1, thus preventing ATM cells in the systems 0, 1 from being shifted in phase for thereby ensuring uninterrupted switching.
    </p>
    <p num="56">
      On the read side of the ATM communication apparatus, the OAM cell determining circuits 6, 15 determine whether there is an OAM cell or not.
      <br/>
      If an OAM cell is detected, then the OAM cell determining circuits 6, 15 transmit detected OAM cell signals S8, S19 to the in-device empty cell insertion control circuits 17, 8, respectively, in the other systems.
      <br/>
      In response to the detected OAM cell signals S19, S8, the in-device empty cell insertion control circuits 8, 17 issue in-device empty cell insertion instruction signals S9, S20 to the in-device empty cell insertion circuits 7, 16, respectively, which insert an in-device empty cell into output data S7, S18 from the respective format conversion buffers 5, 14.
      <br/>
      As a consequence, an empty cell is prevented from existing in received data in only one of the systems 0, 1, thereby preventing ATM cells in the systems 0, 1 from being shifted in phase, so that uninterrupted switching will be ensured.
    </p>
    <p num="57">
      The above process of determining whether there is a transmission path empty cell or not and also the above process of determining whether there is an OAM cell or not are based on the assumption that ATM cells to be transmitted are not in the same sequence between the system 0 and the system 1 on the transmission side of the ATM communication apparatus.
      <br/>
      If ATM cells to be transmitted are in the same sequence between the system 0 and the system 1 on the transmission side of the ATM communication apparatus, then the above process of determining whether there is an empty cell or not on the transmission path and also the above process of determining whether there is an OAM cell or not are not required.
    </p>
    <p num="58">
      According to the present invention, the process of determining whether there is a transmission path empty cell or not and the process of determining whether there is an OAM cell or not are effected on the reception side of the ATM communication apparatus.
      <br/>
      Therefore, circuits for holding ATM cells to be transmitted in the same sequence between the systems on the transmission side are omitted, so that the overall circuit scale can be reduced.
    </p>
    <p num="59">
      According to the present invention, furthermore, an underflow of the format conversion buffers is monitored by control signals issued from the write and read control circuits.
      <br/>
      Since data of SOH and POH of an SDH frame are not written in the format conversion on the reception side, the format conversion buffers are basically subject to an underflow.
      <br/>
      When an underflow is detected, a buffer underflow detecting circuit transmits a detected underflow signal to the in-device empty cell insertion control circuit to stop reading an effective cell and insert an in-device empty cell into its own system, and also transmits a detected underflow signal to the in-device empty cell insertion control circuit of the other system to insert a in-device empty cell into the other system.
      <br/>
      If a detected underflow signal is not transmitted to the other system as with the conventional apparatus shown in FIG. 1, then an in-device empty cell is inserted into only one of the systems, bringing ATM cells, which have once been held in phase, out of phase with each other between the systems 0, 1 thereby to prevent uninterrupted switching.
      <br/>
      The buffer underflow detecting circuits are to be employed irrespective of whether ATM cells on the transmission side are in the same sequence or not between the systems 0, 1, for achieving uninterrupted switching between the systems 0, 1.
    </p>
    <p num="60">While a preferred embodiment of the present invention has been described using specific terms, such description is for illustrative purposes only, and it is to be understood that changes and variations may be made without departing from the spirit or scope of the following claims.</p>
  </description>
  <claims format="original" lang="en" id="claim_en">
    <claim num="1">
      <claim-text>What is claimed is:</claim-text>
    </claim>
    <claim num="2">
      <claim-text>2.</claim-text>
      <claim-text>A reception device in an ATM communication apparatus including an active system and a backup system, for switching between the active system and the backup system, each of said active system and said backup system comprising: a format conversion buffer for effecting a format conversion on a transmission path from a format in which an ATM cell is inserted in only the payload of an SDH frame to a format in which an ATM cell is inserted in both the overhead and payload of an SDH frame, thereby to absorb the difference between transmission path lengths of said active system and said backup system; an underflow detecting circuit for detecting an underflow of said format conversion buffer and outputting a detected underflow signal; a transmission path empty cell determining circuit for determining whether there is a transmission path empty cell or not on a write side of said format conversion buffer, and discarding cells without writing the cells when a transmission path empty cell is detected; an OAM cell determining circuit for determining whether there is an OAM cell or not on a read side of said format conversion buffer, and outputting a detected OAM cell signal when an OAM cell is detected; an in-device empty cell insertion control circuit for outputting an in-device empty cell insertion instruction signal in response to a detected underflow signal from said underflow detecting circuit in its own system which is one of said active system and said backup system, a detected underflow signal from said underflow detecting circuit in the other system, or a detected OAM cell signal from said OAM cell determining circuit in the other system;</claim-text>
      <claim-text>and an in-device empty cell insertion circuit for inserting an in-device empty cell into an output signal from said format conversion buffer based on an in-device empty cell insertion instruction signal from said in-device empty cell insertion control circuit in its own system.</claim-text>
      <claim-text>1. A reception device in an ATM communication apparatus including an active system and a backup system, for switching between the active system and the backup system, each of said active system and said backup system comprising:</claim-text>
      <claim-text>a format conversion buffer for effecting a format conversion on a transmission path from a format in which an ATM cell is inserted in only the payload of an SDH frame to a format in which an ATM cell is inserted in both the overhead and payload of an SDH frame, thereby to absorb the difference between transmission path lengths of said active system and said backup system; an underflow detecting circuit for detecting an underflow of said format conversion buffer and outputting a detected underflow signal; an in-device empty cell insertion control circuit for outputting an in-device empty cell insertion instruction signal in response to a detected underflow signal from said underflow detecting circuit in its own system which is one of said active system and said backup system or a detected underflow signal from said underflow detecting circuit in the other system;</claim-text>
      <claim-text>and an in-device empty cell insertion circuit for inserting an in-device empty cell into an output signal from said format conversion buffer based on an in-device empty cell insertion instruction signal from said in-device empty cell insertion control circuit in its own system.</claim-text>
    </claim>
  </claims>
</questel-patent-document>