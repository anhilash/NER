<?xml version="1.0" encoding="UTF-8"?>
<questel-patent-document lang="en" date-produced="20180805" produced-by="Questel" schema-version="3.23" file="US06181791B2.xml">
  <bibliographic-data lang="en">
    <publication-reference publ-desc="Granted patent as second publication">
      <document-id>
        <country>US</country>
        <doc-number>06181791</doc-number>
        <kind>B2</kind>
        <date>20010130</date>
      </document-id>
      <document-id data-format="questel">
        <doc-number>US6181791</doc-number>
      </document-id>
    </publication-reference>
    <original-publication-kind>B2</original-publication-kind>
    <application-reference family-id="21705601" extended-family-id="13746342">
      <document-id>
        <country>US</country>
        <doc-number>09003380</doc-number>
        <kind>A</kind>
        <date>19980106</date>
      </document-id>
      <document-id data-format="questel">
        <doc-number>1998US-09003380</doc-number>
      </document-id>
      <document-id data-format="questel_Uid">
        <doc-number>59969488</doc-number>
      </document-id>
    </application-reference>
    <language-of-filing>en</language-of-filing>
    <language-of-publication>en</language-of-publication>
    <priority-claims>
      <priority-claim kind="national" sequence="1">
        <country>US</country>
        <doc-number>338098</doc-number>
        <kind>A</kind>
        <date>19980106</date>
        <priority-active-indicator>Y</priority-active-indicator>
      </priority-claim>
      <priority-claim data-format="questel" sequence="1">
        <doc-number>1998US-09003380</doc-number>
      </priority-claim>
    </priority-claims>
    <dates-of-public-availability>
      <publication-of-grant-date>
        <date>20010130</date>
      </publication-of-grant-date>
    </dates-of-public-availability>
    <classifications-ipcr>
      <classification-ipcr sequence="1">
        <text>H04B   3/23        20060101A I20051008RMEP</text>
        <ipc-version-indicator>
          <date>20060101</date>
        </ipc-version-indicator>
        <classification-level>A</classification-level>
        <section>H</section>
        <class>04</class>
        <subclass>B</subclass>
        <main-group>3</main-group>
        <subgroup>23</subgroup>
        <classification-value>I</classification-value>
        <generating-office>
          <country>EP</country>
        </generating-office>
        <classification-status>R</classification-status>
        <classification-data-source>M</classification-data-source>
        <action-date>
          <date>20051008</date>
        </action-date>
      </classification-ipcr>
    </classifications-ipcr>
    <classification-national>
      <country>US</country>
      <main-classification>
        <text>379406010</text>
        <class>379</class>
        <subclass>406010</subclass>
      </main-classification>
      <further-classification sequence="1">
        <text>455063100</text>
        <class>455</class>
        <subclass>063100</subclass>
      </further-classification>
    </classification-national>
    <classifications-ecla>
      <classification-ecla sequence="1">
        <text>H04B-003/23</text>
        <section>H</section>
        <class>04</class>
        <subclass>B</subclass>
        <main-group>3</main-group>
        <subgroup>23</subgroup>
      </classification-ecla>
    </classifications-ecla>
    <patent-classifications>
      <patent-classification sequence="1">
        <classification-scheme office="EP" scheme="CPC">
          <date>20130101</date>
        </classification-scheme>
        <classification-symbol>H04B-003/23</classification-symbol>
        <section>H</section>
        <class>04</class>
        <subclass>B</subclass>
        <main-group>3</main-group>
        <subgroup>23</subgroup>
        <symbol-position>F</symbol-position>
        <classification-value>I</classification-value>
        <classification-status>B</classification-status>
        <classification-data-source>H</classification-data-source>
        <action-date>
          <date>20130101</date>
        </action-date>
      </patent-classification>
    </patent-classifications>
    <number-of-claims>34</number-of-claims>
    <exemplary-claim>1</exemplary-claim>
    <figures>
      <number-of-drawing-sheets>3</number-of-drawing-sheets>
      <number-of-figures>4</number-of-figures>
      <image-key data-format="questel">US6181791</image-key>
    </figures>
    <invention-title format="original" lang="en" id="title_en">Apparatus and method for reducing local interference in subscriber loop communication system</invention-title>
    <references-cited>
      <citation srep-phase="examiner">
        <patcit num="1">
          <text>KANEMASA AKIRA</text>
          <document-id>
            <country>US</country>
            <doc-number>4707824</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US4707824</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="examiner">
        <patcit num="2">
          <text>FLANAGAN RICHARD T</text>
          <document-id>
            <country>US</country>
            <doc-number>5162762</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5162762</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="examiner">
        <patcit num="3">
          <text>SUGAYA FUMIAKI, et al</text>
          <document-id>
            <country>US</country>
            <doc-number>5247512</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5247512</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="examiner">
        <patcit num="4">
          <text>CANNALIRE GIACOMO, et al</text>
          <document-id>
            <country>US</country>
            <doc-number>5414766</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5414766</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="examiner">
        <patcit num="5">
          <text>GOODSON RICHARD L, et al</text>
          <document-id>
            <country>US</country>
            <doc-number>5625646</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5625646</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="examiner">
        <patcit num="6">
          <text>SIH GILBERT C</text>
          <document-id>
            <country>US</country>
            <doc-number>5646991</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5646991</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="examiner">
        <patcit num="7">
          <text>SIH GILBERT C</text>
          <document-id>
            <country>US</country>
            <doc-number>5687229</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5687229</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="examiner">
        <patcit num="8">
          <text>NAKAGAWA AKIRA, et al</text>
          <document-id>
            <country>US</country>
            <doc-number>5774561</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5774561</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="examiner">
        <patcit num="9">
          <text>HO DOMINIC KING-CHOI</text>
          <document-id>
            <country>US</country>
            <doc-number>5912966</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5912966</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="applicant">
        <patcit num="10">
          <text>SUZUKI HIROYUKI</text>
          <document-id>
            <country>US</country>
            <doc-number>5461616</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5461616</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="applicant">
        <patcit num="11">
          <text>CIOFFI JOHN M, et al</text>
          <document-id>
            <country>US</country>
            <doc-number>5596604</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5596604</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="applicant">
        <patcit num="12">
          <text>CHOW JACKY S, et al</text>
          <document-id>
            <country>US</country>
            <doc-number>5623513</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5623513</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="applicant">
        <patcit num="13">
          <text>BIRAN BERNARD, et al</text>
          <document-id>
            <country>US</country>
            <doc-number>5627501</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5627501</doc-number>
          </document-id>
        </patcit>
      </citation>
    </references-cited>
    <parties>
      <applicants>
        <applicant data-format="original" app-type="applicant" sequence="1">
          <addressbook lang="en">
            <orgname>STMicroelectronics, Inc.</orgname>
            <address>
              <address-1>Carrollton, TX, US</address-1>
              <city>Carrollton</city>
              <state>TX</state>
              <country>US</country>
            </address>
          </addressbook>
          <nationality>
            <country>US</country>
          </nationality>
        </applicant>
        <applicant data-format="questel" app-type="applicant" sequence="2">
          <addressbook lang="en">
            <orgname>STMICROELECTRONICS</orgname>
          </addressbook>
          <nationality>
            <country>US</country>
          </nationality>
        </applicant>
      </applicants>
      <inventors>
        <inventor data-format="original" sequence="1">
          <addressbook lang="en">
            <name>Murphy, Joseph A.</name>
            <address>
              <address-1>Ontario, CA</address-1>
              <city>Ontario</city>
              <country>CA</country>
            </address>
          </addressbook>
          <nationality>
            <country>CA</country>
          </nationality>
        </inventor>
      </inventors>
      <agents>
        <agent sequence="1" rep-type="agent">
          <addressbook lang="en">
            <name>Galanthay, Theodore E.</name>
          </addressbook>
        </agent>
        <agent sequence="2" rep-type="agent">
          <addressbook lang="en">
            <name>Jorgenson, Lisa K.</name>
          </addressbook>
        </agent>
        <agent sequence="3" rep-type="agent">
          <addressbook lang="en">
            <name>Regan, Christopher F.</name>
          </addressbook>
        </agent>
      </agents>
    </parties>
    <examiners>
      <primary-examiner>
        <name>Hudspeth, David R.</name>
      </primary-examiner>
    </examiners>
    <lgst-data>
      <lgst-status>EXPIRED</lgst-status>
    </lgst-data>
  </bibliographic-data>
  <abstract format="original" lang="en" id="abstr_en">
    <p id="P-EN-00001" num="00001">
      <br/>
      An apparatus communicates over a communications channel and has reduced undesired local echo.
      <br/>
      The transmitter generates a transmit signal to the communications channel in a frequency band outside a voice frequency band.
      <br/>
      A receiver receives signals from the communications channel within or outside the voice frequency band, and is susceptible to undesired local echo from the transmit signal.
      <br/>
      In one method, a programmable scaler is connected to the transmitter and generates a scaled replica of the transmit signal based upon a scaled control signal.
      <br/>
      The receiver is connected to the scaler and reduces the undesired local echo by subtraction of a scaled replica of the transmit signal.
      <br/>
      An echo reducing circuit senses the received signal power and generates the scaled control signal based upon the received signal power to thereby reduce the undesired local echo In a second method, an estimate of the transfer function from the transmitter digital-to-analog converter to the input of a cancellor is developed.
      <br/>
      This is used to replicate the local echo path so that the canceling signal can be generated that is identical or very similar to the unwanted local echo in terms of both amplitude and phase and so is used to cancel it.
      <br/>
      The advantages are to reduce the complexity of the analog filtering and reduce the dynamic range requirements of the analog-to-digital converter thereby making it more easily integrated on one silicon chip.
    </p>
  </abstract>
  <description format="original" lang="en" id="desc_en">
    <heading>FIELD OF THE INVENTION</heading>
    <p num="1">The invention relates to communication systems, and more particularly, to an apparatus and method for reducing interference in a communication system.</p>
    <heading>BACKGROUND OF THE INVENTION</heading>
    <p num="2">
      Communication to residences and commercial structures typically use a twisted pair of copper wires for telephone voice band transmission in a frequency range of 300 to 3,400 Hz.
      <br/>
      When a personal computer or similar digital communication device having a modem is in use, the telephone line cannot be used for a normal telephone conversation because the modem uses the bandwidth assigned to the voice band transmission.
    </p>
    <p num="3">
      However, a twisted pair telephone line may have a bandwidth of several MHZ.
      <br/>
      Unfortunately in the past, the voice band frequency was the only bandwidth used with these lines because the equipment at the telephone company would only pass the voice band.
      <br/>
      Now, modern telephone equipment can support higher transmission rates.
      <br/>
      Still, because of the characteristics of the entire channel, end user telephone and data communication equipment typically use the same voice band.
    </p>
    <p num="4">
      At higher frequencies, especially in the MHZ frequency range, the signals are greatly attenuated especially when transmitted over distances up to several thousand meters.
      <br/>
      To overcome this, it is necessary that any transmitter, such as a modem and its associated circuitry, transmits the signal at a much higher power than is usual to account for the signal attenuation.
      <br/>
      By using a frequency range above a voice frequency band for some transmission, such as data transmission, it is possible to simultaneously use the telephone for normal voice communication.
    </p>
    <p num="5">
      For example, for a typical Internet user, only a few command signals are generated and transmitted to the Internet Service Provider on the uplink.
      <br/>
      At the same time, however, signals having a wide bandwidth may be received.
      <br/>
      In other words, the lower bandwidth requirement on the uplink and higher bandwidth requirement on the downlink defines an asymmetric communication system.
      <br/>
      Because the frequencies above voice band are subject to greater attenuation, transmitter power may be increased during or prior to transmission.
      <br/>
      Unfortunately, the increased transmitter power does create some difficulties, such as local echo which may interfere with the received signals.
      <br/>
      This unwanted echo may be generated by various means, such as any impedance mismatch between the transmitter and the twisted pair telephone line or other equipment connected to the line.
      <br/>
      These problems occur in duplex transmission when one wants to transmit and receive at the same time.
    </p>
    <p num="6">
      One prior art approach to address the unwanted echo signal has provided relatively complicated analog filters in the circuitry of the modem.
      <br/>
      Typically, these filters may include a voice band and high frequency filters, as well as various receiver and transmitter filters.
      <br/>
      These systems require high order analog filtering to remove the effects of the transmitted signal from the receive band.
    </p>
    <p num="7">
      Also, a receiver's analog-to-digital converter may need a very large dynamic range so that the composite received signal (the received signal including the echo) does not saturate the analog-to-digital converter.
      <br/>
      It is also important to sample the desired signal with enough resolution to meet the required signal-to-noise ratio.
      <br/>
      This requirement is difficult to achieve in practice.
    </p>
    <p num="8">
      Another prior art approach has been to generate a scaled replica of the transmitted signal, and subtract the replica from the received signal to thereby remove or reduce the unwanted echo.
      <br/>
      In such a prior art device, a voltage scaler is operatively connected to the transmitter to generate the scaled replica of the transmit signal which, in turn, is fed to an inverting input of an amplifier to cancel the unwanted echo based on the transmitted signal.
      <br/>
      Typically, this type of device and method are limited because it was assumed that half of the power was transmitted to the telephone line, while half the power was reflected back into the receiver as unwanted interference in the entire frequency band.
      <br/>
      This system also anticipated a fixed line impedance (e.g., 110 Ohms) to obtain cancellation of the unwanted echo signal before it reached the analog-to-digital converter of the receiver.
    </p>
    <p num="9">
      As the line impedances can typically vary by  +- 20%, thus, the local echo may have a different amplitude than that produced by the scaler configured for a fixed line impedance.
      <br/>
      Additionally, the replicated echo cancellation signal may be ineffective due to amplitude and phase differences between the unwanted transmitter signal forming the echo and the replicated signal.
      <br/>
      This is because the scaler only tries to match the resistive component and ignores the inductive and capacitive components of the line impedance.
      <br/>
      To overcome this in the past has meant designing complex analog filters and high-dynamic range A/D's as mentioned previously.
    </p>
    <heading>SUMMARY OF THE INVENTION</heading>
    <p num="10">In view of the foregoing background, it is therefore an object of the present invention to provide an apparatus and method for reducing local echo in a communication system, particularly of a duplex communication system operating over a twisted pair telephone line.</p>
    <p num="11">
      In one aspect of the present invention, the apparatus comprises a transmitter for generating a transmit signal to the communications channel in a frequency band outside a voice frequency band.
      <br/>
      A scaler is connected to the transmitter and generates a scaled replica of the transmit signal based upon a scale control signal.
      <br/>
      A receiver receives signals from the communications channel either within or outside the voice frequency band and is susceptible to undesired local echo from the transmit signal.
      <br/>
      The receiver is connected to the scaler and reduces the undesired local echo by subtraction of the scaled replica of the transmit signal.
      <br/>
      An echo reducing means senses the received signal power and generates the scaled control signal based upon the received signal power thereby reducing the undesired local echo.
    </p>
    <p num="12">
      The echo reducing means preferably comprises a test means for testing the communications channel by inputting a predetermined test signal to the transmitter when or before the received signal power is being sent from the far end.
      <br/>
      The echo reducing means further comprises power minimizing means for setting the scaled control signal responsive to the minimum received signal power during testing of the communications channel.
    </p>
    <p num="13">
      In another aspect of the present invention, the receiver comprises an amplifier having one input connected to the communications channel, and a second input connected to the scaler.
      <br/>
      The amplifier acts as a subtractor because it subtracts or cancels the unwanted transmit signal with a scaled replica of it.
      <br/>
      An analog-to-digital converter (ADC) is connected to an output of the amplifier.
      <br/>
      The echo reducing means comprises an encoder connected between an output of the ADC and a scaler.
      <br/>
      The scaler comprises voltage scaling means for generating a scaled voltage replica signal.
    </p>
    <p num="14">
      In still another aspect of the present invention, the scaler comprises a resistor ladder for setting the scaled control signal.
      <br/>
      The resistor ladder comprises a plurality of tuning resistors, and a respective switch connected thereto.
      <br/>
      The switches are connected to and responsive to the encoder.
    </p>
    <p num="15">
      In still another aspect of the present invention, the apparatus comprises a transmitter for generating a transmit signal to the communications channel in a frequency band outside a voice frequency band.
      <br/>
      Echo reducing means generates a scaled replica of the transmit signal, which is phase and amplitude adjusted therewith.
      <br/>
      The echo reducing means also comprises channel characterization means for characterizing the communications channel.
      <br/>
      The receiver receives signals from the communications channel either outside or in the voice frequency band and is susceptible to undesired local echo from the transmit signal.
      <br/>
      The receiver is connected to the echo reducing means and reduces the undesired local echo by subtraction of the amplitude and phased adjusted replica of the transmit signal.
    </p>
    <p num="16">
      In still another aspect of the present invention, the echo reducing means comprises a processor for creating a model of the undesired local echo.
      <br/>
      This model consists of a digital filter, possibly implemented in a DSP, so that the transfer function of the cancellor path (i.e., H(z), D/A, filtering and gain blocks) exactly or approximately matches the normal transmitted local echo path in terms of both amplitude and phase.
      <br/>
      The channel characterization means further comprises means for generating a test signal.
      <br/>
      The echo cancellation means further comprises memory means for storing a plurality of models relating to the respective different characterizations of the communications channel.
      <br/>
      The memory means can comprise a ROM or RAM or non-volatile RAM.
    </p>
    <p num="17">
      In still another aspect of the present invention, the apparatus comprises an antialiasing filter.
      <br/>
      The receiver comprises an amplifier that acts as a subtractor, and has one input connected to the communications channel and a second input connected to the echo reducing means.
      <br/>
      The echo reducing means further comprises a digital-to-analog converter (DAC) connected to the second input of the amplifier.
      <br/>
      An analog-to-digital converter (ADC) can be connected to the output of the amplifier.
      <br/>
      A low pass filter can be connected between the amplifier and the ADC.
    </p>
    <p num="18">
      A method aspect of the invention allows communication over a communications channel with reduced undesired local echo.
      <br/>
      The method comprises the steps of generating the transmit signal to the communications channel in a frequency band outside the voice frequency band.
      <br/>
      The method further comprises generating a scaled replica of the transmit signal based upon a scaled control signal.
      <br/>
      The method further comprises reducing the undesired local echo by subtracting the scaled replica of the transmit signal from the received signals The method further comprises sensing received signal power and generating the scaled control signal based upon the received signal power to thereby reduce the undesired local echo.
    </p>
    <p num="19">
      The method further comprises the step of reducing echo by testing the communications channel by inputting a predetermined test signal for transmission when the unwanted received signal power is being sensed.
      <br/>
      The method further comprises the step of reducing echo by setting the scaled control signal responsive to sensing a minimum received signal power during testing of the communications channel.
    </p>
    <p num="20">
      In still another method aspect of the invention, the method comprises the steps of generating a transmit signal to the communications channel in a frequency band above a voice frequency band.
      <br/>
      The method comprises generating a scaled replica of the transmit signal, phase synchronized therewith, and characterizing the communications channel.
      <br/>
      The method further comprises receiving signals from the communications channel within or outside the voice frequency band and being susceptible to undesired local echo from the transmit signal, and while reducing the undesired local echo by subtraction of the scaled and phase synchronized replica of the transmit signal.
    </p>
    <heading>BRIEF DESCRIPTION OF THE DRAWINGS</heading>
    <p num="21">
      Other objects, features and advantages of the present invention will become apparent from the detailed description of the invention as follows, when considered in light of the accompanying drawings in which:
      <br/>
      FIG. 1 is a schematic block diagram of a prior art communication apparatus using a voltage scaler to reduce echo.
      <br/>
      FIG. 2 is a schematic block circuit diagram of an apparatus of the present invention for reducing local echo.
      <br/>
      FIG. 3 is a more detailed schematic block circuit diagram of a portion of the apparatus as shown in FIG. 2.
      <br/>
      FIG. 4 is a schematic block circuit diagram of another embodiment of the apparatus of the present invention where a transfer function of the cancellor path is generated to match the normal transmitted local echo path in terms of both amplitude and phase.
    </p>
    <heading>DETAILED DESCRIPTION OF THE CURRENT EMBODIMENT</heading>
    <p num="22">
      The present invention will now be described more fully hereinafter with reference to the accompanying drawings, in which preferred embodiments of the invention are shown.
      <br/>
      This invention may, however, be embodied in many different forms and should not be construed as limited to the embodiments set forth herein.
      <br/>
      Rather, these embodiments are provided so that this disclosure will be thorough and complete, and will fully convey the scope of the invention to those skilled in the art.
      <br/>
      Like numbers refer to like elements throughout.
    </p>
    <p num="23">
      The present invention permits the reduction of local echo in a communication system, particularly an asymmetric digital subscriber loop communication system.
      <br/>
      Asymmetric digital subscriber loop communication systems are becoming increasingly more popular.
      <br/>
      An example of such a system is disclosed in U.S. Pat. No. 5,461,616 to Suzuki, disclosing an interactive television system, such as video-on-demand, network game, and home shopping systems using a switching network.
      <br/>
      In this patent, the system uses an existing telephone line to form a two-way transmission of the audio signal at 3.4 kHz as in the case of a normal telephone system.
      <br/>
      Images are transmitted at 1.5 Mbps from an exchange to a subscriber.
      <br/>
      A control signal is transmitted which requests the desired image signal at 16 kbps from the subscriber to the exchange.
      <br/>
      This subscriber line is referred to as an asymmetric digital subscriber line.
    </p>
    <p num="24">
      In some asymmetric digital subscriber loop communications (ADSL) and very high frequency digital subscriber loop communication systems (VDSL), it is known that a reflected portion of the transmitted signal typically returns back from the communications channel in the receive band as an unwanted interference signal forming the local echo.
      <br/>
      This return signal could be at a higher power level than the received signal because the originally transmitted signal was transmitted at a much higher power to account for signal attenuation based on the higher frequencies above the voice band.
      <br/>
      In many prior art systems, the receiver's analog-to-digital converter typically had to have a very large dynamic range to account for the attenuation so that the composite received signal (the unwanted transmit signal forming the echo and the desired receive signal) did not saturate the analog-to-digital converter.
      <br/>
      At the same time, it was necessary to sample the desired signal with enough resolution to meet the required signal-to-noise ratio.
      <br/>
      In still other prior art systems, the use of high order analog filtering was required in order to remove the transmitter signal power from the receive band.
      <br/>
      This was a challenging design for engineers because of the high order filters required to adequately suppress the unwanted transmit signal.
    </p>
    <p num="25">
      FIG. 1 illustrates a prior art improvement over these methods outlined above by an apparatus which uses a voltage scaler 12 for producing a scaled replica of the transmit signal.
      <br/>
      This scaled replica is input into an operational amplifier 14, together with the received signal from the communications channel connected to a switch of a telephone company (Telco) 16. As shown in FIG. 1, a residence is defined by dotted line 18, and includes a telephone 20 and personal computer (indicated by dotted lines at 22) having a modem.
      <br/>
      The telephone 20 operates on a standard 300 to 3,300 hertz bandwidth, while the computer 22 includes the modem for generating and transmitting a transmit signal over a communications channel in a frequency range above the voice frequency band.
      <br/>
      This frequency can be over a broad spectrum.
      <br/>
      The higher frequency communications channel would be appropriate for Internet access.
      <br/>
      A low bandwidth could be used for transmitting signals, such as a keystroke command, while a high bandwidth could be used for downloading pictures, graphics and other data from an Internet provider.
    </p>
    <p num="26">
      As shown in FIG. 1, data is input into a digital-to-analog converter 28, which receives the data input from the personal computer 22, and generates a transmit signal into the communications channel.
      <br/>
      Any data modulation in this modern modem is most likely to occur before digital-to-analog conversion.
      <br/>
      This transmit signal typically has a greater power than a signal received from the Telco 16 to account for attenuation problems, using the higher frequencies above the voice frequency band.
      <br/>
      Generally the power of the transmit signal can vary as known to those skilled in the art.
      <br/>
      This greater power produces a local echo, such as when the signal traverses from the two wires in a residential circuit to the common four wires, causing an impedance change.
      <br/>
      Thus, the received signal includes an unwanted local echo.
    </p>
    <p num="27">
      As shown in FIG. 1 prior art, the voltage scaler 12 receives part of the transmit signal and inputs it into one input of the amplifier 14, together with the signals received from the communications channel within or outside the voice frequency band, which includes the unwanted transmit composite signal forming the local echo.
      <br/>
      The output of the amplifier 14 is the received signal from the signal line with some cancelled echo.
      <br/>
      The receiver includes an analog-to-digital converter 34, generating the desired output.
      <br/>
      Data demodulation will most likely occur after analog-to-digital conversion.
      <br/>
      This system, however, has a drawback because line impedance can vary by  +- 20%.
      <br/>
      In the structure of FIG. 1, various assumptions can be made, such as a line impedance (Zo) that equals 110  OMEGA  +- 20%.
    </p>
    <p num="28">
      It can be assumed that half the power is actually transmitted up the line, while half the power comes back into the receiver as an unwanted interferer.
      <br/>
      If a simple amplifier circuit is used as shown in FIG. and the line impedance is exactly 110  OMEGA , then one would obtain cancellation of the transmit signal before that signal reaches the receiver analog-to-digital converter 34.
    </p>
    <p num="29">
      Appropriate valued resistors could be used to ensure that the transmit signal is scaled correctly to ensure that the scaled signal cancels the transmit signal.
      <br/>
      However, in most communication systems, the line impedance can vary by  +- 20%, such as modeled in FIG. 2.
      <br/>
      Assuming Zo=80% of 110  OMEGA , then:  (Equation image '1' not included in text)
    </p>
    <p num="30">
      Ideally, Vr should equal 0.5 Vt. This is assuming an 80% mismatch with the assumption that there is no perfect line impedance matching.
      <br/>
      Assuming there is an 80% mismatch, it is still possible to obtain a reduction of transmitted power of 18 db.
    </p>
    <p num="31">
      The uncancelled signal=(0.5-0.444) Vt=0.0555 Vt. Converting this into power, the following power cancellation is obtained:
      <br/>
      Pr=20*log (0.0555/0.444) dB=-18 dB
    </p>
    <p num="32">
      In this "idealized" case, it is possible to obtain a 18 dB improvement in dynamic range requirements if this prior art method is used.
      <br/>
      However, in this prior art, no accommodation for phase delay of any of the frequency components of the transmit signal is made.
      <br/>
      This means that in practice, the "ideal" case will never be realized, especially at higher frequencies where the phase response of the echo path becomes more important.
    </p>
    <p num="33">
      In accordance with the present invention as shown in FIG. 2, the power cancellation of the unwanted transmit signal forming the local echo can be improved when the voltage scaler provides the exact amplitude replica of the transmit signal forming the local echo.
      <br/>
      In the embodiments of FIGS. 2 and 4, any common elements similar to the embodiment of FIG. 1 retain similar reference numerals beginning in the 100 series.
      <br/>
      In the embodiment of FIG. 2, the voltage scaler 112 is responsive to a scale control signal as generated by echo reducing means in the form of an encoder 140, which generates the scale control signal to the voltage scaler 112 based upon the received signal power from the analog-to-digital converter 134, thereby reducing echo.
      <br/>
      The apparatus is part of a personal computer 122, communicating via modem with Telco 116.
      <br/>
      However, the apparatus, in accordance with the present invention, does not have to be part of a personal computer.
      <br/>
      The residence 118 includes a phone 120 as standard.
      <br/>
      Power sensing means 142 includes circuitry for measuring the received power of the signal and in conjunction with the encoder sets the scale control signal responsive to sensing a minimum received signal power during testing of the communications channel.
    </p>
    <p num="34">
      Test means 144 in the form of a testing circuit is operable for characterizing the line impedance and is operable by inputting a predetermined test signal to the transmitter when or before the received signal power is being sensed.
      <br/>
      It is desirable to "test" the line by sending test signals and listening for them in the receiver band, and then optimizing the cancellation before "real" received data is received.
      <br/>
      Several test signals may be required before optimal cancellation can be achieved.
      <br/>
      The voltage scaler 112 determines the amplitude of the transmit signal that is fed through the cancelling operational amplifier 114, which is a summing amplifier.
    </p>
    <p num="35">
      During a testing period, the major signal components coming in as the receive signal from the communications channel in the receive band would be the unwanted signal forming the local echo.
      <br/>
      During a start-up operation of the apparatus shown in FIG. 2, the voltage scaler 112 could be established assuming that the line impedance was about 110 ohms.
      <br/>
      The power sensing means 142 would measure the power of the signal from the ADC 134 and with the encoder 140, adjust the voltage scaler 112 accordingly so that the local echo could be reduced by subtraction of the scaled replica of the transmit signal Further adjustments could be made until the optimum voltage scaling was achieved.
      <br/>
      The voltage scaling could be achieved by several different methods, including one scheme having a resistor ladder 150, as shown in FIG. 3, with a tap point at the central portion of the resistor ladder 150 for setting the scale control signal.
    </p>
    <p num="36">
      As shown in FIG. 3, the resistor ladder 150 comprises a plurality of tuning resistors 152 with respective switches 154 in the form of transistors, labeled in the P and D series.
      <br/>
      Thus, it is evident that the resistor value is adaptably adjusted so that the voltage is scaled to the amplitude.
      <br/>
      The unwanted transmit signal at the top is called Vt and comes into the resistor ladder 150, where it is emitted as "scaled Vt." The scaled Vt will be a certain ratio of the original Vt depending on how many of the transistor switches are open or closed.
    </p>
    <p num="37">It is evident that the scaled Vt used to cancel the unwanted Vt signal can be made as accurate as required by making the resistor ladder "deeper." The Vt as scaled can be defined by the following equation:  (Equation image '2' not included in text)</p>
    <p num="38">
      It can be shown that the maximum error is one half the resolution of the voltage steps.
      <br/>
      For N=4, this will be approximately 0.01 Vt. So assuming actual unwanted TX is equal to 0.5 Vt, then the power cancellation will be as follows:
      <br/>
      Pr=20*log (0.001/0.5) dB=-54 dB
    </p>
    <p num="39">
      FIGS. 2 and 3 have illustrated the apparatus and the method in accordance with one aspect of the present invention, where the unwanted local echo ia subtracted by the use of a scaled replica of the local echo from the received signal.
      <br/>
      It should be noted that the apparatus would not have an effect on phase delays and frequency distortions on the transmitted signal.
    </p>
    <p num="40">
      FIG. 4 illustrates a schematic block diagram of the apparatus in another aspect of the present invention, where the subtracted signal has similar characteristics as the unwanted receive signal in terms of both phase and amplitude.
      <br/>
      As in FIG. 2, the phone 120 is included within the residence 118, as is the personal computer 122.
      <br/>
      The echo reducing means generates a scaled replica of the transmit signal phase synchronized with the transmit signal.
      <br/>
      Additionally, channel characterization means 162 characterizes the communications channel by generating a test signal to the transmitter and its digital-to-analog converter (DAC).
      <br/>
      As illustrated, a digital signal processor 160 receives the test signals and data input generated such as from the home computer 122, as well as the data output from the analog-to-digital converter 134.
      <br/>
      The digital signal processor 160 processes the data output and the test signal, and creates a digital model of the local echo such as generated by the test signal, based on the amplitude and frequency, which are then converted by a digital-to-analog converter 170 to an analog signal and input into the amplifier 114 to act as a cancellation signal.
      <br/>
      Typically, data modulation will occur before digital-to-analog conversion.
      <br/>
      Additionally, as illustrated, the signal can pass through transmitter cancellor front end filtering 171.
    </p>
    <p num="41">
      The digital signal processor and associated processing circuitry could use standard algorithms or other associated methodology known to those skilled in the art, and creates a digital model for the transfer function of the local echo path H(Z).
      <br/>
      This model can be created before the digital conversation is begun with the transmission of signals.
    </p>
    <p num="42">
      The channel characterization means 162 characterizes the line impedance by sending test signals to measure how effectively the cancellation is working.
      <br/>
      The optimum H(Z) would be that which causes the transfer function of the cancellor path (i.e., H(z), D/A 170, filter and gain block 171 to the input of the amplifier 114) to match the transfer function of the local echo path (i.e., from the transmitter digital-to-analog converter 128 through a front end filtering and gain circuit 129 to the input of the amplifier 114).
      <br/>
      The model of the path from the transmitter digital-to-analog converter to the input of the operational amplifier can be developed so that the computational overhead for the various coefficients can be calculated only once before the actual transmission of data.
      <br/>
      The plurality of different digital models relating to respective echoes characterized by different line impedances can also be stored.
      <br/>
      The storage can be in ROM 178 or in RAM or in non-volatile RAM.
    </p>
    <p num="43">
      A low-pass filter 182 and high pass filter 182a could also be included as illustrated to further filter any cancelled signal before it reaches the analog-to-digital converter 134.
      <br/>
      This could be beneficial because the noise bandwidth of the signal would otherwise be large and cause convergence problems in the practical implementation of the H(Z).
      <br/>
      The specification of this filter could be merged with an antialias filter 183 in order to reduce the cost of implementing the whole structure.
      <br/>
      It is also possible that updating can occur during transmission using a parameter such as a bit error rate as a flag for recharacterization of the line.
      <br/>
      Also, the digital-to-analog converter 170 in the cancellor path can be clocked at a different rate and have a different resolution (i.e., the number of quantization levels) than the transmit digital-to-analog converter 128, as it could improve the transfer function matching.
    </p>
    <p num="44">
      One major advantage of the present invention is that the components as described can be fabricated on one semiconductor substrate, thus reducing costs.
      <br/>
      Without this invention, the design would require complex analog filtering and an analog-to-digital converter with very high dynamic range.
      <br/>
      Both of these are difficult to design, especially on one integrated chip.
      <br/>
      This invention simplifies the requirements of both the analog filtering and the analog-to-digital converter so that it can be more easily implemented on a single integrated chip and so making the entire solution smaller and dissipate less power and be more cost effective.
      <br/>
      Another advantage could be to allow recharacterization to compensate for component and other variations in this system due to temperature, aging, manufacturing tolerances or changes in line impedance.
    </p>
    <p num="45">
      Many modifications and other embodiments of the invention will come to the mind of one skilled in the art having the benefit of the teachings presented in the foregoing descriptions and the associated drawings.
      <br/>
      Therefore, it is to be understood that the invention is not to be limited to the specific embodiments disclosed and that the modifications and embodiments are intended to be included within the scope of the dependent claims.
    </p>
  </description>
  <claims format="original" lang="en" id="claim_en">
    <claim num="1">
      <claim-text>That which is claimed is:</claim-text>
      <claim-text>1.</claim-text>
      <claim-text>An apparatus for communicating over a communications channel and having reduced undesired local echo, the apparatus comprising:</claim-text>
      <claim-text>a transmitter for generating a transmit signal to the communications channel in a frequency band outside a voice frequency band; a programmable scaler connected to said transmitter for generating a scaled replica of the transmit signal based upon a scale control signal; a receiver for receiving signals from the communications channel within or outside the voice frequency band and being susceptible to undesired local echo from the transmit signal, said receiver being connected to the scaler for reducing the undesired local echo by subtraction of the scaled replica of the transmit signal;</claim-text>
      <claim-text>and echo reducing means for sensing received signal power and for generating the scale control signal and comprising an encoder that generates the scale control signal based upon the received signal power and responsive to sensing a minimum received signal power to thereby reduce the undesired local echo.</claim-text>
    </claim>
    <claim num="2">
      <claim-text>2. An apparatus according to claim 1 wherein said echo reducing means comprises rest means for testing the communications channel by inputting a predetermined test signal to said transmitter when an undesired signal power is being sensed.</claim-text>
    </claim>
    <claim num="3">
      <claim-text>3. An apparatus according to claim 2 wherein said echo reducing means comprises power minimizing means for setting the scale control signal responsive to sensing a minimum received signal power during testing of the communications channel.</claim-text>
    </claim>
    <claim num="4">
      <claim-text>4. An apparatus according to claim 1 wherein said receiver comprises: an amplifier having one input connected to the communications channel and a second input connected to said scaler;</claim-text>
      <claim-text>and an analog-to-digital converter (ADC) connected to an output of said amplifier.</claim-text>
    </claim>
    <claim num="5">
      <claim-text>5. An apparatus according to claim wherein said encoder is connected between an output of said ADC and said scaler.</claim-text>
    </claim>
    <claim num="6">
      <claim-text>6. An apparatus according to claim 5 wherein said scaler comprises voltage scaling means for generating a scaled voltage replica signal.</claim-text>
    </claim>
    <claim num="7">
      <claim-text>7. An apparatus according to claim 5 wherein said scaler comprises a resistor ladder for setting the scale control signal.</claim-text>
    </claim>
    <claim num="8">
      <claim-text>8. An apparatus according to claim 7 wherein said resistor ladder comprises a plurality of tuning resistors, and respective switches connected thereto;</claim-text>
      <claim-text>and wherein said switches are connected to and responsive to said encoder.</claim-text>
    </claim>
    <claim num="9">
      <claim-text>9. An apparatus for communicating over a communications channel and having reduced undesired local echo, the apparatus comprising: a transmitter for generating a transmit signal to the communications channel in a frequency band outside a voice frequency band; a scaler connected to said transmitter for generating a scaled replica of the transmit signal based upon a scale control signal; a receiver for receiving signals from the communications channel within or outside the voice frequency band and being susceptible to undesired local echo from the transmit signal, said receiver being connected to the scaler for reducing the undesired local echo by subtraction of the scaled replica of the transmit signal, said receiver comprising:</claim-text>
      <claim-text>- an amplifier having one input connected to the communications channel and a second input connected to said scaler, and - an analog-to-digital converter (ADC) connected to an output of said amplifier;</claim-text>
      <claim-text>and echo reducing means for sensing received signal power and for generating the scale control signal based upon the received signal power to thereby reduce the undesired local echo, said echo reducing means comprising test means for testing the communications channel by inputting a predetermined test signal to said transmitter when the received signal power is being sensed, said echo reducing means further comprising an encoder connected between an output of said ADC and said scaler.</claim-text>
    </claim>
    <claim num="10">
      <claim-text>10. An apparatus according to claim 9 wherein said echo reducing means comprises power minimizing means for setting the scale control signal responsive to sensing a minimum received signal power during testing of the communications channel.</claim-text>
    </claim>
    <claim num="11">
      <claim-text>11. An apparatus according to claim 9 wherein said scaler comprises voltage scaling means for generating a scaled voltage replica signal.</claim-text>
    </claim>
    <claim num="12">
      <claim-text>12. An apparatus according to claim 9 wherein said scaler comprises a resistor ladder for setting the scale control signal.</claim-text>
    </claim>
    <claim num="13">
      <claim-text>13. An apparatus according to claim 12 wherein said resistor ladder comprises a plurality of tuning resistors, and respective switches connected thereto;</claim-text>
      <claim-text>and wherein said switches are connected to and responsive to said encoder.</claim-text>
    </claim>
    <claim num="14">
      <claim-text>14. An apparatus for communicating over a communications channel and having reduced undesired local echo, the apparatus comprising: a transmitter for generating a transmit signal to the communications channel in a frequency band outside a voice frequency band; echo reducing means for generating a scaled replica of the transmit signal amplitude and phase synchronized therewith, said echo reducing means comprising a digital signal processor for creating a model of undesired local echo, and a memory operatively connected to said digital signal processor for storing a plurality of models relating to respective different characterizations of the communications channel, and channel characterization means operatively connected to the digital signal processor for characterizing the communications channel;</claim-text>
      <claim-text>and a receiver for receiving signals from the communications channel within or outside the voice frequency band and being susceptible to undesired local echo from the transmit signal, said receiver being operatively connected to the digital signal processor for reducing the undesired local echo by subtraction of the scaled and phase synchronized replica of the transmit signal, said receiver further comprising a summing amplifier having one input connected to said communications channel and a second input connected to said digital signal processor.</claim-text>
    </claim>
    <claim num="15">
      <claim-text>15. An apparatus according to claim 14 and further comprising an antialiasing filter.</claim-text>
    </claim>
    <claim num="16">
      <claim-text>16. An apparatus according to claim 14 wherein said echo reducing means further comprises a digital-to-analog converter (DAC) connected to the second input of said summing amplifier.</claim-text>
    </claim>
    <claim num="17">
      <claim-text>17. An apparatus according to claim 16 comprising a second digital-to-analog converter for the transmit signal that could be clocked at a different rate and has a different resolution.</claim-text>
    </claim>
    <claim num="18">
      <claim-text>18. An apparatus according to claim 14, further comprising an analog-to-digital converter (ADC) connected to said amplifier.</claim-text>
    </claim>
    <claim num="19">
      <claim-text>19. An apparatus according to claim 18 further comprising a low pass filter connected between said amplifier and said ADC.</claim-text>
    </claim>
    <claim num="20">
      <claim-text>20. An apparatus according to claim 14 wherein said channel characterization means further comprises means for generating a test signal.</claim-text>
    </claim>
    <claim num="21">
      <claim-text>21. An apparatus according to claim 14 wherein said memory means comprises one or a combination of a ROM or RAM or non-volatile RAM.</claim-text>
    </claim>
    <claim num="22">
      <claim-text>22. An apparatus for communicating over a communications channel and having reduced undesired local echo, the apparatus comprising: a transmitter for generating a transmit signal to the communications channel in a frequency band outside a voice frequency band; echo reducing means for generating a scaled replica of the transmit signal amplitude and phase synchronized therewith, said echo reducing means comprising channel characterization means for characterizing the communications channel, said echo reducing means comprising a processor and memory means associated therewith for storing a plurality of models relating to respective different characterizations of the communications channel;</claim-text>
      <claim-text>and a receiver for receiving signals from the communications channel within or outside the voice frequency band and being susceptible to undesired local echo from the transmit signal, said receiver being connected to the echo reducing means for reducing the undesired local echo by subtraction of the scaled and phase synchronized replica of the transmit signal; an amplifier having one input connected to the communications channel and a second input connected to said echo reducing means; a first digital-to-analog converter (DAC) connected to the second input of said amplifier;</claim-text>
      <claim-text>and a second digital-to-analog converter for the transmit signal that could be clocked at a different rate and have a different resolution.</claim-text>
    </claim>
    <claim num="23">
      <claim-text>23. An apparatus according to claim 22 and further comprising an antialiasing filter.</claim-text>
    </claim>
    <claim num="24">
      <claim-text>24. An apparatus according to claim 22 further comprising an analog-to-digital converter (ADC) connected to said amplifier.</claim-text>
    </claim>
    <claim num="25">
      <claim-text>25. An apparatus according to claim 24 further comprising a low pass filter connected between said amplifier and said ADC.</claim-text>
    </claim>
    <claim num="26">
      <claim-text>26. An apparatus according to claim 22 wherein said channel characterization means further comprises means for generating a test signal.</claim-text>
    </claim>
    <claim num="27">
      <claim-text>27. An apparatus according to claim 22 wherein said memory means comprises one or a combination of a ROM, or RAM, or non-volatile RAM.</claim-text>
    </claim>
    <claim num="28">
      <claim-text>28. A method for communicating over a communications channel and with reduced undesired local echo, the method comprising the steps of: generating a transmit signal to the communications channel in a frequency band outside a voice frequency band; generating a scaled replica of the transmit signal based upon a scale control signal; receiving signals from the communications channel with in or outside the voice frequency band and being susceptible to undesired local echo from the transmit signal, and while reducing the undesired local echo by subtracting the scaled replica of the transmit signal from the received signals;</claim-text>
      <claim-text>and sensing received signal power and generating the scale control signal based upon the received signal power while also encoding a digital signal from the received signals and controlling a resistor ladder responsive thereto to thereby reduce the undesired local echo.</claim-text>
    </claim>
    <claim num="29">
      <claim-text>29. A method according to claim 28 wherein the step of reducing echo comprises the step of testing the communications channel by inputting a predetermined test signal for transmission when the received signal power is being sensed.</claim-text>
    </claim>
    <claim num="30">
      <claim-text>30. A method according to claim 29 wherein the step of reducing echo comprises the step of setting the scale control signal responsive to sensing a minimum received signal power during testing of the communications channel.</claim-text>
    </claim>
    <claim num="31">
      <claim-text>31. A method for communicating over a communications channel with reduced undesired local echo, the method comprising the steps of: generating a transmit signal to the communications channel in a frequency band outside a voice frequency band; generating a scaled replica of the transmit signal amplitude and phase synchronized therewith, the generating step comprising characterizing the communications channel;</claim-text>
      <claim-text>and receiving signals from the communications channel within or outside the voice frequency band and being susceptible to undesired local echo from the transmit signal, and while reducing the undesired local echo by subtraction of the scaled and phase synchronized replica of the transmit signal, while also generating a clock speed in a transmit digital-to-analog converter at the same or a different clock rate than a cancellor digital-to-analog converter with the same or a different resolution.</claim-text>
    </claim>
    <claim num="32">
      <claim-text>32. A method according to claim 31 wherein the step of generating the scaled replica comprises generating same using a processor and creating a model of the undesired local echo path therewith.</claim-text>
    </claim>
    <claim num="33">
      <claim-text>33. A method according to claim 32 wherein the step of channel characterization comprises generating a test signal.</claim-text>
    </claim>
    <claim num="34">
      <claim-text>34. A method according to claim 33 wherein the step of generating the replica signal comprises storing a plurality of models relating to respective different characterizations of the communications channel.</claim-text>
    </claim>
  </claims>
</questel-patent-document>