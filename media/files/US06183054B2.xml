<?xml version="1.0" encoding="UTF-8"?>
<questel-patent-document lang="en" date-produced="20180805" produced-by="Questel" schema-version="3.23" file="US06183054B2.xml">
  <bibliographic-data lang="en">
    <publication-reference publ-desc="Granted patent as second publication">
      <document-id>
        <country>US</country>
        <doc-number>06183054</doc-number>
        <kind>B2</kind>
        <date>20010206</date>
      </document-id>
      <document-id data-format="questel">
        <doc-number>US6183054</doc-number>
      </document-id>
    </publication-reference>
    <original-publication-kind>B2</original-publication-kind>
    <application-reference family-id="9508566" extended-family-id="16536873">
      <document-id>
        <country>US</country>
        <doc-number>09104011</doc-number>
        <kind>A</kind>
        <date>19980624</date>
      </document-id>
      <document-id data-format="questel">
        <doc-number>1998US-09104011</doc-number>
      </document-id>
      <document-id data-format="questel_Uid">
        <doc-number>16947113</doc-number>
      </document-id>
    </application-reference>
    <language-of-filing>en</language-of-filing>
    <language-of-publication>en</language-of-publication>
    <priority-claims>
      <priority-claim kind="national" sequence="1">
        <country>FR</country>
        <doc-number>9708129</doc-number>
        <kind>A</kind>
        <date>19970627</date>
        <priority-active-indicator>Y</priority-active-indicator>
      </priority-claim>
      <priority-claim data-format="questel" sequence="1">
        <doc-number>1997FR-0008129</doc-number>
      </priority-claim>
    </priority-claims>
    <dates-of-public-availability>
      <publication-of-grant-date>
        <date>20010206</date>
      </publication-of-grant-date>
    </dates-of-public-availability>
    <classifications-ipcr>
      <classification-ipcr sequence="1">
        <text>B41J   2/175       20060101A I20051008RMEP</text>
        <ipc-version-indicator>
          <date>20060101</date>
        </ipc-version-indicator>
        <classification-level>A</classification-level>
        <section>B</section>
        <class>41</class>
        <subclass>J</subclass>
        <main-group>2</main-group>
        <subgroup>175</subgroup>
        <classification-value>I</classification-value>
        <generating-office>
          <country>EP</country>
        </generating-office>
        <classification-status>R</classification-status>
        <classification-data-source>M</classification-data-source>
        <action-date>
          <date>20051008</date>
        </action-date>
      </classification-ipcr>
      <classification-ipcr sequence="2">
        <text>G01F  23/26        20060101A I20051008RMEP</text>
        <ipc-version-indicator>
          <date>20060101</date>
        </ipc-version-indicator>
        <classification-level>A</classification-level>
        <section>G</section>
        <class>01</class>
        <subclass>F</subclass>
        <main-group>23</main-group>
        <subgroup>26</subgroup>
        <classification-value>I</classification-value>
        <generating-office>
          <country>EP</country>
        </generating-office>
        <classification-status>R</classification-status>
        <classification-data-source>M</classification-data-source>
        <action-date>
          <date>20051008</date>
        </action-date>
      </classification-ipcr>
    </classifications-ipcr>
    <classification-national>
      <country>US</country>
      <main-classification>
        <text>347007000</text>
        <class>347</class>
        <subclass>007000</subclass>
      </main-classification>
      <further-classification sequence="1">
        <text>073304000C</text>
        <class>073</class>
        <subclass>304000C</subclass>
      </further-classification>
    </classification-national>
    <classifications-ecla>
      <classification-ecla sequence="1">
        <text>B41J-002/175L</text>
        <section>B</section>
        <class>41</class>
        <subclass>J</subclass>
        <main-group>002</main-group>
        <subgroup>175L</subgroup>
      </classification-ecla>
      <classification-ecla sequence="2">
        <text>G01F-023/26B2</text>
        <section>G</section>
        <class>01</class>
        <subclass>F</subclass>
        <main-group>023</main-group>
        <subgroup>26B2</subgroup>
      </classification-ecla>
      <classification-ecla sequence="3">
        <text>G01F-023/26B4</text>
        <section>G</section>
        <class>01</class>
        <subclass>F</subclass>
        <main-group>023</main-group>
        <subgroup>26B4</subgroup>
      </classification-ecla>
    </classifications-ecla>
    <patent-classifications>
      <patent-classification sequence="1">
        <classification-scheme office="EP" scheme="CPC">
          <date>20130101</date>
        </classification-scheme>
        <classification-symbol>G01F-023/266</classification-symbol>
        <section>G</section>
        <class>01</class>
        <subclass>F</subclass>
        <main-group>23</main-group>
        <subgroup>266</subgroup>
        <symbol-position>F</symbol-position>
        <classification-value>I</classification-value>
        <classification-status>B</classification-status>
        <classification-data-source>H</classification-data-source>
        <action-date>
          <date>20170505</date>
        </action-date>
      </patent-classification>
      <patent-classification sequence="2">
        <classification-scheme office="EP" scheme="CPC">
          <date>20130101</date>
        </classification-scheme>
        <classification-symbol>B41J-002/17566</classification-symbol>
        <section>B</section>
        <class>41</class>
        <subclass>J</subclass>
        <main-group>2</main-group>
        <subgroup>17566</subgroup>
        <symbol-position>L</symbol-position>
        <classification-value>I</classification-value>
        <classification-status>B</classification-status>
        <classification-data-source>H</classification-data-source>
        <action-date>
          <date>20170505</date>
        </action-date>
      </patent-classification>
      <patent-classification sequence="3">
        <classification-scheme office="EP" scheme="CPC">
          <date>20130101</date>
        </classification-scheme>
        <classification-symbol>B41J-2002/17579</classification-symbol>
        <section>B</section>
        <class>41</class>
        <subclass>J</subclass>
        <main-group>2002</main-group>
        <subgroup>17579</subgroup>
        <symbol-position>L</symbol-position>
        <classification-value>A</classification-value>
        <classification-status>B</classification-status>
        <classification-data-source>H</classification-data-source>
        <action-date>
          <date>20170504</date>
        </action-date>
      </patent-classification>
      <patent-classification sequence="4">
        <classification-scheme office="EP" scheme="CPC">
          <date>20130101</date>
        </classification-scheme>
        <classification-symbol>G01F-023/265</classification-symbol>
        <section>G</section>
        <class>01</class>
        <subclass>F</subclass>
        <main-group>23</main-group>
        <subgroup>265</subgroup>
        <symbol-position>L</symbol-position>
        <classification-value>I</classification-value>
        <classification-status>B</classification-status>
        <classification-data-source>H</classification-data-source>
        <action-date>
          <date>20170505</date>
        </action-date>
      </patent-classification>
    </patent-classifications>
    <number-of-claims>26</number-of-claims>
    <exemplary-claim>1</exemplary-claim>
    <figures>
      <number-of-drawing-sheets>5</number-of-drawing-sheets>
      <number-of-figures>9</number-of-figures>
      <image-key data-format="questel">US6183054</image-key>
    </figures>
    <invention-title format="original" lang="en" id="title_en">Method and device for determining the quantities of consumable products contained in reservoirs grouped together next to one another and document printing device using this method</invention-title>
    <references-cited>
      <citation srep-phase="examiner">
        <patcit num="1">
          <text>SOTACK JOHN D, et al</text>
          <document-id>
            <country>US</country>
            <doc-number>5465619</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5465619</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="applicant">
        <patcit num="2">
          <text>HUGHES IVOR</text>
          <document-id>
            <country>US</country>
            <doc-number>5495745</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5495745</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="applicant">
        <patcit num="3">
          <text>OLYMPIA AEG</text>
          <document-id>
            <country>DE</country>
            <doc-number>3644095</doc-number>
            <kind>A1</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>DE3644095</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="applicant">
        <patcit num="4">
          <text>GIBB ROBERT F</text>
          <document-id>
            <country>WO</country>
            <doc-number>9306572</doc-number>
            <kind>A1</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>WO9306572</doc-number>
          </document-id>
        </patcit>
      </citation>
    </references-cited>
    <parties>
      <applicants>
        <applicant data-format="original" app-type="applicant" sequence="1">
          <addressbook lang="en">
            <orgname>Canon Kabushiki Kaisha</orgname>
            <address>
              <address-1>Tokyo, JP</address-1>
              <city>Tokyo</city>
              <country>JP</country>
            </address>
          </addressbook>
          <nationality>
            <country>JP</country>
          </nationality>
        </applicant>
        <applicant data-format="questel" app-type="applicant" sequence="2">
          <addressbook lang="en">
            <orgname>CANON</orgname>
          </addressbook>
          <nationality>
            <country>JP</country>
          </nationality>
        </applicant>
      </applicants>
      <inventors>
        <inventor data-format="original" sequence="1">
          <addressbook lang="en">
            <name>Froger, Marie-Hélène</name>
            <address>
              <address-1>Chateaugiron, FR</address-1>
              <city>Chateaugiron</city>
              <country>FR</country>
            </address>
          </addressbook>
          <nationality>
            <country>FR</country>
          </nationality>
        </inventor>
        <inventor data-format="original" sequence="2">
          <addressbook lang="en">
            <name>Coudray, Pascal</name>
            <address>
              <address-1>La Chapelle des Fougeretz, FR</address-1>
              <city>La Chapelle des Fougeretz</city>
              <country>FR</country>
            </address>
          </addressbook>
          <nationality>
            <country>FR</country>
          </nationality>
        </inventor>
      </inventors>
      <agents>
        <agent sequence="1" rep-type="agent">
          <addressbook lang="en">
            <orgname>Fitzpatrick, Cella, Harper &amp; Scinto</orgname>
          </addressbook>
        </agent>
      </agents>
    </parties>
    <examiners>
      <primary-examiner>
        <name>Grimley, Arthur T.</name>
      </primary-examiner>
    </examiners>
    <lgst-data>
      <lgst-status>EXPIRED</lgst-status>
    </lgst-data>
  </bibliographic-data>
  <abstract format="original" lang="en" id="abstr_en">
    <p id="P-EN-00001" num="00001">
      <br/>
      Determination of the quantities of products contained in reservoirs grouped together next to one another by using a capacitive arrangement associated with these reservoirs.According to the invention, electrodes of the capacitive arrangement (121a, 122a-121b, 122b-121c, 122c) respectively associated in pairs with the reservoirs (112a, 112b, 112c) are selected, the transmitted signals (Si) are successively detected, measured and stored, and each measurement is corrected by correction values depending on at least certain of the other measurements.
    </p>
  </abstract>
  <description format="original" lang="en" id="desc_en">
    <p num="1">
      The invention relates to a method and a device for determining the quantities of consumable products contained in reservoirs grouped together next to one another.
      <br/>
      It relates to a type of measurement of the available volumes by capacitive means and concerns more particularly an improvement making it possible to improve the accuracy of different measurements in spite of stray capacitive couplings existing between electrodes associated with the different reservoirs.
    </p>
    <p num="2">By way of a preferred application, the invention also concerns a document printing device using the method indicated above.</p>
    <p num="3">
      A number of ways for detecting a level of ink in a reservoir of a printing device are known.
      <br/>
      Notably, association with the reservoir is known of a capacitive arrangement to which an excitation signal, generally a high frequency alternating signal, is applied.
      <br/>
      It is known that the signal transmitted by such a capacitive arrangement varies according to the quantity of ink remaining in the reservoir.
      <br/>
      This variation can therefore be used to indicate to the user the fill level of the reservoir or at least the fact that a minimum level has been reached.
      <br/>
      Such information allows the user to refill the reservoir or to change a cartridge comprising such a reservoir often associated with an ink-jet print head.
      <br/>
      The capacitive arrangement is such that at least one capacitor of relatively small capacitance (a few picofarads) is constituted so that the reservoir is located or can be located at a given instant between electrodes of such a capacitor.
    </p>
    <p num="4">
      By way of example, document EP 0 028 399 describes a method for detecting the minimum level of ink in a reservoir, using a resonant circuit, the capacitor of which is formed by two metal plates (electrodes) between which the ink reservoir is located.
      <br/>
      The latter therefore fills the dielectric space of such a capacitor and the quantity of ink has a direct effect on the permittivity of the said dielectric space, and therefore the value of the capacitance.
      <br/>
      The resonant circuit is calibrated so that its resonant frequency and the maximum voltage at its measurement resistance are reached when the level of ink has fallen to a predetermined value.
      <br/>
      When resonance is achieved, a signal which can be used for signalling is sent.
      <br/>
      Consequently, with such a system, the only information available is an indication of the fact that the ink level is or is not above a predetermined low threshold.
    </p>
    <p num="5">
      When the ink level decreases, the measurements become inaccurate and it is difficult to determine the voltage which corresponds exactly to a total absence of ink.
      <br/>
      This uncertainty leads to provision of a safety margin taking into account the measurement inaccuracy, in order to guarantee a presence of ink at any instant.
      <br/>
      For example, it may be chosen to send a message when the level is below 20% of the initial level.
      <br/>
      Once this message has been sent, it is no longer possible to indicate the instant at which the ink runs out completely.
      <br/>
      This therefore results in a certain wastage.
      <br/>
      This problem is accentuated when a number of reservoirs containing different coloured inks or pigmented products are used, for example for colour reproduction.
      <br/>
      These reservoirs are carried by a carriage constrained to move along a guidance means itself arranged facing a print medium movement mechanism.
      <br/>
      Each reservoir communicates with an output duct connected to a corresponding print head, itself carried by the carriage.
      <br/>
      Consequently, the reservoirs are grouped together next to one another and, if metal electrodes are associated with each of them in order to constitute a capacitive arrangement suitable for allowing measurements of level in the different reservoirs, stray capacitances may exist between electrodes normally assigned to different reservoirs, which leads to measurement errors.
      <br/>
      The lower the level of ink measured in a reservoir, the greater the errors, even if large quantities of ink remain in the neighbouring reservoirs.
    </p>
    <p num="6">The invention aims firstly to correct this type of measurement error.</p>
    <p num="7">More particularly, the invention concerns a method of determining quantities of consumable products respectively contained in reservoirs grouped together next to one another, of the type using a capacitive arrangement comprising a number of conductive electrodes associated respectively with the said reservoirs, certain of which may be connected to an excitation signal generator and others of which may be connected to detection and measurement means, in order to respectively apply a signal to the said capacitive arrangement and to detect and process a resulting signal transmitted by the latter and representing a quantity of product contained in one of the reservoirs, characterised in that it consists, for each reservoir in turn, of selecting aforementioned electrodes of the said capacitive arrangement in order to apply such a signal across one of the reservoirs, of detecting and measuring the corresponding transmitted signal, then of correcting each measurement by correction values depending on at least certain of the other measurements.</p>
    <p num="8">
      The aforementioned consumable products are generally different.
      <br/>
      For example, if different coloured inks or pigmented products are concerned, they may have different densities or viscosities, or in general different characteristics.
    </p>
    <p num="9">
      According to a currently preferred embodiment, the correction values consist of terms each representing the product of another measurement (that is to say relating to another reservoir) and a predetermined corrective coefficient.
      <br/>
      In practice, the global correction applied to a measurement is the algebraic sum of such terms relating to the other reservoirs.
      <br/>
      The corrective coefficients depend on the geometry of the reservoirs and their layout with respect to one another.
      <br/>
      A matrix of correction coefficients is thus defined, which can be stored once and for all, so that the correction consists, after each series of measurements successively using the conductive electrodes assigned to the different reservoirs and making it possible to form a vector of measurement values (that is to say the uncorrected values resulting from the measurements of the transmitted signals, each time, by the capacitive arrangement), of producing the product of this vector and the matrix of correction coefficients in order to obtain a vector of corrected measurement values.
      <br/>
      These corrected measurement values can then be displayed to inform the user.
    </p>
    <p num="10">According to another advantageous characteristic of the invention, which applies when the reservoirs contain electrically conductive products flowing towards a device electrically connected to a reference potential (for example earth), the method defined above may be supplemented by a series of additional operations, possibly used after comparison of each of the aforementioned corrected measurements with a threshold value or respective threshold values.</p>
    <p num="11">Depending on the result of these comparisons, the excitation signal may be changed and aforementioned electrodes selected again in turn in order to apply a second excitation signal successively across each reservoir.</p>
    <p num="12">The corresponding transmitted signal is detected and measured and each of these signals is compared with a new predetermined threshold value, possibly specific, and, depending on these comparisons, a control and/or display command is produced.</p>
    <p num="13">
      More precisely, in the method envisaged above, the excitation signals are high-frequency alternating signals, of different frequencies, and consequently the change of excitation signal consists of a change of frequency.
      <br/>
      During the first part of the method, a relatively high frequency, for example of the order of 5 MHz, is used, while the second part of the method is implemented with a much lower frequency, for example of the order of 10 kHz.
    </p>
    <p num="14">
      With this second frequency, which is therefore applied only when the reservoir is almost empty, the transmitted signal is relatively constant except when the electrically conductive product disappears in the duct connecting the reservoir to the using device electrically connected to a reference potential.
      <br/>
      A rise in the voltage transmitted by the capacitive arrangement assigned to the corresponding reservoir is then seen.
      <br/>
      This transition is clearly perceptible with the second excitation signal, so that, when it occurs, it can be determined that the corresponding reservoir is completely empty or that an operational fault has occurred.
    </p>
    <p num="15">The invention also concerns a device for determining quantities of consumable products respectively contained in reservoirs grouped together next to one another, of the type comprising a capacitive arrangement having a number of conductive electrodes associated respectively with the said reservoirs, certain of them being connected to a first excitation signal generator and others of which may be connected to detection and measurement means, in order to respectively apply a signal to the said capacitive arrangement and detect and process a resulting signal transmitted by the latter and representing a quantity of product contained in a corresponding reservoir, characterised in that it has controlled selection means, in order to successively select electrodes corresponding each time to a reservoir, in order to respectively connect these electrodes to the said generator and to the said detection and measurement means, a processing circuit controlling the said selection means, and storage means for storing measurements of the said transmitted resulting signals, and in that the said processing circuit is capable of correcting the said measurements by correction values depending on at least certain of the other measurements.</p>
    <p num="16">Finally, as a preferred implementation, the invention concerns any document printing device having a number of ink reservoirs grouped together next to one another and associated with respective print heads, carried by a carriage constrained to move along guidance means arranged facing a print medium movement mechanism, each reservoir communicating with an output duct connected to the corresponding print head, of the type also having means of determining quantities of ink respectively contained in the reservoirs grouped together next to one another, of the type comprising a capacitive arrangement having a number of conductive electrodes associated respectively with the said reservoirs, certain of which may be connected to a first excitation signal generator and others of which may be connected to detection and measurement means, in order to respectively apply a signal to the said capacitive arrangement and detect and process a resulting signal transmitted by the latter and representing a quantity of ink contained in one of the reservoirs, characterised in that it has controlled selection means, in order to successively select electrodes corresponding each time to a specific reservoir, in order to selectively connect these electrodes to the said generator and to the said detection and measurement means, a processing circuit controlling the said selection means and storage means for storing measurements of the said transmitted resulting signals, and in that the said processing circuit is capable of correcting the said measurements by correction values depending on at least certain of the other measurements.</p>
    <p num="17">
      Where the inks or similar pigmented products contained in these reservoirs are electrically conductive, the print head constitutes a using device electrically connected to a reference potential (earth) and therefore behaves as an impedance "connected" between the output duct of the reservoir and the reference potential.
      <br/>
      Consequently, it is possible to implement the second part of the method explained above by providing a second excitation signal generator and a switch making it possible to bring one or other of these generators into service, that is to say connect it to the capacitive arrangement.
    </p>
    <p num="18">The first part of the method results in the display of the corrected values indicating the quantities of ink remaining in each reservoir and the second, optionally implemented, part of the method results in the display of a message indicating that a reservoir is completely empty and optionally the production of an alarm signal.</p>
    <p num="19">
      The detection means may include an envelope detector and, in cascade with the latter, an analogue to digital converter connected to convert the signal coming from the envelope detector into digital information.
      <br/>
      The latter constitute the measurements to which the corrections are next applied.
    </p>
    <p num="20">
      When the device for determining the quantities of products contained in the reservoirs is associated with a document printing device, the microprocessor-based main processing circuit of this printing device controls the input of information at the detection and measurement means, while the read-only memory associated with this main processing circuit contains, on the one hand, the matrix of correction coefficients and, on the other hand, information representing the quantity of ink remaining in a reservoir, corresponding to the corrected digital information.
      <br/>
      The printing device also has display means making it possible, among other things, to display information indicating the quantities of ink remaining in the reservoirs and/or a message informing the user of the necessity of taking action, notably to replace or refill such and such reservoir.
    </p>
    <p num="21">The conductive electrodes applied against the walls of the reservoirs may be either metal plates carried by a support, generally forming part of the carriage on which the reservoirs are mounted, or plates fixed directly on the walls of the reservoirs, or metallizations of such walls.</p>
    <p num="22">The invention also concerns any automated office machine, characterised in that it has a device for determining the quantities of liquid consumable products remaining in the ink reservoirs they include, in accordance with the preceding definition and using the method defined.</p>
    <p num="23">
      The invention also concerns a document printing device incorporating such a device for determining quantities of ink.
      <br/>
      Such an automated office machine may for example essentially constitute a colour printer, perhaps a facsimile machine or a microcomputer having at least one device in question.
    </p>
    <p num="24">
      The invention will be better understood and other advantages of it will emerge more clearly in the light of the following description of a document printing device in accordance with its principle, using the method defined above and including notably a device for determining quantities of ink remaining in the different reservoirs, given solely by way of example and produced with reference to the accompanying drawings in which:
      <br/>
      FIG. 1 is a block diagram of a preferred embodiment of the colour printing device;
      <br/>
      FIG. 2 is a perspective view of this same printing device;
      <br/>
      FIGS. 3A and 3B are perspective views of one and the same cartridge containing notably three reservoirs;
      <br/>
      FIG. 4 is a detailed view, with cutaway, of part of the carriage, forming a support on which the cartridge of FIG. 3 is mounted and which carries conductive electrodes of the capacitive arrangement;
      <br/>
      FIG. 5 is a schematic view of the cartridge, along a section V--V of FIG. 3A, with the corresponding electrodes;
      <br/>
      FIG. 6 is an equivalent electrical diagram of part of the capacitive arrangement associated with a reservoir of the cartridge and with the corresponding print head;
      <br/>
      FIG. 7 is a graph illustrating the voltage of the signal transmitted by the capacitive arrangement according to the quantity of ink remaining in a reservoir while this reservoir and the adjacent reservoirs are emptied completely and successively; and
      <br/>
      FIG. 8 is a flow diagram of a program implementing the method of the invention.
    </p>
    <p num="25">
      Considering more particularly FIGS. 1 to 4, a colour printer 10 has been depicted, which receives data to be printed DI, representing text or an image, by means of a parallel input/output port 107, connected to an interface circuit 106 itself connected to an ink ejection control circuit 110 which controls the print heads 113a, 113b, 113c, by way of an amplification circuit 114.
      <br/>
      Each print head is connected to a reservoir of ink or similar pigmented product allowing colour printing.
      <br/>
      The three reservoirs 112a, 112b and 112c are in fact closely grouped together next to one another and constitute a single exchangeable cartridge 65.
      <br/>
      These reservoirs contain inks or similar liquid pigmented products, of different colours, in this case magenta (a), cyan (b) and yellow (c) for colour reproduction.
      <br/>
      Another cartridge 66 constituting a single reservoir contains black ink.
      <br/>
      Determination of the level of black ink is not part of the invention; for this reason the 112d containing black ink is not depicted on the diagram of FIG. 1.
      <br/>
      This reservoir is nevertheless associated with a fourth print head similar to the others.
      <br/>
      The print heads and reservoirs are mounted on a carriage 60 constrained to move along guidance means 67 formed by parallel shafts and rails.
      <br/>
      The carriage 60 is moved with reciprocating motion along these guidance means.
      <br/>
      It is driven by a motor 102 by means of a belt mechanism 102a, well known to persons skilled in the art.
      <br/>
      The movement path of the carriage and therefore of the print heads 113a-113c is parallel to a line to be printed on a print medium such as a sheet of paper.
      <br/>
      This print medium is moved perpendicular to the movement path of the carriage by the printer mechanism, known per se.
    </p>
    <p num="26">
      The printer also has a main data processing circuit 100 associated with a read-only memory 103 and a random access memory 109.
      <br/>
      The read-only memory 103 contains the main processing circuit operating programs while the random access memory 109, also associated with the ink ejection control circuit 110, temporarily stores the data received by means of the interface 106 as well as the data produced by the main processing circuit 100.
      <br/>
      The latter is connected to a display 104 on which it controls the display of messages representing the operation of the printer and notably, as will be seen later, information on the quantities of ink remaining in the different reservoirs.
    </p>
    <p num="27">
      The main processing circuit 100 is connected to a keypad 105 by means of which the user can transmit operating commands to the printer.
      <br/>
      The processing circuit also controls the motor 102 for driving the carriage, by means of an amplification circuit 101.
      <br/>
      This motor is here advantageously of the stepping type.
    </p>
    <p num="28">
      The printing device is itself equipped with a device for determining the quantities of pigmented product respectively contained in the reservoirs and more particularly, as regards the invention, in the reservoirs 112a, 112b and 112c grouped together in one and the same cartridge 65.
      <br/>
      This determination device comprises a capacitive arrangement 108 including at least two metallic conductive electrodes 121, 122 associated with each reservoir.
      <br/>
      A so-called sending electrode 121 is distinguished, connected to an excitation signal generator 117A or 117B by way, notably, of a switch 118 (controlled by the main data processing circuit 100) and an amplifier 119.
      <br/>
      On the other hand, a so-called receiving electrode 122 is distinguished, connected to detection and measurement means 115 capable of receiving and processing a signal transmitted by the capacitive arrangement (in fact, part of the latter selected under the control of the main processing circuit 100 ), the said transmitted signal representing the quantity of product present in a corresponding reservoir.
    </p>
    <p num="29">
      In FIG. 1, it can be seen that the electrodes 121a, 122a correspond to the reservoir 112a, the electrodes 121b, 122b correspond to the reservoir 112b and the electrodes 121c, 122c correspond to the reservoir 112c.
      <br/>
      The forms and characteristics of these electrodes will be described in detail later.
    </p>
    <p num="30">
      The detection and measurement means 115 are connected to the said receiving electrodes by way of first controlled selection means 124 making it possible to successively and cyclically select an electrode (possibly a group of electrodes) associated each time with a particular reservoir of the cartridge 65 in order to successively determine the quantities of products remaining in the different reservoirs, during one measurement cycle.
      <br/>
      Such a measurement cycle may for example take place before the printing of a document.
      <br/>
      Likewise, the excitation signal generator 117A or 117B, according to the state of the switch 118, is connected to the said sending electrodes, by way of second controlled selection means 125, making it possible to successively and cyclically select an electrode (possibly a group of electrodes) associated each time respectively with the same aforementioned particular reservoir, that is to say the reservoir for which an attempt is being made to measure the quantity of product it contains.
    </p>
    <p num="31">
      In the example, the excitation signal generator 117A is a relatively high-frequency alternating signal generator while the excitation signal generator 117B is a lower-frequency alternating signal generator.
      <br/>
      Typically, the frequency of the generator 117A is of the order of 5 MHz while the frequency of the generator 117B is of the order of 10 kHz.
      <br/>
      The first and second selection means 124, 125 are controlled by the main processing circuit 100.
      <br/>
      The aforementioned detection and measurement means 115 include an envelope detector 151 connected to be linked to at least one receiving electrode selected by means of the said first selection means 124.
      <br/>
      An amplifier 150 is inserted between the selection means 124 and the input of the envelope detector.
      <br/>
      It has an input impedance of the order of 1 M OMEGA .
      <br/>
      These detection and measurement means 115 also include an analogue to digital converter 152 connected to convert a signal Si coming from the envelope detector into digital information SNi.
      <br/>
      This digital information is transmitted to the main processing circuit 100 and used by it.
    </p>
    <p num="32">
      In particular, the read-only memory 103 contains a matrix of predetermined correction coefficients M usable for correction of the measurements represented by the digital information SNi.
      <br/>
      As for the random access memory 109, this is capable of temporarily storing the measurement values SNi for the three reservoirs.
      <br/>
      The read-only memory 103 also contains a look-up table TC where information representing the quantity of pigmented product remaining in a reservoir appears in correspondence with the digital information corrected, according to the invention, from the digital information SNi and the matrix of correction coefficients M.
    </p>
    <p num="33">
      The cartridge 65 combining the three reservoirs 112a-112c and the cartridge 66 constituting on its own the 112d are installed side by side on a support 156 carried by the carriage 60.
      <br/>
      The two cartridges are removable and exchangeable.
      <br/>
      The print heads 113a-113c (and the print head supplied by black ink) are located at the lower part of the support 156.
      <br/>
      The print heads are therefore installed permanently on the carriage 60.
    </p>
    <p num="34">
      According to another possible embodiment, the three reservoirs 112a-112c and the corresponding print heads 113 may be combined in one and the same exchangeable cartridge.
      <br/>
      If the reservoirs form one exchangeable cartridge, one of the messages produced by the main processing circuit can indicate the necessity of changing the cartridge as soon as one of the reservoirs is empty.
      <br/>
      If, on the contrary, the reservoirs are intended to be refilled when this is necessary, they can each have a refilling aperture and one of the messages produced by the main processing circuit can indicate the necessity of refilling such and such reservoir.
      <br/>
      The support 156 has two sockets, a socket 157 intended to receive the cartridge containing the reservoirs 112a-112c and a socket 158 intended to receive the cartridge containing the black ink reservoir.
      <br/>
      The socket 157 has parallel walls carrying the electrodes 121 or 122 associated with the three reservoirs 112a-112c.
      <br/>
      Each electrode is here composed of a metal plate.
      <br/>
      At least one electrode per reservoir may advantageously be applied by elastic stressing means against the wall of the corresponding cartridge.
      <br/>
      Such stressing means may be implemented by a leaf spring 160 or similar interposed between one wall of the support and a movable insulating wall carrying certain electrodes.
      <br/>
      However, the electrodes may be defined by metallizations deposited on external surfaces of the cartridge constituting the three reservoirs.
      <br/>
      The form of these metallized electrodes appears in broken lines in FIGS. 3A and 3B. In this case, the support 156 may define a simple structure for housing the cartridges and carry electrical connection elements making it possible, by simple contact, to connect the different electrodes to the selectors 124 and 125.
    </p>
    <p num="35">
      This layout of electrodes is possible, in view of the arrangement of the reservoirs constituting the cartridge, on account of each reservoir containing a conductive pigmented product.
      <br/>
      Its walls, that is to say the walls of the cartridge, are made of an insulating material, for example plastic.
      <br/>
      The three reservoirs 112a-112c are disposed side by side over substantially the whole height of the cartridge.
      <br/>
      In other words, this cartridge is composed of the juxtaposition of three independent reservoirs, the reservoir 112a for magenta, the reservoir 112b for cyan and the reservoir 112c for yellow.
      <br/>
      The reservoirs 112a and 112c each extend over half the width of the cartridge while the reservoir 112c extends from one lateral wall to the other.
      <br/>
      This layout of the reservoirs with respect to one another appears in FIG. 5.
      <br/>
      Because of this particular configuration of the cartridge, the electrodes 121a and 122a are disposed one above the other on the same lateral wall of the cartridge, on the reservoir 112a side, and the electrodes 121c and 122c are disposed on the opposite lateral wall of the cartridge, one above the other, on the reservoir 112c side.
      <br/>
      For the reservoir 112b, each electrode is divided into two parts joined together by electrical conductors.
      <br/>
      Each part has approximately a surface area equal to half that of an electrode 121 or 122 of one of the other two reservoirs.
      <br/>
      The two parts are respectively referenced 121b1, 121b2 as regards the sending electrode of the reservoir 112b, and 122b1, 122b2 as regards the receiving electrode associated with this same reservoir 112b.
      <br/>
      In fact, it can be considered that the two parts 121b1 and 121b2 constitute one and the same sending electrode 121b while the two parts 122b1 and 122b2 constitute one and the same receiving electrode 122b.
      <br/>
      Each electrode or electrode part has a rectangular form and is thus located applied against a plane face of the reservoir corresponding to it.
      <br/>
      These electrodes form part of capacitors of the capacitive arrangement 108.
      <br/>
      The equivalent electrical diagram of FIG. 6 can be assigned to any one of the reservoirs 112 provided with its two electrodes 121 and 122 and associated with the corresponding print head 113.
      <br/>
      The so-called "sending" electrode 121, with the corresponding reservoir 112, defines a capacitor C1, the dielectric of which is constituted by the wall 165, made of insulating plastic material, of the reservoir itself.
      <br/>
      In the same way, the electrode 122, with the reservoir, defines a capacitor C2, the dielectric of which is constituted by the same wall of insulating material.
      <br/>
      The reservoirs are filled with a porous body impregnated with conductive ink.
    </p>
    <p num="36">
      Consequently, this porous body impregnated with conductive liquid constitutes the other electrodes of each of the capacitors C1 and C2.
      <br/>
      Under these conditions, resistors R1 and R2 are inserted in series between the capacitors C1 and C2.
      <br/>
      A resistance R3 is inserted between the common point of the resistors R1 and R2 and the impedance Z constituted by or representing the print head (from the electrical point of view).
      <br/>
      The other "terminal" of the impedance Z is connected to earth.
      <br/>
      A normally closed switch S is inserted between the resistor R3 and the impedance Z. This switch in fact represents the ink flow duct 171 between the output of the reservoir and the print head.
      <br/>
      It can be considered that this switch S is closed as long as there remains conductive ink in this small-sectioned duct.
      <br/>
      This can occur in a case of faulty operation but especially when the reservoir is completely empty.
      <br/>
      This phenomenon is taken advantage of, as will be seen later, for detecting the instant a reservoir is totally empty.
      <br/>
      When the reservoir empties, the capacitances of the capacitors C1 and C2 progressively decrease and, at the same time, the values of the resistors R1 to R3 increase.
      <br/>
      Finally, when the ink runs out in the duct 171 which connects the reservoir to the print head, everything happens as if the switch S were opened, therefore isolating the part of the capacitive arrangement associated with this reservoir from the corresponding print head and consequently from earth.
      <br/>
      The effect of this phenomenon is a sudden and significant rise in the voltage transmitted by the corresponding part of the capacitive arrangement.
    </p>
    <p num="37">
      The graph of FIG. 7 depicts the change in the signal V transmitted by part of the capacitive arrangement associated with a given reservoir, here the reservoir 112a, while successively emptying this reservoir and then the other two.
      <br/>
      In other words, on the x-axis, the first third of the graph (a) corresponds to the complete draining of the reservoir 112a, the sending and receiving electrodes of which are effectively connected to one of the oscillators 117, on the one hand, and to the detection and measurement means 115, on the other hand.
      <br/>
      The second (b) and third (c) thirds correspond to the change in the alternating voltage transmitted under the same conditions, while the other two reservoirs 112b and 112c are successively emptied.
      <br/>
      The curve I is obtained using the high-frequency oscillator 117A, of the order of 5 MHz, while the curve II is obtained using the lower-frequency oscillator 117B, of the order of 10 kHz.
      <br/>
      On the y-axis, the graduations represent successively the fill levels of each reservoir, expressed as a percentage of the initial volume.
    </p>
    <p num="38">
      Considering the curve I, it should be noted that the transmitted signal essentially decreases from 0.32 to 0.11 volts while the reservoir corresponding to the electrodes in service is emptied.
      <br/>
      It must however be noted that, while the other two reservoirs are emptied, which corresponds to the other two zones, the measured voltage decreases by another 27 millivolts, which is attributable to the stray capacitances between the capacitors associated with the adjacent reservoirs.
    </p>
    <p num="39">
      On the curve II, on account of an oscillator with a lower frequency being used, the impedance of the print head has a low value, which tends to reduce the effect of the variation in the level of ink on the transmitted signal.
      <br/>
      On the other hand, the sudden variation between 0.075 volts and 0.15 volts is attributable to the disappearance of ink in the duct 171.
    </p>
    <p num="40">These two curves are used one after the other, within the context of the invention.</p>
    <p num="41">Firstly, the invention consists of making necessary corrections to the measurements corresponding to the curve I (that is to say with a frequency of 5 MHz) to take account of stray capacitances.</p>
    <p num="42">
      The means for determining the quantities of pigmented products contained in the reservoirs, as just described, are used under the control of the processing circuit 100 associated with the read-only memory 103 and the random access memory 109.
      <br/>
      A program for controlling the operations is stored in the read-only memory 103.
      <br/>
      This program obeys the algorithm depicted in FIG. 8.
      <br/>
      It comprises twenty steps referenced E70 to E89.
      <br/>
      These steps are passed through periodically at certain times in the operation of the printing device, for example before printing a document.
      <br/>
      The aim of this algorithm is, on the one hand, to determine the quantities of ink present in the reservoirs 112a-112c and, possibly, to produce messages intended to attract the attention of the user, notably to change a cartridge when a reservoir is completely empty or to fill the said reservoir, if this is possible.
    </p>
    <p num="43">
      The initial step E70 consists of positioning the switch 118 to allow passage of the signal delivered by the oscillator 117A to the amplifier 119.
      <br/>
      This step is controlled by the main processing circuit 100.
    </p>
    <p num="44">
      The step E71 concerns positioning of the selection means 124 and 125 to select electrodes of the capacitive arrangement corresponding to the reservoir 112a.
      <br/>
      The selection means 124, 125 are therefore controlled to connect the electrode 121a to the output of the amplifier 119 and the electrode 122a to the input of the detection and measurement means 115.
    </p>
    <p num="45">
      At the step E72, the signal transmitted by the electrode 122a is converted into digital information SNi.
      <br/>
      This information is stored in the random access memory 109 in a variable Mm.
      <br/>
      This is the measured value of the level of magenta ink or pigmented product.
    </p>
    <p num="46">The steps E73 and E74 are respectively identical to the steps E71 and E72 (with activation of the selection means 124, 125 to select the electrodes 121b and 122b) in order to measure and store the level of cyan ink in the variable Cm.</p>
    <p num="47">The steps E75 and E76 are respectively equivalent to the steps E71 and E72, to select the electrodes 121c and 122c, in order to measure and store the level of yellow ink in the variable Jm.</p>
    <p num="48">The step E77 will consist of correcting each measurement Mm, Cm and Jm by correction values depending on at least certain of the other measurements.</p>
    <p num="49">
      More precisely, this operation consists of correcting each measurement by adding thereto, or subtracting therefrom, correction values, the latter here representing the product of another measurement and a predetermined corrective coefficient.
      <br/>
      The result is thus determination of the values of the corrected measurements represented by the variables Mc for magenta, Cc for cyan and Jc for yellow.
      <br/>
      The correction consists of a simple matrix calculation from the vector (Mm, Cm, Jm) stored in the memory 109 and the matrix MT stored in the read-only memory 103.
    </p>
    <p num="50">By way of example, for a cartridge containing three reservoirs of the kind described with reference to FIGS. 3A and 3B, the matrix of correction coefficients is as follows:  (Chemical Structure image '1' not included in text)</p>
    <p num="51">The correction therefore consists of applying the following matrix calculation:  (Chemical Structure image '2' not included in text)</p>
    <p num="52">
      A variant may consist of using this correction only when the level of ink in at least one of the reservoirs (and its corresponding measurement) becomes lower than a certain value, for example 20% of the initial value.
      <br/>
      Where the level is higher levels (and their corresponding measurements) are higher for all the reservoirs, the coefficients y1, z1, x2, z2, x3 and y3 are set to zero.
    </p>
    <p num="53">
      The step E78 consists of comparing each corrected value Mc, Cc and Jc with a threshold value, possibly specific, a, b or c, respectively.
      <br/>
      If none of the corrected measurement values is less than the corresponding threshold, the quantities of ink remaining are calculated by virtue of the table TC stored in read-only memory (step E79).
      <br/>
      At the step E80, the three values are displayed.
    </p>
    <p num="54">
      If one of the corrected measurement values Mc, Cc or Jc is less than the threshold corresponding to it, the process goes to the step E81, where the main processing circuit 100 controls the switch 118 in order to substitute the oscillator 117B for the oscillator 117A.
      <br/>
      The following operations consist of repeating the measurements, reservoir by reservoir, with the new frequency corresponding to the curve ll.
      <br/>
      Thus the step E82 consists of controlling the selection means 124, 125 to bring the electrodes 121a, 122a into service in order to perform a new measurement relating to the reservoir containing magenta ink.
    </p>
    <p num="55">
      At the step E83, the measured value is digitised and stored in order to give a new value to the variable Mm.
      <br/>
      The steps E84 and E85 correspond respectively to the steps E82 and E83 and result in a new value of variable Cm.
      <br/>
      The steps E86 and E87 correspond respectively to the steps E82 and E83 for yellow and result in the storing of a new value of variable Jm.
    </p>
    <p num="56">
      The test E88 consists of comparing each new variable Mm, Cm and Jm with a threshold value or respective threshold values, for example a', b' and c'. The aim of this comparison is to determine whether the signal transmitted at this new frequency is close to 0.07 volts or on the contrary close to 0.15 volts.
      <br/>
      The decision threshold may, for example, be situated around 0.12 volts.
      <br/>
      If all the values of the variables Mm, Cm and Jm are less than their respective thresholds, the step E80 is returned to, controlling the display of the last values determined at the step E79.
      <br/>
      If, on the contrary, at least one of the values is greater than the corresponding threshold, this means that there is no ink in the linking duct which extends between the corresponding reservoir and the print head and that, consequently, printing of the document is no longer possible.
      <br/>
      In this case, the step E89 is moved to, which consists of displaying a message asking the user to change the cartridge or the reservoir or, if this is possible, to refill the reservoir.
      <br/>
      This display may be accompanied by an alarm.
    </p>
  </description>
  <claims format="original" lang="en" id="claim_en">
    <claim num="1">
      <claim-text>What is claimed is:</claim-text>
      <claim-text>1.</claim-text>
      <claim-text>A method for determining quantities of consumable products respectively contained in plural reservoirs, each said plural reservoirs being provided with a capacitive arrangement having first and second conductive electrodes of which the first conductive electrode is connectable to an excitation signal generator and of which the second conductive electrode is connectable to detection and measurement means, such that an excitation signal applied to a capacitive arrangement for one of said plural reservoirs results in a signal representing a quantity of product contained in said one of the plural reservoirs, comprising the steps of:</claim-text>
      <claim-text>selecting electrodes of a capacitive arrangement for one of said plural reservoirs in order to apply an excitation signal across said one of the plural reservoirs; detecting and measuring the corresponding resulting signal;</claim-text>
      <claim-text>and correcting the measurement of the resulting signal by correction values that depend on at least measurements of resulting signals for others of the plural reservoirs.</claim-text>
    </claim>
    <claim num="2">
      <claim-text>2. A method according to claim 1, wherein said correcting step includes correcting each of plural measurements by adding thereto, or subtracting therefrom, said correction values.</claim-text>
    </claim>
    <claim num="3">
      <claim-text>3. A method according to claim 1 or claim 2, wherein each measurement is corrected by algebraically adding thereto, terms each representing the product of another measurement and a predetermined corrective coefficient.</claim-text>
    </claim>
    <claim num="4">
      <claim-text>4. A method according to claim 1 or claim 2, further comprising the step of displaying the corrected measurement values.</claim-text>
    </claim>
    <claim num="5">
      <claim-text>5. A method according to claim 1 or claim 2, further comprising, for each reservoir, the steps of transforming said resulting signal into digital information, storing said digital information, and calculating, after digitally transformed measurements have been stored for each of said plural reservoirs, corrected measurements by performing a matrix calculation using a matrix of predetermined correction coefficients and said digitally transformed measurements.</claim-text>
    </claim>
    <claim num="6">
      <claim-text>6. A method according to claim 5, wherein said correcting step is applied only if at least one of the resulting signals has a value less than a preselected threshold.</claim-text>
    </claim>
    <claim num="7">
      <claim-text>7. A method according to claim 1 or claim 2, further comprising the steps of comparing each corrected measurement with a threshold value, determining whether to change the excitation signal depending on the result of said comparing step, and in the case of a change of excitation signal, selecting electrodes of each said reservoir in turn, applying a second excitation signal, detecting and measuring corresponding resulting signals for each said reservoir, comparing each of said resulting signals with a predetermined threshold value, and, depending on said comparing step, producing a control and/or display command.</claim-text>
    </claim>
    <claim num="8">
      <claim-text>8. A method according to claim 7, wherein the excitation signals are high-frequency alternating signals of different frequencies, and wherein the change of excitation signal consists of a change of frequency.</claim-text>
    </claim>
    <claim num="9">
      <claim-text>9. A device for determining quantities of consumable products respectively contained in plural reservoirs, each said plural reservoirs being provided with a capacitive arrangement having first and second conductive electrodes of which the first conductive electrode is connectable to a first excitation signal generator and of which the second conductive electrode is connectable to detection and measurement means, such that an excitation signal applied to the capacitive arrangement for one of said plural reservoirs results in a resulting signal representing a quantity of product contained in said one of said plural reservoirs, comprising: selection means controllable to successively select electrodes corresponding to each of said plural reservoirs, in order to successively connect selected electrodes to said excitation signal generator and to said detection and measurement means; a processing circuit controlling said selection means;</claim-text>
      <claim-text>and storage means for storing measurements of said resulting signals, wherein said processing circuit corrects a measurement of a resulting signal for one reservoir by correction values that depend on at least measurements of resulting signals for others of said plural reservoirs.</claim-text>
    </claim>
    <claim num="10">
      <claim-text>10. A device according to claim 9, further comprising a memory containing information representing predetermined correction coefficients.</claim-text>
    </claim>
    <claim num="11">
      <claim-text>11. A device according to claim 9 or claim 10, further comprising display means controlled by said processing circuit in order to display corrected measurement values and/or messages.</claim-text>
    </claim>
    <claim num="12">
      <claim-text>12. A device according to claim 9 or claim 10, wherein said first excitation signal generator is a high-frequency alternating signal generator.</claim-text>
    </claim>
    <claim num="13">
      <claim-text>13. A device according to claim 12, wherein the plural reservoirs each contain electrically conductive products flowing towards a device electrically connected to a reference potential, and further comprising a second excitation signal generator which includes a high-frequency alternating signal generator with a frequency different from that of the said first excitation signal generator, and controlled switching means, connected to link one of said first or said second excitation signal generator to said selection means, under the control of the said processing circuit.</claim-text>
    </claim>
    <claim num="14">
      <claim-text>14. A device according to claim 9 or claim 10, wherein said detection and measurement means includes an envelope detector connected to be linked to the capacitive arrangement by said selection means.</claim-text>
    </claim>
    <claim num="15">
      <claim-text>15. A device according to claim 9 or claim 10, wherein said detection and measurement means includes an analog to digital converter connected to convert a signal coming from the envelope detector into digital information.</claim-text>
    </claim>
    <claim num="16">
      <claim-text>16. A document printing device comprising: plural ink reservoirs with each ink reservoir communicating with a respective print head through an output duct; a carriage for carrying said print heads and constrained to move along guidance means arranged facing a print medium movement mechanism; quantity determining means for determining quantities of ink respectively contained in each of said plural reservoirs, said quantity determining means including for each of said plural reservoirs, a capacitive arrangement having first and second conductive electrodes of which the first conductive electrode is connectable to a first excitation signal generator and of which the second conductive electrode is connectable to detection and measurement means, such that an excitation signal applied to said capacitive arrangement for one of said plural reservoirs results in a resulting signal representing a quantity of ink contained in said one of the plural reservoirs; selection means controllable to successively select electrodes corresponding to each of said plural reservoirs, in order to successively connect selected electrodes to said excitation signal generator and to said detection and measurement means; a processing circuit controlling said selection means;</claim-text>
      <claim-text>and storage means for storing measurements of said resulting signals, wherein said processing circuit corrects a measurement of a resulting signal for one reservoir by correction values that depend on at least measurements of resulting signals for others of said plural reservoirs.</claim-text>
    </claim>
    <claim num="17">
      <claim-text>17. A device according to claim 16, further comprising a memory containing information representing predetermined corrective coefficients.</claim-text>
    </claim>
    <claim num="18">
      <claim-text>18. A device according to claim 16 or claim 17, further comprising display means controlled by said processing circuit in order to display corrected measurement values and/or messages.</claim-text>
    </claim>
    <claim num="19">
      <claim-text>19. A device according to claim 16 or claim 17, wherein said first excitation signal generator is a high-frequency alternating signal generator.</claim-text>
    </claim>
    <claim num="20">
      <claim-text>20. A device according to claim 19, wherein the plural reservoirs each contain electrically conductive inks and wherein respective print heads are electrically connected to a reference potential, and further comprising a second excitation signal generator which includes a high-frequency alternating signal generator with frequency different from that of said first excitation signal generator, and controlled switching means connected to link one of said first or second excitation signal generator to said selection means, under the control of the said processing circuit.</claim-text>
    </claim>
    <claim num="21">
      <claim-text>21. A device according to claim 16 or claim 17, wherein said detection and measurement means includes an envelope detector connected to be linked to the capacitive arrangement by said selection means.</claim-text>
    </claim>
    <claim num="22">
      <claim-text>22. A device according to claim 16 or claim 17, wherein said detection and measurement means includes an analog to digital converter connected to convert a signal coming from said envelope detector into digital information.</claim-text>
    </claim>
    <claim num="23">
      <claim-text>23. A device according to claim 17, further comprising a memory containing information representing a quantity of ink remaining in a reservoir, corresponding to the corrected measurements.</claim-text>
    </claim>
    <claim num="24">
      <claim-text>24. Automated office machine, having a device according to claim 16 or claim 17.</claim-text>
    </claim>
    <claim num="25">
      <claim-text>25. Automated office machine according to claim 24, essentially comprising a printer.</claim-text>
    </claim>
    <claim num="26">
      <claim-text>26. Microcomputer embodying a processing circuit according to claim 16 or claim 17.</claim-text>
    </claim>
  </claims>
</questel-patent-document>