<?xml version="1.0" encoding="UTF-8"?>
<questel-patent-document lang="en" date-produced="20180805" produced-by="Questel" schema-version="3.23" file="US06185187B2.xml">
  <bibliographic-data lang="en">
    <publication-reference publ-desc="Granted patent as second publication">
      <document-id>
        <country>US</country>
        <doc-number>06185187</doc-number>
        <kind>B2</kind>
        <date>20010206</date>
      </document-id>
      <document-id data-format="questel">
        <doc-number>US6185187</doc-number>
      </document-id>
    </publication-reference>
    <original-publication-kind>B2</original-publication-kind>
    <application-reference is-representative="YES" family-id="25533775" extended-family-id="42113175">
      <document-id>
        <country>US</country>
        <doc-number>08988014</doc-number>
        <kind>A</kind>
        <date>19971210</date>
      </document-id>
      <document-id data-format="questel">
        <doc-number>1997US-08988014</doc-number>
      </document-id>
      <document-id data-format="questel_Uid">
        <doc-number>43171266</doc-number>
      </document-id>
    </application-reference>
    <language-of-filing>en</language-of-filing>
    <language-of-publication>en</language-of-publication>
    <priority-claims>
      <priority-claim kind="national" sequence="1">
        <country>US</country>
        <doc-number>98801497</doc-number>
        <kind>A</kind>
        <date>19971210</date>
        <priority-active-indicator>Y</priority-active-indicator>
      </priority-claim>
      <priority-claim data-format="questel" sequence="1">
        <doc-number>1997US-08988014</doc-number>
      </priority-claim>
    </priority-claims>
    <dates-of-public-availability>
      <publication-of-grant-date>
        <date>20010206</date>
      </publication-of-grant-date>
    </dates-of-public-availability>
    <classifications-ipcr>
      <classification-ipcr sequence="1">
        <text>H04L  12/56        20060101A I20051008RMEP</text>
        <ipc-version-indicator>
          <date>20060101</date>
        </ipc-version-indicator>
        <classification-level>A</classification-level>
        <section>H</section>
        <class>04</class>
        <subclass>L</subclass>
        <main-group>12</main-group>
        <subgroup>56</subgroup>
        <classification-value>I</classification-value>
        <generating-office>
          <country>EP</country>
        </generating-office>
        <classification-status>R</classification-status>
        <classification-data-source>M</classification-data-source>
        <action-date>
          <date>20051008</date>
        </action-date>
      </classification-ipcr>
      <classification-ipcr sequence="2">
        <text>H04Q  11/04        20060101A I20051008RMEP</text>
        <ipc-version-indicator>
          <date>20060101</date>
        </ipc-version-indicator>
        <classification-level>A</classification-level>
        <section>H</section>
        <class>04</class>
        <subclass>Q</subclass>
        <main-group>11</main-group>
        <subgroup>04</subgroup>
        <classification-value>I</classification-value>
        <generating-office>
          <country>EP</country>
        </generating-office>
        <classification-status>R</classification-status>
        <classification-data-source>M</classification-data-source>
        <action-date>
          <date>20051008</date>
        </action-date>
      </classification-ipcr>
    </classifications-ipcr>
    <classification-national>
      <country>US</country>
      <main-classification>
        <text>370232000</text>
        <class>370</class>
        <subclass>232000</subclass>
      </main-classification>
      <further-classification sequence="1">
        <text>370231000</text>
        <class>370</class>
        <subclass>231000</subclass>
      </further-classification>
      <further-classification sequence="2">
        <text>370235000</text>
        <class>370</class>
        <subclass>235000</subclass>
      </further-classification>
      <further-classification sequence="3">
        <text>370253000</text>
        <class>370</class>
        <subclass>253000</subclass>
      </further-classification>
    </classification-national>
    <classifications-ecla>
      <classification-ecla sequence="1">
        <text>H04L-047/30</text>
        <section>H</section>
        <class>04</class>
        <subclass>L</subclass>
        <main-group>47</main-group>
        <subgroup>30</subgroup>
      </classification-ecla>
      <classification-ecla sequence="2">
        <text>H04L-047/10</text>
        <section>H</section>
        <class>04</class>
        <subclass>L</subclass>
        <main-group>47</main-group>
        <subgroup>10</subgroup>
      </classification-ecla>
      <classification-ecla sequence="3">
        <text>H04L-047/29</text>
        <section>H</section>
        <class>04</class>
        <subclass>L</subclass>
        <main-group>47</main-group>
        <subgroup>29</subgroup>
      </classification-ecla>
      <classification-ecla sequence="4">
        <text>H04Q-011/04S2</text>
        <section>H</section>
        <class>04</class>
        <subclass>Q</subclass>
        <main-group>011</main-group>
        <subgroup>04S2</subgroup>
      </classification-ecla>
    </classifications-ecla>
    <patent-classifications>
      <patent-classification sequence="1">
        <classification-scheme office="EP" scheme="CPC">
          <date>20130101</date>
        </classification-scheme>
        <classification-symbol>H04L-047/30</classification-symbol>
        <section>H</section>
        <class>04</class>
        <subclass>L</subclass>
        <main-group>47</main-group>
        <subgroup>30</subgroup>
        <symbol-position>F</symbol-position>
        <classification-value>I</classification-value>
        <classification-status>B</classification-status>
        <classification-data-source>H</classification-data-source>
        <action-date>
          <date>20130101</date>
        </action-date>
      </patent-classification>
      <patent-classification sequence="2">
        <classification-scheme office="EP" scheme="CPC">
          <date>20130101</date>
        </classification-scheme>
        <classification-symbol>H04L-047/10</classification-symbol>
        <section>H</section>
        <class>04</class>
        <subclass>L</subclass>
        <main-group>47</main-group>
        <subgroup>10</subgroup>
        <symbol-position>L</symbol-position>
        <classification-value>I</classification-value>
        <classification-status>B</classification-status>
        <classification-data-source>H</classification-data-source>
        <action-date>
          <date>20130101</date>
        </action-date>
      </patent-classification>
      <patent-classification sequence="3">
        <classification-scheme office="EP" scheme="CPC">
          <date>20130101</date>
        </classification-scheme>
        <classification-symbol>H04L-047/29</classification-symbol>
        <section>H</section>
        <class>04</class>
        <subclass>L</subclass>
        <main-group>47</main-group>
        <subgroup>29</subgroup>
        <symbol-position>L</symbol-position>
        <classification-value>I</classification-value>
        <classification-status>B</classification-status>
        <classification-data-source>H</classification-data-source>
        <action-date>
          <date>20130101</date>
        </action-date>
      </patent-classification>
      <patent-classification sequence="4">
        <classification-scheme office="EP" scheme="CPC">
          <date>20130101</date>
        </classification-scheme>
        <classification-symbol>H04L-2012/5635</classification-symbol>
        <section>H</section>
        <class>04</class>
        <subclass>L</subclass>
        <main-group>2012</main-group>
        <subgroup>5635</subgroup>
        <symbol-position>L</symbol-position>
        <classification-value>A</classification-value>
        <classification-status>B</classification-status>
        <classification-data-source>H</classification-data-source>
        <action-date>
          <date>20130101</date>
        </action-date>
      </patent-classification>
      <patent-classification sequence="5">
        <classification-scheme office="EP" scheme="CPC">
          <date>20130101</date>
        </classification-scheme>
        <classification-symbol>H04L-2012/5682</classification-symbol>
        <section>H</section>
        <class>04</class>
        <subclass>L</subclass>
        <main-group>2012</main-group>
        <subgroup>5682</subgroup>
        <symbol-position>L</symbol-position>
        <classification-value>A</classification-value>
        <classification-status>B</classification-status>
        <classification-data-source>H</classification-data-source>
        <action-date>
          <date>20130101</date>
        </action-date>
      </patent-classification>
      <patent-classification sequence="6">
        <classification-scheme office="EP" scheme="CPC">
          <date>20130101</date>
        </classification-scheme>
        <classification-symbol>H04Q-011/0478</classification-symbol>
        <section>H</section>
        <class>04</class>
        <subclass>Q</subclass>
        <main-group>11</main-group>
        <subgroup>0478</subgroup>
        <symbol-position>L</symbol-position>
        <classification-value>I</classification-value>
        <classification-status>B</classification-status>
        <classification-data-source>H</classification-data-source>
        <action-date>
          <date>20130101</date>
        </action-date>
      </patent-classification>
      <patent-classification sequence="7">
        <classification-scheme office="EP" scheme="ICO"/>
        <classification-symbol>T04L-012/56A16C2B</classification-symbol>
      </patent-classification>
      <patent-classification sequence="8">
        <classification-scheme office="EP" scheme="ICO"/>
        <classification-symbol>T04L-012/56A22D1</classification-symbol>
      </patent-classification>
    </patent-classifications>
    <number-of-claims>12</number-of-claims>
    <exemplary-claim>1</exemplary-claim>
    <figures>
      <number-of-drawing-sheets>2</number-of-drawing-sheets>
      <number-of-figures>4</number-of-figures>
      <image-key data-format="questel">US6185187</image-key>
    </figures>
    <invention-title format="original" lang="en" id="title_en">Method and apparatus for relative rate marking switches</invention-title>
    <references-cited>
      <citation srep-phase="examiner">
        <patcit num="1">
          <text>NEWMAN PETER</text>
          <document-id>
            <country>US</country>
            <doc-number>5457687</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5457687</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="examiner">
        <patcit num="2">
          <text>JAIN RAJ, et al</text>
          <document-id>
            <country>US</country>
            <doc-number>5633859</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5633859</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="examiner">
        <patcit num="3">
          <text>MEURISSE WIM POL, et al</text>
          <document-id>
            <country>US</country>
            <doc-number>5959973</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5959973</doc-number>
          </document-id>
        </patcit>
      </citation>
    </references-cited>
    <parties>
      <applicants>
        <applicant data-format="original" app-type="applicant" sequence="1">
          <addressbook lang="en">
            <orgname>International Business Machines Corporation</orgname>
            <address>
              <address-1>Armonk, NY, US</address-1>
              <city>Armonk</city>
              <state>NY</state>
              <country>US</country>
            </address>
          </addressbook>
          <nationality>
            <country>US</country>
          </nationality>
        </applicant>
        <applicant data-format="questel" app-type="applicant" sequence="2">
          <addressbook lang="en">
            <orgname>IBM</orgname>
          </addressbook>
          <nationality>
            <country>US</country>
          </nationality>
        </applicant>
      </applicants>
      <inventors>
        <inventor data-format="original" sequence="1">
          <addressbook lang="en">
            <name>Ghanwani, Anoop</name>
            <address>
              <address-1>Durham, NC, US</address-1>
              <city>Durham</city>
              <state>NC</state>
              <country>US</country>
            </address>
          </addressbook>
          <nationality>
            <country>US</country>
          </nationality>
        </inventor>
        <inventor data-format="original" sequence="2">
          <addressbook lang="en">
            <name>Marin, Gerald Arnold</name>
            <address>
              <address-1>Chapel Hill, NC, US</address-1>
              <city>Chapel Hill</city>
              <state>NC</state>
              <country>US</country>
            </address>
          </addressbook>
          <nationality>
            <country>US</country>
          </nationality>
        </inventor>
        <inventor data-format="original" sequence="3">
          <addressbook lang="en">
            <name>Vu, Ken Van</name>
            <address>
              <address-1>Cary, NC, US</address-1>
              <city>Cary</city>
              <state>NC</state>
              <country>US</country>
            </address>
          </addressbook>
          <nationality>
            <country>US</country>
          </nationality>
        </inventor>
      </inventors>
      <agents>
        <agent sequence="1" rep-type="agent">
          <addressbook lang="en">
            <name>Woods, Gerald R.</name>
          </addressbook>
        </agent>
        <agent sequence="2" rep-type="agent">
          <addressbook lang="en">
            <name>Wilder, Robert V.</name>
          </addressbook>
        </agent>
      </agents>
    </parties>
    <examiners>
      <primary-examiner>
        <name>Kizou, Hassan</name>
      </primary-examiner>
    </examiners>
    <lgst-data>
      <lgst-status>LAPSED</lgst-status>
    </lgst-data>
  </bibliographic-data>
  <abstract format="original" lang="en" id="abstr_en">
    <p id="P-EN-00001" num="00001">
      <br/>
      A data transfer flow control system includes a plurality of nodes or switches in a network, which are interconnected by transmission links.
      <br/>
      Resource management cells are transmitted along with data cells in information transfer sessions.
      <br/>
      As the amount of session traffic at any node increases, the level of occupancy of the buffers for that node correspondingly increases to temporarily store overflow data.
      <br/>
      At every network node, a "fair share" cell rate is determined for each output transmission link.
      <br/>
      Whenever the current cell rate (CCR) of any session exceeds the fair share cell rate for the output link at a node, the buffer occupancy threshold values for setting congestion indication fields in the resource management cells are adjusted downwardly such that a lower threshold buffer occupancy will effect a traffic congestion setting for that session.
    </p>
  </abstract>
  <description format="original" lang="en" id="desc_en">
    <heading>RELATED APPLICATIONS</heading>
    <p num="1">The present application is based upon a provisional application filed Dec. 11, 1996 by the assignee hereof, which is included herein by reference. patent application entitled "ATM NETWORK AVAILABLE BIT RATE (ABR) FLOW CONTROL SYSTEM", Attorney Docket RA9-96-049, filed on, assigned to the assignee of the present application and included herein by reference.</p>
    <heading>FIELD OF THE INVENTION</heading>
    <p num="2">The present invention relates generally to data communications networks and more particularly to a flow control system for regulating the flow of information within a network.</p>
    <heading>BACKGROUND OF THE INVENTION</heading>
    <p num="3">
      Asynchronous Transfer Mode (ATM) networks are expected to provide support for heterogeneous traffic classes having diverse quality of service (QoS) requirements.
      <br/>
      To that end, four classes of traffic have been defined based on the QoS desired by a session.
      <br/>
      The four classes, in decreasing order of priority are set forth below.
    </p>
    <p num="4">
      A Constant Bit Rate (CBR) traffic class has stringent requirements for both loss and delay.
      <br/>
      Typically, a peak rate reservation is made along the path for a given session.
      <br/>
      Applications that might use this class of service are voice and uncompressed video.
      <br/>
      A Variable Bit Rate (VBR) traffic class has slightly less stringent delay requirements.
      <br/>
      The traffic is usually "bursty", and therefore, to improve utilization, a reservation is made which is somewhat less than the peak rate of the session.
      <br/>
      VBR traffic may be further sub-divided into real-time variable bit rate (rt-VBR) and non-real-time variable bit rate (nrt-VBR) depending on the nature of the delay guarantees required.
      <br/>
      Compressed video and multimedia email are examples of applications that may use the rt-VBR and nrt-VBR classes, respectively.
      <br/>
      An Available Bit Rate (ABR) traffic class is a "best effort" service class for applications such as file transfer and email.
      <br/>
      An amount of bandwidth termed "minimum cell rate" (MCR) is reserved for each session.
      <br/>
      Each session then gets an additional amount of bandwidth depending on availability.
      <br/>
      A session is guaranteed a very low loss provided its traffic conforms to its ACR.
      <br/>
      There are, however, no delay guarantees.
      <br/>
      An elaborate flow control mechanism is used to maximize network utilization, minimize loss and ensure that sessions share the bandwidth in a fair manner.
      <br/>
      An "unspecified bit rate" (UBR) is also a "best effort" service class.
      <br/>
      Unlike ABR, there is no flow control and there are no guarantees for loss or delay.
      <br/>
      Of the four classes of ATM network traffic control presented above, the present disclosure is focused upon the rate based flow control methodologies used for the ABR traffic class.
    </p>
    <p num="5">
      Efficient informational flow control has been an important consideration in the research and design of high speed communications networks.
      <br/>
      The ATM Forum has recently standardized rate-based flow control for best effort traffic in asynchronous transfer mode (ATM) networks.
      <br/>
      Flow control processing varies a sender's allowable rate of information transfer in response to feedback from the network.
      <br/>
      The simplest switches provide only binary feedback; i.e. "congested" or "not congested".
      <br/>
      The ATM forum has standardized two methodologies, namely explicit forward congestion information (EFCI) and relative rate (RR) marking.
      <br/>
      In a network with EFCI switches, if the feedback received indicates that the network is not congested, the session's source increases its allowable cell rate (ACR); otherwise the ACR is reduced.
      <br/>
      In a network with RR marking switches, an additional form of feedback is possible where the source simply maintains its ACR.
    </p>
    <p num="6">
      Typically the sending rate of a session during which information is being transferred will oscillate around a desired operating point.
      <br/>
      Using such a scheme, a session traveling many "hops" (node-to-node transfers) will be asked to reduce its ACR if any one of the nodes along its path is congested.
      <br/>
      It is therefore at a disadvantage with respect to sessions traversing a single hop (or fewer hops).
      <br/>
      Serious fairness problems result, where long haul sessions are "starved".
      <br/>
      This well known problem is commonly referred to as "beat down".
      <br/>
      One solution to the beat down problem is to use "explicit rate" (ER) methodologies where switches are more intelligent, and can compute an estimate of the allowable rate for each session.
      <br/>
      These switches are considerably more complex to implement, even more so when targeted for high speed operation.
      <br/>
      An alternative solution to this problem is for switches to use intelligent marking where the switch selectively indicates congestion to only those sessions having a high level of activity.
    </p>
    <p num="7">
      In the past, practitioners have suggested the use of increase and decrease algorithms, such as an additive increase and a multiplicative decrease, for congestion avoidance.
      <br/>
      However, most of these proposals suffer from the above noted "beat down" problem.
      <br/>
      As a result, simple increase and decrease algorithms such as EFCI and RR marking result in an unfair allocation of bandwidth since the sessions traversing more hops get "beaten down".
    </p>
    <p num="8">
      Others have proposed the use of selective binary feedback as a solution to the beat down problem.
      <br/>
      In such schemes, routers perform measurements and calculations to compute a "max-min" fair share for each session passing through it.
      <br/>
      The router will then set the congestion indicator for only those sessions using more than the computed fair share.
      <br/>
      However, some proposed schemes are targeted for router-based connectionless networks and do not specifically address ATM networks.
      <br/>
      Moreover, prior art schemes require the maintaining of per-session information and to perform an iterative calculation to estimate the fair share for each session.
      <br/>
      Also, such schemes require that the bandwidth demand for each session be estimated by measuring the resources consumed by the session at the router.
      <br/>
      This technique is relatively complicated and is also difficult to implement.
    </p>
    <p num="9">
      In another prior art scheme, an intelligent switch maintains a value representative of the mean allowable rate for a session.
      <br/>
      If the switch is congested, the congestion indicator (CI) bit is set in the resource management (RM) cells of those sessions whose ACR is bigger than this value.
      <br/>
      That technique requires constant modification of the mean allowable cell rate using the CCR value in the RM cell and some other parameters for manipulating the rate when the switch is congested.
      <br/>
      This technique is also quite complicated and difficult to implement.
    </p>
    <p num="10">
      In still another proposed solution, a lower priority is given to sessions entering the network at a given switch, and higher priority is given to sessions that are "transiting" through that switch.
      <br/>
      However, that technique may not be compliant with standardized procedures that require that all conforming traffic be treated with the same priority at a switch.
      <br/>
      Further, the above technique relates more to throughput than it does to "fairness".
      <br/>
      The scheme assumes a wide area network (WAN) environment where the network is overloaded so that losses occur.
      <br/>
      In a local area network (LAN) scenario running ABR, that assumption is not necessarily true.
    </p>
    <p num="11">Thus there is a need for an intelligent marking scheme for RR marking switches which is easy to implement and which provides a more effective control methodology for information flow within networks.</p>
    <heading>SUMMARY OF THE INVENTION</heading>
    <p num="12">
      A data transfer flow control system for a communications network includes a plurality of nodes interconnected by transmission links.
      <br/>
      Buffers located at the switches are arranged to store information segments or data cells of data transfer sessions.
      <br/>
      Resource management cells are also transmitted along with data cells in the information transfer sessions.
      <br/>
      The resource management cells have fields which contain information useful in managing information transfer rates along the network.
      <br/>
      As the amount of session traffic at any node increases, the level of occupancy of the buffers for that node correspondingly increases.
      <br/>
      At every network node, a "fair share" cell rate is determined for each output transmission link using the cell rate capacity of the link and the number of sessions traversing that link.
    </p>
    <p num="13">Whenever the current cell rate (CCR) of any session exceeds the fair share cell rate for the output link at a node, the buffer occupancy threshold values for setting congestion indication fields in the resource management cells are adjusted downwardly such that a lower threshold buffer occupancy will effect a traffic congestion setting for that session.</p>
    <heading>BRIEF DESCRIPTION OF THE DRAWINGS</heading>
    <p num="14">
      A better understanding of the present invention can be obtained when the following detailed description of a preferred embodiment is considered in conjunction with the following drawings, in which:
      <br/>
      FIG. 1 is an illustration of the basic operation of an EFCI switch;
      <br/>
      FIG. 2 is an illustration of the basic operation of an RR marking switch;
      <br/>
      FIG. 3 shows an example of a typical network operation in handling four sessions; and
      <br/>
      FIG. 4 is an illustration showing the enhanced marking scheme implemented in an exemplary embodiment of the present invention.
    </p>
    <heading>DETAILED DESCRIPTION</heading>
    <p num="15">
      In order to perform flow control, an ABR session periodically sends out control cells called Resource Management (RM) cells.
      <br/>
      Switches along the path may indicate congestion by modifying fields in the RM cell.
      <br/>
      The destination is responsible for turning around the RM cells and sending them back to the source which then adjusts its ACR based on the feedback received.
      <br/>
      Some of the fields in the RM cell include the "current cell rate" (CCR), the "congestion indicator" (CI), the "no increase" (NI) indicator and the "explicit rate" (ER) field.
      <br/>
      The CCR field is filled by the source with the ACR and is not modified by any of the network elements along the path or by the destination.
      <br/>
      The CI field is a single bit field used as a congestion indicator.
      <br/>
      In RR marking switches, a congested switch will set this bit in the RM cell.
      <br/>
      In the case of EFCI switches, the switch sets the EFCI bit in the header of data cells.
      <br/>
      The destination is responsible for saving the congestion status and appropriately setting the CI bit in the RM cell before sending it back to the source.
      <br/>
      A source which receives an RM cell with the CI bit set, will reduce its ACR by a predetermined fraction of what it currently holds.
      <br/>
      The field is important for EFCI and RR marking switches only.
      <br/>
      The NI single bit field is used as a no increase indicator.
      <br/>
      A source which receives an RM cell with the NI bit set will simply maintain its current value of ACR.
      <br/>
      The ER field is used by explicit rate switches, which fill this field with the computed estimate of the ACR for the session.
    </p>
    <p num="16">
      The NI/CI fields are interesting to the source if any of the switches along its path are either EFCI or RR marking switches.
      <br/>
      If neither of these bits are set, the source increases its rate by a predetermined fixed quantity.
      <br/>
      Based on the feedback received from the returning RM cells, the source maintains a value of the ACR for the session.
      <br/>
      If the session is to be considered as "conforming", its sending rate must never exceed its ACR.
      <br/>
      The ACR is computed by the source in the case of EFCI and RR marking switches.
      <br/>
      For ER switches, the ACR is simply set to the value contained in the ER field of the returning RM cells.
    </p>
    <p num="17">
      Explicit forward congestion indication (EFCI) is the most basic form of ABR flow control.
      <br/>
      In EFCI, the switches need not be modified at all.
      <br/>
      Only the source and destination need modification.
      <br/>
      The switch does not even recognize RM cells.
      <br/>
      If the switch is congested, it sets a combination of bits in the header of the data cells to indicate congestion.
      <br/>
      The destination must save this congestion information.
      <br/>
      When the next RM cell arrives at the destination, the destination will set the CI bit in the RM cell if the header of the data cells indicated a congested network.
      <br/>
      With the receipt of every RM cell, the source will increase its rate if the CI bit is not set, and will otherwise reduce its rate.
    </p>
    <p num="18">
      FIG. 1 shows the basic operation of an EFCI switch.
      <br/>
      If the buffer 101 occupancy at the switch 103 falls in region R1, no action is taken.
      <br/>
      The CI field in the RM cells will not be modified by the destination, and the source will be allowed to increase its ACR.
      <br/>
      On the other hand, if the buffer 101 occupancy is in region R2, the switch 103 assumes that it is congested and the switch will set the EFCI bits in the header of all data cells.
      <br/>
      One possible arrangement of exemplary pseudocode for marking in EFCI switches is as follows:
    </p>
    <p num="19">
      --
      <br/>
      --      if (buffer occupancy is in region R2) +
      <br/>
      --         Data.EFCI = 1; /* set the EFCI bit in the data cells */
      <br/>
      --      }
    </p>
    <p num="20">
      The destination saves this congestion information and sets the CI bit in the RM cell.
      <br/>
      When the source receives the RM cell, it will reduce its ACR.
    </p>
    <p num="21">
      To support relative rate (RR) marking, a switch must be able to recognize RM cells.
      <br/>
      The switch then has the option of setting the NI bit, the CI bit or neither.
      <br/>
      If the switch can handle more traffic, it will not set any of the bits and the source will increase its rate.
      <br/>
      If the switch is operating at a desired utilization, possibly deduced, for example, from the queue length, it will set NI.
      <br/>
      When a source receives an RM cell with the NI bit set, but with CI equal to zero, it will simply maintain its current value of ACR.
      <br/>
      If the switch is congested, it will set the CI bit and the source will reduce its ACR when it receives the RM cell.
    </p>
    <p num="22">
      FIG. 2 shows the basic operation of an RR marking switch.
      <br/>
      If the buffer 201 occupancy at the switch 203 falls in region R1, neither of the NI or CI bits is set, and the source will be allowed to increase its ACR.
      <br/>
      If the buffer 201 occupancy is in region R2, the switch assumes that it is operating at a desired utilization and the NI bit is set.
      <br/>
      If the buffer 201 occupancy is somewhere in region R3, the switch assumes that it is congested and it sets the CI bit in the RM cells.
      <br/>
      An exemplary pseudocode for the marking is as follows:
    </p>
    <p num="23">if (buffer occupancy is in region R2) + RM.NI=1; /* set the NI bit in the RM cell */ }</p>
    <p num="24">if (buffer occupancy is in region R3) + RM.CI=1; /* set the CI bit in the RM cell */ }</p>
    <p num="25">
      The previous methodologies impose minimal requirements on the switch with the end stations taking appropriate action to act on feedback from the network.
      <br/>
      Explicit rate (ER) methodologies assign the computation effort to the switches.
      <br/>
      Each switch along the path of a session computes an estimate of the allowable rate for the session.
      <br/>
      The minimum of the explicit rate indicated by all switches along the path is returned to the source in the RM cell.
      <br/>
      The source simply sets its allowable rate to the value indicated in the RM cell.
      <br/>
      ER switches are significantly more complex to implement because of the computations that must be performed and the per-session state information that must be maintained by the switch.
      <br/>
      Further, for the scheme to be effective, the switch must be able to make accurate utilization measurements in order to estimate the capacity available for ABR traffic.
      <br/>
      All of these requirements make it difficult to build a competitively priced ER switch for operation in high speed networks.
    </p>
    <p num="26">
      The notion of fairness is very difficult to quantify and may be defined in a number of ways.
      <br/>
      One of the simplest definitions is that which allows any session in the network to use as much resources as any other session; i.e. all sessions must have equal access to the network's resources.
      <br/>
      In the example illustrated in FIG. 3, the "bottleneck" link for sessions 1, 2 and 3 is the first link (between switches 301 and 303).
      <br/>
      Therefore each of the sessions is expected to get a capacity of 1/3 units.
      <br/>
      The second link (between switches 303 and 305) is shared by sessions 1 and 4.
      <br/>
      Of these, the rate for session 1 has been limited to 1/3 units by the first link.
      <br/>
      Thus, there is capacity for 2/3 units available which session 4 should ideally be allowed to use.
      <br/>
      Despite this, a capacity of 1 unit will remain unused on link 3 (between switches 305 and 307) because all the sessions have other bottleneck links which restricts the capacity that they are able to use.
    </p>
    <p num="27">
      The FIG. 3 example illustrates the notion of max-min fairness where the aim is to maximize the minimum capacity allocated to any session so as to improve the network utilization.
      <br/>
      This is achieved in the following manner.
      <br/>
      First, decide which sessions must be limited to low allocation because of bottleneck links along their path.
      <br/>
      After those sessions have been provided the best possible allocation, the focus shifts to maximizing the allocation of the remaining sessions which is again done in a similar manner.
      <br/>
      The procedure continues until all sessions have their best possible allocations.
      <br/>
      It is easy to see that every session must have a bottleneck link when capacities are allocated in this fashion.
    </p>
    <p num="28">
      The reason the "beat down" problem occurs is that a session may be prevented from increasing its rate if any one of the switches along its path is even slightly congested.
      <br/>
      Therefore sessions traversing fewer hops have an unfair advantage over sessions traversing more hops.
      <br/>
      This unfairness, however, may be overcome when it is recognized that the rate for any session must be controlled by only one switch, i.e. the switch at the bottleneck link for that session.
      <br/>
      As hereinbefore noted, in max-min fairness, every session must have a bottleneck link.
      <br/>
      The next concern is finding the bottleneck for a given session.
      <br/>
      To do this, it is assumed that the switch has the ability to estimate the quantity C(ABR) which denotes the availability capacity for all ABR sessions using the given link.
      <br/>
      In the absence of actual measurements, the switch may compute C(ABR)= ETA C-(Reserved), where C is the link capacity,  ETA &lt;=1 is the target link utilization, and C(Reserved) is the capacity reserved for CBR and VBR sessions.
      <br/>
      The number of ABR sessions k using the link is also needed. C(Reserved) and k should be easily obtainable because all sessions, both reserved and unreserved, must go through the call set-up phase.
      <br/>
      The fair share for each session is then roughly estimated as C(Fair)=C(ABR)/k. The NI and CI bits will be set when the switch is congested only for those sessions whose CCR is bigger than C(Fair).
    </p>
    <p num="29">
      FIG. 4 shows the enhanced marking scheme.
      <br/>
      In the FIG. 4 example, there are three thresholds.
      <br/>
      When the buffer 401 occupancy rate is in region R1, the switch 403 is assumed to be underloaded and all sessions are allowed to increase their sending rate.
      <br/>
      When the occupancy is in region R2, the switch 403 is assumed to be operating at desired load.
      <br/>
      In that case, the NI bit is set in the RM cells for all sessions for which CCR&gt;C(Fair).
      <br/>
      When the buffer 401 occupancy falls in the region R3, the switch 403 is assumed to be congested and the CI bit is set for all sessions for which CCR&gt;C(Fair).
      <br/>
      If the buffer 401 occupancy rate is in region R4, the NI and CI bits are set for all sessions irrespective of their CCR.
      <br/>
      This will ensure that losses are prevented and the network is protected if there are high rate sessions, with large propagation delays, and in the event that the computed fair share C(Fair) is inaccurate.
      <br/>
      An exemplary pseudocode listing for the methodology is as follows:
    </p>
    <p num="30">
      --
      <br/>
      --      if (buffer occupancy is in region R4) +
      <br/>
      --      RM.CI = 1; /* set the CI bit in the RM cell */
      <br/>
      --      } else if (RM.CCR &gt; C_Fair) + /*this is a bottleneck link */
      <br/>
      --         if (buffer occupancy is in region R2) +
      <br/>
      --      RM.NI = 1; /* set the NI bit in the RM cell */
      <br/>
      --      }
      <br/>
      --         if (buffer occupancy is in region R3) +
      <br/>
      --      RM.CI = 1; /* set the CI bit in the RM cell */
      <br/>
      --      }
      <br/>
      --      }
    </p>
    <p num="31">
      The method and apparatus of the present invention has been described in connection with a preferred embodiment as disclosed herein.
      <br/>
      Although an embodiment of the present invention has been shown and described in detail herein, along with certain variants thereof, many other varied embodiments that incorporate the teachings of the invention may be easily constructed by those skilled in the art, and even included or integrated into a processor or CPU or other larger system integrated circuit or chip.
      <br/>
      The methodology may also be implemented partially or solely in program code and carried on a medium which may be executed to function as described herein.
      <br/>
      Accordingly, the present invention is not intended to be limited to the specific form set forth herein, but on the contrary, it is intended to cover such alternatives, modifications, and equivalents, as can be reasonably included within the spirit and scope of the invention.
    </p>
  </description>
  <claims format="original" lang="en" id="claim_en">
    <claim num="1">
      <claim-text>What is claimed is:</claim-text>
      <claim-text>1.</claim-text>
      <claim-text>A method for adjusting session cell rates for transfer sessions at which information cells are transferred from node buffers of a node output link in a network, wherein said session cell rates are adjusted in accordance with buffer occupancy levels of said node buffers and first and second traffic congestion indicator fields, said method comprising:</claim-text>
      <claim-text>establishing a critical buffer occupancy level indicative of a high level of buffer occupancy; determining a current buffer occupancy level; setting said first and second traffic congestion indicator fields for all sessions to a first setting indicative of maximum congestion when said current buffer occupancy level exceeds said critical buffer occupancy level; determining a fair share cell rate for the output transmission link, said fair share cell rate being related to a number of sessions being transferred by said output transmission link; determining a current cell rate at which information cells are being transferred;</claim-text>
      <claim-text>and setting said first and second congestion indicator fields in accordance with a buffer occupancy threshold schedule if said current buffer occupancy level is less than said critical buffer occupancy level.</claim-text>
    </claim>
    <claim num="2">
      <claim-text>2. The method as set forth in claim 1 wherein said occupancy threshold schedule comprises a series of buffer occupancy threshold values with corresponding settings for said first and second traffic congestion indicator fields.</claim-text>
    </claim>
    <claim num="3">
      <claim-text>3. The method as set forth in claim 2 wherein said series of buffer occupancy threshold values define first, second and third ranges of buffer occupancy, said first, second and third ranges being below said critical buffer occupancy level.</claim-text>
    </claim>
    <claim num="4">
      <claim-text>4. The method as set forth in claim 3 wherein if said current buffer occupancy level falls within said first range, all of said transfer sessions are enabled to increase session cell rates.</claim-text>
    </claim>
    <claim num="5">
      <claim-text>5. The method as set forth in claim 4 wherein if said current buffer occupancy level falls within said second range, transfer sessions having current cell rates greater than said fair share cell rate are precluded from increasing session cell rates.</claim-text>
    </claim>
    <claim num="6">
      <claim-text>6. The method as set forth in claim 5 wherein if said current buffer occupancy level falls within said third range, all transfer sessions are precluded from increasing session cell rates.</claim-text>
    </claim>
    <claim num="7">
      <claim-text>7. A network configuration comprising: a plurality of nodes connected together in a network arrangement, each of said nodes being coupled to an output transmission link for transmitting a plurality of transfer sessions from node buffers at said nodes; means connected at said nodes for adjusting session cell rates at which information cells are transferred from node buffers of said output transmission links, whereby said session cell rates are adjusted in accordance with buffer occupancy levels of said node buffers and first and second traffic congestion indicator fields; means for establishing a critical buffer occupancy level indicative of a high level of buffer occupancy; means for determining a current buffer occupancy level; means for setting said first and second traffic congestion indicator fields for all sessions to a first setting indicative of maximum congestion when said buffer occupancy level exceeds said critical buffer occupancy level; means arranged at said nodes for determining a fair share cell rate for the output transmission links, said fair share cell rate being related to a number of sessions being transferred by said output transmission link; means for determining a current cell rate at which information cells are being transferred;</claim-text>
      <claim-text>and setting said first and second congestion indicator fields in accordance with a buffer occupancy threshold schedule if said current buffer occupancy level is less than said first buffer occupancy level.</claim-text>
    </claim>
    <claim num="8">
      <claim-text>8. The network configuration as set forth in claim 7 wherein said occupancy threshold schedule comprises a series of buffer occupancy threshold values with corresponding settings for said first and second traffic congestion indicator fields.</claim-text>
    </claim>
    <claim num="9">
      <claim-text>9. The network configuration as set forth in claim 8 wherein said series of buffer occupancy threshold values define first, second and third ranges of buffer occupancy, said first, second and third ranges being below said critical buffer occupancy level.</claim-text>
    </claim>
    <claim num="10">
      <claim-text>10. The network configuration as set forth in claim 9 wherein if said current buffer occupancy level falls within said first range, all of said transfer sessions are enabled to increase session cell rates.</claim-text>
    </claim>
    <claim num="11">
      <claim-text>11. The network configuration as set forth in claim 10 wherein if said current buffer occupancy level falls within said second range, transfer sessions having current cell rates greater than said fair share cell rate are precluded from increasing session cell rates.</claim-text>
    </claim>
    <claim num="12">
      <claim-text>12. The network configuration as set forth in claim 11 wherein if said current buffer occupancy level falls within said third range, all transfer sessions are precluded from increasing session cell rates.</claim-text>
    </claim>
  </claims>
</questel-patent-document>