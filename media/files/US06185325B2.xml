<?xml version="1.0" encoding="UTF-8"?>
<questel-patent-document lang="en" date-produced="20180805" produced-by="Questel" schema-version="3.23" file="US06185325B2.xml">
  <bibliographic-data lang="en">
    <publication-reference publ-desc="Granted patent as second publication">
      <document-id>
        <country>US</country>
        <doc-number>06185325</doc-number>
        <kind>B2</kind>
        <date>20010206</date>
      </document-id>
      <document-id data-format="questel">
        <doc-number>US6185325</doc-number>
      </document-id>
    </publication-reference>
    <original-publication-kind>B2</original-publication-kind>
    <application-reference is-representative="YES" family-id="27324322" extended-family-id="14420774">
      <document-id>
        <country>US</country>
        <doc-number>09207401</doc-number>
        <kind>A</kind>
        <date>19981208</date>
      </document-id>
      <document-id data-format="questel">
        <doc-number>1998US-09207401</doc-number>
      </document-id>
      <document-id data-format="questel_Uid">
        <doc-number>43171511</doc-number>
      </document-id>
    </application-reference>
    <language-of-filing>en</language-of-filing>
    <language-of-publication>en</language-of-publication>
    <priority-claims>
      <priority-claim kind="national" sequence="1">
        <country>US</country>
        <doc-number>20740198</doc-number>
        <kind>A</kind>
        <date>19981208</date>
        <priority-active-indicator>Y</priority-active-indicator>
      </priority-claim>
      <priority-claim data-format="questel" sequence="1">
        <doc-number>1998US-09207401</doc-number>
      </priority-claim>
      <priority-claim kind="national" sequence="2">
        <country>JP</country>
        <doc-number>17680997</doc-number>
        <kind>A</kind>
        <date>19970702</date>
        <priority-active-indicator>Y</priority-active-indicator>
      </priority-claim>
      <priority-claim data-format="questel" sequence="2">
        <doc-number>1997JP-0176809</doc-number>
      </priority-claim>
      <priority-claim kind="national" sequence="3">
        <country>JP</country>
        <doc-number>25545298</doc-number>
        <kind>A</kind>
        <date>19980909</date>
        <priority-active-indicator>Y</priority-active-indicator>
      </priority-claim>
      <priority-claim data-format="questel" sequence="3">
        <doc-number>1998JP-0255452</doc-number>
      </priority-claim>
      <priority-claim kind="national" sequence="4">
        <country>US</country>
        <doc-number>10820098</doc-number>
        <kind>A</kind>
        <date>19980701</date>
        <priority-linkage-type>2</priority-linkage-type>
        <priority-active-indicator>N</priority-active-indicator>
      </priority-claim>
      <priority-claim data-format="questel" sequence="4">
        <doc-number>1998US-09108200</doc-number>
      </priority-claim>
    </priority-claims>
    <dates-of-public-availability>
      <publication-of-grant-date>
        <date>20010206</date>
      </publication-of-grant-date>
    </dates-of-public-availability>
    <classifications-ipcr>
      <classification-ipcr sequence="1">
        <text>G06T  11/00        20060101A I20051008RMEP</text>
        <ipc-version-indicator>
          <date>20060101</date>
        </ipc-version-indicator>
        <classification-level>A</classification-level>
        <section>G</section>
        <class>06</class>
        <subclass>T</subclass>
        <main-group>11</main-group>
        <subgroup>00</subgroup>
        <classification-value>I</classification-value>
        <generating-office>
          <country>EP</country>
        </generating-office>
        <classification-status>R</classification-status>
        <classification-data-source>M</classification-data-source>
        <action-date>
          <date>20051008</date>
        </action-date>
      </classification-ipcr>
    </classifications-ipcr>
    <classification-national>
      <country>US</country>
      <main-classification>
        <text>382162000</text>
        <class>382</class>
        <subclass>162000</subclass>
      </main-classification>
      <further-classification sequence="1">
        <text>345589000</text>
        <class>345</class>
        <subclass>589000</subclass>
      </further-classification>
      <further-classification sequence="2">
        <text>358523000</text>
        <class>358</class>
        <subclass>523000</subclass>
      </further-classification>
      <further-classification sequence="3">
        <text>382167000</text>
        <class>382</class>
        <subclass>167000</subclass>
      </further-classification>
    </classification-national>
    <classifications-ecla>
      <classification-ecla sequence="1">
        <text>G06T-011/00C</text>
        <section>G</section>
        <class>06</class>
        <subclass>T</subclass>
        <main-group>011</main-group>
        <subgroup>00C</subgroup>
      </classification-ecla>
    </classifications-ecla>
    <patent-classifications>
      <patent-classification sequence="1">
        <classification-scheme office="EP" scheme="CPC">
          <date>20130101</date>
        </classification-scheme>
        <classification-symbol>G06T-011/001</classification-symbol>
        <section>G</section>
        <class>06</class>
        <subclass>T</subclass>
        <main-group>11</main-group>
        <subgroup>001</subgroup>
        <symbol-position>F</symbol-position>
        <classification-value>I</classification-value>
        <classification-status>B</classification-status>
        <classification-data-source>H</classification-data-source>
        <action-date>
          <date>20130101</date>
        </action-date>
      </patent-classification>
    </patent-classifications>
    <number-of-claims>6</number-of-claims>
    <exemplary-claim>1</exemplary-claim>
    <figures>
      <number-of-drawing-sheets>4</number-of-drawing-sheets>
      <number-of-figures>4</number-of-figures>
      <image-key data-format="questel">US6185325</image-key>
    </figures>
    <invention-title format="original" lang="en" id="title_en">Image transforming method and apparatus</invention-title>
    <references-cited>
      <citation srep-phase="examiner">
        <patcit num="1">
          <text>ELDRIDGE GEORGE L</text>
          <document-id>
            <country>US</country>
            <doc-number>5613018</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5613018</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="examiner">
        <patcit num="2">
          <text>TAKAICHI TOSHIO, et al</text>
          <document-id>
            <country>US</country>
            <doc-number>5787192</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5787192</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="examiner">
        <patcit num="3">
          <text>BARRY ROBERT L, et al</text>
          <document-id>
            <country>US</country>
            <doc-number>5825785</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US5825785</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="examiner">
        <patcit num="4">
          <text>KAJIWARA HIROSHI, et al</text>
          <document-id>
            <country>US</country>
            <doc-number>6061474</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US6061474</doc-number>
          </document-id>
        </patcit>
      </citation>
      <citation srep-phase="examiner">
        <patcit num="5">
          <text>HARA SHOJI</text>
          <document-id>
            <country>US</country>
            <doc-number>6094503</doc-number>
            <kind>A</kind>
          </document-id>
          <document-id data-format="questel">
            <doc-number>US6094503</doc-number>
          </document-id>
        </patcit>
      </citation>
    </references-cited>
    <related-documents>
      <continuation-in-part>
        <relation>
          <parent-doc>
            <document-id>
              <country>US</country>
              <doc-number>10820098</doc-number>
              <kind>A</kind>
              <date>19980701</date>
            </document-id>
          </parent-doc>
        </relation>
      </continuation-in-part>
    </related-documents>
    <parties>
      <applicants>
        <applicant data-format="original" app-type="applicant" sequence="1">
          <addressbook lang="en">
            <orgname>Fuji Photo Film Co., Ltd.</orgname>
            <address>
              <address-1>Kanagawa-ken, JP</address-1>
              <city>Kanagawa-ken</city>
              <country>JP</country>
            </address>
          </addressbook>
          <nationality>
            <country>JP</country>
          </nationality>
        </applicant>
        <applicant data-format="questel" app-type="applicant" sequence="2">
          <addressbook lang="en">
            <orgname>FUJIFILM</orgname>
          </addressbook>
          <nationality>
            <country>JP</country>
          </nationality>
        </applicant>
      </applicants>
      <inventors>
        <inventor data-format="original" sequence="1">
          <addressbook lang="en">
            <name>Sakaida, Hideyuki</name>
            <address>
              <address-1>Kanagawa-ken, JP</address-1>
              <city>Kanagawa-ken</city>
              <country>JP</country>
            </address>
          </addressbook>
          <nationality>
            <country>JP</country>
          </nationality>
        </inventor>
        <inventor data-format="original" sequence="2">
          <addressbook lang="en">
            <name>Hara, Shoji</name>
            <address>
              <address-1>Kanagawa-ken, JP</address-1>
              <city>Kanagawa-ken</city>
              <country>JP</country>
            </address>
          </addressbook>
          <nationality>
            <country>JP</country>
          </nationality>
        </inventor>
      </inventors>
    </parties>
    <examiners>
      <primary-examiner>
        <name>Au, Amelia</name>
      </primary-examiner>
    </examiners>
    <lgst-data>
      <lgst-status>GRANTED</lgst-status>
    </lgst-data>
  </bibliographic-data>
  <abstract format="original" lang="en" id="abstr_en">
    <p id="P-EN-00001" num="00001">
      <br/>
      A color space is divided into blocks in units of a block having a predetermined size, and transformed values of coordinates of vertexes of each block are calculated and recorded in a transformed value table.
      <br/>
      In cases where a block having a size different from the predetermined size is contained in the blocks, the block having the different size is replaced by a virtual block, which has a size identical with the predetermined size, and transformed values of coordinates of vertexes of the virtual block are calculated and recorded in a virtual transformed value table.
      <br/>
      In a factor table, vertexes, which have weight factors other than 0, and the weight factors of these vertexes are recorded with respect to each of positions in a block.
      <br/>
      A transformed value of a picture element value of each of picture elements, which constitute a color image, is calculated in accordance with the transformed values, which have been recorded in the transformed value table or the virtual transformed value table, and the vertexes and their weight factors recorded in the factor table.
    </p>
  </abstract>
  <description format="original" lang="en" id="desc_en">
    <p num="1">
      This is a Continuation-in-part of application Ser.
      <br/>
      No. 09/108,200, filed Jul. 1, 1998.
    </p>
    <heading>BACKGROUND OF THE INVENTION</heading>
    <p num="2">
      1.
      <br/>
      Field of the Invention
    </p>
    <p num="3">
      This invention relates to a method and apparatus for transforming a color image.
      <br/>
      This invention particularly relates to an image transforming method and apparatus, wherein transformed values are calculated previously by carrying out operations with respect to a limited number of values (colors), and a transformed value corresponding to an arbitrary picture element value is calculated by carrying out an interpolating operation on the previously calculated transformed values.
      <br/>
      This invention also relates to a recording medium, on which the information representing a procedure for image transformation has been recorded.
    </p>
    <p num="4">2. Description of the Prior Art</p>
    <p num="5">
      Color transformation has heretofore been carried out as one kind of digital image processing.
      <br/>
      For example, in the cases of digital processing of color photographs, if a digital image having been processed for the formation of a print is displayed directly on a monitor, the displayed image will not necessarily look in appropriate colors.
      <br/>
      Therefore, it is desired that color transformation with a predetermined transformation formula is carried out on the digital image, and thereafter the image obtained from the color transformation is displayed on the monitor.
    </p>
    <p num="6">
      In the color transformation of a color image, the picture element value of each picture element may be transformed literally by carrying out an operation with a transformation formula.
      <br/>
      However, such a technique has the problems in that, in cases where the relation formula is a complicated one, the time required to carry out the operation cannot be kept short.
      <br/>
      Therefore, ordinarily, in systems in which the processing should be carried out quickly as in digital processing of photographs, a technique referred to as the direct mapping process is employed.
    </p>
    <p num="7">
      In the direct mapping process, transformed values are calculated previously by carrying out accurate operations with respect to a limited number of colors, and the information representing the calculated transformed values is stored in a memory.
      <br/>
      When an actually inputted value is to be transformed, instead of the accurately operation being carried out, an interpolating operation is carried out by using the previously calculated transformed values, and a transformed value corresponding to the actually inputted value is thereby presumed.
      <br/>
      Specifically, a multi-dimensional color space is divided into a plurality of blocks, and transformed values are calculated previously by carrying out accurate operations with transformation formulas with respect to coordinates of vertexes of each block.
      <br/>
      Thereafter, a transformed value corresponding to an arbitrary point is interpolated from the transformed values of the coordinates of the vertexes.
    </p>
    <p num="8">
      When the interpolating operation is to be carried out, eight vertexes surrounding the inputted picture element value are specified, and the information representing the transformed values of the coordinates of the eight vertexes is read from the memory.
      <br/>
      The eight vertexes are weighted in accordance with the position of the picture element value in the block.
      <br/>
      Factors, which represent the weights of the respective vertexes, and the corresponding transformed values, which have been read from the memory, are multiplied by each other, and the thus obtained products are added together.
      <br/>
      In this manner, the interpolated value is obtained.
      <br/>
      The interpolating operation is constituted of the simple operations, i.e. the multiplications and the additions.
      <br/>
      Accordingly, with the interpolating operation, the processing can be carried out more quickly than with the technique in which the operation with a transformation formula is carried out.
    </p>
    <p num="9">
      In the technique described above, eight times of multiplications and seven times of additions (i.e., the adding of eight values) are necessarily carried out for one time of interpolating operation.
      <br/>
      However, in cases where the inputted picture element value is the one located at a point on a surface or a line of the block, the weight factors of the vertexes other than the vertexes, which constitute the surface or the line of the block, become 0.
      <br/>
      Therefore, in such cases, actually, it is unnecessary for the multiplications to be carried out with respect to the weight factors of the vertexes other than the vertexes constituting the surface or the line of the block.
    </p>
    <p num="10">
      Also, in the technique described above, the weight factors are calculated each time a picture element value is inputted.
      <br/>
      However, actually, in cases where the relative position in a block is the same, the weight factors of the vertexes do not vary.
      <br/>
      Therefore, the technique described above has the drawbacks in that the weight factors are calculated many times with respect to the same pattern.
    </p>
    <heading>SUMMARY OF THE INVENTION</heading>
    <p num="11">The primary object of the present invention is to provide an image transforming method, wherein useless processing in a direct mapping technique is eliminated, and image transformation processing is carried out quickly such that no error may occur.</p>
    <p num="12">Another object of the present invention is to provide an apparatus for carrying out the image transforming method.</p>
    <p num="13">A further object of the present invention is to provide a recording medium, on which the information representing a procedure for image transformation has been recorded.</p>
    <p num="14">The present invention provides an image transforming method, in which a first picture element value of each of picture elements constituting a color image is replaced by a second picture element value that is set to have correspondence to the first picture element value by a predetermined transformation formula, the method comprising:</p>
    <p num="15">
      dividing a multi-dimensional color space into a plurality of blocks in units of a block having a predetermined size,
      <br/>
      carrying out an operation with the transformation formula with respect to coordinates of each of vertexes of each block, transformed values of the coordinates of vertexes of each block being thereby calculated previously, and
      <br/>
      carrying out an interpolating operation with respect to the first picture element value and in accordance with weight factors of the vertexes, which weight factors are determined in accordance with a position of the first picture element value in a block, and the transformed values of the coordinates of the vertexes of the block, which contains the first picture element value, the second picture element value being thereby calculated,
      <br/>
      wherein the improvement comprises the steps of:
    </p>
    <p num="16">
      - i) in cases where a block having a size different from the predetermined size is contained in the plurality of the blocks, replacing the block having the different size by a virtual block, which has a size identical with the predetermined size, transformed values of coordinates of vertexes of the virtual block being then calculated from the transformed values of the coordinates of the vertexes of the block having the different size,
      <br/>
      - ii) previously storing information, which represents a transformed value table, and information, which represents a factor table, in a memory, the transformed value table recording the transformed values of the coordinates of the vertexes with respect to each of the blocks, including the virtual block, the factor table recording vertexes, which have weight factors other than 0, and the weight factors of the vertexes, which have weight factors other than 0, with respect to each of positions in a block, and
      <br/>
      - iii) carrying out the interpolating operation by utilizing only the vertexes, which have weight factors other than 0, and in accordance with the transformed values, which have been recorded in the transformed value table, and the vertexes and their weight factors, which have been recorded in the factor table.
    </p>
    <p num="17">
      In the image transforming method in accordance with the present invention, the picture element value is the one represented by (R, G, B).
      <br/>
      Also, the multi-dimensional color space is the coordinate space, which have R, G, and B axes and visually represents the picture element value (color) as a coordinate point.
    </p>
    <p num="18">
      As for the weight factor, for example, in cases where a certain picture element value is located at the middle point between a vertex "a" and a vertex "b," the weight factor of the vertex "a" is 1/2, and the weight factor of the vertex "a" is 1/2.
      <br/>
      In cases where a certain picture element value is located at a point dividing the line, which connects the vertex "a" and the vertex "b," in a ratio of 1:2 (at a point closer to the vertex "a"), the weight factor of the vertex "a" is 1/3, and the weight factor of the vertex "b" is 1/3.
      <br/>
      Specifically, the weight factor is determined in accordance with the relationship between the position of the picture element value and the positions of the vertexes, i.e. the position of the picture element value in the block, regardless of the coordinate values of the vertexes.
      <br/>
      Therefore, in cases where the sizes of the blocks are identical with one another, with respect to only one block, the weight factors may be calculated with respect to every point, which is contained in the block.
      <br/>
      In such cases, the calculated weight factors can be applied also to picture element values located in the other blocks.
    </p>
    <p num="19">
      As a result of the division of the multi-dimensional color space into the plurality of blocks in units of the block having the predetermined size, the block having a size different from the predetermined size may occur.
      <br/>
      In such cases, the block having the different size is replaced by the virtual block, which has a size identical with the predetermined size, and the transformed values of the coordinates of the vertexes of the virtual block are calculated from the transformed values of the coordinates of the vertexes of the block having the different size.
      <br/>
      In this manner, as for the block having the different size, the transformation can be carried out in the same manner as that for the transformation with respect to the block having the predetermined size.
      <br/>
      Therefore, useless processing in the direct mapping technique can be eliminated.
      <br/>
      Also, the image transformation processing can be carried out quickly and such that no error may occur.
    </p>
    <p num="20">The term "in a block" as used herein embraces the boundary lines, boundary surfaces, and vertexes of the block.</p>
    <p num="21">Therefore, for example, in cases where the block is a cube having a size of 8 picture elements * 8 picture elements * 8 picture elements, the factor table recording vertexes, which have weight factors other than 0, and the weight factors of the vertexes, which have weight factors other than 0, with respect to each of positions in a block is composed of 512 pieces of data.</p>
    <p num="22">
      No limitation is imposed upon the size of the block.
      <br/>
      If the block size is set to be large, the number of points in the block will become large, and therefore the factor table will become large.
      <br/>
      If the block size is set to be small, the number of vertexes will become large, and therefore the amount of operations, which are carried out previously in order to calculate transformed values,will become large.
      <br/>
      Therefore, an appropriate block size may be selected by considering the memory capacity and the amount of operations.
    </p>
    <p num="23">
      In order for the vertexes, which have weight factors other than 0, to be recorded in the factor table, names according to relative positions of the vertexes may be given to the vertexes.
      <br/>
      For example, a name "a" may be given to the vertex, which is closest to the origin of the color space.
      <br/>
      The names of the vertexes may be recorded in the factor table.
      <br/>
      Alternatively, each of the vertexes may be represented by unit coordinates with the length of one side of the block being taken as 1, and the vertexes may be recorded as (0, 0, 0), (1, 0, 0), (0, 1, 0), and so on.
    </p>
    <p num="24">
      Further, a vertex data sequence, which is formed by arraying the vertexes of a single block in the adjoining order, may be stored in the memory, and
      <br/>
      each of the vertexes, which have weight factors other than 0, may be represented by the number of the vertexes and a pointer indicating a portion in the vertex data sequence, at which the vertexes are arrayed consecutively.
    </p>
    <p num="25">
      The present invention also provides an image transforming apparatus, in which a first picture element value of each of picture elements constituting a color image is replaced by a second picture element value that is set to have correspondence to the first picture element value by a predetermined transformation formula, the apparatus comprising:
      <br/>
      a transformation means for obtaining information representing coordinates of vertexes of a plurality of blocks, into which a multi-dimensional color space has been divided in units of a block having a predetermined size, carrying out an operation with the transformation formula with respect to the coordinates of each of the vertexes of each block, and thereby calculating transformed values of the coordinates of vertexes of each block,
      <br/>
      a storage means for storing information representing the transformed values having been calculated by the transformation means, and
      <br/>
      an interpolating operation means for carrying out an interpolating operation with respect to the first picture element value and in accordance with weight factors of the vertexes, which weight factors are determined in accordance with a position of the first picture element value in a block, and the transformed values of the coordinates of the vertexes of the block, which contains the first picture element value, and thereby calculating the second picture element value,
      <br/>
      wherein the apparatus further comprises a generation means operating such that, in cases where a block having a size different from the predetermined size is contained in the plurality of the blocks, the generation means may replace the block having the different size by a virtual block, which has a size identical with the predetermined size, and the generation means may then generate transformed values of coordinates of vertexes of the virtual block from the transformed values of the coordinates of the vertexes of the block having the different size,
      <br/>
      the storage means stores information, which represents a transformed value table, and information, which represents a factor table, the transformed value table recording the transformed values of the coordinates of the vertexes with respect to each of the blocks, including the virtual block, the factor table recording vertexes, which have weight factors other than 0, and the weight factors of the vertexes, which have weight factors other than 0, with respect to each of positions in a block, and
      <br/>
      the interpolating operation means carries out the interpolating operation by utilizing only the vertexes, which have weight factors other than 0, and in accordance with the transformed values, which have been recorded in the transformed value table stored in the storage means, and the vertexes and their weight factors, which have been recorded in the factor table stored in the storage means.
    </p>
    <p num="26">
      In the image transforming apparatus in accordance with the present invention, the storage means may further store information representing a vertex data sequence, which is formed by arraying the vertexes of a single block in the adjoining order, and
      <br/>
      may store the information representing each of the vertexes, which have weight factors other than 0, as a combination of the number of the vertexes and a pointer indicating a portion in the vertex data sequence, at which the vertexes are arrayed consecutively.
    </p>
    <p num="27">
      The present invention further provides a recording medium, on which a program for causing a computer to execute image transformation processing has been recorded, the image transformation processing being carried out for replacing a first picture element value of each of picture elements, which constitute a color image, by a second picture element value that is set to have correspondence to the first picture element value by a predetermined transformation formula, the image transformation processing comprising:
      <br/>
      a first step for dividing a multi-dimensional color space into a plurality of blocks in units of a block having a predetermined size, carrying out an operation with the transformation formula with respect to coordinates of each of vertexes of each block, and thereby calculating transformed values of the coordinates of vertexes of each block, and
      <br/>
      a second step for carrying out an interpolating operation with respect to the first picture element value and in accordance with weight factors of the vertexes, which weight factors are determined in accordance with a position of the first picture element value in a block, and the transformed values of the coordinates of the vertexes of the block, which contains the first picture element value, and thereby calculating the second picture element value,
      <br/>
      the first picture element value being replaced by the second picture element value, image transformation being thereby carried out,
      <br/>
      wherein the improvement comprises:
      <br/>
      - i) in the first step, in cases where a block having a size different from the predetermined size is contained in the plurality of the blocks, replacing the block having the different size by a virtual block, which has a size identical with the predetermined size, transformed values of coordinates of vertexes of the virtual block being then calculated from the transformed values of the coordinates of the vertexes of the block having the different size,
      <br/>
      - ii) previously storing information, which represents a transformed value table, and information, which represents a factor table, in a memory, the transformed value table recording the transformed values of the coordinates of the vertexes with respect to each of the blocks, including the virtual block, the factor table recording vertexes, which have weight factors other than 0, and the weight factors of the vertexes, which have weight factors other than 0, with respect to each of positions in a block, and
      <br/>
      - iii) in the second step, carrying out the interpolating operation by utilizing only the vertexes, which have weight factors other than 0, and in accordance with the transformed values, which have been recorded in the transformed value table, and the vertexes and their weight factors, which have been recorded in the factor table.
    </p>
    <p num="28">
      With the image transforming method, the image transforming apparatus, and the recording medium, on which the information representing a procedure for image transformation has been recorded, in accordance with the present invention, the interpolating operation is carried out by making reference to the transformed value table, which records the transformed values of the coordinates of the vertexes necessary for the interpolating operation, and the factor table, which records the weight factors of the vertexes.
      <br/>
      Therefore, unnecessary operations with respect to vertexes, which have a weight factor of 0, need not be repeated.
      <br/>
      Also, the calculations of the weight factors need not be carried out each time a picture element value is inputted.
      <br/>
      As a result, the processing can be carried out quickly.
      <br/>
      In such cases, the operation processing carried out is only the product sum operation.
      <br/>
      Therefore, the image transforming method, the image transforming apparatus, and the recording medium, on which the information representing a procedure for image transformation has been recorded, in accordance with the present invention are also suitable for pipeline processing.
    </p>
    <p num="29">
      Further, when the transformed values of the coordinates of the vertexes necessary for the interpolating operation are calculated, the multi-dimensional color space is divided into the plurality of the blocks in units of a block having a predetermined size.
      <br/>
      In cases where a block having a size different from the predetermined size is contained in the plurality of the blocks, the block having the different size is replaced by the virtual block, which has a size identical with the predetermined size, and the transformed values of the coordinates of the vertexes of the virtual block are then calculated from the transformed values of the coordinates of the vertexes of the block having the different size.
      <br/>
      The image transformation can thereby be carried out.
      <br/>
      Therefore, transformation errors can be prevented from occurring in the image transformation.
    </p>
    <p num="30">As described above, with the image transforming method, the image transforming apparatus, and the recording medium, on which the information representing a procedure for image transformation has been recorded, in accordance with the present invention, useless processing in the direct mapping technique can be eliminated, and the image transformation processing can be carried out quickly such that no error may occur.</p>
    <heading>BRIEF DESCRIPTION OF THE DRAWINGS</heading>
    <p num="31">
      FIG. 1 is an explanatory view showing an embodiment of the image transforming method in accordance with the present invention,
      <br/>
      FIG. 2 is a block diagram showing an embodiment of the image transforming apparatus in accordance with the present invention,
      <br/>
      FIG. 3 is an explanatory view showing a virtual block, which is formed for generation of virtual transformed values in the embodiment of the image transforming method in accordance with the present invention, and
      <br/>
      FIG. 4 is an explanatory view showing a position of a color space, for which virtual transformation is necessary in the embodiment of the image transforming method in accordance with the present invention.
    </p>
    <heading>DESCRIPTION OF THE PREFERRED EMBODIMENTS</heading>
    <p num="32">
      The present invention will hereinbelow be described in further detail with reference to the accompanying drawing.
      <br/>
      FIG. 1 is an explanatory view showing an embodiment of the image transforming method in accordance with the present invention.
      <br/>
      FIG. 2 is a block diagram showing an embodiment of the image transforming apparatus in accordance with the present invention, in which the image transformation is carried out with the embodiment of the image transforming method in accordance with the present invention.
    </p>
    <p num="33">
      As illustrated in FIG. 1, in the embodiment of the image transforming method in accordance with the present invention, a transformed value table 4, virtual transformed value table 6, and a factor table 7 are prepared previously.
      <br/>
      When an image signal representing a color image 9 is inputted, an interpolating operation is carried out by making reference to the values having been recorded in the transformed value table 4, the virtual transformed value table 6, and the factor table 7.
      <br/>
      A transformed image 10 is thereby formed.
      <br/>
      As illustrated in FIG. 2, an embodiment of the image transforming apparatus in accordance with the present invention, in which the image transformation is carried out with the embodiment of the image transforming method in accordance with the present invention, comprises an image input section 12, a transformation means 3, a generation means 5, a storage means 14, an interpolating operation means 8, and an transformed image output section 16.
    </p>
    <p num="34">
      Firstly, how the transformed value table 4, which records information representing transformed values having been calculated by the transformation means 3, is prepared and the contents recorded therein will be described hereinbelow.
      <br/>
      A color space 1 is a three-dimensional coordinate space having R, G, and B axes.
      <br/>
      Each of coordinate points in the color space 1 represents one color.
      <br/>
      In the cases of a full color image, each of the R, G, and B takes values of 0 to 255.
      <br/>
      Therefore, 2563 (=16,777,216) points representing the colors are present in the color space 1.
      <br/>
      In this embodiment, the color space 1 is divided into blocks 2, 2, . . . each having a size of 8 * 8 * 8, and accurate operations with transformation formulas are carried out by a transformation means 3 with respect to only the coordinates of vertexes of the blocks 2, 2, . . . At this time, the number of the vertexes is (256/8)3 =32,768.
      <br/>
      Since the number of points subjected to the accurate operations is thus comparatively small, even if the transformation formulas are comparatively complicated ones, the operations can be carried out quickly with a computer.
    </p>
    <p num="35">
      The thus obtained transformed values of the coordinates of the vertexes of each block are described as a single piece of data in the transformed value table 4.
      <br/>
      Specifically, as shown in Table 1 below, each piece of data in the transformed value table is composed of nine elements, i.e. block No. for specifying a block and eight transformed values (RGB coordinate values).
      <br/>
      For example, since vertexes of adjacent blocks have the same coordinates, the same transformed value is stored repeatedly as the elements of a plurality of pieces of data.
      <br/>
      However, the image transforming method in accordance with the present invention is the one which gives priority to the quick processing over the memory use efficiency.
      <br/>
      Therefore, the data structure described above is employed by considering the efficiency, with which the table is referred to.
    </p>
    <p num="36">
      -- TABLE 1
      <br/>
      -- Transformed value table
      <br/>
      --         TRANS-        TRANS-                TRANS-
      <br/>
      --         FORMED        FORMED                FORMED
      <br/>
      -- BLOCK   VALUE 1       VALUE 2          ...  VALUE 8
      <br/>
      -- 0       R0-1 G0-1 B0-1  R0-2 G0-2 B0-2  ...
      <br/>
      --  R0-8 G0-8 B0-8
      <br/>
      -- 1       R1-1 G1-1 B1-1  R1-2 G1-2 B1-2  ...
      <br/>
      --  R1-8 G1-8 B1-8
      <br/>
      -- 2       R2-1 G2-1 B2-1  R2-2 G2-2 B2-2  ...
      <br/>
      --  R2-8 G2-8 B2-8
      <br/>
      -- :       :             :                     :
      <br/>
      -- 32767   R32767-1  R32767-2 G32767-2  ...  R32767-8
      <br/>
      --  G32767-8
      <br/>
      --         G32767-1  B32767-2         B32767-8
      <br/>
      --         B2-1
    </p>
    <p num="37">
      How the factor table 7, which is to be stored previously in the storage means 14, is prepared and the contents recorded therein will be described hereinbelow.
      <br/>
      As described above, in this embodiment, one block has the size of 8 * 8 * 8, and therefore 512 coordinate points (colors) are present in the block (containing the boundary).
      <br/>
      The transformed value of each color is calculated by carrying out an interpolating operation by using the transformed values of the coordinates of the vertexes.
      <br/>
      With the conventional direct mapping technique, weight factors necessary for the interpolating operation have been calculated each time the interpolating operation is carried out.
      <br/>
      On the other hand, with the image transforming method in accordance with the present invention, the weight factors are recorded previously in the factor table 7.
      <br/>
      Specifically, instead of the weight factors for all of the vertexes being recorded, only the weight factors used for the interpolating operation are recorded in the factor table 7.
      <br/>
      Also, since the weight factors are determined by a position in the block, pieces of data in a number equal to the number of the coordinate points contained in one block (512 pieces) may be stored.
      <br/>
      Table 2 below shows an example of the factor table 7.
    </p>
    <p num="38">
      -- TABLE 2
      <br/>
      -- Factor table
      <br/>
      --           NUMBER    START
      <br/>
      -- PAT-      OF VER-   POSI-   FACTOR    FACTOR         FACTOR
      <br/>
      -- TERN      TEXES     TION    1         2         . . . 8
      <br/>
      -- 0         1         8       1         --   -- --
      <br/>
      -- 1         2         1       1/8  7/8  -- --
      <br/>
      -- 2         2         1       1/4  3/4  --
      <br/>
      -- :         :         :       :         :              :
      <br/>
      -- 5 1 1     :         :       :         :              :
    </p>
    <p num="39">
      --
      <br/>
      -- VERTEX DATA SEQUENCE
      <br/>
      -- 1 (1, 0, 0)
      <br/>
      -- 2 (0, 0, 0)
      <br/>
      -- 3 (0, 0, 1)
      <br/>
      -- 4 (1, 0, 1)
      <br/>
      -- 5 (1, 0, 0)
      <br/>
      -- 6 (1, 1, 0)
      <br/>
      -- 7 (0, 1, 0)
      <br/>
      -- 8 (0, 0, 0)
      <br/>
      -- 9 (0, 0, 1)
      <br/>
      -- 10 (0, 1, 1)
      <br/>
      -- 11 (1, 1, 1)
    </p>
    <p num="40">
      In Table 2, the term "pattern" represents the number for the identification of a position in the block.
      <br/>
      The term "number of vertexes" used in Table 2 represents the number of the vertexes, which are used for the interpolating operation.
      <br/>
      For example, in cases where the picture element value is the one corresponding to the coordinates of a vertex, the operation can be carried out by using only the values of the single vertex.
      <br/>
      In cases where the picture element value is the one located at a point on a boundary line of the block, the interpolating operation can be carried out by using only the transformed values of the coordinates of two vertexes.
      <br/>
      Also, in cases where the picture element value is the one located at a point on a boundary surface of the block, the interpolating operation can be carried out by using only the transformed values of the coordinates of four vertexes.
      <br/>
      If the number of the vertexes, which are necessary for the interpolating operation, is known previously, the processing can be finished at the time at which the same number of times of operations as the number of the vertexes necessary for the interpolating operation have been carried out.
      <br/>
      Therefore, useless processing, such as that the transformed values of the coordinates of vertexes are multiplied by a weight factor of 0, can be eliminated.
    </p>
    <p num="41">
      In cases where the number of the vertexes, which are necessary for the interpolating operation, is smaller than eight, which vertexes are to be used for the interpolating operation must be specified in the factor table.
      <br/>
      In this embodiment, a vertex data sequence, which is formed by arraying the vertexes of a single block in the adjoining order such that adjacent vertexes may be arrayed consecutively (i.e., in the order such that the vertexes can be traced with one stroke of a brush), is defined previously.
      <br/>
      Also, in the factor table 7, as the "start position," a pointer indicating a portion in the vertex data sequence, at which the vertexes to be used for the interpolating operation are arrayed consecutively, is recorded.
      <br/>
      The vertexes specified in the vertex data sequence may be represented by relative values for discriminating the vertexes of the block from one another.
      <br/>
      Therefore, in the example of Table 2, the vertexes are represented by the unit coordinates as (0, 0, 0), (1, 0, 0), and so on.
    </p>
    <p num="42">
      However, in the example described above, each of the color components (i.e., the R component, the G component, and the B component) takes values of 0 to 255.
      <br/>
      In cases where the blocks are formed at intervals of 8, the vertexes of the blocks take coordinate values of 0, 8, 16, . . . , 248, and 255.
      <br/>
      Therefore, in cases where the blocks are formed at intervals of 8, the last block has a size of 7.
      <br/>
      If the block having a size of 7 is processed as the block having a size of 8, errors will occur.
      <br/>
      As illustrated in FIG. 3, in the embodiment of the image transforming method in accordance with the present invention, in order for the errors to be eliminated, a virtual block having a size of 8 is formed with respect to the block having a size of 7, such that the sizes of all blocks may become identical with one another.
      <br/>
      The generation means 5 thereby generates the virtual transformed value table 6.
      <br/>
      The virtual transformed value table 6 records the information representing the transformed values, which are generated by the generation means 5.
      <br/>
      The virtual transformed value table 6 is stored in the storage means 14.
    </p>
    <p num="43">How the virtual transformed value table 6 is prepared and the contents recorded therein will be described hereinbelow.</p>
    <p num="44">
      In FIG. 3, the transformed values at the vertexes of the cube having a size of 8 * 8 * 8 may be determined to be R(0, 0, 0)G(0, 0, 0)B(0, 0, 0), R(0, 0, 8)G(0, 0, 8)B(0, 0, 8), . . . , R(8, 8, 8)G(8, 8, 8)B(8, 8, 8).
      <br/>
      In such cases, the R, G, and B values at an interpolation point having coordinates (r, g, b) are determined with Formulas (1), (2), and (3) shown below.  (Equation image '1' not included in text)
    </p>
    <p num="45">In the manner described above, a three-dimensional linear interpolating operation is employed as the technique for the color transformation.</p>
    <p num="46">In cases where the cube has a size of 7 * 7 * 7, transformed values at the vertexes of a cube having a size of 8 * 8 * 8 are calculated from the transformed values at the vertexes of the cube having a size of 7 * 7 * 7 by utilizing linear extrapolation shown below.</p>
    <p num="47">
      R(0, 0, 0)=R(0, 0, 0)  (4)
      <br/>
      R(0, 0, 8)=+-R(0, 0, 0)+8R(0, 0, 7)} / 7  (5)
      <br/>
      R(0, 8, 0)=+-R(0, 0, 0)+8R(0, 7, 0)} / 7  (6)
      <br/>
      R(8, 0, 0)=+-R(0, 0, 0)+8R(7, 0, 0)} / 7  (7)
    </p>
    <p num="48">(Equation image '2' not included in text)</p>
    <p num="49">(As for the G and B, calculations may be made in the same manner.)</p>
    <p num="50">When calculations are made with Formulas (1), (2), and (3) in accordance with the transformed values at the vertexes of the virtual cube having the size of 8 * 8 * 8, which have been calculated with Formulas (4) through (11) shown above, the results represented by Formulas (12), (13), and (14) shown below are obtained.  (Equation image '3' not included in text)</p>
    <p num="51">
      Formulas (12), (13), and (14) are the same as the 7 * 7 * 7 three-dimensional linear interpolating operations.
      <br/>
      Thus, in cases where the coordinates of the virtual vertexes are determined as with Formulas (4) through (11), accurate interpolating operations can be carried out with Formulas (1), (2), and (3).
      <br/>
      Therefore, transformation errors can be prevented from occurring.
    </p>
    <p num="52">
      Formulas (4) through (11) shown above are for the cases wherein the cube has a size of 7 * 7 * 7.
      <br/>
      It will often be necessary to consider vertexes of a rectangular parallelepiped having a size of, for example, 7 * 7 * 8 or 7 * 8 * 8.
      <br/>
      In such cases, extrapolating operations may be carried out in the same manner, and transformed values at the vertexes of the virtual cube having a size of 8 * 8 * 8 can thereby be obtained.
    </p>
    <p num="53">
      In the example described above, the virtual transformed value table with respect to the vertexes of the blocks taking coordinate values of 0, 8, 16, . . . , 248, and 256 is calculated from the transformed value table with respect to the vertexes of the blocks taking coordinate values of 0, 8, 16, . . . , 248, and 255.
      <br/>
      In cases where a virtual transformed value table with respect to the vertexes of the blocks taking coordinate values of 255, 247, . . . , 7, and -1 is to be calculated from a transformed value table with respect to the vertexes of the blocks taking coordinate values of 255, 247, . . . , 7, and 0, calculations may be made in the same manner as that described above.
    </p>
    <p num="54">
      In the example described above, the region, for which the extrapolating operation is necessary in the transformation from the transformed value table 4 into the virtual transformed value table 6 that is generated by the generation means 5, is the region hatched in FIG. 4.
      <br/>
      The 7 * 7 * 7-to-8 * 8 * 8 three-dimensional extrapolation is not necessary for all blocks.
      <br/>
      Specifically, extrapolating operations shown below are necessary.
    </p>
    <p num="55">7 * 7 * 7-to-8 * 8 * 8:</p>
    <p num="56">
      - three-dimensional extrapolation . . . 1 block
      <br/>
      7 * 7 * 8-to-8 * 8 * 8:
      <br/>
      - two-dimensional extrapolation . . . 93 blocks
      <br/>
      7 * 8 * 8-to-8 * 8 * 8:
      <br/>
      - one-dimensional extrapolation . . . 2,883 blocks
    </p>
    <p num="57">
      The calculation of the virtual transformed value table made by the generation means 5 may be carried out only one time.
      <br/>
      Therefore, the time required for the calculation can be kept short.
    </p>
    <p num="58">
      The virtual transformed value table 6, which is generated by the generation means 5, is used in cases where the blockhaving a size different from the predetermined size is contained in the plurality of the blocks, into which the color space has been divided in units of a block having the predetermined size.
      <br/>
      In cases where the block having a size different from the predetermined size is not contained in the plurality of the blocks, the virtual transformed value table 6 need not be generated.
    </p>
    <p num="59">
      The transformed value table 4, the virtual transformed value table 6, and the factor table 7 are prepared in the manner described above.
      <br/>
      How the processing for replacing the picture element value by making reference to the transformed value table 4, the virtual transformed value table 6, and the factor table 7 (i.e., the processing with the interpolating operation means 8) is carried out will be described hereinbelow.
    </p>
    <p num="60">
      When the image signal representing the color image 9 is inputted into the image input section 12, the interpolating operation means 8 carries out the processing described below with respect to the picture element value of each picture element in the color image 9.
      <br/>
      Firstly, the block No. of the block, to which the picture element value belongs in the color space 1 having been divided into the plurality of blocks in units of a block having the predetermined block size, is detected by the transformation means 3.
      <br/>
      The data of the block having the detected block No. is then retrieved from the transformed value table 4, and the information representing the transformed values of the vertexes of the block (i.e., the vertexes surrounding the inputted picture element value) is read and stored in the storage means 14.
    </p>
    <p num="61">
      Also, in cases where the block having the detected block No. is the one having a size different from the predetermined block size, in the generation means 5, the block having the different size is replaced by the virtual block, which has a size identical with the predetermined size, and the transformed values of the coordinates of the vertexes of the virtual block are calculated.
      <br/>
      The information representing the transformed values having been calculated for the virtual block is recorded in the virtual transformed value table 6.
      <br/>
      Thereafter, the data of the block is retrieved from the virtual transformed value table 6, and the information representing the transformed values of the vertexes of the block (i.e., the vertexes surrounding the inputted picture element value) is read.
    </p>
    <p num="62">
      Thereafter, the position of the picture element value in the block is calculated, and the data of the calculated position is retrieved from the factor table 7, which has been stored previously in the storage means 14.
      <br/>
      The number of the vertexes, the start position, and the weight factors are thus read.
      <br/>
      Also, the transformed value corresponding to the coordinates of the vertex, which is indicated by the start position in the vertex data sequence, (i.e., the transformed value having been read from the transformed value table 4 or the virtual transformed value table 6) and the weight factor of the vertex (the weight factor having been read from the factor table 7) are multiplied by each other.
      <br/>
      In cases where the number of the vertexes is two or larger, the transformed value corresponding to the coordinates of the vertex, which is next to the start position in the vertex data sequence, and the weight factor of the vertex are multiplied by each other, and the same number of times of operations as the number of the vertexes are carried out.
      <br/>
      Thereafter, all of the results of the multiplications are integrated, and an interpolated picture element value is thereby obtained.
      <br/>
      Finally, the picture element value of the color image 9 is replaced by the thus obtained picture element value.
      <br/>
      The processing is carried out for each of the picture elements constituting the color image 9, and a transformed image of the color image 9 is outputted by the transformed image output section 16.
      <br/>
      The transformed image 10 is thereby obtained.
    </p>
    <p num="63">
      With the embodiment described above, the image transformation can be carried out with a processing time as short as approximately one-third of the processing time with the conventional direct mapping technique.
      <br/>
      Thus the embodiment described above has large practical effects.
    </p>
    <p num="64">
      In the embodiment described above, the color space is divided into cubic blocks.
      <br/>
      Alternatively, the color space may be divided into triangular prism-shaped blocks, triangular pyramid-shaped blocks, or the like.
    </p>
    <p num="65">
      The procedure for the aforesaid image transformation employed in the embodiment described above may be recorded on a recording medium, such as a floppy disk or a hard disk, as a program for causing a computer to execute the procedure.
      <br/>
      The procedure may thereby be read by a computer, and the image transformation may thus be carried out by the computer.
    </p>
  </description>
  <claims format="original" lang="en" id="claim_en">
    <claim num="1">
      <claim-text>What is claimed is:</claim-text>
      <claim-text>1.</claim-text>
      <claim-text>An image transforming method, in which a first picture element value of each of picture elements constituting a color image is replaced by a second picture element value that is set to have correspondence to the first picture element value by a predetermined transformation formula, the method comprising:</claim-text>
      <claim-text>dividing a multi-dimensional color space into a plurality of blocks in units of a block having a predetermined size, carrying out an operation with the transformation formula with respect to coordinates of each of vertexes of each block, transformed values of the coordinates of vertexes of each block being thereby calculated previously, and carrying out an interpolating operation with respect to the first picture element value and in accordance with weight factors of the vertexes, which weight factors are determined in accordance with a position of the first picture element value in a block, and the transformed values of the coordinates of the vertexes of the block, which contains the first picture element value, the second picture element value being thereby calculated, wherein the improvement comprises the steps of:</claim-text>
      <claim-text>- i) in cases where a block having a size different from the predetermined size is contained in the plurality of the blocks, replacing said block having the different size by a virtual block, which has a size identical with the predetermined size, transformed values of coordinates of vertexes of said virtual block being then calculated from the transformed values of the coordinates of the vertexes of said block having the different size, - ii) previously storing information, which represents a transformed value table, and information, which represents a factor table, in a memory, said transformed value table recording the transformed values of the coordinates of the vertexes with respect to each of the blocks, including said virtual block, said factor table recording vertexes, which have weight factors other than 0, and the weight factors of the vertexes, which have weight factors other than 0, with respect to each of positions in a block, and - iii) carrying out the interpolating operation by utilizing only the vertexes, which have weight factors other than 0, and in accordance with the transformed values, which have been recorded in said transformed value table, and the vertexes and their weight factors, which have been recorded in said factor table.</claim-text>
    </claim>
    <claim num="2">
      <claim-text>2. A method as defined in claim 1 wherein a vertex data sequence, which is formed by arraying the vertexes of a single block in the adjoining order, is stored in said memory, and each of the vertexes, which have weight factors other than 0, is represented by the number of said vertexes and a pointer indicating a portion in said vertex data sequence, at which said vertexes are arrayed consecutively.</claim-text>
    </claim>
    <claim num="3">
      <claim-text>3. An image transforming apparatus, in which a first picture element value of each of picture elements constituting a color image is replaced by a second picture element value that is set to have correspondence to the first picture element value by a predetermined transformation formula, the apparatus comprising: a transformation means for obtaining information representing coordinates of vertexes of a plurality of blocks, into which a multi-dimensional color space has been divided in units of a block having a predetermined size, carrying out an operation with the transformation formula with respect to the coordinates of each of the vertexes of each block, and thereby calculating transformed values of the coordinates of vertexes of each block, a storage means for storing information representing the transformed values having been calculated by the transformation means, and an interpolating operation means for carrying out an interpolating operation with respect to the first picture element value and in accordance with weight factors of the vertexes, which weight factors are determined in accordance with a position of the first picture element value in a block, and the transformed values of the coordinates of the vertexes of the block, which contains the first picture element value, and thereby calculating the second picture element value, wherein the apparatus further comprises a generation means operating such that, in cases where a block having a size different from the predetermined size is contained in the plurality of the blocks, said generation means may replace said block having the different size by a virtual block, which has a size identical with the predetermined size, and said generation means may then generate transformed values of coordinates of vertexes of said virtual block from the transformed values of the coordinates of the vertexes of said block having the different size, the storage means stores information, which represents a transformed value table, and information, which represents a factor table, said transformed value table recording the transformed values of the coordinates of the vertexes with respect to each of the blocks, including said virtual block, said factor table recording vertexes, which have weight factors other than 0, and the weight factors of the vertexes, which have weight factors other than 0, with respect to each of positions in a block, and the interpolating operation means carries out the interpolating operation by utilizing only the vertexes, which have weight factors other than 0, and in accordance with the transformed values, which have been recorded in said transformed value table stored in the storage means, and the vertexes and their weight factors, which have been recorded in said factor table stored in the storage means.</claim-text>
    </claim>
    <claim num="4">
      <claim-text>4. An apparatus as defined in claim 3 wherein the storage means further stores information representing a vertex data sequence, which is formed by arraying the vertexes of a single block in the adjoining order, and stores the information representing each of the vertexes, which have weight factors other than 0, as a combination of the number of said vertexes and a pointer indicating a portion in said vertex data sequence, at which said vertexes are arrayed consecutively.</claim-text>
    </claim>
    <claim num="5">
      <claim-text>5. A recording medium, on which a program for causing a computer to execute image transformation processing has been recorded, the image transformation processing being carried out for replacing a first picture element value of each of picture elements, which constitute a color image, by a second picture element value that is set to have correspondence to the first picture element value by a predetermined transformation formula, the image transformation processing comprising: a first step for dividing a multi-dimensional color space into a plurality of blocks in units of a block having a predetermined size, carrying out an operation with the transformation formula with respect to coordinates of each of vertexes of each block, and thereby calculating transformed values of the coordinates of vertexes of each block, and a second step for carrying out an interpolating operation with respect to the first picture element value and in accordance with weight factors of the vertexes, which weight factors are determined in accordance with a position of the first picture element value in a block, and the transformed values of the coordinates of the vertexes of the block, which contains the first picture element value, and thereby calculating the second picture element value, the first picture element value being replaced by the second picture element value, image transformation being thereby carried out, wherein the improvement comprises: - i) in the first step, in cases where a block having a size different from the predetermined size is contained in the plurality of the blocks, replacing said block having the different size by a virtual block, which has a size identical with the predetermined size, transformed values of coordinates of vertexes of said virtual block being then calculated from the transformed values of the coordinates of the vertexes of said block having the different size, - ii) previously storing information, which represents a transformed value table, and information, which represents a factor table, in a memory, said transformed value table recording the transformed values of the coordinates of the vertexes with respect to each of the blocks, including said virtual block, said factor table recording vertexes, which have weight factors other than 0, and the weight factors of the vertexes, which have weight factors other than 0, with respect to each of positions in a block, and - iii) in the second step, carrying out the interpolating operation by utilizing only the vertexes, which have weight factors other than 0, and in accordance with the transformed values, which have been recorded in said transformed value table, and the vertexes and their weight factors, which have been recorded in said factor table.</claim-text>
    </claim>
    <claim num="6">
      <claim-text>6. A recording medium as defined in claim 5 wherein a vertex data sequence, which is formed by arraying the vertexes of a single block in the adjoining order, is stored in said memory, and each of the vertexes, which have weight factors other than 0, is represented by the number of said vertexes and a pointer indicating a portion in said vertex data sequence, at which said vertexes are arrayed consecutively.</claim-text>
    </claim>
  </claims>
</questel-patent-document>